var PB=Object.defineProperty;var PS=t=>{throw TypeError(t)};var TB=(t,e,r)=>e in t?PB(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Je=(t,e,r)=>TB(t,typeof e!="symbol"?e+"":e,r),Bv=(t,e,r)=>e.has(t)||PS("Cannot "+r);var ae=(t,e,r)=>(Bv(t,e,"read from private field"),r?r.call(t):e.get(t)),gt=(t,e,r)=>e.has(t)?PS("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),Ye=(t,e,r,n)=>(Bv(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),Jr=(t,e,r)=>(Bv(t,e,"access private method"),r);var Tf=(t,e,r,n)=>({set _(s){Ye(t,e,s,r)},get _(){return ae(t,e,n)}});import{r as p,a as No,R as xe,v as Ck,b as lw,u as Bl,c as cr,L as yt,N as nb,d as io,O as kk,e as Ik,g as _o,f as CB,h as yg,B as kB,i as IB,j as ft}from"./react-vendor-BYcx-2LX.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var Rk={exports:{}},vg={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RB=p,OB=Symbol.for("react.element"),DB=Symbol.for("react.fragment"),MB=Object.prototype.hasOwnProperty,LB=RB.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,FB={key:!0,ref:!0,__self:!0,__source:!0};function Ok(t,e,r){var n,s={},i=null,o=null;r!==void 0&&(i=""+r),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)MB.call(e,n)&&!FB.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:OB,type:t,key:i,ref:o,props:s,_owner:LB.current}}vg.Fragment=DB;vg.jsx=Ok;vg.jsxs=Ok;Rk.exports=vg;var a=Rk.exports;if(typeof window<"u"&&window.trustedTypes)try{window.trustedTypes.createPolicy("default",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t}),console.log("✅ Trusted Types policy created")}catch{console.log("ℹ️ Trusted Types policy already exists or not needed")}var Dk,TS=No;Dk=TS.createRoot,TS.hydrateRoot;const $B=1,UB=1e6;let Vv=0;function BB(){return Vv=(Vv+1)%Number.MAX_SAFE_INTEGER,Vv.toString()}const zv=new Map,CS=t=>{if(zv.has(t))return;const e=setTimeout(()=>{zv.delete(t),jd({type:"REMOVE_TOAST",toastId:t})},UB);zv.set(t,e)},VB=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,$B)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(r=>r.id===e.toast.id?{...r,...e.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=e;return r?CS(r):t.toasts.forEach(n=>{CS(n.id)}),{...t,toasts:t.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(r=>r.id!==e.toastId)}}},vm=[];let xm={toasts:[]};function jd(t){xm=VB(xm,t),vm.forEach(e=>{e(xm)})}function be({...t}){const e=BB(),r=s=>jd({type:"UPDATE_TOAST",toast:{...s,id:e}}),n=()=>jd({type:"DISMISS_TOAST",toastId:e});return jd({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||n()}}}),{id:e,dismiss:n,update:r}}function Rn(){const[t,e]=p.useState(xm);return p.useEffect(()=>(vm.push(e),()=>{const r=vm.indexOf(e);r>-1&&vm.splice(r,1)}),[t]),{...t,toast:be,dismiss:r=>jd({type:"DISMISS_TOAST",toastId:r})}}function ve(t,e,{checkForDefaultPrevented:r=!0}={}){return function(s){if(t==null||t(s),r===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function kS(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function xg(...t){return e=>{let r=!1;const n=t.map(s=>{const i=kS(s,e);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let s=0;s<n.length;s++){const i=n[s];typeof i=="function"?i():kS(t[s],null)}}}}function We(...t){return p.useCallback(xg(...t),t)}function zB(t,e){const r=p.createContext(e),n=i=>{const{children:o,...l}=i,c=p.useMemo(()=>l,Object.values(l));return a.jsx(r.Provider,{value:c,children:o})};n.displayName=t+"Provider";function s(i){const o=p.useContext(r);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[n,s]}function Dr(t,e=[]){let r=[];function n(i,o){const l=p.createContext(o),c=r.length;r=[...r,o];const u=h=>{var b;const{scope:f,children:m,...v}=h,y=((b=f==null?void 0:f[t])==null?void 0:b[c])||l,x=p.useMemo(()=>v,Object.values(v));return a.jsx(y.Provider,{value:x,children:m})};u.displayName=i+"Provider";function d(h,f){var y;const m=((y=f==null?void 0:f[t])==null?void 0:y[c])||l,v=p.useContext(m);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[u,d]}const s=()=>{const i=r.map(o=>p.createContext(o));return function(l){const c=(l==null?void 0:l[t])||i;return p.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[n,GB(s,...e)]}function GB(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=n.reduce((l,{useScope:c,scopeName:u})=>{const h=c(i)[`__scope${u}`];return{...l,...h}},{});return p.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return r.scopeName=e.scopeName,r}function oo(t){const e=qB(t),r=p.forwardRef((n,s)=>{const{children:i,...o}=n,l=p.Children.toArray(i),c=l.find(HB);if(c){const u=c.props.children,d=l.map(h=>h===c?p.Children.count(u)>1?p.Children.only(null):p.isValidElement(u)?u.props.children:null:h);return a.jsx(e,{...o,ref:s,children:p.isValidElement(u)?p.cloneElement(u,void 0,d):null})}return a.jsx(e,{...o,ref:s,children:i})});return r.displayName=`${t}.Slot`,r}var WB=oo("Slot");function qB(t){const e=p.forwardRef((r,n)=>{const{children:s,...i}=r;if(p.isValidElement(s)){const o=YB(s),l=KB(i,s.props);return s.type!==p.Fragment&&(l.ref=n?xg(n,o):o),p.cloneElement(s,l)}return p.Children.count(s)>1?p.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var Mk=Symbol("radix.slottable");function Lk(t){const e=({children:r})=>a.jsx(a.Fragment,{children:r});return e.displayName=`${t}.Slottable`,e.__radixId=Mk,e}function HB(t){return p.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Mk}function KB(t,e){const r={...e};for(const n in e){const s=t[n],i=e[n];/^on[A-Z]/.test(n)?s&&i?r[n]=(...l)=>{const c=i(...l);return s(...l),c}:s&&(r[n]=s):n==="style"?r[n]={...s,...i}:n==="className"&&(r[n]=[s,i].filter(Boolean).join(" "))}return{...t,...r}}function YB(t){var n,s;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}function bg(t){const e=t+"CollectionProvider",[r,n]=Dr(e),[s,i]=r(e,{collectionRef:{current:null},itemMap:new Map}),o=y=>{const{scope:x,children:b}=y,w=xe.useRef(null),j=xe.useRef(new Map).current;return a.jsx(s,{scope:x,itemMap:j,collectionRef:w,children:b})};o.displayName=e;const l=t+"CollectionSlot",c=oo(l),u=xe.forwardRef((y,x)=>{const{scope:b,children:w}=y,j=i(l,b),E=We(x,j.collectionRef);return a.jsx(c,{ref:E,children:w})});u.displayName=l;const d=t+"CollectionItemSlot",h="data-radix-collection-item",f=oo(d),m=xe.forwardRef((y,x)=>{const{scope:b,children:w,...j}=y,E=xe.useRef(null),I=We(x,E),O=i(d,b);return xe.useEffect(()=>(O.itemMap.set(E,{ref:E,...j}),()=>void O.itemMap.delete(E))),a.jsx(f,{[h]:"",ref:I,children:w})});m.displayName=d;function v(y){const x=i(t+"CollectionConsumer",y);return xe.useCallback(()=>{const w=x.collectionRef.current;if(!w)return[];const j=Array.from(w.querySelectorAll(`[${h}]`));return Array.from(x.itemMap.values()).sort((O,T)=>j.indexOf(O.ref.current)-j.indexOf(T.ref.current))},[x.collectionRef,x.itemMap])}return[{Provider:o,Slot:u,ItemSlot:m},v,n]}var QB=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Re=QB.reduce((t,e)=>{const r=oo(`Primitive.${e}`),n=p.forwardRef((s,i)=>{const{asChild:o,...l}=s,c=o?r:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(c,{...l,ref:i})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function cw(t,e){t&&No.flushSync(()=>t.dispatchEvent(e))}function ar(t){const e=p.useRef(t);return p.useEffect(()=>{e.current=t}),p.useMemo(()=>(...r)=>{var n;return(n=e.current)==null?void 0:n.call(e,...r)},[])}function XB(t,e=globalThis==null?void 0:globalThis.document){const r=ar(t);p.useEffect(()=>{const n=s=>{s.key==="Escape"&&r(s)};return e.addEventListener("keydown",n,{capture:!0}),()=>e.removeEventListener("keydown",n,{capture:!0})},[r,e])}var JB="DismissableLayer",sb="dismissableLayer.update",ZB="dismissableLayer.pointerDownOutside",eV="dismissableLayer.focusOutside",IS,Fk=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Vl=p.forwardRef((t,e)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=t,u=p.useContext(Fk),[d,h]=p.useState(null),f=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=p.useState({}),v=We(e,T=>h(T)),y=Array.from(u.layers),[x]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),b=y.indexOf(x),w=d?y.indexOf(d):-1,j=u.layersWithOutsidePointerEventsDisabled.size>0,E=w>=b,I=rV(T=>{const A=T.target,S=[...u.branches].some(_=>_.contains(A));!E||S||(s==null||s(T),o==null||o(T),T.defaultPrevented||l==null||l())},f),O=nV(T=>{const A=T.target;[...u.branches].some(_=>_.contains(A))||(i==null||i(T),o==null||o(T),T.defaultPrevented||l==null||l())},f);return XB(T=>{w===u.layers.size-1&&(n==null||n(T),!T.defaultPrevented&&l&&(T.preventDefault(),l()))},f),p.useEffect(()=>{if(d)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(IS=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),RS(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=IS)}},[d,f,r,u]),p.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),RS())},[d,u]),p.useEffect(()=>{const T=()=>m({});return document.addEventListener(sb,T),()=>document.removeEventListener(sb,T)},[]),a.jsx(Re.div,{...c,ref:v,style:{pointerEvents:j?E?"auto":"none":void 0,...t.style},onFocusCapture:ve(t.onFocusCapture,O.onFocusCapture),onBlurCapture:ve(t.onBlurCapture,O.onBlurCapture),onPointerDownCapture:ve(t.onPointerDownCapture,I.onPointerDownCapture)})});Vl.displayName=JB;var tV="DismissableLayerBranch",$k=p.forwardRef((t,e)=>{const r=p.useContext(Fk),n=p.useRef(null),s=We(e,n);return p.useEffect(()=>{const i=n.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),a.jsx(Re.div,{...t,ref:s})});$k.displayName=tV;function rV(t,e=globalThis==null?void 0:globalThis.document){const r=ar(t),n=p.useRef(!1),s=p.useRef(()=>{});return p.useEffect(()=>{const i=l=>{if(l.target&&!n.current){let c=function(){Uk(ZB,r,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);n.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,r]),{onPointerDownCapture:()=>n.current=!0}}function nV(t,e=globalThis==null?void 0:globalThis.document){const r=ar(t),n=p.useRef(!1);return p.useEffect(()=>{const s=i=>{i.target&&!n.current&&Uk(eV,r,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function RS(){const t=new CustomEvent(sb);document.dispatchEvent(t)}function Uk(t,e,r,{discrete:n}){const s=r.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:r});e&&s.addEventListener(t,e,{once:!0}),n?cw(s,i):s.dispatchEvent(i)}var sV=Vl,aV=$k,pr=globalThis!=null&&globalThis.document?p.useLayoutEffect:()=>{},iV="Portal",du=p.forwardRef((t,e)=>{var l;const{container:r,...n}=t,[s,i]=p.useState(!1);pr(()=>i(!0),[]);const o=r||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?Ck.createPortal(a.jsx(Re.div,{...n,ref:e}),o):null});du.displayName=iV;function oV(t,e){return p.useReducer((r,n)=>e[r][n]??r,t)}var Mr=t=>{const{present:e,children:r}=t,n=lV(e),s=typeof r=="function"?r({present:n.isPresent}):p.Children.only(r),i=We(n.ref,cV(s));return typeof r=="function"||n.isPresent?p.cloneElement(s,{ref:i}):null};Mr.displayName="Presence";function lV(t){const[e,r]=p.useState(),n=p.useRef(null),s=p.useRef(t),i=p.useRef("none"),o=t?"mounted":"unmounted",[l,c]=oV(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const u=Cf(n.current);i.current=l==="mounted"?u:"none"},[l]),pr(()=>{const u=n.current,d=s.current;if(d!==t){const f=i.current,m=Cf(u);t?c("MOUNT"):m==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&f!==m?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,c]),pr(()=>{if(e){let u;const d=e.ownerDocument.defaultView??window,h=m=>{const y=Cf(n.current).includes(m.animationName);if(m.target===e&&y&&(c("ANIMATION_END"),!s.current)){const x=e.style.animationFillMode;e.style.animationFillMode="forwards",u=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=x)})}},f=m=>{m.target===e&&(i.current=Cf(n.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{d.clearTimeout(u),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:p.useCallback(u=>{n.current=u?getComputedStyle(u):null,r(u)},[])}}function Cf(t){return(t==null?void 0:t.animationName)||"none"}function cV(t){var n,s;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var uV=lw[" useInsertionEffect ".trim().toString()]||pr;function Bs({prop:t,defaultProp:e,onChange:r=()=>{},caller:n}){const[s,i,o]=dV({defaultProp:e,onChange:r}),l=t!==void 0,c=l?t:s;{const d=p.useRef(t!==void 0);p.useEffect(()=>{const h=d.current;h!==l&&console.warn(`${n} is changing from ${h?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=l},[l,n])}const u=p.useCallback(d=>{var h;if(l){const f=hV(d)?d(t):d;f!==t&&((h=o.current)==null||h.call(o,f))}else i(d)},[l,t,i,o]);return[c,u]}function dV({defaultProp:t,onChange:e}){const[r,n]=p.useState(t),s=p.useRef(r),i=p.useRef(e);return uV(()=>{i.current=e},[e]),p.useEffect(()=>{var o;s.current!==r&&((o=i.current)==null||o.call(i,r),s.current=r)},[r,s]),[r,n,i]}function hV(t){return typeof t=="function"}var Bk=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),fV="VisuallyHidden",wg=p.forwardRef((t,e)=>a.jsx(Re.span,{...t,ref:e,style:{...Bk,...t.style}}));wg.displayName=fV;var mV=wg,uw="ToastProvider",[dw,pV,gV]=bg("Toast"),[Vk,LNe]=Dr("Toast",[gV]),[yV,jg]=Vk(uw),zk=t=>{const{__scopeToast:e,label:r="Notification",duration:n=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=t,[l,c]=p.useState(null),[u,d]=p.useState(0),h=p.useRef(!1),f=p.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${uw}\`. Expected non-empty \`string\`.`),a.jsx(dw.Provider,{scope:e,children:a.jsx(yV,{scope:e,label:r,duration:n,swipeDirection:s,swipeThreshold:i,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:p.useCallback(()=>d(m=>m+1),[]),onToastRemove:p.useCallback(()=>d(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:f,children:o})})};zk.displayName=uw;var Gk="ToastViewport",vV=["F8"],ab="toast.viewportPause",ib="toast.viewportResume",Wk=p.forwardRef((t,e)=>{const{__scopeToast:r,hotkey:n=vV,label:s="Notifications ({hotkey})",...i}=t,o=jg(Gk,r),l=pV(r),c=p.useRef(null),u=p.useRef(null),d=p.useRef(null),h=p.useRef(null),f=We(e,h,o.onViewportChange),m=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),v=o.toastCount>0;p.useEffect(()=>{const x=b=>{var j;n.length!==0&&n.every(E=>b[E]||b.code===E)&&((j=h.current)==null||j.focus())};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[n]),p.useEffect(()=>{const x=c.current,b=h.current;if(v&&x&&b){const w=()=>{if(!o.isClosePausedRef.current){const O=new CustomEvent(ab);b.dispatchEvent(O),o.isClosePausedRef.current=!0}},j=()=>{if(o.isClosePausedRef.current){const O=new CustomEvent(ib);b.dispatchEvent(O),o.isClosePausedRef.current=!1}},E=O=>{!x.contains(O.relatedTarget)&&j()},I=()=>{x.contains(document.activeElement)||j()};return x.addEventListener("focusin",w),x.addEventListener("focusout",E),x.addEventListener("pointermove",w),x.addEventListener("pointerleave",I),window.addEventListener("blur",w),window.addEventListener("focus",j),()=>{x.removeEventListener("focusin",w),x.removeEventListener("focusout",E),x.removeEventListener("pointermove",w),x.removeEventListener("pointerleave",I),window.removeEventListener("blur",w),window.removeEventListener("focus",j)}}},[v,o.isClosePausedRef]);const y=p.useCallback(({tabbingDirection:x})=>{const w=l().map(j=>{const E=j.ref.current,I=[E,...kV(E)];return x==="forwards"?I:I.reverse()});return(x==="forwards"?w.reverse():w).flat()},[l]);return p.useEffect(()=>{const x=h.current;if(x){const b=w=>{var I,O,T;const j=w.altKey||w.ctrlKey||w.metaKey;if(w.key==="Tab"&&!j){const A=document.activeElement,S=w.shiftKey;if(w.target===x&&S){(I=u.current)==null||I.focus();return}const R=y({tabbingDirection:S?"backwards":"forwards"}),C=R.findIndex(B=>B===A);Gv(R.slice(C+1))?w.preventDefault():S?(O=u.current)==null||O.focus():(T=d.current)==null||T.focus()}};return x.addEventListener("keydown",b),()=>x.removeEventListener("keydown",b)}},[l,y]),a.jsxs(aV,{ref:c,role:"region","aria-label":s.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:v?void 0:"none"},children:[v&&a.jsx(ob,{ref:u,onFocusFromOutsideViewport:()=>{const x=y({tabbingDirection:"forwards"});Gv(x)}}),a.jsx(dw.Slot,{scope:r,children:a.jsx(Re.ol,{tabIndex:-1,...i,ref:f})}),v&&a.jsx(ob,{ref:d,onFocusFromOutsideViewport:()=>{const x=y({tabbingDirection:"backwards"});Gv(x)}})]})});Wk.displayName=Gk;var qk="ToastFocusProxy",ob=p.forwardRef((t,e)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...s}=t,i=jg(qk,r);return a.jsx(wg,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var u;const l=o.relatedTarget;!((u=i.viewport)!=null&&u.contains(l))&&n()}})});ob.displayName=qk;var hh="Toast",xV="toast.swipeStart",bV="toast.swipeMove",wV="toast.swipeCancel",jV="toast.swipeEnd",Hk=p.forwardRef((t,e)=>{const{forceMount:r,open:n,defaultOpen:s,onOpenChange:i,...o}=t,[l,c]=Bs({prop:n,defaultProp:s??!0,onChange:i,caller:hh});return a.jsx(Mr,{present:r||l,children:a.jsx(SV,{open:l,...o,ref:e,onClose:()=>c(!1),onPause:ar(t.onPause),onResume:ar(t.onResume),onSwipeStart:ve(t.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ve(t.onSwipeMove,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:ve(t.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ve(t.onSwipeEnd,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),c(!1)})})})});Hk.displayName=hh;var[NV,_V]=Vk(hh,{onClose(){}}),SV=p.forwardRef((t,e)=>{const{__scopeToast:r,type:n="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:f,onSwipeEnd:m,...v}=t,y=jg(hh,r),[x,b]=p.useState(null),w=We(e,B=>b(B)),j=p.useRef(null),E=p.useRef(null),I=s||y.duration,O=p.useRef(0),T=p.useRef(I),A=p.useRef(0),{onToastAdd:S,onToastRemove:_}=y,P=ar(()=>{var G;(x==null?void 0:x.contains(document.activeElement))&&((G=y.viewport)==null||G.focus()),o()}),R=p.useCallback(B=>{!B||B===1/0||(window.clearTimeout(A.current),O.current=new Date().getTime(),A.current=window.setTimeout(P,B))},[P]);p.useEffect(()=>{const B=y.viewport;if(B){const G=()=>{R(T.current),u==null||u()},U=()=>{const F=new Date().getTime()-O.current;T.current=T.current-F,window.clearTimeout(A.current),c==null||c()};return B.addEventListener(ab,U),B.addEventListener(ib,G),()=>{B.removeEventListener(ab,U),B.removeEventListener(ib,G)}}},[y.viewport,I,c,u,R]),p.useEffect(()=>{i&&!y.isClosePausedRef.current&&R(I)},[i,I,y.isClosePausedRef,R]),p.useEffect(()=>(S(),()=>_()),[S,_]);const C=p.useMemo(()=>x?eI(x):null,[x]);return y.viewport?a.jsxs(a.Fragment,{children:[C&&a.jsx(AV,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:C}),a.jsx(NV,{scope:r,onClose:P,children:No.createPortal(a.jsx(dw.ItemSlot,{scope:r,children:a.jsx(sV,{asChild:!0,onEscapeKeyDown:ve(l,()=>{y.isFocusedToastEscapeKeyDownRef.current||P(),y.isFocusedToastEscapeKeyDownRef.current=!1}),children:a.jsx(Re.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":y.swipeDirection,...v,ref:w,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:ve(t.onKeyDown,B=>{B.key==="Escape"&&(l==null||l(B.nativeEvent),B.nativeEvent.defaultPrevented||(y.isFocusedToastEscapeKeyDownRef.current=!0,P()))}),onPointerDown:ve(t.onPointerDown,B=>{B.button===0&&(j.current={x:B.clientX,y:B.clientY})}),onPointerMove:ve(t.onPointerMove,B=>{if(!j.current)return;const G=B.clientX-j.current.x,U=B.clientY-j.current.y,F=!!E.current,M=["left","right"].includes(y.swipeDirection),$=["left","up"].includes(y.swipeDirection)?Math.min:Math.max,ne=M?$(0,G):0,te=M?0:$(0,U),z=B.pointerType==="touch"?10:2,de={x:ne,y:te},Z={originalEvent:B,delta:de};F?(E.current=de,kf(bV,h,Z,{discrete:!1})):OS(de,y.swipeDirection,z)?(E.current=de,kf(xV,d,Z,{discrete:!1}),B.target.setPointerCapture(B.pointerId)):(Math.abs(G)>z||Math.abs(U)>z)&&(j.current=null)}),onPointerUp:ve(t.onPointerUp,B=>{const G=E.current,U=B.target;if(U.hasPointerCapture(B.pointerId)&&U.releasePointerCapture(B.pointerId),E.current=null,j.current=null,G){const F=B.currentTarget,M={originalEvent:B,delta:G};OS(G,y.swipeDirection,y.swipeThreshold)?kf(jV,m,M,{discrete:!0}):kf(wV,f,M,{discrete:!0}),F.addEventListener("click",$=>$.preventDefault(),{once:!0})}})})})}),y.viewport)})]}):null}),AV=t=>{const{__scopeToast:e,children:r,...n}=t,s=jg(hh,e),[i,o]=p.useState(!1),[l,c]=p.useState(!1);return TV(()=>o(!0)),p.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:a.jsx(du,{asChild:!0,children:a.jsx(wg,{...n,children:i&&a.jsxs(a.Fragment,{children:[s.label," ",r]})})})},EV="ToastTitle",Kk=p.forwardRef((t,e)=>{const{__scopeToast:r,...n}=t;return a.jsx(Re.div,{...n,ref:e})});Kk.displayName=EV;var PV="ToastDescription",Yk=p.forwardRef((t,e)=>{const{__scopeToast:r,...n}=t;return a.jsx(Re.div,{...n,ref:e})});Yk.displayName=PV;var Qk="ToastAction",Xk=p.forwardRef((t,e)=>{const{altText:r,...n}=t;return r.trim()?a.jsx(Zk,{altText:r,asChild:!0,children:a.jsx(hw,{...n,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${Qk}\`. Expected non-empty \`string\`.`),null)});Xk.displayName=Qk;var Jk="ToastClose",hw=p.forwardRef((t,e)=>{const{__scopeToast:r,...n}=t,s=_V(Jk,r);return a.jsx(Zk,{asChild:!0,children:a.jsx(Re.button,{type:"button",...n,ref:e,onClick:ve(t.onClick,s.onClose)})})});hw.displayName=Jk;var Zk=p.forwardRef((t,e)=>{const{__scopeToast:r,altText:n,...s}=t;return a.jsx(Re.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...s,ref:e})});function eI(t){const e=[];return Array.from(t.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&e.push(n.textContent),CV(n)){const s=n.ariaHidden||n.hidden||n.style.display==="none",i=n.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const o=n.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...eI(n))}}),e}function kf(t,e,r,{discrete:n}){const s=r.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:r});e&&s.addEventListener(t,e,{once:!0}),n?cw(s,i):s.dispatchEvent(i)}var OS=(t,e,r=0)=>{const n=Math.abs(t.x),s=Math.abs(t.y),i=n>s;return e==="left"||e==="right"?i&&n>r:!i&&s>r};function TV(t=()=>{}){const e=ar(t);pr(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[e])}function CV(t){return t.nodeType===t.ELEMENT_NODE}function kV(t){const e=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)e.push(r.currentNode);return e}function Gv(t){const e=document.activeElement;return t.some(r=>r===e?!0:(r.focus(),document.activeElement!==e))}var IV=zk,tI=Wk,rI=Hk,nI=Kk,sI=Yk,aI=Xk,iI=hw;function oI(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(r=oI(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function lt(){for(var t,e,r=0,n="",s=arguments.length;r<s;r++)(t=arguments[r])&&(e=oI(t))&&(n&&(n+=" "),n+=e);return n}const DS=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,MS=lt,fh=(t,e)=>r=>{var n;if((e==null?void 0:e.variants)==null)return MS(t,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(u=>{const d=r==null?void 0:r[u],h=i==null?void 0:i[u];if(d===null)return null;const f=DS(d)||DS(h);return s[u][f]}),l=r&&Object.entries(r).reduce((u,d)=>{let[h,f]=d;return f===void 0||(u[h]=f),u},{}),c=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((u,d)=>{let{class:h,className:f,...m}=d;return Object.entries(m).every(v=>{let[y,x]=v;return Array.isArray(x)?x.includes({...i,...l}[y]):{...i,...l}[y]===x})?[...u,h,f]:u},[]);return MS(t,o,c,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RV=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),lI=(...t)=>t.filter((e,r,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===r).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var OV={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DV=p.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:i,iconNode:o,...l},c)=>p.createElement("svg",{ref:c,...OV,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:lI("lucide",s),...l},[...o.map(([u,d])=>p.createElement(u,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=(t,e)=>{const r=p.forwardRef(({className:n,...s},i)=>p.createElement(DV,{ref:i,iconNode:e,className:lI(`lucide-${RV(t)}`,n),...s}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lb=he("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bm=he("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dl=he("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wv=he("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cb=he("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Um=he("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ub=he("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MV=he("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LV=he("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ji=he("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kn=he("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LS=he("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ya=he("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FV=he("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zi=he("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cI=he("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $V=he("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bm=he("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UV=he("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uI=he("Chrome",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["line",{x1:"21.17",x2:"12",y1:"8",y2:"8",key:"a0cw5f"}],["line",{x1:"3.95",x2:"8.54",y1:"6.06",y2:"14",key:"1kftof"}],["line",{x1:"10.88",x2:"15.46",y1:"21.94",y2:"14",key:"1ymyh8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qr=he("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yt=he("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BV=he("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vm=he("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dI=he("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yn=he("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VV=he("Coffee",[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ng=he("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sr=he("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jo=he("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zV=he("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rd=he("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fw=he("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GV=he("Dumbbell",[["path",{d:"M14.4 14.4 9.6 9.6",key:"ic80wn"}],["path",{d:"M18.657 21.485a2 2 0 1 1-2.829-2.828l-1.767 1.768a2 2 0 1 1-2.829-2.829l6.364-6.364a2 2 0 1 1 2.829 2.829l-1.768 1.767a2 2 0 1 1 2.828 2.829z",key:"nnl7wr"}],["path",{d:"m21.5 21.5-1.4-1.4",key:"1f1ice"}],["path",{d:"M3.9 3.9 2.5 2.5",key:"1evmna"}],["path",{d:"M6.404 12.768a2 2 0 1 1-2.829-2.829l1.768-1.767a2 2 0 1 1-2.828-2.829l2.828-2.828a2 2 0 1 1 2.829 2.828l1.767-1.768a2 2 0 1 1 2.829 2.829z",key:"yhosts"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hI=he("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mw=he("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fI=he("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _g=he("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bl=he("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zm=he("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WV=he("Frown",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M16 16s-1.5-2-4-2-4 2-4 2",key:"epbg0q"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qV=he("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pw=he("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HV=he("Hammer",[["path",{d:"m15 12-8.373 8.373a1 1 0 1 1-3-3L12 9",key:"eefl8a"}],["path",{d:"m18 15 4-4",key:"16gjal"}],["path",{d:"m21.5 11.5-1.914-1.914A2 2 0 0 1 19 8.172V7l-2.26-2.26a6 6 0 0 0-4.202-1.756L9 2.96l.92.82A6.18 6.18 0 0 1 12 8.4V10l2 2h1.172a2 2 0 0 1 1.414.586L18.5 14.5",key:"b7pghm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FS=he("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KV=he("Headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $S=he("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YV=he("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QV=he("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eo=he("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XV=he("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JV=he("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gm=he("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ri=he("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gw=he("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ti=he("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wn=he("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZV=he("Meh",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"8",x2:"16",y1:"15",y2:"15",key:"1xb1d9"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wm=he("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e9=he("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mI=he("MessageSquarePlus",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}],["path",{d:"M12 7v6",key:"lw1j43"}],["path",{d:"M9 10h6",key:"9gxzsh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ri=he("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yw=he("MousePointer",[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t9=he("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r9=he("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n9=he("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mh=he("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s9=he("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lo=he("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const If=he("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const US=he("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a9=he("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ir=he("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i9=he("Reply",[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o9=he("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l9=he("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c9=he("Scissors",[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fs=he("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qm=he("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u9=he("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mc=he("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $s=he("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const co=he("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const db=he("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ms=he("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d9=he("Stethoscope",[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h9=he("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f9=he("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Js=he("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BS=he("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pI=he("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hm=he("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=he("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m9=he("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p9=he("Unlink",[["path",{d:"m18.84 12.25 1.72-1.71h-.02a5.004 5.004 0 0 0-.12-7.07 5.006 5.006 0 0 0-6.95 0l-1.72 1.71",key:"yqzxt4"}],["path",{d:"m5.17 11.75-1.71 1.71a5.004 5.004 0 0 0 .12 7.07 5.006 5.006 0 0 0 6.95 0l1.71-1.71",key:"4qinb0"}],["line",{x1:"8",x2:"8",y1:"2",y2:"5",key:"1041cp"}],["line",{x1:"2",x2:"5",y1:"8",y2:"8",key:"14m1p5"}],["line",{x1:"16",x2:"16",y1:"19",y2:"22",key:"rzdirn"}],["line",{x1:"19",x2:"22",y1:"16",y2:"16",key:"ox905f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wm=he("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Km=he("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=he("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g9=he("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hs=he("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sg=he("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),vw="-",y9=t=>{const e=x9(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=t;return{getClassGroupId:o=>{const l=o.split(vw);return l[0]===""&&l.length!==1&&l.shift(),gI(l,e)||v9(o)},getConflictingClassGroupIds:(o,l)=>{const c=r[o]||[];return l&&n[o]?[...c,...n[o]]:c}}},gI=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const r=t[0],n=e.nextPart.get(r),s=n?gI(t.slice(1),n):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(vw);return(o=e.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},VS=/^\[(.+)\]$/,v9=t=>{if(VS.test(t)){const e=VS.exec(t)[1],r=e==null?void 0:e.substring(0,e.indexOf(":"));if(r)return"arbitrary.."+r}},x9=t=>{const{theme:e,prefix:r}=t,n={nextPart:new Map,validators:[]};return w9(Object.entries(t.classGroups),r).forEach(([i,o])=>{hb(o,n,i,e)}),n},hb=(t,e,r,n)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:zS(e,s);i.classGroupId=r;return}if(typeof s=="function"){if(b9(s)){hb(s(n),e,r,n);return}e.validators.push({validator:s,classGroupId:r});return}Object.entries(s).forEach(([i,o])=>{hb(o,zS(e,i),r,n)})})},zS=(t,e)=>{let r=t;return e.split(vw).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},b9=t=>t.isThemeGetter,w9=(t,e)=>e?t.map(([r,n])=>{const s=n.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,l])=>[e+o,l])):i);return[r,s]}):t,j9=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,r=new Map,n=new Map;const s=(i,o)=>{r.set(i,o),e++,e>t&&(e=0,n=r,r=new Map)};return{get(i){let o=r.get(i);if(o!==void 0)return o;if((o=n.get(i))!==void 0)return s(i,o),o},set(i,o){r.has(i)?r.set(i,o):s(i,o)}}},yI="!",N9=t=>{const{separator:e,experimentalParseClassName:r}=t,n=e.length===1,s=e[0],i=e.length,o=l=>{const c=[];let u=0,d=0,h;for(let x=0;x<l.length;x++){let b=l[x];if(u===0){if(b===s&&(n||l.slice(x,x+i)===e)){c.push(l.slice(d,x)),d=x+i;continue}if(b==="/"){h=x;continue}}b==="["?u++:b==="]"&&u--}const f=c.length===0?l:l.substring(d),m=f.startsWith(yI),v=m?f.substring(1):f,y=h&&h>d?h-d:void 0;return{modifiers:c,hasImportantModifier:m,baseClassName:v,maybePostfixModifierPosition:y}};return r?l=>r({className:l,parseClassName:o}):o},_9=t=>{if(t.length<=1)return t;const e=[];let r=[];return t.forEach(n=>{n[0]==="["?(e.push(...r.sort(),n),r=[]):r.push(n)}),e.push(...r.sort()),e},S9=t=>({cache:j9(t.cacheSize),parseClassName:N9(t),...y9(t)}),A9=/\s+/,E9=(t,e)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:s}=e,i=[],o=t.trim().split(A9);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:d,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:m}=r(u);let v=!!m,y=n(v?f.substring(0,m):f);if(!y){if(!v){l=u+(l.length>0?" "+l:l);continue}if(y=n(f),!y){l=u+(l.length>0?" "+l:l);continue}v=!1}const x=_9(d).join(":"),b=h?x+yI:x,w=b+y;if(i.includes(w))continue;i.push(w);const j=s(y,v);for(let E=0;E<j.length;++E){const I=j[E];i.push(b+I)}l=u+(l.length>0?" "+l:l)}return l};function P9(){let t=0,e,r,n="";for(;t<arguments.length;)(e=arguments[t++])&&(r=vI(e))&&(n&&(n+=" "),n+=r);return n}const vI=t=>{if(typeof t=="string")return t;let e,r="";for(let n=0;n<t.length;n++)t[n]&&(e=vI(t[n]))&&(r&&(r+=" "),r+=e);return r};function T9(t,...e){let r,n,s,i=o;function o(c){const u=e.reduce((d,h)=>h(d),t());return r=S9(u),n=r.cache.get,s=r.cache.set,i=l,l(c)}function l(c){const u=n(c);if(u)return u;const d=E9(c,r);return s(c,d),d}return function(){return i(P9.apply(null,arguments))}}const Ft=t=>{const e=r=>r[t]||[];return e.isThemeGetter=!0,e},xI=/^\[(?:([a-z-]+):)?(.+)\]$/i,C9=/^\d+\/\d+$/,k9=new Set(["px","full","screen"]),I9=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,R9=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,O9=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,D9=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,M9=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ma=t=>pc(t)||k9.has(t)||C9.test(t),Ei=t=>hu(t,"length",G9),pc=t=>!!t&&!Number.isNaN(Number(t)),qv=t=>hu(t,"number",pc),Xu=t=>!!t&&Number.isInteger(Number(t)),L9=t=>t.endsWith("%")&&pc(t.slice(0,-1)),Xe=t=>xI.test(t),Pi=t=>I9.test(t),F9=new Set(["length","size","percentage"]),$9=t=>hu(t,F9,bI),U9=t=>hu(t,"position",bI),B9=new Set(["image","url"]),V9=t=>hu(t,B9,q9),z9=t=>hu(t,"",W9),Ju=()=>!0,hu=(t,e,r)=>{const n=xI.exec(t);return n?n[1]?typeof e=="string"?n[1]===e:e.has(n[1]):r(n[2]):!1},G9=t=>R9.test(t)&&!O9.test(t),bI=()=>!1,W9=t=>D9.test(t),q9=t=>M9.test(t),H9=()=>{const t=Ft("colors"),e=Ft("spacing"),r=Ft("blur"),n=Ft("brightness"),s=Ft("borderColor"),i=Ft("borderRadius"),o=Ft("borderSpacing"),l=Ft("borderWidth"),c=Ft("contrast"),u=Ft("grayscale"),d=Ft("hueRotate"),h=Ft("invert"),f=Ft("gap"),m=Ft("gradientColorStops"),v=Ft("gradientColorStopPositions"),y=Ft("inset"),x=Ft("margin"),b=Ft("opacity"),w=Ft("padding"),j=Ft("saturate"),E=Ft("scale"),I=Ft("sepia"),O=Ft("skew"),T=Ft("space"),A=Ft("translate"),S=()=>["auto","contain","none"],_=()=>["auto","hidden","clip","visible","scroll"],P=()=>["auto",Xe,e],R=()=>[Xe,e],C=()=>["",Ma,Ei],B=()=>["auto",pc,Xe],G=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],U=()=>["solid","dashed","dotted","double","none"],F=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],M=()=>["start","end","center","between","around","evenly","stretch"],$=()=>["","0",Xe],ne=()=>["auto","avoid","all","avoid-page","page","left","right","column"],te=()=>[pc,Xe];return{cacheSize:500,separator:":",theme:{colors:[Ju],spacing:[Ma,Ei],blur:["none","",Pi,Xe],brightness:te(),borderColor:[t],borderRadius:["none","","full",Pi,Xe],borderSpacing:R(),borderWidth:C(),contrast:te(),grayscale:$(),hueRotate:te(),invert:$(),gap:R(),gradientColorStops:[t],gradientColorStopPositions:[L9,Ei],inset:P(),margin:P(),opacity:te(),padding:R(),saturate:te(),scale:te(),sepia:$(),skew:te(),space:R(),translate:R()},classGroups:{aspect:[{aspect:["auto","square","video",Xe]}],container:["container"],columns:[{columns:[Pi]}],"break-after":[{"break-after":ne()}],"break-before":[{"break-before":ne()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...G(),Xe]}],overflow:[{overflow:_()}],"overflow-x":[{"overflow-x":_()}],"overflow-y":[{"overflow-y":_()}],overscroll:[{overscroll:S()}],"overscroll-x":[{"overscroll-x":S()}],"overscroll-y":[{"overscroll-y":S()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[y]}],"inset-x":[{"inset-x":[y]}],"inset-y":[{"inset-y":[y]}],start:[{start:[y]}],end:[{end:[y]}],top:[{top:[y]}],right:[{right:[y]}],bottom:[{bottom:[y]}],left:[{left:[y]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Xu,Xe]}],basis:[{basis:P()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Xe]}],grow:[{grow:$()}],shrink:[{shrink:$()}],order:[{order:["first","last","none",Xu,Xe]}],"grid-cols":[{"grid-cols":[Ju]}],"col-start-end":[{col:["auto",{span:["full",Xu,Xe]},Xe]}],"col-start":[{"col-start":B()}],"col-end":[{"col-end":B()}],"grid-rows":[{"grid-rows":[Ju]}],"row-start-end":[{row:["auto",{span:[Xu,Xe]},Xe]}],"row-start":[{"row-start":B()}],"row-end":[{"row-end":B()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Xe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Xe]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...M()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...M(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...M(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[T]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[T]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Xe,e]}],"min-w":[{"min-w":[Xe,e,"min","max","fit"]}],"max-w":[{"max-w":[Xe,e,"none","full","min","max","fit","prose",{screen:[Pi]},Pi]}],h:[{h:[Xe,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Xe,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Xe,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Xe,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Pi,Ei]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",qv]}],"font-family":[{font:[Ju]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Xe]}],"line-clamp":[{"line-clamp":["none",pc,qv]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ma,Xe]}],"list-image":[{"list-image":["none",Xe]}],"list-style-type":[{list:["none","disc","decimal",Xe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[b]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[b]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...U(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ma,Ei]}],"underline-offset":[{"underline-offset":["auto",Ma,Xe]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:R()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Xe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Xe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[b]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...G(),U9]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",$9]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},V9]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[v]}],"gradient-via-pos":[{via:[v]}],"gradient-to-pos":[{to:[v]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[b]}],"border-style":[{border:[...U(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[b]}],"divide-style":[{divide:U()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...U()]}],"outline-offset":[{"outline-offset":[Ma,Xe]}],"outline-w":[{outline:[Ma,Ei]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:C()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[b]}],"ring-offset-w":[{"ring-offset":[Ma,Ei]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Pi,z9]}],"shadow-color":[{shadow:[Ju]}],opacity:[{opacity:[b]}],"mix-blend":[{"mix-blend":[...F(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":F()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Pi,Xe]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[j]}],sepia:[{sepia:[I]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[b]}],"backdrop-saturate":[{"backdrop-saturate":[j]}],"backdrop-sepia":[{"backdrop-sepia":[I]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Xe]}],duration:[{duration:te()}],ease:[{ease:["linear","in","out","in-out",Xe]}],delay:[{delay:te()}],animate:[{animate:["none","spin","ping","pulse","bounce",Xe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[E]}],"scale-x":[{"scale-x":[E]}],"scale-y":[{"scale-y":[E]}],rotate:[{rotate:[Xu,Xe]}],"translate-x":[{"translate-x":[A]}],"translate-y":[{"translate-y":[A]}],"skew-x":[{"skew-x":[O]}],"skew-y":[{"skew-y":[O]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Xe]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Xe]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":R()}],"scroll-mx":[{"scroll-mx":R()}],"scroll-my":[{"scroll-my":R()}],"scroll-ms":[{"scroll-ms":R()}],"scroll-me":[{"scroll-me":R()}],"scroll-mt":[{"scroll-mt":R()}],"scroll-mr":[{"scroll-mr":R()}],"scroll-mb":[{"scroll-mb":R()}],"scroll-ml":[{"scroll-ml":R()}],"scroll-p":[{"scroll-p":R()}],"scroll-px":[{"scroll-px":R()}],"scroll-py":[{"scroll-py":R()}],"scroll-ps":[{"scroll-ps":R()}],"scroll-pe":[{"scroll-pe":R()}],"scroll-pt":[{"scroll-pt":R()}],"scroll-pr":[{"scroll-pr":R()}],"scroll-pb":[{"scroll-pb":R()}],"scroll-pl":[{"scroll-pl":R()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Xe]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Ma,Ei,qv]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},K9=T9(H9);function ye(...t){return K9(lt(t))}const Y9=IV,wI=p.forwardRef(({className:t,...e},r)=>a.jsx(tI,{ref:r,className:ye("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));wI.displayName=tI.displayName;const Q9=fh("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),jI=p.forwardRef(({className:t,variant:e,...r},n)=>a.jsx(rI,{ref:n,className:ye(Q9({variant:e}),t),...r}));jI.displayName=rI.displayName;const X9=p.forwardRef(({className:t,...e},r)=>a.jsx(aI,{ref:r,className:ye("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));X9.displayName=aI.displayName;const NI=p.forwardRef(({className:t,...e},r)=>a.jsx(iI,{ref:r,className:ye("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:a.jsx(Hs,{className:"h-4 w-4"})}));NI.displayName=iI.displayName;const _I=p.forwardRef(({className:t,...e},r)=>a.jsx(nI,{ref:r,className:ye("text-sm font-semibold",t),...e}));_I.displayName=nI.displayName;const SI=p.forwardRef(({className:t,...e},r)=>a.jsx(sI,{ref:r,className:ye("text-sm opacity-90",t),...e}));SI.displayName=sI.displayName;function J9(){const{toasts:t}=Rn();return a.jsxs(Y9,{children:[t.map(function({id:e,title:r,description:n,action:s,...i}){return a.jsxs(jI,{...i,children:[a.jsxs("div",{className:"grid gap-1",children:[r&&a.jsx(_I,{children:r}),n&&a.jsx(SI,{children:n})]}),s,a.jsx(NI,{})]},e)}),a.jsx(wI,{})]})}var GS=["light","dark"],Z9="(prefers-color-scheme: dark)",e8=p.createContext(void 0),t8={setTheme:t=>{},themes:[]},r8=()=>{var t;return(t=p.useContext(e8))!=null?t:t8};p.memo(({forcedTheme:t,storageKey:e,attribute:r,enableSystem:n,enableColorScheme:s,defaultTheme:i,value:o,attrs:l,nonce:c})=>{let u=i==="system",d=r==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(v=>`'${v}'`).join(",")})`};`:`var d=document.documentElement,n='${r}',s='setAttribute';`,h=s?GS.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",f=(v,y=!1,x=!0)=>{let b=o?o[v]:v,w=y?v+"|| ''":`'${b}'`,j="";return s&&x&&!y&&GS.includes(v)&&(j+=`d.style.colorScheme = '${v}';`),r==="class"?y||b?j+=`c.add(${w})`:j+="null":b&&(j+=`d[s](n,${w})`),j},m=t?`!function(){${d}${f(t)}}()`:n?`!function(){try{${d}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${u})){var t='${Z9}',m=window.matchMedia(t);if(m.media!==t||m.matches){${f("dark")}}else{${f("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}${u?"":"else{"+f(i,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}else{${f(i,!1,!1)};}${h}}catch(t){}}();`;return p.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:m}})});var n8=t=>{switch(t){case"success":return i8;case"info":return l8;case"warning":return o8;case"error":return c8;default:return null}},s8=Array(12).fill(0),a8=({visible:t,className:e})=>xe.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},xe.createElement("div",{className:"sonner-spinner"},s8.map((r,n)=>xe.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),i8=xe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},xe.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),o8=xe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},xe.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),l8=xe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},xe.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),c8=xe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},xe.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),u8=xe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},xe.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),xe.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),d8=()=>{let[t,e]=xe.useState(document.hidden);return xe.useEffect(()=>{let r=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),t},fb=1,h8=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let r=this.subscribers.indexOf(e);this.subscribers.splice(r,1)}),this.publish=e=>{this.subscribers.forEach(r=>r(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var r;let{message:n,...s}=e,i=typeof(e==null?void 0:e.id)=="number"||((r=e.id)==null?void 0:r.length)>0?e.id:fb++,o=this.toasts.find(c=>c.id===i),l=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(c=>c.id===i?(this.publish({...c,...e,id:i,title:n}),{...c,...e,id:i,dismissible:l,title:n}):c):this.addToast({title:n,...s,dismissible:l,id:i}),i},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(r=>{this.subscribers.forEach(n=>n({id:r.id,dismiss:!0}))}),this.subscribers.forEach(r=>r({id:e,dismiss:!0})),e),this.message=(e,r)=>this.create({...r,message:e}),this.error=(e,r)=>this.create({...r,message:e,type:"error"}),this.success=(e,r)=>this.create({...r,type:"success",message:e}),this.info=(e,r)=>this.create({...r,type:"info",message:e}),this.warning=(e,r)=>this.create({...r,type:"warning",message:e}),this.loading=(e,r)=>this.create({...r,type:"loading",message:e}),this.promise=(e,r)=>{if(!r)return;let n;r.loading!==void 0&&(n=this.create({...r,promise:e,type:"loading",message:r.loading,description:typeof r.description!="function"?r.description:void 0}));let s=e instanceof Promise?e:e(),i=n!==void 0,o,l=s.then(async u=>{if(o=["resolve",u],xe.isValidElement(u))i=!1,this.create({id:n,type:"default",message:u});else if(m8(u)&&!u.ok){i=!1;let d=typeof r.error=="function"?await r.error(`HTTP error! status: ${u.status}`):r.error,h=typeof r.description=="function"?await r.description(`HTTP error! status: ${u.status}`):r.description;this.create({id:n,type:"error",message:d,description:h})}else if(r.success!==void 0){i=!1;let d=typeof r.success=="function"?await r.success(u):r.success,h=typeof r.description=="function"?await r.description(u):r.description;this.create({id:n,type:"success",message:d,description:h})}}).catch(async u=>{if(o=["reject",u],r.error!==void 0){i=!1;let d=typeof r.error=="function"?await r.error(u):r.error,h=typeof r.description=="function"?await r.description(u):r.description;this.create({id:n,type:"error",message:d,description:h})}}).finally(()=>{var u;i&&(this.dismiss(n),n=void 0),(u=r.finally)==null||u.call(r)}),c=()=>new Promise((u,d)=>l.then(()=>o[0]==="reject"?d(o[1]):u(o[1])).catch(d));return typeof n!="string"&&typeof n!="number"?{unwrap:c}:Object.assign(n,{unwrap:c})},this.custom=(e,r)=>{let n=(r==null?void 0:r.id)||fb++;return this.create({jsx:e(n),id:n,...r}),n},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},wn=new h8,f8=(t,e)=>{let r=(e==null?void 0:e.id)||fb++;return wn.addToast({title:t,...e,id:r}),r},m8=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",p8=f8,g8=()=>wn.toasts,y8=()=>wn.getActiveToasts();Object.assign(p8,{success:wn.success,info:wn.info,warning:wn.warning,error:wn.error,custom:wn.custom,message:wn.message,promise:wn.promise,dismiss:wn.dismiss,loading:wn.loading},{getHistory:g8,getToasts:y8});function v8(t,{insertAt:e}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e==="top"&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}v8(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Rf(t){return t.label!==void 0}var x8=3,b8="32px",w8="16px",WS=4e3,j8=356,N8=14,_8=20,S8=200;function Ps(...t){return t.filter(Boolean).join(" ")}function A8(t){let[e,r]=t.split("-"),n=[];return e&&n.push(e),r&&n.push(r),n}var E8=t=>{var e,r,n,s,i,o,l,c,u,d,h;let{invert:f,toast:m,unstyled:v,interacting:y,setHeights:x,visibleToasts:b,heights:w,index:j,toasts:E,expanded:I,removeToast:O,defaultRichColors:T,closeButton:A,style:S,cancelButtonStyle:_,actionButtonStyle:P,className:R="",descriptionClassName:C="",duration:B,position:G,gap:U,loadingIcon:F,expandByDefault:M,classNames:$,icons:ne,closeButtonAriaLabel:te="Close toast",pauseWhenPageIsHidden:z}=t,[de,Z]=xe.useState(null),[re,_e]=xe.useState(null),[se,Fe]=xe.useState(!1),[oe,V]=xe.useState(!1),[W,L]=xe.useState(!1),[J,le]=xe.useState(!1),[pe,ke]=xe.useState(!1),[De,qe]=xe.useState(0),[mt,jt]=xe.useState(0),Nt=xe.useRef(m.duration||B||WS),Q=xe.useRef(null),ue=xe.useRef(null),we=j===0,Me=j+1<=b,Ne=m.type,Te=m.dismissible!==!1,rt=m.className||"",Ae=m.descriptionClassName||"",st=xe.useMemo(()=>w.findIndex(ze=>ze.toastId===m.id)||0,[w,m.id]),It=xe.useMemo(()=>{var ze;return(ze=m.closeButton)!=null?ze:A},[m.closeButton,A]),et=xe.useMemo(()=>m.duration||B||WS,[m.duration,B]),Jt=xe.useRef(0),yr=xe.useRef(0),ut=xe.useRef(0),vr=xe.useRef(null),[Uo,Yr]=G.split("-"),ns=xe.useMemo(()=>w.reduce((ze,ht,Tt)=>Tt>=st?ze:ze+ht.height,0),[w,st]),yn=d8(),Bo=m.invert||f,Vo=Ne==="loading";yr.current=xe.useMemo(()=>st*U+ns,[st,ns]),xe.useEffect(()=>{Nt.current=et},[et]),xe.useEffect(()=>{Fe(!0)},[]),xe.useEffect(()=>{let ze=ue.current;if(ze){let ht=ze.getBoundingClientRect().height;return jt(ht),x(Tt=>[{toastId:m.id,height:ht,position:m.position},...Tt]),()=>x(Tt=>Tt.filter($r=>$r.toastId!==m.id))}},[x,m.id]),xe.useLayoutEffect(()=>{if(!se)return;let ze=ue.current,ht=ze.style.height;ze.style.height="auto";let Tt=ze.getBoundingClientRect().height;ze.style.height=ht,jt(Tt),x($r=>$r.find(vn=>vn.toastId===m.id)?$r.map(vn=>vn.toastId===m.id?{...vn,height:Tt}:vn):[{toastId:m.id,height:Tt,position:m.position},...$r])},[se,m.title,m.description,x,m.id]);let ss=xe.useCallback(()=>{V(!0),qe(yr.current),x(ze=>ze.filter(ht=>ht.toastId!==m.id)),setTimeout(()=>{O(m)},S8)},[m,O,x,yr]);xe.useEffect(()=>{if(m.promise&&Ne==="loading"||m.duration===1/0||m.type==="loading")return;let ze;return I||y||z&&yn?(()=>{if(ut.current<Jt.current){let ht=new Date().getTime()-Jt.current;Nt.current=Nt.current-ht}ut.current=new Date().getTime()})():Nt.current!==1/0&&(Jt.current=new Date().getTime(),ze=setTimeout(()=>{var ht;(ht=m.onAutoClose)==null||ht.call(m,m),ss()},Nt.current)),()=>clearTimeout(ze)},[I,y,m,Ne,z,yn,ss]),xe.useEffect(()=>{m.delete&&ss()},[ss,m.delete]);function Ra(){var ze,ht,Tt;return ne!=null&&ne.loading?xe.createElement("div",{className:Ps($==null?void 0:$.loader,(ze=m==null?void 0:m.classNames)==null?void 0:ze.loader,"sonner-loader"),"data-visible":Ne==="loading"},ne.loading):F?xe.createElement("div",{className:Ps($==null?void 0:$.loader,(ht=m==null?void 0:m.classNames)==null?void 0:ht.loader,"sonner-loader"),"data-visible":Ne==="loading"},F):xe.createElement(a8,{className:Ps($==null?void 0:$.loader,(Tt=m==null?void 0:m.classNames)==null?void 0:Tt.loader),visible:Ne==="loading"})}return xe.createElement("li",{tabIndex:0,ref:ue,className:Ps(R,rt,$==null?void 0:$.toast,(e=m==null?void 0:m.classNames)==null?void 0:e.toast,$==null?void 0:$.default,$==null?void 0:$[Ne],(r=m==null?void 0:m.classNames)==null?void 0:r[Ne]),"data-sonner-toast":"","data-rich-colors":(n=m.richColors)!=null?n:T,"data-styled":!(m.jsx||m.unstyled||v),"data-mounted":se,"data-promise":!!m.promise,"data-swiped":pe,"data-removed":oe,"data-visible":Me,"data-y-position":Uo,"data-x-position":Yr,"data-index":j,"data-front":we,"data-swiping":W,"data-dismissible":Te,"data-type":Ne,"data-invert":Bo,"data-swipe-out":J,"data-swipe-direction":re,"data-expanded":!!(I||M&&se),style:{"--index":j,"--toasts-before":j,"--z-index":E.length-j,"--offset":`${oe?De:yr.current}px`,"--initial-height":M?"auto":`${mt}px`,...S,...m.style},onDragEnd:()=>{L(!1),Z(null),vr.current=null},onPointerDown:ze=>{Vo||!Te||(Q.current=new Date,qe(yr.current),ze.target.setPointerCapture(ze.pointerId),ze.target.tagName!=="BUTTON"&&(L(!0),vr.current={x:ze.clientX,y:ze.clientY}))},onPointerUp:()=>{var ze,ht,Tt,$r;if(J||!Te)return;vr.current=null;let vn=Number(((ze=ue.current)==null?void 0:ze.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Wt=Number(((ht=ue.current)==null?void 0:ht.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Qs=new Date().getTime()-((Tt=Q.current)==null?void 0:Tt.getTime()),Ur=de==="x"?vn:Wt,xn=Math.abs(Ur)/Qs;if(Math.abs(Ur)>=_8||xn>.11){qe(yr.current),($r=m.onDismiss)==null||$r.call(m,m),_e(de==="x"?vn>0?"right":"left":Wt>0?"down":"up"),ss(),le(!0),ke(!1);return}L(!1),Z(null)},onPointerMove:ze=>{var ht,Tt,$r,vn;if(!vr.current||!Te||((ht=window.getSelection())==null?void 0:ht.toString().length)>0)return;let Wt=ze.clientY-vr.current.y,Qs=ze.clientX-vr.current.x,Ur=(Tt=t.swipeDirections)!=null?Tt:A8(G);!de&&(Math.abs(Qs)>1||Math.abs(Wt)>1)&&Z(Math.abs(Qs)>Math.abs(Wt)?"x":"y");let xn={x:0,y:0};de==="y"?(Ur.includes("top")||Ur.includes("bottom"))&&(Ur.includes("top")&&Wt<0||Ur.includes("bottom")&&Wt>0)&&(xn.y=Wt):de==="x"&&(Ur.includes("left")||Ur.includes("right"))&&(Ur.includes("left")&&Qs<0||Ur.includes("right")&&Qs>0)&&(xn.x=Qs),(Math.abs(xn.x)>0||Math.abs(xn.y)>0)&&ke(!0),($r=ue.current)==null||$r.style.setProperty("--swipe-amount-x",`${xn.x}px`),(vn=ue.current)==null||vn.style.setProperty("--swipe-amount-y",`${xn.y}px`)}},It&&!m.jsx?xe.createElement("button",{"aria-label":te,"data-disabled":Vo,"data-close-button":!0,onClick:Vo||!Te?()=>{}:()=>{var ze;ss(),(ze=m.onDismiss)==null||ze.call(m,m)},className:Ps($==null?void 0:$.closeButton,(s=m==null?void 0:m.classNames)==null?void 0:s.closeButton)},(i=ne==null?void 0:ne.close)!=null?i:u8):null,m.jsx||p.isValidElement(m.title)?m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title:xe.createElement(xe.Fragment,null,Ne||m.icon||m.promise?xe.createElement("div",{"data-icon":"",className:Ps($==null?void 0:$.icon,(o=m==null?void 0:m.classNames)==null?void 0:o.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||Ra():null,m.type!=="loading"?m.icon||(ne==null?void 0:ne[Ne])||n8(Ne):null):null,xe.createElement("div",{"data-content":"",className:Ps($==null?void 0:$.content,(l=m==null?void 0:m.classNames)==null?void 0:l.content)},xe.createElement("div",{"data-title":"",className:Ps($==null?void 0:$.title,(c=m==null?void 0:m.classNames)==null?void 0:c.title)},typeof m.title=="function"?m.title():m.title),m.description?xe.createElement("div",{"data-description":"",className:Ps(C,Ae,$==null?void 0:$.description,(u=m==null?void 0:m.classNames)==null?void 0:u.description)},typeof m.description=="function"?m.description():m.description):null),p.isValidElement(m.cancel)?m.cancel:m.cancel&&Rf(m.cancel)?xe.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||_,onClick:ze=>{var ht,Tt;Rf(m.cancel)&&Te&&((Tt=(ht=m.cancel).onClick)==null||Tt.call(ht,ze),ss())},className:Ps($==null?void 0:$.cancelButton,(d=m==null?void 0:m.classNames)==null?void 0:d.cancelButton)},m.cancel.label):null,p.isValidElement(m.action)?m.action:m.action&&Rf(m.action)?xe.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||P,onClick:ze=>{var ht,Tt;Rf(m.action)&&((Tt=(ht=m.action).onClick)==null||Tt.call(ht,ze),!ze.defaultPrevented&&ss())},className:Ps($==null?void 0:$.actionButton,(h=m==null?void 0:m.classNames)==null?void 0:h.actionButton)},m.action.label):null))};function qS(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function P8(t,e){let r={};return[t,e].forEach((n,s)=>{let i=s===1,o=i?"--mobile-offset":"--offset",l=i?w8:b8;function c(u){["top","right","bottom","left"].forEach(d=>{r[`${o}-${d}`]=typeof u=="number"?`${u}px`:u})}typeof n=="number"||typeof n=="string"?c(n):typeof n=="object"?["top","right","bottom","left"].forEach(u=>{n[u]===void 0?r[`${o}-${u}`]=l:r[`${o}-${u}`]=typeof n[u]=="number"?`${n[u]}px`:n[u]}):c(l)}),r}var T8=p.forwardRef(function(t,e){let{invert:r,position:n="bottom-right",hotkey:s=["altKey","KeyT"],expand:i,closeButton:o,className:l,offset:c,mobileOffset:u,theme:d="light",richColors:h,duration:f,style:m,visibleToasts:v=x8,toastOptions:y,dir:x=qS(),gap:b=N8,loadingIcon:w,icons:j,containerAriaLabel:E="Notifications",pauseWhenPageIsHidden:I}=t,[O,T]=xe.useState([]),A=xe.useMemo(()=>Array.from(new Set([n].concat(O.filter(z=>z.position).map(z=>z.position)))),[O,n]),[S,_]=xe.useState([]),[P,R]=xe.useState(!1),[C,B]=xe.useState(!1),[G,U]=xe.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),F=xe.useRef(null),M=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),$=xe.useRef(null),ne=xe.useRef(!1),te=xe.useCallback(z=>{T(de=>{var Z;return(Z=de.find(re=>re.id===z.id))!=null&&Z.delete||wn.dismiss(z.id),de.filter(({id:re})=>re!==z.id)})},[]);return xe.useEffect(()=>wn.subscribe(z=>{if(z.dismiss){T(de=>de.map(Z=>Z.id===z.id?{...Z,delete:!0}:Z));return}setTimeout(()=>{Ck.flushSync(()=>{T(de=>{let Z=de.findIndex(re=>re.id===z.id);return Z!==-1?[...de.slice(0,Z),{...de[Z],...z},...de.slice(Z+1)]:[z,...de]})})})}),[]),xe.useEffect(()=>{if(d!=="system"){U(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?U("dark"):U("light")),typeof window>"u")return;let z=window.matchMedia("(prefers-color-scheme: dark)");try{z.addEventListener("change",({matches:de})=>{U(de?"dark":"light")})}catch{z.addListener(({matches:Z})=>{try{U(Z?"dark":"light")}catch(re){console.error(re)}})}},[d]),xe.useEffect(()=>{O.length<=1&&R(!1)},[O]),xe.useEffect(()=>{let z=de=>{var Z,re;s.every(_e=>de[_e]||de.code===_e)&&(R(!0),(Z=F.current)==null||Z.focus()),de.code==="Escape"&&(document.activeElement===F.current||(re=F.current)!=null&&re.contains(document.activeElement))&&R(!1)};return document.addEventListener("keydown",z),()=>document.removeEventListener("keydown",z)},[s]),xe.useEffect(()=>{if(F.current)return()=>{$.current&&($.current.focus({preventScroll:!0}),$.current=null,ne.current=!1)}},[F.current]),xe.createElement("section",{ref:e,"aria-label":`${E} ${M}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},A.map((z,de)=>{var Z;let[re,_e]=z.split("-");return O.length?xe.createElement("ol",{key:z,dir:x==="auto"?qS():x,tabIndex:-1,ref:F,className:l,"data-sonner-toaster":!0,"data-theme":G,"data-y-position":re,"data-lifted":P&&O.length>1&&!i,"data-x-position":_e,style:{"--front-toast-height":`${((Z=S[0])==null?void 0:Z.height)||0}px`,"--width":`${j8}px`,"--gap":`${b}px`,...m,...P8(c,u)},onBlur:se=>{ne.current&&!se.currentTarget.contains(se.relatedTarget)&&(ne.current=!1,$.current&&($.current.focus({preventScroll:!0}),$.current=null))},onFocus:se=>{se.target instanceof HTMLElement&&se.target.dataset.dismissible==="false"||ne.current||(ne.current=!0,$.current=se.relatedTarget)},onMouseEnter:()=>R(!0),onMouseMove:()=>R(!0),onMouseLeave:()=>{C||R(!1)},onDragEnd:()=>R(!1),onPointerDown:se=>{se.target instanceof HTMLElement&&se.target.dataset.dismissible==="false"||B(!0)},onPointerUp:()=>B(!1)},O.filter(se=>!se.position&&de===0||se.position===z).map((se,Fe)=>{var oe,V;return xe.createElement(E8,{key:se.id,icons:j,index:Fe,toast:se,defaultRichColors:h,duration:(oe=y==null?void 0:y.duration)!=null?oe:f,className:y==null?void 0:y.className,descriptionClassName:y==null?void 0:y.descriptionClassName,invert:r,visibleToasts:v,closeButton:(V=y==null?void 0:y.closeButton)!=null?V:o,interacting:C,position:z,style:y==null?void 0:y.style,unstyled:y==null?void 0:y.unstyled,classNames:y==null?void 0:y.classNames,cancelButtonStyle:y==null?void 0:y.cancelButtonStyle,actionButtonStyle:y==null?void 0:y.actionButtonStyle,removeToast:te,toasts:O.filter(W=>W.position==se.position),heights:S.filter(W=>W.position==se.position),setHeights:_,expandByDefault:i,gap:b,loadingIcon:w,expanded:P,pauseWhenPageIsHidden:I,swipeDirections:t.swipeDirections})})):null}))});const C8=({...t})=>{const{theme:e="system"}=r8();return a.jsx(T8,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};var k8=lw[" useId ".trim().toString()]||(()=>{}),I8=0;function ys(t){const[e,r]=p.useState(k8());return pr(()=>{t||r(n=>n??String(I8++))},[t]),t||(e?`radix-${e}`:"")}const R8=["top","right","bottom","left"],uo=Math.min,$n=Math.max,Ym=Math.round,Of=Math.floor,da=t=>({x:t,y:t}),O8={left:"right",right:"left",bottom:"top",top:"bottom"},D8={start:"end",end:"start"};function mb(t,e,r){return $n(t,uo(e,r))}function ni(t,e){return typeof t=="function"?t(e):t}function si(t){return t.split("-")[0]}function fu(t){return t.split("-")[1]}function xw(t){return t==="x"?"y":"x"}function bw(t){return t==="y"?"height":"width"}const M8=new Set(["top","bottom"]);function oa(t){return M8.has(si(t))?"y":"x"}function ww(t){return xw(oa(t))}function L8(t,e,r){r===void 0&&(r=!1);const n=fu(t),s=ww(t),i=bw(s);let o=s==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=Qm(o)),[o,Qm(o)]}function F8(t){const e=Qm(t);return[pb(t),e,pb(e)]}function pb(t){return t.replace(/start|end/g,e=>D8[e])}const HS=["left","right"],KS=["right","left"],$8=["top","bottom"],U8=["bottom","top"];function B8(t,e,r){switch(t){case"top":case"bottom":return r?e?KS:HS:e?HS:KS;case"left":case"right":return e?$8:U8;default:return[]}}function V8(t,e,r,n){const s=fu(t);let i=B8(si(t),r==="start",n);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(pb)))),i}function Qm(t){return t.replace(/left|right|bottom|top/g,e=>O8[e])}function z8(t){return{top:0,right:0,bottom:0,left:0,...t}}function AI(t){return typeof t!="number"?z8(t):{top:t,right:t,bottom:t,left:t}}function Xm(t){const{x:e,y:r,width:n,height:s}=t;return{width:n,height:s,top:r,left:e,right:e+n,bottom:r+s,x:e,y:r}}function YS(t,e,r){let{reference:n,floating:s}=t;const i=oa(e),o=ww(e),l=bw(o),c=si(e),u=i==="y",d=n.x+n.width/2-s.width/2,h=n.y+n.height/2-s.height/2,f=n[l]/2-s[l]/2;let m;switch(c){case"top":m={x:d,y:n.y-s.height};break;case"bottom":m={x:d,y:n.y+n.height};break;case"right":m={x:n.x+n.width,y:h};break;case"left":m={x:n.x-s.width,y:h};break;default:m={x:n.x,y:n.y}}switch(fu(e)){case"start":m[o]-=f*(r&&u?-1:1);break;case"end":m[o]+=f*(r&&u?-1:1);break}return m}const G8=async(t,e,r)=>{const{placement:n="bottom",strategy:s="absolute",middleware:i=[],platform:o}=r,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:d,y:h}=YS(u,n,c),f=n,m={},v=0;for(let y=0;y<l.length;y++){const{name:x,fn:b}=l[y],{x:w,y:j,data:E,reset:I}=await b({x:d,y:h,initialPlacement:n,placement:f,strategy:s,middlewareData:m,rects:u,platform:o,elements:{reference:t,floating:e}});d=w??d,h=j??h,m={...m,[x]:{...m[x],...E}},I&&v<=50&&(v++,typeof I=="object"&&(I.placement&&(f=I.placement),I.rects&&(u=I.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):I.rects),{x:d,y:h}=YS(u,f,c)),y=-1)}return{x:d,y:h,placement:f,strategy:s,middlewareData:m}};async function Od(t,e){var r;e===void 0&&(e={});const{x:n,y:s,platform:i,rects:o,elements:l,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:f=!1,padding:m=0}=ni(e,t),v=AI(m),x=l[f?h==="floating"?"reference":"floating":h],b=Xm(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(x)))==null||r?x:x.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),w=h==="floating"?{x:n,y:s,width:o.floating.width,height:o.floating.height}:o.reference,j=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),E=await(i.isElement==null?void 0:i.isElement(j))?await(i.getScale==null?void 0:i.getScale(j))||{x:1,y:1}:{x:1,y:1},I=Xm(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:w,offsetParent:j,strategy:c}):w);return{top:(b.top-I.top+v.top)/E.y,bottom:(I.bottom-b.bottom+v.bottom)/E.y,left:(b.left-I.left+v.left)/E.x,right:(I.right-b.right+v.right)/E.x}}const W8=t=>({name:"arrow",options:t,async fn(e){const{x:r,y:n,placement:s,rects:i,platform:o,elements:l,middlewareData:c}=e,{element:u,padding:d=0}=ni(t,e)||{};if(u==null)return{};const h=AI(d),f={x:r,y:n},m=ww(s),v=bw(m),y=await o.getDimensions(u),x=m==="y",b=x?"top":"left",w=x?"bottom":"right",j=x?"clientHeight":"clientWidth",E=i.reference[v]+i.reference[m]-f[m]-i.floating[v],I=f[m]-i.reference[m],O=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let T=O?O[j]:0;(!T||!await(o.isElement==null?void 0:o.isElement(O)))&&(T=l.floating[j]||i.floating[v]);const A=E/2-I/2,S=T/2-y[v]/2-1,_=uo(h[b],S),P=uo(h[w],S),R=_,C=T-y[v]-P,B=T/2-y[v]/2+A,G=mb(R,B,C),U=!c.arrow&&fu(s)!=null&&B!==G&&i.reference[v]/2-(B<R?_:P)-y[v]/2<0,F=U?B<R?B-R:B-C:0;return{[m]:f[m]+F,data:{[m]:G,centerOffset:B-G-F,...U&&{alignmentOffset:F}},reset:U}}}),q8=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var r,n;const{placement:s,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:u}=e,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:y=!0,...x}=ni(t,e);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const b=si(s),w=oa(l),j=si(l)===l,E=await(c.isRTL==null?void 0:c.isRTL(u.floating)),I=f||(j||!y?[Qm(l)]:F8(l)),O=v!=="none";!f&&O&&I.push(...V8(l,y,v,E));const T=[l,...I],A=await Od(e,x),S=[];let _=((n=i.flip)==null?void 0:n.overflows)||[];if(d&&S.push(A[b]),h){const B=L8(s,o,E);S.push(A[B[0]],A[B[1]])}if(_=[..._,{placement:s,overflows:S}],!S.every(B=>B<=0)){var P,R;const B=(((P=i.flip)==null?void 0:P.index)||0)+1,G=T[B];if(G&&(!(h==="alignment"?w!==oa(G):!1)||_.every(M=>M.overflows[0]>0&&oa(M.placement)===w)))return{data:{index:B,overflows:_},reset:{placement:G}};let U=(R=_.filter(F=>F.overflows[0]<=0).sort((F,M)=>F.overflows[1]-M.overflows[1])[0])==null?void 0:R.placement;if(!U)switch(m){case"bestFit":{var C;const F=(C=_.filter(M=>{if(O){const $=oa(M.placement);return $===w||$==="y"}return!0}).map(M=>[M.placement,M.overflows.filter($=>$>0).reduce(($,ne)=>$+ne,0)]).sort((M,$)=>M[1]-$[1])[0])==null?void 0:C[0];F&&(U=F);break}case"initialPlacement":U=l;break}if(s!==U)return{reset:{placement:U}}}return{}}}};function QS(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function XS(t){return R8.some(e=>t[e]>=0)}const H8=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:r}=e,{strategy:n="referenceHidden",...s}=ni(t,e);switch(n){case"referenceHidden":{const i=await Od(e,{...s,elementContext:"reference"}),o=QS(i,r.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:XS(o)}}}case"escaped":{const i=await Od(e,{...s,altBoundary:!0}),o=QS(i,r.floating);return{data:{escapedOffsets:o,escaped:XS(o)}}}default:return{}}}}},EI=new Set(["left","top"]);async function K8(t,e){const{placement:r,platform:n,elements:s}=t,i=await(n.isRTL==null?void 0:n.isRTL(s.floating)),o=si(r),l=fu(r),c=oa(r)==="y",u=EI.has(o)?-1:1,d=i&&c?-1:1,h=ni(e,t);let{mainAxis:f,crossAxis:m,alignmentAxis:v}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof v=="number"&&(m=l==="end"?v*-1:v),c?{x:m*d,y:f*u}:{x:f*u,y:m*d}}const Y8=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var r,n;const{x:s,y:i,placement:o,middlewareData:l}=e,c=await K8(e,t);return o===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:o}}}}},Q8=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:r,y:n,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:x=>{let{x:b,y:w}=x;return{x:b,y:w}}},...c}=ni(t,e),u={x:r,y:n},d=await Od(e,c),h=oa(si(s)),f=xw(h);let m=u[f],v=u[h];if(i){const x=f==="y"?"top":"left",b=f==="y"?"bottom":"right",w=m+d[x],j=m-d[b];m=mb(w,m,j)}if(o){const x=h==="y"?"top":"left",b=h==="y"?"bottom":"right",w=v+d[x],j=v-d[b];v=mb(w,v,j)}const y=l.fn({...e,[f]:m,[h]:v});return{...y,data:{x:y.x-r,y:y.y-n,enabled:{[f]:i,[h]:o}}}}}},X8=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:r,y:n,placement:s,rects:i,middlewareData:o}=e,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=ni(t,e),d={x:r,y:n},h=oa(s),f=xw(h);let m=d[f],v=d[h];const y=ni(l,e),x=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(c){const j=f==="y"?"height":"width",E=i.reference[f]-i.floating[j]+x.mainAxis,I=i.reference[f]+i.reference[j]-x.mainAxis;m<E?m=E:m>I&&(m=I)}if(u){var b,w;const j=f==="y"?"width":"height",E=EI.has(si(s)),I=i.reference[h]-i.floating[j]+(E&&((b=o.offset)==null?void 0:b[h])||0)+(E?0:x.crossAxis),O=i.reference[h]+i.reference[j]+(E?0:((w=o.offset)==null?void 0:w[h])||0)-(E?x.crossAxis:0);v<I?v=I:v>O&&(v=O)}return{[f]:m,[h]:v}}}},J8=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var r,n;const{placement:s,rects:i,platform:o,elements:l}=e,{apply:c=()=>{},...u}=ni(t,e),d=await Od(e,u),h=si(s),f=fu(s),m=oa(s)==="y",{width:v,height:y}=i.floating;let x,b;h==="top"||h==="bottom"?(x=h,b=f===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(b=h,x=f==="end"?"top":"bottom");const w=y-d.top-d.bottom,j=v-d.left-d.right,E=uo(y-d[x],w),I=uo(v-d[b],j),O=!e.middlewareData.shift;let T=E,A=I;if((r=e.middlewareData.shift)!=null&&r.enabled.x&&(A=j),(n=e.middlewareData.shift)!=null&&n.enabled.y&&(T=w),O&&!f){const _=$n(d.left,0),P=$n(d.right,0),R=$n(d.top,0),C=$n(d.bottom,0);m?A=v-2*(_!==0||P!==0?_+P:$n(d.left,d.right)):T=y-2*(R!==0||C!==0?R+C:$n(d.top,d.bottom))}await c({...e,availableWidth:A,availableHeight:T});const S=await o.getDimensions(l.floating);return v!==S.width||y!==S.height?{reset:{rects:!0}}:{}}}};function Ag(){return typeof window<"u"}function mu(t){return PI(t)?(t.nodeName||"").toLowerCase():"#document"}function qn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Ea(t){var e;return(e=(PI(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function PI(t){return Ag()?t instanceof Node||t instanceof qn(t).Node:!1}function Vs(t){return Ag()?t instanceof Element||t instanceof qn(t).Element:!1}function ba(t){return Ag()?t instanceof HTMLElement||t instanceof qn(t).HTMLElement:!1}function JS(t){return!Ag()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof qn(t).ShadowRoot}const Z8=new Set(["inline","contents"]);function ph(t){const{overflow:e,overflowX:r,overflowY:n,display:s}=zs(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+r)&&!Z8.has(s)}const ez=new Set(["table","td","th"]);function tz(t){return ez.has(mu(t))}const rz=[":popover-open",":modal"];function Eg(t){return rz.some(e=>{try{return t.matches(e)}catch{return!1}})}const nz=["transform","translate","scale","rotate","perspective"],sz=["transform","translate","scale","rotate","perspective","filter"],az=["paint","layout","strict","content"];function jw(t){const e=Nw(),r=Vs(t)?zs(t):t;return nz.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!e&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!e&&(r.filter?r.filter!=="none":!1)||sz.some(n=>(r.willChange||"").includes(n))||az.some(n=>(r.contain||"").includes(n))}function iz(t){let e=ho(t);for(;ba(e)&&!Lc(e);){if(jw(e))return e;if(Eg(e))return null;e=ho(e)}return null}function Nw(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const oz=new Set(["html","body","#document"]);function Lc(t){return oz.has(mu(t))}function zs(t){return qn(t).getComputedStyle(t)}function Pg(t){return Vs(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function ho(t){if(mu(t)==="html")return t;const e=t.assignedSlot||t.parentNode||JS(t)&&t.host||Ea(t);return JS(e)?e.host:e}function TI(t){const e=ho(t);return Lc(e)?t.ownerDocument?t.ownerDocument.body:t.body:ba(e)&&ph(e)?e:TI(e)}function Dd(t,e,r){var n;e===void 0&&(e=[]),r===void 0&&(r=!0);const s=TI(t),i=s===((n=t.ownerDocument)==null?void 0:n.body),o=qn(s);if(i){const l=gb(o);return e.concat(o,o.visualViewport||[],ph(s)?s:[],l&&r?Dd(l):[])}return e.concat(s,Dd(s,[],r))}function gb(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function CI(t){const e=zs(t);let r=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const s=ba(t),i=s?t.offsetWidth:r,o=s?t.offsetHeight:n,l=Ym(r)!==i||Ym(n)!==o;return l&&(r=i,n=o),{width:r,height:n,$:l}}function _w(t){return Vs(t)?t:t.contextElement}function gc(t){const e=_w(t);if(!ba(e))return da(1);const r=e.getBoundingClientRect(),{width:n,height:s,$:i}=CI(e);let o=(i?Ym(r.width):r.width)/n,l=(i?Ym(r.height):r.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const lz=da(0);function kI(t){const e=qn(t);return!Nw()||!e.visualViewport?lz:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function cz(t,e,r){return e===void 0&&(e=!1),!r||e&&r!==qn(t)?!1:e}function wl(t,e,r,n){e===void 0&&(e=!1),r===void 0&&(r=!1);const s=t.getBoundingClientRect(),i=_w(t);let o=da(1);e&&(n?Vs(n)&&(o=gc(n)):o=gc(t));const l=cz(i,r,n)?kI(i):da(0);let c=(s.left+l.x)/o.x,u=(s.top+l.y)/o.y,d=s.width/o.x,h=s.height/o.y;if(i){const f=qn(i),m=n&&Vs(n)?qn(n):n;let v=f,y=gb(v);for(;y&&n&&m!==v;){const x=gc(y),b=y.getBoundingClientRect(),w=zs(y),j=b.left+(y.clientLeft+parseFloat(w.paddingLeft))*x.x,E=b.top+(y.clientTop+parseFloat(w.paddingTop))*x.y;c*=x.x,u*=x.y,d*=x.x,h*=x.y,c+=j,u+=E,v=qn(y),y=gb(v)}}return Xm({width:d,height:h,x:c,y:u})}function Sw(t,e){const r=Pg(t).scrollLeft;return e?e.left+r:wl(Ea(t)).left+r}function II(t,e,r){r===void 0&&(r=!1);const n=t.getBoundingClientRect(),s=n.left+e.scrollLeft-(r?0:Sw(t,n)),i=n.top+e.scrollTop;return{x:s,y:i}}function uz(t){let{elements:e,rect:r,offsetParent:n,strategy:s}=t;const i=s==="fixed",o=Ea(n),l=e?Eg(e.floating):!1;if(n===o||l&&i)return r;let c={scrollLeft:0,scrollTop:0},u=da(1);const d=da(0),h=ba(n);if((h||!h&&!i)&&((mu(n)!=="body"||ph(o))&&(c=Pg(n)),ba(n))){const m=wl(n);u=gc(n),d.x=m.x+n.clientLeft,d.y=m.y+n.clientTop}const f=o&&!h&&!i?II(o,c,!0):da(0);return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-c.scrollLeft*u.x+d.x+f.x,y:r.y*u.y-c.scrollTop*u.y+d.y+f.y}}function dz(t){return Array.from(t.getClientRects())}function hz(t){const e=Ea(t),r=Pg(t),n=t.ownerDocument.body,s=$n(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),i=$n(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let o=-r.scrollLeft+Sw(t);const l=-r.scrollTop;return zs(n).direction==="rtl"&&(o+=$n(e.clientWidth,n.clientWidth)-s),{width:s,height:i,x:o,y:l}}function fz(t,e){const r=qn(t),n=Ea(t),s=r.visualViewport;let i=n.clientWidth,o=n.clientHeight,l=0,c=0;if(s){i=s.width,o=s.height;const u=Nw();(!u||u&&e==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:i,height:o,x:l,y:c}}const mz=new Set(["absolute","fixed"]);function pz(t,e){const r=wl(t,!0,e==="fixed"),n=r.top+t.clientTop,s=r.left+t.clientLeft,i=ba(t)?gc(t):da(1),o=t.clientWidth*i.x,l=t.clientHeight*i.y,c=s*i.x,u=n*i.y;return{width:o,height:l,x:c,y:u}}function ZS(t,e,r){let n;if(e==="viewport")n=fz(t,r);else if(e==="document")n=hz(Ea(t));else if(Vs(e))n=pz(e,r);else{const s=kI(t);n={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Xm(n)}function RI(t,e){const r=ho(t);return r===e||!Vs(r)||Lc(r)?!1:zs(r).position==="fixed"||RI(r,e)}function gz(t,e){const r=e.get(t);if(r)return r;let n=Dd(t,[],!1).filter(l=>Vs(l)&&mu(l)!=="body"),s=null;const i=zs(t).position==="fixed";let o=i?ho(t):t;for(;Vs(o)&&!Lc(o);){const l=zs(o),c=jw(o);!c&&l.position==="fixed"&&(s=null),(i?!c&&!s:!c&&l.position==="static"&&!!s&&mz.has(s.position)||ph(o)&&!c&&RI(t,o))?n=n.filter(d=>d!==o):s=l,o=ho(o)}return e.set(t,n),n}function yz(t){let{element:e,boundary:r,rootBoundary:n,strategy:s}=t;const o=[...r==="clippingAncestors"?Eg(e)?[]:gz(e,this._c):[].concat(r),n],l=o[0],c=o.reduce((u,d)=>{const h=ZS(e,d,s);return u.top=$n(h.top,u.top),u.right=uo(h.right,u.right),u.bottom=uo(h.bottom,u.bottom),u.left=$n(h.left,u.left),u},ZS(e,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function vz(t){const{width:e,height:r}=CI(t);return{width:e,height:r}}function xz(t,e,r){const n=ba(e),s=Ea(e),i=r==="fixed",o=wl(t,!0,i,e);let l={scrollLeft:0,scrollTop:0};const c=da(0);function u(){c.x=Sw(s)}if(n||!n&&!i)if((mu(e)!=="body"||ph(s))&&(l=Pg(e)),n){const m=wl(e,!0,i,e);c.x=m.x+e.clientLeft,c.y=m.y+e.clientTop}else s&&u();i&&!n&&s&&u();const d=s&&!n&&!i?II(s,l):da(0),h=o.left+l.scrollLeft-c.x-d.x,f=o.top+l.scrollTop-c.y-d.y;return{x:h,y:f,width:o.width,height:o.height}}function Hv(t){return zs(t).position==="static"}function eA(t,e){if(!ba(t)||zs(t).position==="fixed")return null;if(e)return e(t);let r=t.offsetParent;return Ea(t)===r&&(r=r.ownerDocument.body),r}function OI(t,e){const r=qn(t);if(Eg(t))return r;if(!ba(t)){let s=ho(t);for(;s&&!Lc(s);){if(Vs(s)&&!Hv(s))return s;s=ho(s)}return r}let n=eA(t,e);for(;n&&tz(n)&&Hv(n);)n=eA(n,e);return n&&Lc(n)&&Hv(n)&&!jw(n)?r:n||iz(t)||r}const bz=async function(t){const e=this.getOffsetParent||OI,r=this.getDimensions,n=await r(t.floating);return{reference:xz(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function wz(t){return zs(t).direction==="rtl"}const jz={convertOffsetParentRelativeRectToViewportRelativeRect:uz,getDocumentElement:Ea,getClippingRect:yz,getOffsetParent:OI,getElementRects:bz,getClientRects:dz,getDimensions:vz,getScale:gc,isElement:Vs,isRTL:wz};function DI(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function Nz(t,e){let r=null,n;const s=Ea(t);function i(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const u=t.getBoundingClientRect(),{left:d,top:h,width:f,height:m}=u;if(l||e(),!f||!m)return;const v=Of(h),y=Of(s.clientWidth-(d+f)),x=Of(s.clientHeight-(h+m)),b=Of(d),j={rootMargin:-v+"px "+-y+"px "+-x+"px "+-b+"px",threshold:$n(0,uo(1,c))||1};let E=!0;function I(O){const T=O[0].intersectionRatio;if(T!==c){if(!E)return o();T?o(!1,T):n=setTimeout(()=>{o(!1,1e-7)},1e3)}T===1&&!DI(u,t.getBoundingClientRect())&&o(),E=!1}try{r=new IntersectionObserver(I,{...j,root:s.ownerDocument})}catch{r=new IntersectionObserver(I,j)}r.observe(t)}return o(!0),i}function _z(t,e,r,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,u=_w(t),d=s||i?[...u?Dd(u):[],...Dd(e)]:[];d.forEach(b=>{s&&b.addEventListener("scroll",r,{passive:!0}),i&&b.addEventListener("resize",r)});const h=u&&l?Nz(u,r):null;let f=-1,m=null;o&&(m=new ResizeObserver(b=>{let[w]=b;w&&w.target===u&&m&&(m.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var j;(j=m)==null||j.observe(e)})),r()}),u&&!c&&m.observe(u),m.observe(e));let v,y=c?wl(t):null;c&&x();function x(){const b=wl(t);y&&!DI(y,b)&&r(),y=b,v=requestAnimationFrame(x)}return r(),()=>{var b;d.forEach(w=>{s&&w.removeEventListener("scroll",r),i&&w.removeEventListener("resize",r)}),h==null||h(),(b=m)==null||b.disconnect(),m=null,c&&cancelAnimationFrame(v)}}const Sz=Y8,Az=Q8,Ez=q8,Pz=J8,Tz=H8,tA=W8,Cz=X8,kz=(t,e,r)=>{const n=new Map,s={platform:jz,...r},i={...s.platform,_c:n};return G8(t,e,{...s,platform:i})};var Iz=typeof document<"u",Rz=function(){},jm=Iz?p.useLayoutEffect:Rz;function Jm(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let r,n,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(r=t.length,r!==e.length)return!1;for(n=r;n--!==0;)if(!Jm(t[n],e[n]))return!1;return!0}if(s=Object.keys(t),r=s.length,r!==Object.keys(e).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(e,s[n]))return!1;for(n=r;n--!==0;){const i=s[n];if(!(i==="_owner"&&t.$$typeof)&&!Jm(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function MI(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function rA(t,e){const r=MI(t);return Math.round(e*r)/r}function Kv(t){const e=p.useRef(t);return jm(()=>{e.current=t}),e}function Oz(t){t===void 0&&(t={});const{placement:e="bottom",strategy:r="absolute",middleware:n=[],platform:s,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=t,[d,h]=p.useState({x:0,y:0,strategy:r,placement:e,middlewareData:{},isPositioned:!1}),[f,m]=p.useState(n);Jm(f,n)||m(n);const[v,y]=p.useState(null),[x,b]=p.useState(null),w=p.useCallback(M=>{M!==O.current&&(O.current=M,y(M))},[]),j=p.useCallback(M=>{M!==T.current&&(T.current=M,b(M))},[]),E=i||v,I=o||x,O=p.useRef(null),T=p.useRef(null),A=p.useRef(d),S=c!=null,_=Kv(c),P=Kv(s),R=Kv(u),C=p.useCallback(()=>{if(!O.current||!T.current)return;const M={placement:e,strategy:r,middleware:f};P.current&&(M.platform=P.current),kz(O.current,T.current,M).then($=>{const ne={...$,isPositioned:R.current!==!1};B.current&&!Jm(A.current,ne)&&(A.current=ne,No.flushSync(()=>{h(ne)}))})},[f,e,r,P,R]);jm(()=>{u===!1&&A.current.isPositioned&&(A.current.isPositioned=!1,h(M=>({...M,isPositioned:!1})))},[u]);const B=p.useRef(!1);jm(()=>(B.current=!0,()=>{B.current=!1}),[]),jm(()=>{if(E&&(O.current=E),I&&(T.current=I),E&&I){if(_.current)return _.current(E,I,C);C()}},[E,I,C,_,S]);const G=p.useMemo(()=>({reference:O,floating:T,setReference:w,setFloating:j}),[w,j]),U=p.useMemo(()=>({reference:E,floating:I}),[E,I]),F=p.useMemo(()=>{const M={position:r,left:0,top:0};if(!U.floating)return M;const $=rA(U.floating,d.x),ne=rA(U.floating,d.y);return l?{...M,transform:"translate("+$+"px, "+ne+"px)",...MI(U.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:$,top:ne}},[r,l,U.floating,d.x,d.y]);return p.useMemo(()=>({...d,update:C,refs:G,elements:U,floatingStyles:F}),[d,C,G,U,F])}const Dz=t=>{function e(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:t,fn(r){const{element:n,padding:s}=typeof t=="function"?t(r):t;return n&&e(n)?n.current!=null?tA({element:n.current,padding:s}).fn(r):{}:n?tA({element:n,padding:s}).fn(r):{}}}},Mz=(t,e)=>({...Sz(t),options:[t,e]}),Lz=(t,e)=>({...Az(t),options:[t,e]}),Fz=(t,e)=>({...Cz(t),options:[t,e]}),$z=(t,e)=>({...Ez(t),options:[t,e]}),Uz=(t,e)=>({...Pz(t),options:[t,e]}),Bz=(t,e)=>({...Tz(t),options:[t,e]}),Vz=(t,e)=>({...Dz(t),options:[t,e]});var zz="Arrow",LI=p.forwardRef((t,e)=>{const{children:r,width:n=10,height:s=5,...i}=t;return a.jsx(Re.svg,{...i,ref:e,width:n,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?r:a.jsx("polygon",{points:"0,0 30,0 15,10"})})});LI.displayName=zz;var Gz=LI;function Aw(t){const[e,r]=p.useState(void 0);return pr(()=>{if(t){r({width:t.offsetWidth,height:t.offsetHeight});const n=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,l=u.blockSize}else o=t.offsetWidth,l=t.offsetHeight;r({width:o,height:l})});return n.observe(t,{box:"border-box"}),()=>n.unobserve(t)}else r(void 0)},[t]),e}var Ew="Popper",[FI,So]=Dr(Ew),[Wz,$I]=FI(Ew),UI=t=>{const{__scopePopper:e,children:r}=t,[n,s]=p.useState(null);return a.jsx(Wz,{scope:e,anchor:n,onAnchorChange:s,children:r})};UI.displayName=Ew;var BI="PopperAnchor",VI=p.forwardRef((t,e)=>{const{__scopePopper:r,virtualRef:n,...s}=t,i=$I(BI,r),o=p.useRef(null),l=We(e,o);return p.useEffect(()=>{i.onAnchorChange((n==null?void 0:n.current)||o.current)}),n?null:a.jsx(Re.div,{...s,ref:l})});VI.displayName=BI;var Pw="PopperContent",[qz,Hz]=FI(Pw),zI=p.forwardRef((t,e)=>{var se,Fe,oe,V,W,L;const{__scopePopper:r,side:n="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:f=!1,updatePositionStrategy:m="optimized",onPlaced:v,...y}=t,x=$I(Pw,r),[b,w]=p.useState(null),j=We(e,J=>w(J)),[E,I]=p.useState(null),O=Aw(E),T=(O==null?void 0:O.width)??0,A=(O==null?void 0:O.height)??0,S=n+(i!=="center"?"-"+i:""),_=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},P=Array.isArray(u)?u:[u],R=P.length>0,C={padding:_,boundary:P.filter(Yz),altBoundary:R},{refs:B,floatingStyles:G,placement:U,isPositioned:F,middlewareData:M}=Oz({strategy:"fixed",placement:S,whileElementsMounted:(...J)=>_z(...J,{animationFrame:m==="always"}),elements:{reference:x.anchor},middleware:[Mz({mainAxis:s+A,alignmentAxis:o}),c&&Lz({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?Fz():void 0,...C}),c&&$z({...C}),Uz({...C,apply:({elements:J,rects:le,availableWidth:pe,availableHeight:ke})=>{const{width:De,height:qe}=le.reference,mt=J.floating.style;mt.setProperty("--radix-popper-available-width",`${pe}px`),mt.setProperty("--radix-popper-available-height",`${ke}px`),mt.setProperty("--radix-popper-anchor-width",`${De}px`),mt.setProperty("--radix-popper-anchor-height",`${qe}px`)}}),E&&Vz({element:E,padding:l}),Qz({arrowWidth:T,arrowHeight:A}),f&&Bz({strategy:"referenceHidden",...C})]}),[$,ne]=qI(U),te=ar(v);pr(()=>{F&&(te==null||te())},[F,te]);const z=(se=M.arrow)==null?void 0:se.x,de=(Fe=M.arrow)==null?void 0:Fe.y,Z=((oe=M.arrow)==null?void 0:oe.centerOffset)!==0,[re,_e]=p.useState();return pr(()=>{b&&_e(window.getComputedStyle(b).zIndex)},[b]),a.jsx("div",{ref:B.setFloating,"data-radix-popper-content-wrapper":"",style:{...G,transform:F?G.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:re,"--radix-popper-transform-origin":[(V=M.transformOrigin)==null?void 0:V.x,(W=M.transformOrigin)==null?void 0:W.y].join(" "),...((L=M.hide)==null?void 0:L.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:a.jsx(qz,{scope:r,placedSide:$,onArrowChange:I,arrowX:z,arrowY:de,shouldHideArrow:Z,children:a.jsx(Re.div,{"data-side":$,"data-align":ne,...y,ref:j,style:{...y.style,animation:F?void 0:"none"}})})})});zI.displayName=Pw;var GI="PopperArrow",Kz={top:"bottom",right:"left",bottom:"top",left:"right"},WI=p.forwardRef(function(e,r){const{__scopePopper:n,...s}=e,i=Hz(GI,n),o=Kz[i.placedSide];return a.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:a.jsx(Gz,{...s,ref:r,style:{...s.style,display:"block"}})})});WI.displayName=GI;function Yz(t){return t!==null}var Qz=t=>({name:"transformOrigin",options:t,fn(e){var x,b,w;const{placement:r,rects:n,middlewareData:s}=e,o=((x=s.arrow)==null?void 0:x.centerOffset)!==0,l=o?0:t.arrowWidth,c=o?0:t.arrowHeight,[u,d]=qI(r),h={start:"0%",center:"50%",end:"100%"}[d],f=(((b=s.arrow)==null?void 0:b.x)??0)+l/2,m=(((w=s.arrow)==null?void 0:w.y)??0)+c/2;let v="",y="";return u==="bottom"?(v=o?h:`${f}px`,y=`${-c}px`):u==="top"?(v=o?h:`${f}px`,y=`${n.floating.height+c}px`):u==="right"?(v=`${-c}px`,y=o?h:`${m}px`):u==="left"&&(v=`${n.floating.width+c}px`,y=o?h:`${m}px`),{data:{x:v,y}}}});function qI(t){const[e,r="center"]=t.split("-");return[e,r]}var Tg=UI,gh=VI,Cg=zI,kg=WI,[Ig,$Ne]=Dr("Tooltip",[So]),Rg=So(),HI="TooltipProvider",Xz=700,yb="tooltip.open",[Jz,Tw]=Ig(HI),KI=t=>{const{__scopeTooltip:e,delayDuration:r=Xz,skipDelayDuration:n=300,disableHoverableContent:s=!1,children:i}=t,o=p.useRef(!0),l=p.useRef(!1),c=p.useRef(0);return p.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),a.jsx(Jz,{scope:e,isOpenDelayedRef:o,delayDuration:r,onOpen:p.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:p.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,n)},[n]),isPointerInTransitRef:l,onPointerInTransitChange:p.useCallback(u=>{l.current=u},[]),disableHoverableContent:s,children:i})};KI.displayName=HI;var Md="Tooltip",[Zz,Og]=Ig(Md),YI=t=>{const{__scopeTooltip:e,children:r,open:n,defaultOpen:s,onOpenChange:i,disableHoverableContent:o,delayDuration:l}=t,c=Tw(Md,t.__scopeTooltip),u=Rg(e),[d,h]=p.useState(null),f=ys(),m=p.useRef(0),v=o??c.disableHoverableContent,y=l??c.delayDuration,x=p.useRef(!1),[b,w]=Bs({prop:n,defaultProp:s??!1,onChange:T=>{T?(c.onOpen(),document.dispatchEvent(new CustomEvent(yb))):c.onClose(),i==null||i(T)},caller:Md}),j=p.useMemo(()=>b?x.current?"delayed-open":"instant-open":"closed",[b]),E=p.useCallback(()=>{window.clearTimeout(m.current),m.current=0,x.current=!1,w(!0)},[w]),I=p.useCallback(()=>{window.clearTimeout(m.current),m.current=0,w(!1)},[w]),O=p.useCallback(()=>{window.clearTimeout(m.current),m.current=window.setTimeout(()=>{x.current=!0,w(!0),m.current=0},y)},[y,w]);return p.useEffect(()=>()=>{m.current&&(window.clearTimeout(m.current),m.current=0)},[]),a.jsx(Tg,{...u,children:a.jsx(Zz,{scope:e,contentId:f,open:b,stateAttribute:j,trigger:d,onTriggerChange:h,onTriggerEnter:p.useCallback(()=>{c.isOpenDelayedRef.current?O():E()},[c.isOpenDelayedRef,O,E]),onTriggerLeave:p.useCallback(()=>{v?I():(window.clearTimeout(m.current),m.current=0)},[I,v]),onOpen:E,onClose:I,disableHoverableContent:v,children:r})})};YI.displayName=Md;var vb="TooltipTrigger",QI=p.forwardRef((t,e)=>{const{__scopeTooltip:r,...n}=t,s=Og(vb,r),i=Tw(vb,r),o=Rg(r),l=p.useRef(null),c=We(e,l,s.onTriggerChange),u=p.useRef(!1),d=p.useRef(!1),h=p.useCallback(()=>u.current=!1,[]);return p.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),a.jsx(gh,{asChild:!0,...o,children:a.jsx(Re.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...n,ref:c,onPointerMove:ve(t.onPointerMove,f=>{f.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),d.current=!0)}),onPointerLeave:ve(t.onPointerLeave,()=>{s.onTriggerLeave(),d.current=!1}),onPointerDown:ve(t.onPointerDown,()=>{s.open&&s.onClose(),u.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:ve(t.onFocus,()=>{u.current||s.onOpen()}),onBlur:ve(t.onBlur,s.onClose),onClick:ve(t.onClick,s.onClose)})})});QI.displayName=vb;var e7="TooltipPortal",[UNe,t7]=Ig(e7,{forceMount:void 0}),Fc="TooltipContent",XI=p.forwardRef((t,e)=>{const r=t7(Fc,t.__scopeTooltip),{forceMount:n=r.forceMount,side:s="top",...i}=t,o=Og(Fc,t.__scopeTooltip);return a.jsx(Mr,{present:n||o.open,children:o.disableHoverableContent?a.jsx(JI,{side:s,...i,ref:e}):a.jsx(r7,{side:s,...i,ref:e})})}),r7=p.forwardRef((t,e)=>{const r=Og(Fc,t.__scopeTooltip),n=Tw(Fc,t.__scopeTooltip),s=p.useRef(null),i=We(e,s),[o,l]=p.useState(null),{trigger:c,onClose:u}=r,d=s.current,{onPointerInTransitChange:h}=n,f=p.useCallback(()=>{l(null),h(!1)},[h]),m=p.useCallback((v,y)=>{const x=v.currentTarget,b={x:v.clientX,y:v.clientY},w=o7(b,x.getBoundingClientRect()),j=l7(b,w),E=c7(y.getBoundingClientRect()),I=d7([...j,...E]);l(I),h(!0)},[h]);return p.useEffect(()=>()=>f(),[f]),p.useEffect(()=>{if(c&&d){const v=x=>m(x,d),y=x=>m(x,c);return c.addEventListener("pointerleave",v),d.addEventListener("pointerleave",y),()=>{c.removeEventListener("pointerleave",v),d.removeEventListener("pointerleave",y)}}},[c,d,m,f]),p.useEffect(()=>{if(o){const v=y=>{const x=y.target,b={x:y.clientX,y:y.clientY},w=(c==null?void 0:c.contains(x))||(d==null?void 0:d.contains(x)),j=!u7(b,o);w?f():j&&(f(),u())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[c,d,o,u,f]),a.jsx(JI,{...t,ref:i})}),[n7,s7]=Ig(Md,{isInside:!1}),a7=Lk("TooltipContent"),JI=p.forwardRef((t,e)=>{const{__scopeTooltip:r,children:n,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...l}=t,c=Og(Fc,r),u=Rg(r),{onClose:d}=c;return p.useEffect(()=>(document.addEventListener(yb,d),()=>document.removeEventListener(yb,d)),[d]),p.useEffect(()=>{if(c.trigger){const h=f=>{const m=f.target;m!=null&&m.contains(c.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[c.trigger,d]),a.jsx(Vl,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:a.jsxs(Cg,{"data-state":c.stateAttribute,...u,...l,ref:e,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[a.jsx(a7,{children:n}),a.jsx(n7,{scope:r,isInside:!0,children:a.jsx(mV,{id:c.contentId,role:"tooltip",children:s||n})})]})})});XI.displayName=Fc;var ZI="TooltipArrow",i7=p.forwardRef((t,e)=>{const{__scopeTooltip:r,...n}=t,s=Rg(r);return s7(ZI,r).isInside?null:a.jsx(kg,{...s,...n,ref:e})});i7.displayName=ZI;function o7(t,e){const r=Math.abs(e.top-t.y),n=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(r,n,s,i)){case i:return"left";case s:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function l7(t,e,r=5){const n=[];switch(e){case"top":n.push({x:t.x-r,y:t.y+r},{x:t.x+r,y:t.y+r});break;case"bottom":n.push({x:t.x-r,y:t.y-r},{x:t.x+r,y:t.y-r});break;case"left":n.push({x:t.x+r,y:t.y-r},{x:t.x+r,y:t.y+r});break;case"right":n.push({x:t.x-r,y:t.y-r},{x:t.x-r,y:t.y+r});break}return n}function c7(t){const{top:e,right:r,bottom:n,left:s}=t;return[{x:s,y:e},{x:r,y:e},{x:r,y:n},{x:s,y:n}]}function u7(t,e){const{x:r,y:n}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const l=e[i],c=e[o],u=l.x,d=l.y,h=c.x,f=c.y;d>n!=f>n&&r<(h-u)*(n-d)/(f-d)+u&&(s=!s)}return s}function d7(t){const e=t.slice();return e.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),h7(e)}function h7(t){if(t.length<=1)return t.slice();const e=[];for(let n=0;n<t.length;n++){const s=t[n];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const r=[];for(let n=t.length-1;n>=0;n--){const s=t[n];for(;r.length>=2;){const i=r[r.length-1],o=r[r.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))r.pop();else break}r.push(s)}return r.pop(),e.length===1&&r.length===1&&e[0].x===r[0].x&&e[0].y===r[0].y?e:e.concat(r)}var f7=KI,m7=YI,p7=QI,e2=XI;const xb=f7,nA=m7,sA=p7,bb=p.forwardRef(({className:t,sideOffset:e=4,...r},n)=>a.jsx(e2,{ref:n,sideOffset:e,className:ye("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r}));bb.displayName=e2.displayName;var Dg=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Mg=typeof window>"u"||"Deno"in globalThis;function Cs(){}function g7(t,e){return typeof t=="function"?t(e):t}function y7(t){return typeof t=="number"&&t>=0&&t!==1/0}function v7(t,e){return Math.max(t+(e||0)-Date.now(),0)}function wb(t,e){return typeof t=="function"?t(e):t}function x7(t,e){return typeof t=="function"?t(e):t}function aA(t,e){const{type:r="all",exact:n,fetchStatus:s,predicate:i,queryKey:o,stale:l}=t;if(o){if(n){if(e.queryHash!==Cw(o,e.options))return!1}else if(!Fd(e.queryKey,o))return!1}if(r!=="all"){const c=e.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||s&&s!==e.state.fetchStatus||i&&!i(e))}function iA(t,e){const{exact:r,status:n,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(r){if(Ld(e.options.mutationKey)!==Ld(i))return!1}else if(!Fd(e.options.mutationKey,i))return!1}return!(n&&e.state.status!==n||s&&!s(e))}function Cw(t,e){return((e==null?void 0:e.queryKeyHashFn)||Ld)(t)}function Ld(t){return JSON.stringify(t,(e,r)=>jb(r)?Object.keys(r).sort().reduce((n,s)=>(n[s]=r[s],n),{}):r)}function Fd(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(r=>Fd(t[r],e[r])):!1}function t2(t,e){if(t===e)return t;const r=oA(t)&&oA(e);if(r||jb(t)&&jb(e)){const n=r?t:Object.keys(t),s=n.length,i=r?e:Object.keys(e),o=i.length,l=r?[]:{},c=new Set(n);let u=0;for(let d=0;d<o;d++){const h=r?d:i[d];(!r&&c.has(h)||r)&&t[h]===void 0&&e[h]===void 0?(l[h]=void 0,u++):(l[h]=t2(t[h],e[h]),l[h]===t[h]&&t[h]!==void 0&&u++)}return s===o&&u===s?t:l}return e}function oA(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function jb(t){if(!lA(t))return!1;const e=t.constructor;if(e===void 0)return!0;const r=e.prototype;return!(!lA(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function lA(t){return Object.prototype.toString.call(t)==="[object Object]"}function b7(t){return new Promise(e=>{setTimeout(e,t)})}function w7(t,e,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,e):r.structuralSharing!==!1?t2(t,e):e}function j7(t,e,r=0){const n=[...t,e];return r&&n.length>r?n.slice(1):n}function N7(t,e,r=0){const n=[e,...t];return r&&n.length>r?n.slice(0,-1):n}var kw=Symbol();function r2(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===kw?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var al,zi,Tc,jk,_7=(jk=class extends Dg{constructor(){super();gt(this,al);gt(this,zi);gt(this,Tc);Ye(this,Tc,e=>{if(!Mg&&window.addEventListener){const r=()=>e();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){ae(this,zi)||this.setEventListener(ae(this,Tc))}onUnsubscribe(){var e;this.hasListeners()||((e=ae(this,zi))==null||e.call(this),Ye(this,zi,void 0))}setEventListener(e){var r;Ye(this,Tc,e),(r=ae(this,zi))==null||r.call(this),Ye(this,zi,e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(e){ae(this,al)!==e&&(Ye(this,al,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(r=>{r(e)})}isFocused(){var e;return typeof ae(this,al)=="boolean"?ae(this,al):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},al=new WeakMap,zi=new WeakMap,Tc=new WeakMap,jk),n2=new _7,Cc,Gi,kc,Nk,S7=(Nk=class extends Dg{constructor(){super();gt(this,Cc,!0);gt(this,Gi);gt(this,kc);Ye(this,kc,e=>{if(!Mg&&window.addEventListener){const r=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){ae(this,Gi)||this.setEventListener(ae(this,kc))}onUnsubscribe(){var e;this.hasListeners()||((e=ae(this,Gi))==null||e.call(this),Ye(this,Gi,void 0))}setEventListener(e){var r;Ye(this,kc,e),(r=ae(this,Gi))==null||r.call(this),Ye(this,Gi,e(this.setOnline.bind(this)))}setOnline(e){ae(this,Cc)!==e&&(Ye(this,Cc,e),this.listeners.forEach(n=>{n(e)}))}isOnline(){return ae(this,Cc)}},Cc=new WeakMap,Gi=new WeakMap,kc=new WeakMap,Nk),Zm=new S7;function A7(){let t,e;const r=new Promise((s,i)=>{t=s,e=i});r.status="pending",r.catch(()=>{});function n(s){Object.assign(r,s),delete r.resolve,delete r.reject}return r.resolve=s=>{n({status:"fulfilled",value:s}),t(s)},r.reject=s=>{n({status:"rejected",reason:s}),e(s)},r}function E7(t){return Math.min(1e3*2**t,3e4)}function s2(t){return(t??"online")==="online"?Zm.isOnline():!0}var a2=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Yv(t){return t instanceof a2}function i2(t){let e=!1,r=0,n=!1,s;const i=A7(),o=y=>{var x;n||(f(new a2(y)),(x=t.abort)==null||x.call(t))},l=()=>{e=!0},c=()=>{e=!1},u=()=>n2.isFocused()&&(t.networkMode==="always"||Zm.isOnline())&&t.canRun(),d=()=>s2(t.networkMode)&&t.canRun(),h=y=>{var x;n||(n=!0,(x=t.onSuccess)==null||x.call(t,y),s==null||s(),i.resolve(y))},f=y=>{var x;n||(n=!0,(x=t.onError)==null||x.call(t,y),s==null||s(),i.reject(y))},m=()=>new Promise(y=>{var x;s=b=>{(n||u())&&y(b)},(x=t.onPause)==null||x.call(t)}).then(()=>{var y;s=void 0,n||(y=t.onContinue)==null||y.call(t)}),v=()=>{if(n)return;let y;const x=r===0?t.initialPromise:void 0;try{y=x??t.fn()}catch(b){y=Promise.reject(b)}Promise.resolve(y).then(h).catch(b=>{var O;if(n)return;const w=t.retry??(Mg?0:3),j=t.retryDelay??E7,E=typeof j=="function"?j(r,b):j,I=w===!0||typeof w=="number"&&r<w||typeof w=="function"&&w(r,b);if(e||!I){f(b);return}r++,(O=t.onFail)==null||O.call(t,r,b),b7(E).then(()=>u()?void 0:m()).then(()=>{e?f(b):v()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:l,continueRetry:c,canStart:d,start:()=>(d()?v():m().then(v),i)}}var P7=t=>setTimeout(t,0);function T7(){let t=[],e=0,r=l=>{l()},n=l=>{l()},s=P7;const i=l=>{e?t.push(l):s(()=>{r(l)})},o=()=>{const l=t;t=[],l.length&&s(()=>{n(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{s=l}}}var fn=T7(),il,_k,o2=(_k=class{constructor(){gt(this,il)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),y7(this.gcTime)&&Ye(this,il,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Mg?1/0:5*60*1e3))}clearGcTimeout(){ae(this,il)&&(clearTimeout(ae(this,il)),Ye(this,il,void 0))}},il=new WeakMap,_k),Ic,ol,cs,ll,en,uh,cl,ks,Fa,Sk,C7=(Sk=class extends o2{constructor(r){super();gt(this,ks);gt(this,Ic);gt(this,ol);gt(this,cs);gt(this,ll);gt(this,en);gt(this,uh);gt(this,cl);Ye(this,cl,!1),Ye(this,uh,r.defaultOptions),this.setOptions(r.options),this.observers=[],Ye(this,ll,r.client),Ye(this,cs,ae(this,ll).getQueryCache()),this.queryKey=r.queryKey,this.queryHash=r.queryHash,Ye(this,Ic,I7(this.options)),this.state=r.state??ae(this,Ic),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var r;return(r=ae(this,en))==null?void 0:r.promise}setOptions(r){this.options={...ae(this,uh),...r},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&ae(this,cs).remove(this)}setData(r,n){const s=w7(this.state.data,r,this.options);return Jr(this,ks,Fa).call(this,{data:s,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),s}setState(r,n){Jr(this,ks,Fa).call(this,{type:"setState",state:r,setStateOptions:n})}cancel(r){var s,i;const n=(s=ae(this,en))==null?void 0:s.promise;return(i=ae(this,en))==null||i.cancel(r),n?n.then(Cs).catch(Cs):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(ae(this,Ic))}isActive(){return this.observers.some(r=>x7(r.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===kw||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(r=>wb(r.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(r=>r.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(r=0){return this.state.data===void 0?!0:r==="static"?!1:this.state.isInvalidated?!0:!v7(this.state.dataUpdatedAt,r)}onFocus(){var n;const r=this.observers.find(s=>s.shouldFetchOnWindowFocus());r==null||r.refetch({cancelRefetch:!1}),(n=ae(this,en))==null||n.continue()}onOnline(){var n;const r=this.observers.find(s=>s.shouldFetchOnReconnect());r==null||r.refetch({cancelRefetch:!1}),(n=ae(this,en))==null||n.continue()}addObserver(r){this.observers.includes(r)||(this.observers.push(r),this.clearGcTimeout(),ae(this,cs).notify({type:"observerAdded",query:this,observer:r}))}removeObserver(r){this.observers.includes(r)&&(this.observers=this.observers.filter(n=>n!==r),this.observers.length||(ae(this,en)&&(ae(this,cl)?ae(this,en).cancel({revert:!0}):ae(this,en).cancelRetry()),this.scheduleGc()),ae(this,cs).notify({type:"observerRemoved",query:this,observer:r}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Jr(this,ks,Fa).call(this,{type:"invalidate"})}fetch(r,n){var d,h,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(ae(this,en))return ae(this,en).continueRetry(),ae(this,en).promise}if(r&&this.setOptions(r),!this.options.queryFn){const m=this.observers.find(v=>v.options.queryFn);m&&this.setOptions(m.options)}const s=new AbortController,i=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(Ye(this,cl,!0),s.signal)})},o=()=>{const m=r2(this.options,n),y=(()=>{const x={client:ae(this,ll),queryKey:this.queryKey,meta:this.meta};return i(x),x})();return Ye(this,cl,!1),this.options.persister?this.options.persister(m,y,this):m(y)},c=(()=>{const m={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:ae(this,ll),state:this.state,fetchFn:o};return i(m),m})();(d=this.options.behavior)==null||d.onFetch(c,this),Ye(this,ol,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=c.fetchOptions)==null?void 0:h.meta))&&Jr(this,ks,Fa).call(this,{type:"fetch",meta:(f=c.fetchOptions)==null?void 0:f.meta});const u=m=>{var v,y,x,b;Yv(m)&&m.silent||Jr(this,ks,Fa).call(this,{type:"error",error:m}),Yv(m)||((y=(v=ae(this,cs).config).onError)==null||y.call(v,m,this),(b=(x=ae(this,cs).config).onSettled)==null||b.call(x,this.state.data,m,this)),this.scheduleGc()};return Ye(this,en,i2({initialPromise:n==null?void 0:n.initialPromise,fn:c.fetchFn,abort:s.abort.bind(s),onSuccess:m=>{var v,y,x,b;if(m===void 0){u(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(m)}catch(w){u(w);return}(y=(v=ae(this,cs).config).onSuccess)==null||y.call(v,m,this),(b=(x=ae(this,cs).config).onSettled)==null||b.call(x,m,this.state.error,this),this.scheduleGc()},onError:u,onFail:(m,v)=>{Jr(this,ks,Fa).call(this,{type:"failed",failureCount:m,error:v})},onPause:()=>{Jr(this,ks,Fa).call(this,{type:"pause"})},onContinue:()=>{Jr(this,ks,Fa).call(this,{type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode,canRun:()=>!0})),ae(this,en).start()}},Ic=new WeakMap,ol=new WeakMap,cs=new WeakMap,ll=new WeakMap,en=new WeakMap,uh=new WeakMap,cl=new WeakMap,ks=new WeakSet,Fa=function(r){const n=s=>{switch(r.type){case"failed":return{...s,fetchFailureCount:r.failureCount,fetchFailureReason:r.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...k7(s.data,this.options),fetchMeta:r.meta??null};case"success":return Ye(this,ol,void 0),{...s,data:r.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:r.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!r.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=r.error;return Yv(i)&&i.revert&&ae(this,ol)?{...ae(this,ol),fetchStatus:"idle"}:{...s,error:i,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...r.state}}};this.state=n(this.state),fn.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),ae(this,cs).notify({query:this,type:"updated",action:r})})},Sk);function k7(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:s2(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function I7(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,r=e!==void 0,n=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var ea,Ak,R7=(Ak=class extends Dg{constructor(e={}){super();gt(this,ea);this.config=e,Ye(this,ea,new Map)}build(e,r,n){const s=r.queryKey,i=r.queryHash??Cw(s,r);let o=this.get(i);return o||(o=new C7({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(r),state:n,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){ae(this,ea).has(e.queryHash)||(ae(this,ea).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const r=ae(this,ea).get(e.queryHash);r&&(e.destroy(),r===e&&ae(this,ea).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){fn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return ae(this,ea).get(e)}getAll(){return[...ae(this,ea).values()]}find(e){const r={exact:!0,...e};return this.getAll().find(n=>aA(r,n))}findAll(e={}){const r=this.getAll();return Object.keys(e).length>0?r.filter(n=>aA(e,n)):r}notify(e){fn.batch(()=>{this.listeners.forEach(r=>{r(e)})})}onFocus(){fn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){fn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},ea=new WeakMap,Ak),ta,dn,ul,ra,ki,Ek,O7=(Ek=class extends o2{constructor(r){super();gt(this,ra);gt(this,ta);gt(this,dn);gt(this,ul);this.mutationId=r.mutationId,Ye(this,dn,r.mutationCache),Ye(this,ta,[]),this.state=r.state||D7(),this.setOptions(r.options),this.scheduleGc()}setOptions(r){this.options=r,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(r){ae(this,ta).includes(r)||(ae(this,ta).push(r),this.clearGcTimeout(),ae(this,dn).notify({type:"observerAdded",mutation:this,observer:r}))}removeObserver(r){Ye(this,ta,ae(this,ta).filter(n=>n!==r)),this.scheduleGc(),ae(this,dn).notify({type:"observerRemoved",mutation:this,observer:r})}optionalRemove(){ae(this,ta).length||(this.state.status==="pending"?this.scheduleGc():ae(this,dn).remove(this))}continue(){var r;return((r=ae(this,ul))==null?void 0:r.continue())??this.execute(this.state.variables)}async execute(r){var o,l,c,u,d,h,f,m,v,y,x,b,w,j,E,I,O,T,A,S;const n=()=>{Jr(this,ra,ki).call(this,{type:"continue"})};Ye(this,ul,i2({fn:()=>this.options.mutationFn?this.options.mutationFn(r):Promise.reject(new Error("No mutationFn found")),onFail:(_,P)=>{Jr(this,ra,ki).call(this,{type:"failed",failureCount:_,error:P})},onPause:()=>{Jr(this,ra,ki).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>ae(this,dn).canRun(this)}));const s=this.state.status==="pending",i=!ae(this,ul).canStart();try{if(s)n();else{Jr(this,ra,ki).call(this,{type:"pending",variables:r,isPaused:i}),await((l=(o=ae(this,dn).config).onMutate)==null?void 0:l.call(o,r,this));const P=await((u=(c=this.options).onMutate)==null?void 0:u.call(c,r));P!==this.state.context&&Jr(this,ra,ki).call(this,{type:"pending",context:P,variables:r,isPaused:i})}const _=await ae(this,ul).start();return await((h=(d=ae(this,dn).config).onSuccess)==null?void 0:h.call(d,_,r,this.state.context,this)),await((m=(f=this.options).onSuccess)==null?void 0:m.call(f,_,r,this.state.context)),await((y=(v=ae(this,dn).config).onSettled)==null?void 0:y.call(v,_,null,this.state.variables,this.state.context,this)),await((b=(x=this.options).onSettled)==null?void 0:b.call(x,_,null,r,this.state.context)),Jr(this,ra,ki).call(this,{type:"success",data:_}),_}catch(_){try{throw await((j=(w=ae(this,dn).config).onError)==null?void 0:j.call(w,_,r,this.state.context,this)),await((I=(E=this.options).onError)==null?void 0:I.call(E,_,r,this.state.context)),await((T=(O=ae(this,dn).config).onSettled)==null?void 0:T.call(O,void 0,_,this.state.variables,this.state.context,this)),await((S=(A=this.options).onSettled)==null?void 0:S.call(A,void 0,_,r,this.state.context)),_}finally{Jr(this,ra,ki).call(this,{type:"error",error:_})}}finally{ae(this,dn).runNext(this)}}},ta=new WeakMap,dn=new WeakMap,ul=new WeakMap,ra=new WeakSet,ki=function(r){const n=s=>{switch(r.type){case"failed":return{...s,failureCount:r.failureCount,failureReason:r.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:r.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:r.isPaused,status:"pending",variables:r.variables,submittedAt:Date.now()};case"success":return{...s,data:r.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:r.error,failureCount:s.failureCount+1,failureReason:r.error,isPaused:!1,status:"error"}}};this.state=n(this.state),fn.batch(()=>{ae(this,ta).forEach(s=>{s.onMutationUpdate(r)}),ae(this,dn).notify({mutation:this,type:"updated",action:r})})},Ek);function D7(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Ua,Is,dh,Pk,M7=(Pk=class extends Dg{constructor(e={}){super();gt(this,Ua);gt(this,Is);gt(this,dh);this.config=e,Ye(this,Ua,new Set),Ye(this,Is,new Map),Ye(this,dh,0)}build(e,r,n){const s=new O7({mutationCache:this,mutationId:++Tf(this,dh)._,options:e.defaultMutationOptions(r),state:n});return this.add(s),s}add(e){ae(this,Ua).add(e);const r=Df(e);if(typeof r=="string"){const n=ae(this,Is).get(r);n?n.push(e):ae(this,Is).set(r,[e])}this.notify({type:"added",mutation:e})}remove(e){if(ae(this,Ua).delete(e)){const r=Df(e);if(typeof r=="string"){const n=ae(this,Is).get(r);if(n)if(n.length>1){const s=n.indexOf(e);s!==-1&&n.splice(s,1)}else n[0]===e&&ae(this,Is).delete(r)}}this.notify({type:"removed",mutation:e})}canRun(e){const r=Df(e);if(typeof r=="string"){const n=ae(this,Is).get(r),s=n==null?void 0:n.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var n;const r=Df(e);if(typeof r=="string"){const s=(n=ae(this,Is).get(r))==null?void 0:n.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){fn.batch(()=>{ae(this,Ua).forEach(e=>{this.notify({type:"removed",mutation:e})}),ae(this,Ua).clear(),ae(this,Is).clear()})}getAll(){return Array.from(ae(this,Ua))}find(e){const r={exact:!0,...e};return this.getAll().find(n=>iA(r,n))}findAll(e={}){return this.getAll().filter(r=>iA(e,r))}notify(e){fn.batch(()=>{this.listeners.forEach(r=>{r(e)})})}resumePausedMutations(){const e=this.getAll().filter(r=>r.state.isPaused);return fn.batch(()=>Promise.all(e.map(r=>r.continue().catch(Cs))))}},Ua=new WeakMap,Is=new WeakMap,dh=new WeakMap,Pk);function Df(t){var e;return(e=t.options.scope)==null?void 0:e.id}function cA(t){return{onFetch:(e,r)=>{var d,h,f,m,v;const n=e.options,s=(f=(h=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,i=((m=e.state.data)==null?void 0:m.pages)||[],o=((v=e.state.data)==null?void 0:v.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let y=!1;const x=j=>{Object.defineProperty(j,"signal",{enumerable:!0,get:()=>(e.signal.aborted?y=!0:e.signal.addEventListener("abort",()=>{y=!0}),e.signal)})},b=r2(e.options,e.fetchOptions),w=async(j,E,I)=>{if(y)return Promise.reject();if(E==null&&j.pages.length)return Promise.resolve(j);const T=(()=>{const P={client:e.client,queryKey:e.queryKey,pageParam:E,direction:I?"backward":"forward",meta:e.options.meta};return x(P),P})(),A=await b(T),{maxPages:S}=e.options,_=I?N7:j7;return{pages:_(j.pages,A,S),pageParams:_(j.pageParams,E,S)}};if(s&&i.length){const j=s==="backward",E=j?L7:uA,I={pages:i,pageParams:o},O=E(n,I);l=await w(I,O,j)}else{const j=t??i.length;do{const E=c===0?o[0]??n.initialPageParam:uA(n,l);if(c>0&&E==null)break;l=await w(l,E),c++}while(c<j)}return l};e.options.persister?e.fetchFn=()=>{var y,x;return(x=(y=e.options).persister)==null?void 0:x.call(y,u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},r)}:e.fetchFn=u}}}function uA(t,{pages:e,pageParams:r}){const n=e.length-1;return e.length>0?t.getNextPageParam(e[n],e,r[n],r):void 0}function L7(t,{pages:e,pageParams:r}){var n;return e.length>0?(n=t.getPreviousPageParam)==null?void 0:n.call(t,e[0],e,r[0],r):void 0}var sr,Wi,qi,Rc,Oc,Hi,Dc,Mc,Tk,F7=(Tk=class{constructor(t={}){gt(this,sr);gt(this,Wi);gt(this,qi);gt(this,Rc);gt(this,Oc);gt(this,Hi);gt(this,Dc);gt(this,Mc);Ye(this,sr,t.queryCache||new R7),Ye(this,Wi,t.mutationCache||new M7),Ye(this,qi,t.defaultOptions||{}),Ye(this,Rc,new Map),Ye(this,Oc,new Map),Ye(this,Hi,0)}mount(){Tf(this,Hi)._++,ae(this,Hi)===1&&(Ye(this,Dc,n2.subscribe(async t=>{t&&(await this.resumePausedMutations(),ae(this,sr).onFocus())})),Ye(this,Mc,Zm.subscribe(async t=>{t&&(await this.resumePausedMutations(),ae(this,sr).onOnline())})))}unmount(){var t,e;Tf(this,Hi)._--,ae(this,Hi)===0&&((t=ae(this,Dc))==null||t.call(this),Ye(this,Dc,void 0),(e=ae(this,Mc))==null||e.call(this),Ye(this,Mc,void 0))}isFetching(t){return ae(this,sr).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return ae(this,Wi).findAll({...t,status:"pending"}).length}getQueryData(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=ae(this,sr).get(e.queryHash))==null?void 0:r.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),r=ae(this,sr).build(this,e),n=r.state.data;return n===void 0?this.fetchQuery(t):(t.revalidateIfStale&&r.isStaleByTime(wb(e.staleTime,r))&&this.prefetchQuery(e),Promise.resolve(n))}getQueriesData(t){return ae(this,sr).findAll(t).map(({queryKey:e,state:r})=>{const n=r.data;return[e,n]})}setQueryData(t,e,r){const n=this.defaultQueryOptions({queryKey:t}),s=ae(this,sr).get(n.queryHash),i=s==null?void 0:s.state.data,o=g7(e,i);if(o!==void 0)return ae(this,sr).build(this,n).setData(o,{...r,manual:!0})}setQueriesData(t,e,r){return fn.batch(()=>ae(this,sr).findAll(t).map(({queryKey:n})=>[n,this.setQueryData(n,e,r)]))}getQueryState(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=ae(this,sr).get(e.queryHash))==null?void 0:r.state}removeQueries(t){const e=ae(this,sr);fn.batch(()=>{e.findAll(t).forEach(r=>{e.remove(r)})})}resetQueries(t,e){const r=ae(this,sr);return fn.batch(()=>(r.findAll(t).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const r={revert:!0,...e},n=fn.batch(()=>ae(this,sr).findAll(t).map(s=>s.cancel(r)));return Promise.all(n).then(Cs).catch(Cs)}invalidateQueries(t,e={}){return fn.batch(()=>(ae(this,sr).findAll(t).forEach(r=>{r.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const r={...e,cancelRefetch:e.cancelRefetch??!0},n=fn.batch(()=>ae(this,sr).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,r);return r.throwOnError||(i=i.catch(Cs)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(Cs)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const r=ae(this,sr).build(this,e);return r.isStaleByTime(wb(e.staleTime,r))?r.fetch(e):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Cs).catch(Cs)}fetchInfiniteQuery(t){return t.behavior=cA(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Cs).catch(Cs)}ensureInfiniteQueryData(t){return t.behavior=cA(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Zm.isOnline()?ae(this,Wi).resumePausedMutations():Promise.resolve()}getQueryCache(){return ae(this,sr)}getMutationCache(){return ae(this,Wi)}getDefaultOptions(){return ae(this,qi)}setDefaultOptions(t){Ye(this,qi,t)}setQueryDefaults(t,e){ae(this,Rc).set(Ld(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...ae(this,Rc).values()],r={};return e.forEach(n=>{Fd(t,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(t,e){ae(this,Oc).set(Ld(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...ae(this,Oc).values()],r={};return e.forEach(n=>{Fd(t,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(t){if(t._defaulted)return t;const e={...ae(this,qi).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Cw(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===kw&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...ae(this,qi).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){ae(this,sr).clear(),ae(this,Wi).clear()}},sr=new WeakMap,Wi=new WeakMap,qi=new WeakMap,Rc=new WeakMap,Oc=new WeakMap,Hi=new WeakMap,Dc=new WeakMap,Mc=new WeakMap,Tk),$7=p.createContext(void 0),U7=({client:t,children:e})=>(p.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),a.jsx($7.Provider,{value:t,children:e}));const B7=()=>{const t=Bl();return p.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",t.pathname)},[t.pathname]),a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),a.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),a.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},$d=fh("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all duration-300 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary-hover shadow-primary hover:shadow-glow",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90 hover:shadow-lg",outline:"border border-input glass-button hover:border-primary/50 hover:shadow-glow",secondary:"glass-button text-secondary-foreground hover:bg-secondary/60",ghost:"hover:bg-accent/10 hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline hover:text-primary-hover"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),K=p.forwardRef(({className:t,variant:e,size:r,asChild:n=!1,...s},i)=>{const o=n?WB:"button";return a.jsx(o,{className:ye($d({variant:e,size:r,className:t})),ref:i,...s})});K.displayName="Button";const H=p.forwardRef(({className:t,...e},r)=>a.jsx("div",{ref:r,className:ye("rounded-lg border-border/50 text-card-foreground overflow-x-hidden glass-card",t),...e}));H.displayName="Card";const me=p.forwardRef(({className:t,...e},r)=>a.jsx("div",{ref:r,className:ye("flex flex-col space-y-1.5 p-2 sm:p-4 md:p-6",t),...e}));me.displayName="CardHeader";const ge=p.forwardRef(({className:t,...e},r)=>a.jsx("h3",{ref:r,className:ye("text-2xl font-semibold leading-none tracking-tight",t),...e}));ge.displayName="CardTitle";const Qe=p.forwardRef(({className:t,...e},r)=>a.jsx("p",{ref:r,className:ye("text-sm text-muted-foreground",t),...e}));Qe.displayName="CardDescription";const Y=p.forwardRef(({className:t,...e},r)=>a.jsx("div",{ref:r,className:ye("p-2 sm:p-4 md:p-6 pt-0",t),...e}));Y.displayName="CardContent";const Iw=p.forwardRef(({className:t,...e},r)=>a.jsx("div",{ref:r,className:ye("flex items-center p-2 sm:p-4 md:p-6 pt-0",t),...e}));Iw.displayName="CardFooter";const V7=()=>{const t=cr(),[e,r]=p.useState(!1),[n,s]=p.useState(!1);p.useEffect(()=>{const d=()=>{s(window.scrollY>20)};return window.addEventListener("scroll",d),()=>window.removeEventListener("scroll",d)},[]);const i=[{name:"Real Estate Agents",icon:Ji},{name:"Automotive Repair",icon:g9},{name:"Beauty Salons",icon:c9},{name:"Construction Contractors",icon:HV},{name:"Fitness Centers",icon:GV},{name:"Pest Control",icon:LV},{name:"Home Services",icon:YV},{name:"Restaurants & Cafes",icon:VV},{name:"Law Firms",icon:l9},{name:"Medical Practices",icon:d9}],o=[{icon:Fs,title:"AI SEO Audit",description:"Complete audits of your Google Business Profile to find problems, correct them, and find hidden ranking opportunities."},{icon:Js,title:"Keyword Finder",description:"Discover the keywords your clients are searching for to bring you the most business at the right moment."},{icon:Kn,title:"Auto Posting",description:"Keep your profile current with keyword-rich content uploaded automatically to boost local exposure."},{icon:ri,title:"AI Review Generator",description:"Get meaningful responses to every customer review instantly, improving trust and customer relationships."},{icon:co,title:"AI Review Writer",description:"Professional and engaging reviews written by AI, saving you time while maintaining consistent brand voice."},{icon:Ya,title:"Performance Analytics",description:"Clear reports and measurable results showing your Google Business Profile climbing higher through local SEO."}],l=[{number:"01",title:"Exclusive Partnership",description:"We only onboard three clients per specialty in each location, ensuring you enjoy full benefits without competing for attention."},{number:"02",title:"Data-Driven System",description:"Our AI-driven SEO uses the right keywords, reviews, and ranking signals to boost your search position. Every move is data-backed."},{number:"03",title:"Rankings You Can See",description:"Clear reports and measurable results ensuring your Google Business Profile climbs higher through AI-driven optimization."},{number:"04",title:"Strategy That Fits You",description:"Hire a growth strategist who knows your market and can design the playbook just for you. No one-size-fits-all approach."}],c=[{name:"Sarah Johnson",role:"Business Owner",content:"Google Ranker's AI made SEO effortless for us. It analyzed, optimized, and boosted our rankings faster than any agency ever did."},{name:"Michael Chen",role:"Restaurant Owner",content:"This AI tool simplified everything — from keyword research to site audits. Our organic growth skyrocketed within weeks."},{name:"Jennifer Martinez",role:"Salon Owner",content:"Google Ranker saves hours of manual SEO work. Smart, accurate, and genuinely powerful for scaling online visibility."}],u=[{question:"How does AI make Google Business Profile work better?",answer:"AI improves your profile by finding significant local trends, automatically optimizing keywords, and keeping your information up to date. This makes you show up higher when people search for businesses around them."},{question:"Why is AI important for small businesses to be seen?",answer:"AI makes things fairer by ensuring consistency, predicting what customers want, and giving smaller firms tools that are just as good as enterprise-level SEO tools for a lot less money."},{question:"In what ways does AI make it easier to manage reviews?",answer:"AI tools quickly write personalized comments to reviews, figure out the tone, and highlight useful information that can help you improve your online reputation and customer trust while saving hours every week."},{question:"What is special about targeting keywords with AI?",answer:"AI doesn't just choose common words. It looks at what people want, what your competitors are doing, and how people search in your area to find long-tail phrases that work better and help you show up more in local searches."}];return a.jsxs("div",{className:"min-h-screen bg-background text-foreground",children:[a.jsxs("nav",{className:`fixed top-0 left-0 right-0 z-50 transition-all duration-300 ${n?"bg-background/95 backdrop-blur-lg border-b border-border shadow-lg":"bg-transparent"}`,children:[a.jsx("div",{className:"container mx-auto px-4 lg:px-8",children:a.jsxs("div",{className:"flex items-center justify-between h-20",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-primary blur-xl opacity-50"}),a.jsx(ps,{className:"h-8 w-8 text-primary relative"})]}),a.jsx("span",{className:"text-2xl font-bold bg-gradient-to-r from-primary via-primary-hover to-primary-glow bg-clip-text text-transparent",children:"Google Ranker"})]}),a.jsxs("div",{className:"hidden lg:flex items-center space-x-8",children:[a.jsx("a",{href:"#home",className:"text-muted-foreground hover:text-foreground transition-colors",children:"Home"}),a.jsx("a",{href:"#features",className:"text-muted-foreground hover:text-foreground transition-colors",children:"Features"}),a.jsx("a",{href:"#pricing",className:"text-muted-foreground hover:text-foreground transition-colors",children:"Pricing"}),a.jsx("a",{href:"#faq",className:"text-muted-foreground hover:text-foreground transition-colors",children:"FAQ"}),a.jsx(K,{variant:"ghost",onClick:()=>t("/login"),className:"text-foreground hover:text-primary",children:"Login"}),a.jsx(K,{onClick:()=>t("/signup"),className:"bg-gradient-primary hover:shadow-primary transition-all duration-300",children:"Get 15 Days Free Trial"})]}),a.jsx("button",{className:"lg:hidden p-2 rounded-lg hover:bg-card transition-colors",onClick:()=>r(!e),children:e?a.jsx(Hs,{className:"h-6 w-6"}):a.jsx(Wm,{className:"h-6 w-6"})})]})}),e&&a.jsx("div",{className:"lg:hidden bg-card/95 backdrop-blur-lg border-t border-border",children:a.jsxs("div",{className:"container mx-auto px-4 py-6 space-y-4",children:[a.jsx("a",{href:"#home",className:"block py-2 text-muted-foreground hover:text-foreground transition-colors",children:"Home"}),a.jsx("a",{href:"#features",className:"block py-2 text-muted-foreground hover:text-foreground transition-colors",children:"Features"}),a.jsx("a",{href:"#pricing",className:"block py-2 text-muted-foreground hover:text-foreground transition-colors",children:"Pricing"}),a.jsx("a",{href:"#faq",className:"block py-2 text-muted-foreground hover:text-foreground transition-colors",children:"FAQ"}),a.jsx(K,{variant:"outline",className:"w-full",onClick:()=>t("/login"),children:"Login"}),a.jsx(K,{className:"w-full bg-gradient-primary",onClick:()=>t("/signup"),children:"Get 15 Days Free Trial"})]})})]}),a.jsxs("section",{id:"home",className:"relative pt-32 pb-20 lg:pt-40 lg:pb-32 overflow-hidden",children:[a.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[a.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-primary/20 rounded-full blur-3xl animate-pulse"}),a.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-primary-glow/20 rounded-full blur-3xl animate-pulse delay-1000"})]}),a.jsx("div",{className:"container mx-auto px-4 lg:px-8 relative z-10",children:a.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[a.jsxs("div",{className:"inline-flex items-center space-x-2 bg-card/50 backdrop-blur-sm border border-border rounded-full px-4 py-2 mb-8 animate-fade-in",children:[a.jsx(co,{className:"h-4 w-4 text-primary"}),a.jsx("span",{className:"text-sm text-muted-foreground",children:"AI-Powered Local SEO"})]}),a.jsxs("h1",{className:"text-5xl lg:text-7xl font-bold mb-6 leading-tight animate-slide-up",children:["Dominate Local Search with"," ",a.jsx("span",{className:"bg-gradient-to-r from-primary via-primary-hover to-primary-glow bg-clip-text text-transparent",children:"AI"})]}),a.jsx("p",{className:"text-xl lg:text-2xl text-muted-foreground mb-12 animate-slide-up animation-delay-200",children:"Enhance your Google Business Profile with Google Ranker's AI tools. Grow easily with postings, managing reviews, and ranking higher."}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center animate-slide-up animation-delay-400",children:[a.jsxs(K,{size:"lg",className:"bg-gradient-primary hover:shadow-primary transition-all duration-300 text-lg px-8 py-6",onClick:()=>t("/signup"),children:["Get Your 15 Days Free Trial",a.jsx(Bm,{className:"ml-2 h-5 w-5"})]}),a.jsx(K,{size:"lg",variant:"outline",className:"text-lg px-8 py-6 border-2 hover:bg-card",onClick:()=>t("/login"),children:"Already Registered"})]}),a.jsxs("div",{className:"mt-12 flex items-center justify-center space-x-2 text-sm text-muted-foreground",children:[a.jsx(gs,{className:"h-4 w-4"}),a.jsxs("span",{children:["Join ",a.jsx("span",{className:"text-primary font-semibold",children:"536+"})," businesses already growing"]})]})]})})]}),a.jsx("section",{className:"py-20 bg-card/30",children:a.jsxs("div",{className:"container mx-auto px-4 lg:px-8",children:[a.jsxs("div",{className:"max-w-3xl mx-auto text-center mb-16",children:[a.jsxs("h2",{className:"text-4xl lg:text-5xl font-bold mb-6",children:["The Blueprint for"," ",a.jsx("span",{className:"bg-gradient-to-r from-primary to-primary-glow bg-clip-text text-transparent",children:"Local Market Domination"})]}),a.jsx("p",{className:"text-lg text-muted-foreground",children:"It's not enough to merely be online. Google Ranker helps your business become the go-to choice in your city. Through our exclusive model, we partner with only 3 firms per niche per location."})]}),a.jsx("div",{className:"grid md:grid-cols-2 gap-8",children:l.map((d,h)=>a.jsx(H,{className:"bg-card/50 backdrop-blur-sm border-border hover:border-primary/50 transition-all duration-300 group",children:a.jsx(Y,{className:"p-8",children:a.jsxs("div",{className:"flex items-start space-x-4",children:[a.jsx("div",{className:"text-4xl font-bold text-primary/30 group-hover:text-primary transition-colors",children:d.number}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold mb-3",children:d.title}),a.jsx("p",{className:"text-muted-foreground",children:d.description})]})]})})},h))})]})}),a.jsx("section",{className:"py-20",children:a.jsxs("div",{className:"container mx-auto px-4 lg:px-8",children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsx("h2",{className:"text-3xl lg:text-4xl font-bold mb-4",children:"Built for Every Industry"}),a.jsx("p",{className:"text-lg text-muted-foreground",children:"Trusted by professionals across diverse sectors"})]}),a.jsx("div",{className:"relative overflow-hidden",children:a.jsx("div",{className:"flex animate-scroll",children:[...i,...i].map((d,h)=>a.jsxs("div",{className:"flex-shrink-0 mx-4 flex items-center space-x-3 bg-card/50 backdrop-blur-sm border border-border rounded-full px-6 py-3 hover:border-primary/50 transition-colors",children:[a.jsx(d.icon,{className:"h-5 w-5 text-primary"}),a.jsx("span",{className:"text-sm font-medium whitespace-nowrap",children:d.name})]},h))})})]})}),a.jsx("section",{id:"features",className:"py-20 bg-card/30",children:a.jsxs("div",{className:"container mx-auto px-4 lg:px-8",children:[a.jsxs("div",{className:"max-w-3xl mx-auto text-center mb-16",children:[a.jsxs("div",{className:"inline-flex items-center space-x-2 bg-primary/10 border border-primary/30 rounded-full px-4 py-2 mb-6",children:[a.jsx(Sg,{className:"h-4 w-4 text-primary"}),a.jsx("span",{className:"text-sm text-primary font-medium",children:"Powerful Features"})]}),a.jsx("h2",{className:"text-4xl lg:text-5xl font-bold mb-6",children:"All-in-One GMB Center"}),a.jsx("p",{className:"text-lg text-muted-foreground",children:"Control multiple business profiles and locations from one simple dashboard. See everything about your Google Business presence at a glance."})]}),a.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:o.map((d,h)=>a.jsx(H,{className:"bg-card/50 backdrop-blur-sm border-border hover:border-primary/50 transition-all duration-300 group hover:shadow-primary/20 hover:shadow-xl",children:a.jsxs(Y,{className:"p-8",children:[a.jsxs("div",{className:"relative inline-block mb-4",children:[a.jsx("div",{className:"absolute inset-0 bg-primary/20 blur-xl rounded-full group-hover:bg-primary/40 transition-all"}),a.jsx(d.icon,{className:"h-12 w-12 text-primary relative"})]}),a.jsx("h3",{className:"text-xl font-bold mb-3",children:d.title}),a.jsx("p",{className:"text-muted-foreground",children:d.description})]})},h))})]})}),a.jsx("section",{id:"pricing",className:"py-20",children:a.jsxs("div",{className:"container mx-auto px-4 lg:px-8",children:[a.jsxs("div",{className:"max-w-3xl mx-auto text-center mb-16",children:[a.jsxs("h2",{className:"text-4xl lg:text-5xl font-bold mb-6",children:["Your First 15 Days are"," ",a.jsx("span",{className:"bg-gradient-to-r from-primary to-primary-glow bg-clip-text text-transparent",children:"FREE"})]}),a.jsx("p",{className:"text-xl text-muted-foreground",children:"Choose the plan that works best for you"})]}),a.jsxs("div",{className:"grid md:grid-cols-3 gap-8 max-w-6xl mx-auto",children:[a.jsx(H,{className:"bg-card/50 backdrop-blur-sm border-border hover:border-primary/50 transition-all duration-300",children:a.jsxs(Y,{className:"p-8",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-2xl font-bold mb-2",children:"1 Month Plan"}),a.jsx("div",{className:"flex items-baseline",children:a.jsx("span",{className:"text-4xl font-bold",children:"₹1099"})})]}),a.jsx("div",{className:"space-y-3 mb-8",children:["Auto-Post Scheduling","Review Management & Auto-Reply","Performance Analytics","Advanced Analytics","API Access","Priority Support","Unlimited Google Business Profiles"].map((d,h)=>a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Zi,{className:"h-4 w-4 text-primary flex-shrink-0"}),a.jsx("span",{className:"text-sm text-muted-foreground",children:d})]},h))}),a.jsx(K,{className:"w-full bg-gradient-primary hover:shadow-primary transition-all duration-300",onClick:()=>t("/signup"),children:"Get Started"})]})}),a.jsx(H,{className:"bg-card/50 backdrop-blur-sm border-border hover:border-primary/50 transition-all duration-300",children:a.jsxs(Y,{className:"p-8",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-2xl font-bold mb-2",children:"6 Months Plan"}),a.jsx("div",{className:"flex items-baseline",children:a.jsx("span",{className:"text-4xl font-bold",children:"₹5999"})}),a.jsx("p",{className:"text-sm text-primary mt-2",children:"Save ₹600 compared to monthly"})]}),a.jsx("div",{className:"space-y-3 mb-8",children:["Auto-Post Scheduling","Review Management & Auto-Reply","Performance Analytics","Advanced Analytics","API Access","Priority Support","Unlimited Google Business Profiles"].map((d,h)=>a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Zi,{className:"h-4 w-4 text-primary flex-shrink-0"}),a.jsx("span",{className:"text-sm text-muted-foreground",children:d})]},h))}),a.jsx(K,{className:"w-full bg-gradient-primary hover:shadow-primary transition-all duration-300",onClick:()=>t("/signup"),children:"Get Started"})]})}),a.jsxs(H,{className:"bg-gradient-primary border-0 relative overflow-hidden group",children:[a.jsx("div",{className:"absolute top-4 right-4 bg-green-500 text-white text-xs font-bold px-3 py-1 rounded-full z-20",children:"Best Value"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/50 to-primary-glow/50 blur-2xl opacity-50 group-hover:opacity-70 transition-opacity"}),a.jsxs(Y,{className:"p-8 relative z-10",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-2xl font-bold mb-2",children:"1 Year Plan"}),a.jsx("div",{className:"flex items-baseline",children:a.jsx("span",{className:"text-4xl font-bold",children:"₹9999"})}),a.jsx("p",{className:"text-sm mt-2 opacity-90",children:"Best Value - Save ₹3189 per year"})]}),a.jsx("div",{className:"space-y-3 mb-8",children:["Auto-Post Scheduling","Review Management & Auto-Reply","Performance Analytics","Advanced Analytics","API Access","Priority Support","Unlimited Google Business Profiles"].map((d,h)=>a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Zi,{className:"h-4 w-4 flex-shrink-0"}),a.jsx("span",{className:"text-sm",children:d})]},h))}),a.jsx(K,{className:"w-full bg-white text-primary hover:bg-white/90 transition-all duration-300",onClick:()=>t("/signup"),children:"Get Started"})]})]})]})]})}),a.jsx("section",{className:"py-20 bg-card/30",children:a.jsx("div",{className:"container mx-auto px-4 lg:px-8",children:a.jsxs("div",{className:"max-w-4xl mx-auto",children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsx(MV,{className:"h-16 w-16 text-primary mx-auto mb-6"}),a.jsx("h2",{className:"text-4xl lg:text-5xl font-bold mb-6",children:"The Google Ranker Story"})]}),a.jsx(H,{className:"bg-card/50 backdrop-blur-sm border-border",children:a.jsxs(Y,{className:"p-8 lg:p-12",children:[a.jsx("p",{className:"text-lg text-muted-foreground leading-relaxed mb-6",children:"Google Ranker was built on one realization: small businesses are the backbone of local communities, yet many struggle to gain online visibility. Even with excellent services, many local businesses stay invisible on Google."}),a.jsx("p",{className:"text-lg text-muted-foreground leading-relaxed mb-6",children:"Our goal was clear: give these companies solid, easy-to-use tools. We are experts in Local SEO, and we utilize AI to help businesses expand, keep their good names, and turn internet searches into real customers."}),a.jsx("p",{className:"text-lg text-foreground font-medium",children:"With our intelligent local SEO and AI reputation tools, clients don't just stay visible — they grow, rank higher, and convert better in their local markets."})]})})]})})}),a.jsx("section",{className:"py-20",children:a.jsxs("div",{className:"container mx-auto px-4 lg:px-8",children:[a.jsxs("div",{className:"text-center mb-16",children:[a.jsx("h2",{className:"text-4xl lg:text-5xl font-bold mb-6",children:"Join Our Growing Community"}),a.jsx("p",{className:"text-lg text-muted-foreground",children:"Hear what business owners say about Google Ranker"})]}),a.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:c.map((d,h)=>a.jsx(H,{className:"bg-card/50 backdrop-blur-sm border-border hover:border-primary/50 transition-all duration-300",children:a.jsxs(Y,{className:"p-8",children:[a.jsx("div",{className:"flex mb-4",children:[...Array(5)].map((f,m)=>a.jsx(ms,{className:"h-5 w-5 fill-primary text-primary"},m))}),a.jsxs("p",{className:"text-muted-foreground mb-6 italic",children:['"',d.content,'"']}),a.jsxs("div",{children:[a.jsx("div",{className:"font-bold",children:d.name}),a.jsx("div",{className:"text-sm text-muted-foreground",children:d.role})]})]})},h))})]})}),a.jsx("section",{id:"faq",className:"py-20 bg-card/30",children:a.jsx("div",{className:"container mx-auto px-4 lg:px-8",children:a.jsxs("div",{className:"max-w-3xl mx-auto",children:[a.jsx("div",{className:"text-center mb-16",children:a.jsx("h2",{className:"text-4xl lg:text-5xl font-bold mb-6",children:"Frequently Asked Questions"})}),a.jsx("div",{className:"space-y-6",children:u.map((d,h)=>a.jsx(H,{className:"bg-card/50 backdrop-blur-sm border-border hover:border-primary/50 transition-all duration-300",children:a.jsxs(Y,{className:"p-8",children:[a.jsx("h3",{className:"text-xl font-bold mb-4",children:d.question}),a.jsx("p",{className:"text-muted-foreground leading-relaxed",children:d.answer})]})},h))})]})})}),a.jsxs("section",{className:"py-20 relative overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-primary opacity-10"}),a.jsx("div",{className:"container mx-auto px-4 lg:px-8 relative z-10",children:a.jsxs("div",{className:"max-w-3xl mx-auto text-center",children:[a.jsx("h2",{className:"text-4xl lg:text-5xl font-bold mb-6",children:"Start Dominating Local Search Today"}),a.jsx("p",{className:"text-xl text-muted-foreground mb-12",children:"Let our AI automate your posts and manage reviews, turning your GMB profile into your #1 source for new customers."}),a.jsxs(K,{size:"lg",className:"bg-gradient-primary hover:shadow-primary transition-all duration-300 text-lg px-12 py-6",onClick:()=>t("/signup"),children:["Get Your 15 Days Free Trial",a.jsx(Bm,{className:"ml-2 h-6 w-6"})]})]})})]}),a.jsx("footer",{className:"bg-card/50 backdrop-blur-sm border-t border-border py-12",children:a.jsxs("div",{className:"container mx-auto px-4 lg:px-8",children:[a.jsxs("div",{className:"grid md:grid-cols-4 gap-8 mb-12",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[a.jsx(ps,{className:"h-6 w-6 text-primary"}),a.jsx("span",{className:"text-xl font-bold",children:"Google Ranker"})]}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Built By AI experts in INDIA, Made for U.S.A Local Businesses"})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-bold mb-4",children:"Quick Links"}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("a",{href:"#home",className:"block text-sm text-muted-foreground hover:text-primary transition-colors",children:"Home"}),a.jsx("a",{href:"#features",className:"block text-sm text-muted-foreground hover:text-primary transition-colors",children:"Features"}),a.jsx("a",{href:"#pricing",className:"block text-sm text-muted-foreground hover:text-primary transition-colors",children:"Pricing"}),a.jsx("a",{href:"#faq",className:"block text-sm text-muted-foreground hover:text-primary transition-colors",children:"FAQ"})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-bold mb-4",children:"Legal"}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(yt,{to:"/terms",className:"block text-sm text-muted-foreground hover:text-primary transition-colors",children:"Terms & Conditions"}),a.jsx(yt,{to:"/privacy",className:"block text-sm text-muted-foreground hover:text-primary transition-colors",children:"Privacy Policy"}),a.jsx(yt,{to:"/refund",className:"block text-sm text-muted-foreground hover:text-primary transition-colors",children:"Refund Policy"})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-bold mb-4",children:"Contact"}),a.jsx(yt,{to:"/contact",className:"block text-sm text-muted-foreground hover:text-primary transition-colors mb-4",children:"Contact Us"})]})]}),a.jsx("div",{className:"border-t border-border pt-8 text-center",children:a.jsx("p",{className:"text-sm text-muted-foreground",children:"© 2024 Google Ranker. All rights reserved."})})]})})]})},z7=()=>a.jsxs("div",{className:"min-h-screen bg-background text-foreground",children:[a.jsx("nav",{className:"bg-card/50 backdrop-blur-lg border-b border-border",children:a.jsx("div",{className:"container mx-auto px-4 lg:px-8",children:a.jsxs("div",{className:"flex items-center justify-between h-20",children:[a.jsxs(yt,{to:"/",className:"flex items-center space-x-2",children:[a.jsx(ps,{className:"h-8 w-8 text-primary"}),a.jsx("span",{className:"text-2xl font-bold bg-gradient-to-r from-primary via-primary-hover to-primary-glow bg-clip-text text-transparent",children:"Google Ranker"})]}),a.jsx(yt,{to:"/",children:a.jsxs(K,{variant:"ghost",children:[a.jsx(dl,{className:"mr-2 h-4 w-4"}),"Back to Home"]})})]})})}),a.jsx("div",{className:"container mx-auto px-4 lg:px-8 py-20",children:a.jsxs("div",{className:"max-w-4xl mx-auto",children:[a.jsx("h1",{className:"text-4xl lg:text-5xl font-bold mb-6",children:"Terms and Conditions"}),a.jsxs("p",{className:"text-muted-foreground mb-12",children:["Last updated: ",new Date().toLocaleDateString()]}),a.jsx(H,{className:"bg-card/50 backdrop-blur-sm border-border mb-8",children:a.jsxs(Y,{className:"p-8 space-y-6",children:[a.jsxs("section",{children:[a.jsx("h2",{className:"text-2xl font-bold mb-4",children:"1. Acceptance of Terms"}),a.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"By accessing and using Google Ranker's services, you accept and agree to be bound by the terms and provision of this agreement. If you do not agree to abide by the above, please do not use this service."})]}),a.jsxs("section",{children:[a.jsx("h2",{className:"text-2xl font-bold mb-4",children:"2. Service Description"}),a.jsx("p",{className:"text-muted-foreground leading-relaxed mb-4",children:"Google Ranker provides AI-powered local SEO and Google Business Profile management services. Our services include:"}),a.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-2 ml-4",children:[a.jsx("li",{children:"Automated posting to Google Business Profile"}),a.jsx("li",{children:"AI-powered review management and response generation"}),a.jsx("li",{children:"SEO audit and keyword research tools"}),a.jsx("li",{children:"Performance analytics and reporting"}),a.jsx("li",{children:"Multi-profile management dashboard"})]})]}),a.jsxs("section",{children:[a.jsx("h2",{className:"text-2xl font-bold mb-4",children:"3. Free Trial"}),a.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"We offer a 15-day free trial period for new users. During this period, you have full access to all features. After the trial period expires, you must subscribe to continue using our services. If you do not wish to continue, you can cancel at any time before the trial ends."})]}),a.jsxs("section",{children:[a.jsx("h2",{className:"text-2xl font-bold mb-4",children:"4. Subscription and Billing"}),a.jsx("p",{className:"text-muted-foreground leading-relaxed mb-4",children:"Our services are billed annually at $99 per Google Business Profile. By subscribing to our service, you agree to:"}),a.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-2 ml-4",children:[a.jsx("li",{children:"Provide accurate billing information"}),a.jsx("li",{children:"Pay all applicable fees and taxes"}),a.jsx("li",{children:"Automatic renewal of your subscription unless cancelled"}),a.jsx("li",{children:"Price changes with 30 days notice"})]})]}),a.jsxs("section",{children:[a.jsx("h2",{className:"text-2xl font-bold mb-4",children:"5. User Responsibilities"}),a.jsx("p",{className:"text-muted-foreground leading-relaxed mb-4",children:"You agree to:"}),a.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-2 ml-4",children:[a.jsx("li",{children:"Provide accurate and complete information"}),a.jsx("li",{children:"Maintain the security of your account credentials"}),a.jsx("li",{children:"Not share your account with others"}),a.jsx("li",{children:"Use the service in compliance with all applicable laws"}),a.jsx("li",{children:"Not abuse or misuse our services"})]})]}),a.jsxs("section",{children:[a.jsx("h2",{className:"text-2xl font-bold mb-4",children:"6. Intellectual Property"}),a.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"All content, features, and functionality of Google Ranker are owned by us and are protected by international copyright, trademark, and other intellectual property laws. You may not copy, modify, distribute, or reverse engineer any part of our services."})]}),a.jsxs("section",{children:[a.jsx("h2",{className:"text-2xl font-bold mb-4",children:"7. Limitation of Liability"}),a.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"Google Ranker shall not be liable for any indirect, incidental, special, consequential, or punitive damages resulting from your use or inability to use the service. We do not guarantee specific ranking improvements or business outcomes."})]}),a.jsxs("section",{children:[a.jsx("h2",{className:"text-2xl font-bold mb-4",children:"8. Termination"}),a.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"We reserve the right to terminate or suspend your account at any time for violating these terms. You may cancel your subscription at any time through your account settings."})]}),a.jsxs("section",{children:[a.jsx("h2",{className:"text-2xl font-bold mb-4",children:"9. Changes to Terms"}),a.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"We reserve the right to modify these terms at any time. We will notify users of significant changes via email or through the platform. Continued use of the service after changes constitutes acceptance of the new terms."})]}),a.jsxs("section",{children:[a.jsx("h2",{className:"text-2xl font-bold mb-4",children:"10. Contact Information"}),a.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"For questions about these Terms and Conditions, please contact us through our website's contact form."})]})]})}),a.jsx("div",{className:"text-center",children:a.jsx(yt,{to:"/",children:a.jsx(K,{size:"lg",className:"bg-gradient-primary",children:"Back to Home"})})})]})})]}),G7=()=>a.jsxs("div",{className:"min-h-screen bg-background text-foreground",children:[a.jsx("nav",{className:"bg-card/50 backdrop-blur-lg border-b border-border",children:a.jsx("div",{className:"container mx-auto px-4 lg:px-8",children:a.jsxs("div",{className:"flex items-center justify-between h-20",children:[a.jsxs(yt,{to:"/",className:"flex items-center space-x-2",children:[a.jsx(ps,{className:"h-8 w-8 text-primary"}),a.jsx("span",{className:"text-2xl font-bold bg-gradient-to-r from-primary via-primary-hover to-primary-glow bg-clip-text text-transparent",children:"Google Ranker"})]}),a.jsx(yt,{to:"/",children:a.jsxs(K,{variant:"ghost",children:[a.jsx(dl,{className:"mr-2 h-4 w-4"}),"Back to Home"]})})]})})}),a.jsx("div",{className:"container mx-auto px-4 lg:px-8 py-20",children:a.jsxs("div",{className:"max-w-4xl mx-auto",children:[a.jsx("div",{className:"flex items-center justify-center mb-6",children:a.jsx($s,{className:"h-16 w-16 text-primary"})}),a.jsx("h1",{className:"text-4xl lg:text-5xl font-bold mb-6 text-center",children:"Privacy Policy"}),a.jsxs("p",{className:"text-muted-foreground mb-12 text-center",children:["Last updated: ",new Date().toLocaleDateString()]}),a.jsx(H,{className:"bg-card/50 backdrop-blur-sm border-border mb-8",children:a.jsxs(Y,{className:"p-8 space-y-6",children:[a.jsxs("section",{children:[a.jsx("h2",{className:"text-2xl font-bold mb-4",children:"1. Information We Collect"}),a.jsx("p",{className:"text-muted-foreground leading-relaxed mb-4",children:"We collect information that you provide directly to us, including:"}),a.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-2 ml-4",children:[a.jsx("li",{children:"Account information (name, email, password)"}),a.jsx("li",{children:"Google Business Profile access tokens"}),a.jsx("li",{children:"Business information and profile data"}),a.jsx("li",{children:"Payment and billing information"}),a.jsx("li",{children:"Usage data and analytics"})]})]}),a.jsxs("section",{children:[a.jsx("h2",{className:"text-2xl font-bold mb-4",children:"2. How We Use Your Information"}),a.jsx("p",{className:"text-muted-foreground leading-relaxed mb-4",children:"We use the information we collect to:"}),a.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-2 ml-4",children:[a.jsx("li",{children:"Provide, maintain, and improve our services"}),a.jsx("li",{children:"Process your transactions and send related information"}),a.jsx("li",{children:"Send you technical notices and support messages"}),a.jsx("li",{children:"Respond to your comments and questions"}),a.jsx("li",{children:"Monitor and analyze trends, usage, and activities"}),a.jsx("li",{children:"Detect, prevent, and address technical issues"})]})]}),a.jsxs("section",{children:[a.jsx("h2",{className:"text-2xl font-bold mb-4",children:"3. Google OAuth and Data Access"}),a.jsx("p",{className:"text-muted-foreground leading-relaxed mb-4",children:"When you connect your Google Business Profile, we access only the data necessary to provide our services:"}),a.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-2 ml-4",children:[a.jsx("li",{children:"Your Google Business Profile information"}),a.jsx("li",{children:"Posts, reviews, and photos from your profile"}),a.jsx("li",{children:"Insights and analytics data"}),a.jsx("li",{children:"Location information"})]}),a.jsx("p",{className:"text-muted-foreground leading-relaxed mt-4",children:"We use this data solely to provide automated posting, review management, and analytics features. You can revoke our access at any time through your Google account settings."})]}),a.jsxs("section",{children:[a.jsx("h2",{className:"text-2xl font-bold mb-4",children:"4. Data Security"}),a.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"We implement appropriate technical and organizational measures to protect your personal information. This includes encryption of data in transit and at rest, secure token storage, and regular security audits. However, no method of transmission over the Internet is 100% secure."})]}),a.jsxs("section",{children:[a.jsx("h2",{className:"text-2xl font-bold mb-4",children:"5. Data Retention"}),a.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"We retain your information for as long as your account is active or as needed to provide you services. If you wish to delete your account, please contact us, and we will delete your information within 30 days, except where we are required to retain it for legal purposes."})]}),a.jsxs("section",{children:[a.jsx("h2",{className:"text-2xl font-bold mb-4",children:"6. Information Sharing"}),a.jsx("p",{className:"text-muted-foreground leading-relaxed mb-4",children:"We do not sell your personal information. We may share your information only in the following circumstances:"}),a.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-2 ml-4",children:[a.jsx("li",{children:"With your consent"}),a.jsx("li",{children:"With service providers who assist in our operations"}),a.jsx("li",{children:"To comply with legal obligations"}),a.jsx("li",{children:"To protect our rights and prevent fraud"})]})]}),a.jsxs("section",{children:[a.jsx("h2",{className:"text-2xl font-bold mb-4",children:"7. Third-Party Services"}),a.jsx("p",{className:"text-muted-foreground leading-relaxed mb-4",children:"Our service integrates with third-party services including:"}),a.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-2 ml-4",children:[a.jsx("li",{children:"Google Business Profile API"}),a.jsx("li",{children:"Firebase Authentication"}),a.jsx("li",{children:"Razorpay for payment processing"}),a.jsx("li",{children:"Azure OpenAI for AI features"})]}),a.jsx("p",{className:"text-muted-foreground leading-relaxed mt-4",children:"These services have their own privacy policies and terms of service."})]}),a.jsxs("section",{children:[a.jsx("h2",{className:"text-2xl font-bold mb-4",children:"8. Cookies and Tracking"}),a.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"We use cookies and similar tracking technologies to track activity on our service and hold certain information. You can instruct your browser to refuse all cookies or to indicate when a cookie is being sent."})]}),a.jsxs("section",{children:[a.jsx("h2",{className:"text-2xl font-bold mb-4",children:"9. Your Rights"}),a.jsx("p",{className:"text-muted-foreground leading-relaxed mb-4",children:"You have the right to:"}),a.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-2 ml-4",children:[a.jsx("li",{children:"Access your personal information"}),a.jsx("li",{children:"Correct inaccurate information"}),a.jsx("li",{children:"Request deletion of your information"}),a.jsx("li",{children:"Object to processing of your information"}),a.jsx("li",{children:"Export your data"})]})]}),a.jsxs("section",{children:[a.jsx("h2",{className:"text-2xl font-bold mb-4",children:"10. Children's Privacy"}),a.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"Our service is not intended for children under 18 years of age. We do not knowingly collect personal information from children. If you are a parent or guardian and believe your child has provided us with personal information, please contact us."})]}),a.jsxs("section",{children:[a.jsx("h2",{className:"text-2xl font-bold mb-4",children:"11. Changes to This Policy"}),a.jsx("p",{className:"text-muted-foreground leading-relaxed",children:'We may update our Privacy Policy from time to time. We will notify you of any changes by posting the new Privacy Policy on this page and updating the "Last updated" date.'})]}),a.jsxs("section",{children:[a.jsx("h2",{className:"text-2xl font-bold mb-4",children:"12. Contact Us"}),a.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"If you have any questions about this Privacy Policy, please contact us through our website's contact form."})]})]})}),a.jsx("div",{className:"text-center",children:a.jsx(yt,{to:"/",children:a.jsx(K,{size:"lg",className:"bg-gradient-primary",children:"Back to Home"})})})]})})]}),W7=()=>a.jsxs("div",{className:"min-h-screen bg-background text-foreground",children:[a.jsx("nav",{className:"bg-card/50 backdrop-blur-lg border-b border-border",children:a.jsx("div",{className:"container mx-auto px-4 lg:px-8",children:a.jsxs("div",{className:"flex items-center justify-between h-20",children:[a.jsxs(yt,{to:"/",className:"flex items-center space-x-2",children:[a.jsx(ps,{className:"h-8 w-8 text-primary"}),a.jsx("span",{className:"text-2xl font-bold bg-gradient-to-r from-primary via-primary-hover to-primary-glow bg-clip-text text-transparent",children:"Google Ranker"})]}),a.jsx(yt,{to:"/",children:a.jsxs(K,{variant:"ghost",children:[a.jsx(dl,{className:"mr-2 h-4 w-4"}),"Back to Home"]})})]})})}),a.jsx("div",{className:"container mx-auto px-4 lg:px-8 py-20",children:a.jsxs("div",{className:"max-w-4xl mx-auto",children:[a.jsx("div",{className:"flex items-center justify-center mb-6",children:a.jsx(a9,{className:"h-16 w-16 text-primary"})}),a.jsx("h1",{className:"text-4xl lg:text-5xl font-bold mb-6 text-center",children:"Cancellation & Refund Policy"}),a.jsxs("p",{className:"text-muted-foreground mb-12 text-center",children:["Last updated: ",new Date().toLocaleDateString()]}),a.jsx(H,{className:"bg-card/50 backdrop-blur-sm border-border mb-8",children:a.jsxs(Y,{className:"p-8 space-y-6",children:[a.jsxs("section",{children:[a.jsx("h2",{className:"text-2xl font-bold mb-4",children:"1. Free Trial Period"}),a.jsx("p",{className:"text-muted-foreground leading-relaxed mb-4",children:"Google Ranker offers a 15-day free trial for new users. During this period:"}),a.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-2 ml-4",children:[a.jsx("li",{children:"You have full access to all features without any charges"}),a.jsx("li",{children:"You can cancel at any time before the trial ends"}),a.jsx("li",{children:"No payment is required during the trial period"}),a.jsx("li",{children:"You will be notified before your trial expires"})]}),a.jsx("p",{className:"text-muted-foreground leading-relaxed mt-4",children:"If you do not wish to continue after the trial, simply cancel your account before the 15-day period ends to avoid any charges."})]}),a.jsxs("section",{children:[a.jsx("h2",{className:"text-2xl font-bold mb-4",children:"2. Subscription Cancellation"}),a.jsx("p",{className:"text-muted-foreground leading-relaxed mb-4",children:"You can cancel your subscription at any time by:"}),a.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-2 ml-4",children:[a.jsx("li",{children:"Going to your account settings"}),a.jsx("li",{children:'Selecting "Billing" from the menu'}),a.jsx("li",{children:'Clicking "Cancel Subscription"'}),a.jsx("li",{children:"Following the confirmation prompts"})]}),a.jsx("p",{className:"text-muted-foreground leading-relaxed mt-4",children:"Upon cancellation, you will continue to have access to the service until the end of your current billing period. Your subscription will not renew automatically."})]}),a.jsxs("section",{children:[a.jsx("h2",{className:"text-2xl font-bold mb-4",children:"3. Refund Policy"}),a.jsx("p",{className:"text-muted-foreground leading-relaxed mb-4",children:"We offer a 30-day money-back guarantee for annual subscriptions. To be eligible for a refund:"}),a.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-2 ml-4",children:[a.jsx("li",{children:"You must request a refund within 30 days of your initial payment"}),a.jsx("li",{children:"The refund request must be submitted through our contact form or support email"}),a.jsx("li",{children:"You must provide a valid reason for the refund request"}),a.jsx("li",{children:"The service must not have been abused or misused"})]}),a.jsx("p",{className:"text-muted-foreground leading-relaxed mt-4",children:"Refunds are typically processed within 5-10 business days and will be credited to the original payment method."})]}),a.jsxs("section",{children:[a.jsx("h2",{className:"text-2xl font-bold mb-4",children:"4. Non-Refundable Circumstances"}),a.jsx("p",{className:"text-muted-foreground leading-relaxed mb-4",children:"Refunds will not be provided in the following cases:"}),a.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-2 ml-4",children:[a.jsx("li",{children:"After 30 days from the initial payment date"}),a.jsx("li",{children:"For partial subscription periods"}),a.jsx("li",{children:"If your account was terminated for violating our Terms of Service"}),a.jsx("li",{children:"For additional profiles added to your subscription"}),a.jsx("li",{children:"If you've already received a refund in the past"})]})]}),a.jsxs("section",{children:[a.jsx("h2",{className:"text-2xl font-bold mb-4",children:"5. Payment Failures and Retries"}),a.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"If your payment fails at renewal time, we will attempt to charge your payment method up to 3 times over a 7-day period. If all attempts fail, your subscription will be automatically cancelled, and you will lose access to the service. You will receive email notifications for failed payment attempts."})]}),a.jsxs("section",{children:[a.jsx("h2",{className:"text-2xl font-bold mb-4",children:"6. Partial Refunds"}),a.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"We do not offer partial refunds for unused portions of the subscription period. If you cancel your subscription, you will retain access until the end of your current billing cycle, but no prorated refund will be issued."})]}),a.jsxs("section",{children:[a.jsx("h2",{className:"text-2xl font-bold mb-4",children:"7. Service Disruptions"}),a.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"In case of extended service disruptions (more than 48 hours), we may offer prorated refunds or extend your subscription period at our discretion. This does not apply to planned maintenance or issues with third-party services (like Google APIs)."})]}),a.jsxs("section",{children:[a.jsx("h2",{className:"text-2xl font-bold mb-4",children:"8. Chargebacks"}),a.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"If you file a chargeback or payment dispute with your credit card company or payment provider, your account will be immediately suspended. We encourage you to contact us first to resolve any billing issues before initiating a chargeback."})]}),a.jsxs("section",{children:[a.jsx("h2",{className:"text-2xl font-bold mb-4",children:"9. Changes to This Policy"}),a.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"We reserve the right to modify this Refund and Cancellation Policy at any time. Changes will be effective immediately upon posting to our website. Your continued use of the service after changes constitutes acceptance of the new policy."})]}),a.jsxs("section",{children:[a.jsx("h2",{className:"text-2xl font-bold mb-4",children:"10. Contact for Refunds"}),a.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"To request a refund or for any questions about this policy, please contact us through our website's contact form or email. Include your account email, subscription details, and reason for the refund request."})]})]})}),a.jsx("div",{className:"text-center",children:a.jsx(yt,{to:"/",children:a.jsx(K,{size:"lg",className:"bg-gradient-primary",children:"Back to Home"})})})]})})]}),Ze=p.forwardRef(({className:t,type:e,...r},n)=>a.jsx("input",{type:e,className:ye("flex h-10 w-full max-w-full rounded-md glass-input px-2 sm:px-3 py-2 text-sm sm:text-base file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground/60 focus-visible:outline-none disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...r}));Ze.displayName="Input";const pu=p.forwardRef(({className:t,...e},r)=>a.jsx("textarea",{className:ye("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...e}));pu.displayName="Textarea";var q7="Label",l2=p.forwardRef((t,e)=>a.jsx(Re.label,{...t,ref:e,onMouseDown:r=>{var s;r.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));l2.displayName=q7;var c2=l2;const H7=fh("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Ie=p.forwardRef(({className:t,...e},r)=>a.jsx(c2,{ref:r,className:ye(H7(),t),...e}));Ie.displayName=c2.displayName;const K7=()=>{const[t,e]=p.useState({name:"",email:"",subject:"",message:""}),[r,n]=p.useState(!1),[s,i]=p.useState(!1),o=async c=>{c.preventDefault(),n(!0),await new Promise(u=>setTimeout(u,1500)),n(!1),i(!0),setTimeout(()=>{e({name:"",email:"",subject:"",message:""}),i(!1)},3e3)},l=c=>{e(u=>({...u,[c.target.name]:c.target.value}))};return a.jsxs("div",{className:"min-h-screen bg-background text-foreground",children:[a.jsx("nav",{className:"bg-card/50 backdrop-blur-lg border-b border-border",children:a.jsx("div",{className:"container mx-auto px-4 lg:px-8",children:a.jsxs("div",{className:"flex items-center justify-between h-20",children:[a.jsxs(yt,{to:"/",className:"flex items-center space-x-2",children:[a.jsx(ps,{className:"h-8 w-8 text-primary"}),a.jsx("span",{className:"text-2xl font-bold bg-gradient-to-r from-primary via-primary-hover to-primary-glow bg-clip-text text-transparent",children:"Google Ranker"})]}),a.jsx(yt,{to:"/",children:a.jsxs(K,{variant:"ghost",children:[a.jsx(dl,{className:"mr-2 h-4 w-4"}),"Back to Home"]})})]})})}),a.jsx("div",{className:"container mx-auto px-4 lg:px-8 py-20",children:a.jsxs("div",{className:"max-w-4xl mx-auto",children:[a.jsx("div",{className:"flex items-center justify-center mb-6",children:a.jsx(ri,{className:"h-16 w-16 text-primary"})}),a.jsx("h1",{className:"text-4xl lg:text-5xl font-bold mb-6 text-center",children:"Contact Us"}),a.jsx("p",{className:"text-xl text-muted-foreground mb-12 text-center",children:"Have a question? We'd love to hear from you. Send us a message and we'll respond as soon as possible."}),a.jsxs("div",{className:"grid lg:grid-cols-2 gap-8 mb-12",children:[a.jsx(H,{className:"bg-card/50 backdrop-blur-sm border-border",children:a.jsxs(Y,{className:"p-8",children:[a.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Get in Touch"}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-start space-x-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 bg-primary/20 blur-xl rounded-full"}),a.jsx(ti,{className:"h-6 w-6 text-primary relative"})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold mb-1",children:"Email Support"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Our support team typically responds within 24 hours during business days."})]})]}),a.jsxs("div",{className:"flex items-start space-x-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 bg-primary/20 blur-xl rounded-full"}),a.jsx(ri,{className:"h-6 w-6 text-primary relative"})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold mb-1",children:"Live Chat"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Available Monday-Friday, 9 AM - 6 PM EST for urgent inquiries."})]})]})]}),a.jsxs("div",{className:"mt-8 p-6 bg-primary/10 rounded-lg border border-primary/30",children:[a.jsx("h3",{className:"font-semibold mb-2",children:"Business Hours"}),a.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Monday - Friday: 9:00 AM - 6:00 PM EST"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Saturday - Sunday: Closed"})]})]})}),a.jsx(H,{className:"bg-card/50 backdrop-blur-sm border-border",children:a.jsxs(Y,{className:"p-8",children:[a.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Send a Message"}),s?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(BV,{className:"h-16 w-16 text-green-500 mx-auto mb-4"}),a.jsx("h3",{className:"text-xl font-bold mb-2",children:"Message Sent!"}),a.jsx("p",{className:"text-muted-foreground",children:"Thank you for contacting us. We'll get back to you soon."})]}):a.jsxs("form",{onSubmit:o,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx(Ie,{htmlFor:"name",children:"Name *"}),a.jsx(Ze,{id:"name",name:"name",value:t.name,onChange:l,placeholder:"Your name",required:!0,className:"mt-2 bg-input border-border"})]}),a.jsxs("div",{children:[a.jsx(Ie,{htmlFor:"email",children:"Email *"}),a.jsx(Ze,{id:"email",name:"email",type:"email",value:t.email,onChange:l,placeholder:"your.email@example.com",required:!0,className:"mt-2 bg-input border-border"})]}),a.jsxs("div",{children:[a.jsx(Ie,{htmlFor:"subject",children:"Subject *"}),a.jsx(Ze,{id:"subject",name:"subject",value:t.subject,onChange:l,placeholder:"How can we help?",required:!0,className:"mt-2 bg-input border-border"})]}),a.jsxs("div",{children:[a.jsx(Ie,{htmlFor:"message",children:"Message *"}),a.jsx(pu,{id:"message",name:"message",value:t.message,onChange:l,placeholder:"Tell us more about your inquiry...",rows:6,required:!0,className:"mt-2 bg-input border-border resize-none"})]}),a.jsx(K,{type:"submit",size:"lg",className:"w-full bg-gradient-primary",disabled:r,children:r?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Sending..."]}):a.jsxs(a.Fragment,{children:["Send Message",a.jsx(qm,{className:"ml-2 h-4 w-4"})]})})]})]})})]}),a.jsx(H,{className:"bg-card/50 backdrop-blur-sm border-border",children:a.jsxs(Y,{className:"p-8",children:[a.jsx("h2",{className:"text-2xl font-bold mb-4 text-center",children:"Before You Reach Out"}),a.jsx("p",{className:"text-muted-foreground text-center mb-6",children:"Check out these common questions that might help you faster:"}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[a.jsxs(yt,{to:"/#faq",className:"p-4 bg-background/50 rounded-lg border border-border hover:border-primary/50 transition-colors",children:[a.jsx("h3",{className:"font-semibold mb-1",children:"How does the free trial work?"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Learn about our 15-day trial period"})]}),a.jsxs(yt,{to:"/#pricing",className:"p-4 bg-background/50 rounded-lg border border-border hover:border-primary/50 transition-colors",children:[a.jsx("h3",{className:"font-semibold mb-1",children:"What's included in the plan?"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"View all features and pricing"})]}),a.jsxs(yt,{to:"/refund",className:"p-4 bg-background/50 rounded-lg border border-border hover:border-primary/50 transition-colors",children:[a.jsx("h3",{className:"font-semibold mb-1",children:"Refund & Cancellation"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Our refund policy explained"})]}),a.jsxs(yt,{to:"/#features",className:"p-4 bg-background/50 rounded-lg border border-border hover:border-primary/50 transition-colors",children:[a.jsx("h3",{className:"font-semibold mb-1",children:"Technical Support"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Getting started with features"})]})]})]})})]})})]})};var Y7="Separator",dA="horizontal",Q7=["horizontal","vertical"],u2=p.forwardRef((t,e)=>{const{decorative:r,orientation:n=dA,...s}=t,i=X7(n)?n:dA,l=r?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return a.jsx(Re.div,{"data-orientation":i,...l,...s,ref:e})});u2.displayName=Y7;function X7(t){return Q7.includes(t)}var d2=u2;const Ki=p.forwardRef(({className:t,orientation:e="horizontal",decorative:r=!0,...n},s)=>a.jsx(d2,{ref:s,decorative:r,orientation:e,className:ye("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...n}));Ki.displayName=d2.displayName;const J7=()=>{};var hA={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h2=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);s<128?e[r++]=s:s<2048?(e[r++]=s>>6|192,e[r++]=s&63|128):(s&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=s>>18|240,e[r++]=s>>12&63|128,e[r++]=s>>6&63|128,e[r++]=s&63|128):(e[r++]=s>>12|224,e[r++]=s>>6&63|128,e[r++]=s&63|128)}return e},Z7=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const s=t[r++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[r++];e[n++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[r++],o=t[r++],l=t[r++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[n++]=String.fromCharCode(55296+(c>>10)),e[n++]=String.fromCharCode(56320+(c&1023))}else{const i=t[r++],o=t[r++];e[n++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},f2={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,c=s+2<t.length,u=c?t[s+2]:0,d=i>>2,h=(i&3)<<4|l>>4;let f=(l&15)<<2|u>>6,m=u&63;c||(m=64,o||(f=64)),n.push(r[d],r[h],r[f],r[m])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(h2(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Z7(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<t.length;){const i=r[t.charAt(s++)],l=s<t.length?r[t.charAt(s)]:0;++s;const u=s<t.length?r[t.charAt(s)]:64;++s;const h=s<t.length?r[t.charAt(s)]:64;if(++s,i==null||l==null||u==null||h==null)throw new eG;const f=i<<2|l>>4;if(n.push(f),u!==64){const m=l<<4&240|u>>2;if(n.push(m),h!==64){const v=u<<6&192|h;n.push(v)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class eG extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const tG=function(t){const e=h2(t);return f2.encodeByteArray(e,!0)},ep=function(t){return tG(t).replace(/\./g,"")},m2=function(t){try{return f2.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rG(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nG=()=>rG().__FIREBASE_DEFAULTS__,sG=()=>{if(typeof process>"u"||typeof hA>"u")return;const t=hA.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},aG=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&m2(t[1]);return e&&JSON.parse(e)},Lg=()=>{try{return J7()||nG()||sG()||aG()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},p2=t=>{var e,r;return(r=(e=Lg())==null?void 0:e.emulatorHosts)==null?void 0:r[t]},g2=t=>{const e=p2(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},y2=()=>{var t;return(t=Lg())==null?void 0:t.config},v2=t=>{var e;return(e=Lg())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iG{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ao(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Rw(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x2(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[ep(JSON.stringify(r)),ep(JSON.stringify(o)),""].join(".")}const Nd={};function oG(){const t={prod:[],emulator:[]};for(const e of Object.keys(Nd))Nd[e]?t.emulator.push(e):t.prod.push(e);return t}function lG(t){let e=document.getElementById(t),r=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),r=!0),{created:r,element:e}}let fA=!1;function Ow(t,e){if(typeof window>"u"||typeof document>"u"||!Ao(window.location.host)||Nd[t]===e||Nd[t]||fA)return;Nd[t]=e;function r(f){return`__firebase__banner__${f}`}const n="__firebase__banner",i=oG().prod.length>0;function o(){const f=document.getElementById(n);f&&f.remove()}function l(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function c(f,m){f.setAttribute("width","24"),f.setAttribute("id",m),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function u(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{fA=!0,o()},f}function d(f,m){f.setAttribute("id",m),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function h(){const f=lG(n),m=r("text"),v=document.getElementById(m)||document.createElement("span"),y=r("learnmore"),x=document.getElementById(y)||document.createElement("a"),b=r("preprendIcon"),w=document.getElementById(b)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const j=f.element;l(j),d(x,y);const E=u();c(w,b),j.append(w,v,x,E),document.body.appendChild(j)}i?(v.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,v.innerText="Preview backend running in this workspace."),v.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function cG(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(on())}function uG(){var e;const t=(e=Lg())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function dG(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function hG(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function fG(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function mG(){const t=on();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function pG(){return!uG()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function gG(){try{return typeof indexedDB=="object"}catch{return!1}}function yG(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},s.onupgradeneeded=()=>{r=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vG="FirebaseError";class Pa extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=vG,Object.setPrototypeOf(this,Pa.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,yh.prototype.create)}}class yh{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?xG(i,n):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new Pa(s,l,n)}}function xG(t,e){return t.replace(bG,(r,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const bG=/\{\$([^}]+)}/g;function wG(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function jl(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const s of r){if(!n.includes(s))return!1;const i=t[s],o=e[s];if(mA(i)&&mA(o)){if(!jl(i,o))return!1}else if(i!==o)return!1}for(const s of n)if(!r.includes(s))return!1;return!0}function mA(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vh(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(s=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function dd(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[s,i]=n.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function hd(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function jG(t,e){const r=new NG(t,e);return r.subscribe.bind(r)}class NG{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let s;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");_G(e,["next","error","complete"])?s=e:s={next:e,error:r,complete:n},s.next===void 0&&(s.next=Qv),s.error===void 0&&(s.error=Qv),s.complete===void 0&&(s.complete=Qv);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function _G(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function Qv(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(t){return t&&t._delegate?t._delegate:t}class fo{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ho="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let SG=class{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new iG;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:r});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),n=(e==null?void 0:e.optional)??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(n)return null;throw s}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(EG(e))try{this.getOrInitializeService({instanceIdentifier:Ho})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(r);try{const i=this.getOrInitializeService({instanceIdentifier:s});n.resolve(i)}catch{}}}}clearInstance(e=Ho){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ho){return this.instances.has(e)}getOptions(e=Ho){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);n===l&&o.resolve(s)}return s}onInit(e,r){const n=this.normalizeInstanceIdentifier(r),s=this.onInitCallbacks.get(n)??new Set;s.add(e),this.onInitCallbacks.set(n,s);const i=this.instances.get(n);return i&&e(i,n),()=>{s.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const s of n)try{s(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:AG(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Ho){return this.component?this.component.multipleInstances?e:Ho:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function AG(t){return t===Ho?void 0:t}function EG(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PG{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new SG(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var at;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(at||(at={}));const TG={debug:at.DEBUG,verbose:at.VERBOSE,info:at.INFO,warn:at.WARN,error:at.ERROR,silent:at.SILENT},CG=at.INFO,kG={[at.DEBUG]:"log",[at.VERBOSE]:"log",[at.INFO]:"info",[at.WARN]:"warn",[at.ERROR]:"error"},IG=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),s=kG[e];if(s)console[s](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Dw{constructor(e){this.name=e,this._logLevel=CG,this._logHandler=IG,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in at))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?TG[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,at.DEBUG,...e),this._logHandler(this,at.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,at.VERBOSE,...e),this._logHandler(this,at.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,at.INFO,...e),this._logHandler(this,at.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,at.WARN,...e),this._logHandler(this,at.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,at.ERROR,...e),this._logHandler(this,at.ERROR,...e)}}const RG=(t,e)=>e.some(r=>t instanceof r);let pA,gA;function OG(){return pA||(pA=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function DG(){return gA||(gA=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const b2=new WeakMap,Nb=new WeakMap,w2=new WeakMap,Xv=new WeakMap,Mw=new WeakMap;function MG(t){const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{r(to(t.result)),s()},o=()=>{n(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(r=>{r instanceof IDBCursor&&b2.set(r,t)}).catch(()=>{}),Mw.set(e,t),e}function LG(t){if(Nb.has(t))return;const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{r(),s()},o=()=>{n(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Nb.set(t,e)}let _b={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return Nb.get(t);if(e==="objectStoreNames")return t.objectStoreNames||w2.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return to(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function FG(t){_b=t(_b)}function $G(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(Jv(this),e,...r);return w2.set(n,e.sort?e.sort():[e]),to(n)}:DG().includes(t)?function(...e){return t.apply(Jv(this),e),to(b2.get(this))}:function(...e){return to(t.apply(Jv(this),e))}}function UG(t){return typeof t=="function"?$G(t):(t instanceof IDBTransaction&&LG(t),RG(t,OG())?new Proxy(t,_b):t)}function to(t){if(t instanceof IDBRequest)return MG(t);if(Xv.has(t))return Xv.get(t);const e=UG(t);return e!==t&&(Xv.set(t,e),Mw.set(e,t)),e}const Jv=t=>Mw.get(t);function BG(t,e,{blocked:r,upgrade:n,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=to(o);return n&&o.addEventListener("upgradeneeded",c=>{n(to(o.result),c.oldVersion,c.newVersion,to(o.transaction),c)}),r&&o.addEventListener("blocked",c=>r(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const VG=["get","getKey","getAll","getAllKeys","count"],zG=["put","add","delete","clear"],Zv=new Map;function yA(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Zv.get(e))return Zv.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,s=zG.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(s||VG.includes(r)))return;const i=async function(o,...l){const c=this.transaction(o,s?"readwrite":"readonly");let u=c.store;return n&&(u=u.index(l.shift())),(await Promise.all([u[r](...l),s&&c.done]))[0]};return Zv.set(e,i),i}FG(t=>({...t,get:(e,r,n)=>yA(e,r)||t.get(e,r,n),has:(e,r)=>!!yA(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GG{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(WG(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function WG(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Sb="@firebase/app",vA="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ai=new Dw("@firebase/app"),qG="@firebase/app-compat",HG="@firebase/analytics-compat",KG="@firebase/analytics",YG="@firebase/app-check-compat",QG="@firebase/app-check",XG="@firebase/auth",JG="@firebase/auth-compat",ZG="@firebase/database",eW="@firebase/data-connect",tW="@firebase/database-compat",rW="@firebase/functions",nW="@firebase/functions-compat",sW="@firebase/installations",aW="@firebase/installations-compat",iW="@firebase/messaging",oW="@firebase/messaging-compat",lW="@firebase/performance",cW="@firebase/performance-compat",uW="@firebase/remote-config",dW="@firebase/remote-config-compat",hW="@firebase/storage",fW="@firebase/storage-compat",mW="@firebase/firestore",pW="@firebase/ai",gW="@firebase/firestore-compat",yW="firebase",vW="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ab="[DEFAULT]",xW={[Sb]:"fire-core",[qG]:"fire-core-compat",[KG]:"fire-analytics",[HG]:"fire-analytics-compat",[QG]:"fire-app-check",[YG]:"fire-app-check-compat",[XG]:"fire-auth",[JG]:"fire-auth-compat",[ZG]:"fire-rtdb",[eW]:"fire-data-connect",[tW]:"fire-rtdb-compat",[rW]:"fire-fn",[nW]:"fire-fn-compat",[sW]:"fire-iid",[aW]:"fire-iid-compat",[iW]:"fire-fcm",[oW]:"fire-fcm-compat",[lW]:"fire-perf",[cW]:"fire-perf-compat",[uW]:"fire-rc",[dW]:"fire-rc-compat",[hW]:"fire-gcs",[fW]:"fire-gcs-compat",[mW]:"fire-fst",[gW]:"fire-fst-compat",[pW]:"fire-vertex","fire-js":"fire-js",[yW]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tp=new Map,bW=new Map,Eb=new Map;function xA(t,e){try{t.container.addComponent(e)}catch(r){ai.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function Nl(t){const e=t.name;if(Eb.has(e))return ai.debug(`There were multiple attempts to register component ${e}.`),!1;Eb.set(e,t);for(const r of tp.values())xA(r,t);for(const r of bW.values())xA(r,t);return!0}function Fg(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function _n(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wW={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ro=new yh("app","Firebase",wW);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jW{constructor(e,r,n){this._isDeleted=!1,this._options={...e},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new fo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ro.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zl=vW;function j2(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n={name:Ab,automaticDataCollectionEnabled:!0,...e},s=n.name;if(typeof s!="string"||!s)throw ro.create("bad-app-name",{appName:String(s)});if(r||(r=y2()),!r)throw ro.create("no-options");const i=tp.get(s);if(i){if(jl(r,i.options)&&jl(n,i.config))return i;throw ro.create("duplicate-app",{appName:s})}const o=new PG(s);for(const c of Eb.values())o.addComponent(c);const l=new jW(r,n,o);return tp.set(s,l),l}function Lw(t=Ab){const e=tp.get(t);if(!e&&t===Ab&&y2())return j2();if(!e)throw ro.create("no-app",{appName:t});return e}function ha(t,e,r){let n=xW[t]??t;r&&(n+=`-${r}`);const s=n.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${n}" with version "${e}":`];s&&o.push(`library name "${n}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ai.warn(o.join(" "));return}Nl(new fo(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NW="firebase-heartbeat-database",_W=1,Ud="firebase-heartbeat-store";let ex=null;function N2(){return ex||(ex=BG(NW,_W,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ud)}catch(r){console.warn(r)}}}}).catch(t=>{throw ro.create("idb-open",{originalErrorMessage:t.message})})),ex}async function SW(t){try{const r=(await N2()).transaction(Ud),n=await r.objectStore(Ud).get(_2(t));return await r.done,n}catch(e){if(e instanceof Pa)ai.warn(e.message);else{const r=ro.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ai.warn(r.message)}}}async function bA(t,e){try{const n=(await N2()).transaction(Ud,"readwrite");await n.objectStore(Ud).put(e,_2(t)),await n.done}catch(r){if(r instanceof Pa)ai.warn(r.message);else{const n=ro.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});ai.warn(n.message)}}}function _2(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AW=1024,EW=30;class PW{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new CW(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=wA();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)==null?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>EW){const o=kW(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){ai.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=wA(),{heartbeatsToSend:n,unsentEntries:s}=TW(this._heartbeatsCache.heartbeats),i=ep(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(r){return ai.warn(r),""}}}function wA(){return new Date().toISOString().substring(0,10)}function TW(t,e=AW){const r=[];let n=t.slice();for(const s of t){const i=r.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),jA(r)>e){i.dates.pop();break}}else if(r.push({agent:s.agent,dates:[s.date]}),jA(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class CW{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return gG()?yG().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await SW(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return bA(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return bA(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function jA(t){return ep(JSON.stringify({version:2,heartbeats:t})).length}function kW(t){if(t.length===0)return-1;let e=0,r=t[0].date;for(let n=1;n<t.length;n++)t[n].date<r&&(r=t[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IW(t){Nl(new fo("platform-logger",e=>new GG(e),"PRIVATE")),Nl(new fo("heartbeat",e=>new PW(e),"PRIVATE")),ha(Sb,vA,t),ha(Sb,vA,"esm2020"),ha("fire-js","")}IW("");function S2(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const RW=S2,A2=new yh("auth","Firebase",S2());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rp=new Dw("@firebase/auth");function OW(t,...e){rp.logLevel<=at.WARN&&rp.warn(`Auth (${zl}): ${t}`,...e)}function Nm(t,...e){rp.logLevel<=at.ERROR&&rp.error(`Auth (${zl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xs(t,...e){throw $w(t,...e)}function Us(t,...e){return $w(t,...e)}function Fw(t,e,r){const n={...RW(),[e]:r};return new yh("auth","Firebase",n).create(e,{appName:t.name})}function Qa(t){return Fw(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function DW(t,e,r){const n=r;if(!(e instanceof n))throw n.name!==e.constructor.name&&xs(t,"argument-error"),Fw(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function $w(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return A2.create(t,...e)}function Ue(t,e,...r){if(!t)throw $w(e,...r)}function Ga(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Nm(e),new Error(e)}function ii(t,e){t||Ga(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pb(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function MW(){return NA()==="http:"||NA()==="https:"}function NA(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LW(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(MW()||hG()||"connection"in navigator)?navigator.onLine:!0}function FW(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(e,r){this.shortDelay=e,this.longDelay=r,ii(r>e,"Short delay should be less than long delay!"),this.isMobile=cG()||fG()}get(){return LW()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uw(t,e){ii(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ga("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ga("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ga("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $W={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UW=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],BW=new xh(3e4,6e4);function Eo(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function mi(t,e,r,n,s={}){return P2(t,s,async()=>{let i={},o={};n&&(e==="GET"?o=n:i={body:JSON.stringify(n)});const l=vh({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:c,...i};return dG()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Ao(t.emulatorConfig.host)&&(u.credentials="include"),E2.fetch()(await T2(t,t.config.apiHost,r,l),u)})}async function P2(t,e,r){t._canInitEmulator=!1;const n={...$W,...e};try{const s=new zW(t),i=await Promise.race([r(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Mf(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Mf(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Mf(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Mf(t,"user-disabled",o);const d=n[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Fw(t,d,u);xs(t,d)}}catch(s){if(s instanceof Pa)throw s;xs(t,"network-request-failed",{message:String(s)})}}async function bh(t,e,r,n,s={}){const i=await mi(t,e,r,n,s);return"mfaPendingCredential"in i&&xs(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function T2(t,e,r,n){const s=`${e}${r}?${n}`,i=t,o=i.config.emulator?Uw(t.config,s):`${t.config.apiScheme}://${s}`;return UW.includes(r)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function VW(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class zW{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(Us(this.auth,"network-request-failed")),BW.get())})}}function Mf(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const s=Us(t,e,n);return s.customData._tokenResponse=r,s}function _A(t){return t!==void 0&&t.enterprise!==void 0}class GW{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return VW(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function WW(t,e){return mi(t,"GET","/v2/recaptchaConfig",Eo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qW(t,e){return mi(t,"POST","/v1/accounts:delete",e)}async function np(t,e){return mi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _d(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function HW(t,e=!1){const r=Dt(t),n=await r.getIdToken(e),s=Bw(n);Ue(s&&s.exp&&s.auth_time&&s.iat,r.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:n,authTime:_d(tx(s.auth_time)),issuedAtTime:_d(tx(s.iat)),expirationTime:_d(tx(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function tx(t){return Number(t)*1e3}function Bw(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return Nm("JWT malformed, contained fewer than 3 sections"),null;try{const s=m2(r);return s?JSON.parse(s):(Nm("Failed to decode base64 JWT payload"),null)}catch(s){return Nm("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function SA(t){const e=Bw(t);return Ue(e,"internal-error"),Ue(typeof e.exp<"u","internal-error"),Ue(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $c(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof Pa&&KW(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function KW({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YW{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=_d(this.lastLoginAt),this.creationTime=_d(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sp(t){var h;const e=t.auth,r=await t.getIdToken(),n=await $c(t,np(e,{idToken:r}));Ue(n==null?void 0:n.users.length,e,"internal-error");const s=n.users[0];t._notifyReloadListener(s);const i=(h=s.providerUserInfo)!=null&&h.length?C2(s.providerUserInfo):[],o=XW(t.providerData,i),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),u=l?c:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Tb(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,d)}async function QW(t){const e=Dt(t);await sp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function XW(t,e){return[...t.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function C2(t){return t.map(({providerId:e,...r})=>({providerId:e,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JW(t,e){const r=await P2(t,{},async()=>{const n=vh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await T2(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:n};return t.emulatorConfig&&Ao(t.emulatorConfig.host)&&(c.credentials="include"),E2.fetch()(o,c)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function ZW(t,e){return mi(t,"POST","/v2/accounts:revokeToken",Eo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ue(e.idToken,"internal-error"),Ue(typeof e.idToken<"u","internal-error"),Ue(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):SA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){Ue(e.length!==0,"internal-error");const r=SA(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Ue(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:s,expiresIn:i}=await JW(e,r);this.updateTokensAndExpiration(n,s,Number(i))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:s,expirationTime:i}=r,o=new yc;return n&&(Ue(typeof n=="string","internal-error",{appName:e}),o.refreshToken=n),s&&(Ue(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(Ue(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new yc,this.toJSON())}_performRefresh(){return Ga("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ti(t,e){Ue(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ls{constructor({uid:e,auth:r,stsTokenManager:n,...s}){this.providerId="firebase",this.proactiveRefresh=new YW(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=r,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Tb(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const r=await $c(this,this.stsTokenManager.getToken(this.auth,e));return Ue(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return HW(this,e)}reload(){return QW(this)}_assign(e){this!==e&&(Ue(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>({...r})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new Ls({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return r.metadata._copy(this.metadata),r}_onReload(e){Ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await sp(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_n(this.auth.app))return Promise.reject(Qa(this.auth));const e=await this.getIdToken();return await $c(this,qW(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){const n=r.displayName??void 0,s=r.email??void 0,i=r.phoneNumber??void 0,o=r.photoURL??void 0,l=r.tenantId??void 0,c=r._redirectEventId??void 0,u=r.createdAt??void 0,d=r.lastLoginAt??void 0,{uid:h,emailVerified:f,isAnonymous:m,providerData:v,stsTokenManager:y}=r;Ue(h&&y,e,"internal-error");const x=yc.fromJSON(this.name,y);Ue(typeof h=="string",e,"internal-error"),Ti(n,e.name),Ti(s,e.name),Ue(typeof f=="boolean",e,"internal-error"),Ue(typeof m=="boolean",e,"internal-error"),Ti(i,e.name),Ti(o,e.name),Ti(l,e.name),Ti(c,e.name),Ti(u,e.name),Ti(d,e.name);const b=new Ls({uid:h,auth:e,email:s,emailVerified:f,displayName:n,isAnonymous:m,photoURL:o,phoneNumber:i,tenantId:l,stsTokenManager:x,createdAt:u,lastLoginAt:d});return v&&Array.isArray(v)&&(b.providerData=v.map(w=>({...w}))),c&&(b._redirectEventId=c),b}static async _fromIdTokenResponse(e,r,n=!1){const s=new yc;s.updateFromServerResponse(r);const i=new Ls({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:n});return await sp(i),i}static async _fromGetAccountInfoResponse(e,r,n){const s=r.users[0];Ue(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?C2(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new yc;l.updateFromIdToken(n);const c=new Ls({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Tb(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AA=new Map;function Wa(t){ii(t instanceof Function,"Expected a class definition");let e=AA.get(t);return e?(ii(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,AA.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}k2.type="NONE";const Cb=k2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _m(t,e,r){return`firebase:${t}:${e}:${r}`}class vc{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:s,name:i}=this.auth;this.fullUserKey=_m(this.userKey,s.apiKey,i),this.fullPersistenceKey=_m("persistence",s.apiKey,i),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const r=await np(this.auth,{idToken:e}).catch(()=>{});return r?Ls._fromGetAccountInfoResponse(this.auth,r,e):null}return Ls._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new vc(Wa(Cb),e,n);const s=(await Promise.all(r.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||Wa(Cb);const o=_m(n,e.config.apiKey,e.name);let l=null;for(const u of r)try{const d=await u._get(o);if(d){let h;if(typeof d=="string"){const f=await np(e,{idToken:d}).catch(()=>{});if(!f)break;h=await Ls._fromGetAccountInfoResponse(e,f,d)}else h=Ls._fromJSON(e,d);u!==i&&(l=h),i=u;break}}catch{}const c=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new vc(i,e,n):(i=c[0],l&&await i._set(o,l.toJSON()),await Promise.all(r.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new vc(i,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EA(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(D2(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(I2(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(L2(e))return"Blackberry";if(F2(e))return"Webos";if(R2(e))return"Safari";if((e.includes("chrome/")||O2(e))&&!e.includes("edge/"))return"Chrome";if(M2(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function I2(t=on()){return/firefox\//i.test(t)}function R2(t=on()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function O2(t=on()){return/crios\//i.test(t)}function D2(t=on()){return/iemobile/i.test(t)}function M2(t=on()){return/android/i.test(t)}function L2(t=on()){return/blackberry/i.test(t)}function F2(t=on()){return/webos/i.test(t)}function Vw(t=on()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function eq(t=on()){var e;return Vw(t)&&!!((e=window.navigator)!=null&&e.standalone)}function tq(){return mG()&&document.documentMode===10}function $2(t=on()){return Vw(t)||M2(t)||F2(t)||L2(t)||/windows phone/i.test(t)||D2(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U2(t,e=[]){let r;switch(t){case"Browser":r=EA(on());break;case"Worker":r=`${EA(on())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${zl}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rq{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=i=>new Promise((o,l)=>{try{const c=e(i);o(c)}catch(c){l(c)}});n.onAbort=r,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const s of r)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nq(t,e={}){return mi(t,"GET","/v2/passwordPolicy",Eo(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sq=6;class aq{constructor(e){var n;const r=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=r.minPasswordLength??sq,r.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=r.maxPasswordLength),r.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=r.containsLowercaseCharacter),r.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=r.containsUppercaseCharacter),r.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=r.containsNumericCharacter),r.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=r.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((n=e.allowedNonAlphanumericCharacters)==null?void 0:n.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const r={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,r),this.validatePasswordCharacterOptions(e,r),r.isValid&&(r.isValid=r.meetsMinPasswordLength??!0),r.isValid&&(r.isValid=r.meetsMaxPasswordLength??!0),r.isValid&&(r.isValid=r.containsLowercaseLetter??!0),r.isValid&&(r.isValid=r.containsUppercaseLetter??!0),r.isValid&&(r.isValid=r.containsNumericCharacter??!0),r.isValid&&(r.isValid=r.containsNonAlphanumericCharacter??!0),r}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),s&&(r.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let s=0;s<e.length;s++)n=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iq{constructor(e,r,n,s){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new PA(this),this.idTokenSubscription=new PA(this),this.beforeStateQueue=new rq(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=A2,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=Wa(r)),this._initializationPromise=this.queue(async()=>{var n,s,i;if(!this._deleted&&(this.persistenceManager=await vc.create(this,e),(n=this._resolvePersistenceManagerAvailable)==null||n.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await np(this,{idToken:e}),n=await Ls._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(_n(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let n=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,l=n==null?void 0:n._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(n=c.user,s=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(n)}catch(o){n=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Ue(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await sp(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=FW()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(_n(this.app))return Promise.reject(Qa(this));const r=e?Dt(e):null;return r&&Ue(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&Ue(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return _n(this.app)?Promise.reject(Qa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return _n(this.app)?Promise.reject(Qa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Wa(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await nq(this),r=new aq(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new yh("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await ZW(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&Wa(e)||this._popupRedirectResolver;Ue(r,this,"argument-error"),this.redirectPersistenceManager=await vc.create(this,[Wa(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)==null?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)==null?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((r=this.currentUser)==null?void 0:r.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,s){if(this._deleted)return()=>{};const i=typeof r=="function"?r:r.next.bind(r);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ue(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof r=="function"){const c=e.addObserver(r,n,s);return()=>{o=!0,c()}}else{const c=e.addObserver(r);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=U2(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const r=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());r&&(e["X-Firebase-Client"]=r);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){var r;if(_n(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((r=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getToken());return e!=null&&e.error&&OW(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Po(t){return Dt(t)}class PA{constructor(e){this.auth=e,this.observer=null,this.addObserver=jG(r=>this.observer=r)}get next(){return Ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $g={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function oq(t){$g=t}function B2(t){return $g.loadJS(t)}function lq(){return $g.recaptchaEnterpriseScript}function cq(){return $g.gapiScript}function uq(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class dq{constructor(){this.enterprise=new hq}ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}class hq{ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}const fq="recaptcha-enterprise",V2="NO_RECAPTCHA";class mq{constructor(e){this.type=fq,this.auth=Po(e)}async verify(e="verify",r=!1){async function n(i){if(!r){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,l)=>{WW(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const u=new GW(c);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,o(u.siteKey)}}).catch(c=>{l(c)})})}function s(i,o,l){const c=window.grecaptcha;_A(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(u=>{o(u)}).catch(()=>{o(V2)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new dq().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{n(this.auth).then(l=>{if(!r&&_A(window.grecaptcha))s(l,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=lq();c.length!==0&&(c+=l),B2(c).then(()=>{s(l,i,o)}).catch(u=>{o(u)})}}).catch(l=>{o(l)})})}}async function TA(t,e,r,n=!1,s=!1){const i=new mq(t);let o;if(s)o=V2;else try{o=await i.verify(r)}catch{o=await i.verify(r,!0)}const l={...e};if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,u=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return n?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function kb(t,e,r,n,s){var i;if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await TA(t,e,r,r==="getOobCode");return n(t,o)}else return n(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await TA(t,e,r,r==="getOobCode");return n(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pq(t,e){const r=Fg(t,"auth");if(r.isInitialized()){const s=r.getImmediate(),i=r.getOptions();if(jl(i,e??{}))return s;xs(s,"already-initialized")}return r.initialize({options:e})}function gq(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(Wa);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function yq(t,e,r){const n=Po(t);Ue(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const s=!!(r!=null&&r.disableWarnings),i=z2(e),{host:o,port:l}=vq(e),c=l===null?"":`:${l}`,u={url:`${i}//${o}${c}/`},d=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!n._canInitEmulator){Ue(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),Ue(jl(u,n.config.emulator)&&jl(d,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=u,n.emulatorConfig=d,n.settings.appVerificationDisabledForTesting=!0,Ao(o)?(Rw(`${i}//${o}${c}`),Ow("Auth",!0)):xq()}function z2(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function vq(t){const e=z2(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(n);if(s){const i=s[1];return{host:i,port:CA(n.substr(i.length+1))}}else{const[i,o]=n.split(":");return{host:i,port:CA(o)}}}function CA(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function xq(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return Ga("not implemented")}_getIdTokenResponse(e){return Ga("not implemented")}_linkToIdToken(e,r){return Ga("not implemented")}_getReauthenticationResolver(e){return Ga("not implemented")}}async function bq(t,e){return mi(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wq(t,e){return bh(t,"POST","/v1/accounts:signInWithPassword",Eo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jq(t,e){return bh(t,"POST","/v1/accounts:signInWithEmailLink",Eo(t,e))}async function Nq(t,e){return bh(t,"POST","/v1/accounts:signInWithEmailLink",Eo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd extends zw{constructor(e,r,n,s=null){super("password",n),this._email=e,this._password=r,this._tenantId=s}static _fromEmailAndPassword(e,r){return new Bd(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new Bd(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return kb(e,r,"signInWithPassword",wq);case"emailLink":return jq(e,{email:this._email,oobCode:this._password});default:xs(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return kb(e,n,"signUpPassword",bq);case"emailLink":return Nq(e,{idToken:r,email:this._email,oobCode:this._password});default:xs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xc(t,e){return bh(t,"POST","/v1/accounts:signInWithIdp",Eo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _q="http://localhost";class _l extends zw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new _l(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):xs("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:s,...i}=r;if(!n||!s)return null;const o=new _l(n,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const r=this.buildRequest();return xc(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,xc(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,xc(e,r)}buildRequest(){const e={requestUri:_q,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=vh(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sq(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Aq(t){const e=dd(hd(t)).link,r=e?dd(hd(e)).deep_link_id:null,n=dd(hd(t)).deep_link_id;return(n?dd(hd(n)).link:null)||n||r||e||t}class Gw{constructor(e){const r=dd(hd(e)),n=r.apiKey??null,s=r.oobCode??null,i=Sq(r.mode??null);Ue(n&&s&&i,"argument-error"),this.apiKey=n,this.operation=i,this.code=s,this.continueUrl=r.continueUrl??null,this.languageCode=r.lang??null,this.tenantId=r.tenantId??null}static parseLink(e){const r=Aq(e);try{return new Gw(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(){this.providerId=gu.PROVIDER_ID}static credential(e,r){return Bd._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=Gw.parseLink(r);return Ue(n,"argument-error"),Bd._fromEmailAndCode(e,n.code,n.tenantId)}}gu.PROVIDER_ID="password";gu.EMAIL_PASSWORD_SIGN_IN_METHOD="password";gu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh extends Ww{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi extends wh{constructor(){super("facebook.com")}static credential(e){return _l._fromParams({providerId:Mi.PROVIDER_ID,signInMethod:Mi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Mi.credentialFromTaggedObject(e)}static credentialFromError(e){return Mi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Mi.credential(e.oauthAccessToken)}catch{return null}}}Mi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Mi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba extends wh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return _l._fromParams({providerId:Ba.PROVIDER_ID,signInMethod:Ba.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return Ba.credentialFromTaggedObject(e)}static credentialFromError(e){return Ba.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return Ba.credential(r,n)}catch{return null}}}Ba.GOOGLE_SIGN_IN_METHOD="google.com";Ba.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li extends wh{constructor(){super("github.com")}static credential(e){return _l._fromParams({providerId:Li.PROVIDER_ID,signInMethod:Li.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Li.credentialFromTaggedObject(e)}static credentialFromError(e){return Li.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Li.credential(e.oauthAccessToken)}catch{return null}}}Li.GITHUB_SIGN_IN_METHOD="github.com";Li.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi extends wh{constructor(){super("twitter.com")}static credential(e,r){return _l._fromParams({providerId:Fi.PROVIDER_ID,signInMethod:Fi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return Fi.credentialFromTaggedObject(e)}static credentialFromError(e){return Fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return Fi.credential(r,n)}catch{return null}}}Fi.TWITTER_SIGN_IN_METHOD="twitter.com";Fi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eq(t,e){return bh(t,"POST","/v1/accounts:signUp",Eo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,s=!1){const i=await Ls._fromIdTokenResponse(e,n,s),o=kA(n);return new Sl({user:i,providerId:o,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const s=kA(n);return new Sl({user:e,providerId:s,_tokenResponse:n,operationType:r})}}function kA(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap extends Pa{constructor(e,r,n,s){super(r.code,r.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,ap.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,s){return new ap(e,r,n,s)}}function G2(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?ap._fromErrorAndOperation(t,i,e,n):i})}async function Pq(t,e,r=!1){const n=await $c(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return Sl._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tq(t,e,r=!1){const{auth:n}=t;if(_n(n.app))return Promise.reject(Qa(n));const s="reauthenticate";try{const i=await $c(t,G2(n,s,e,t),r);Ue(i.idToken,n,"internal-error");const o=Bw(i.idToken);Ue(o,n,"internal-error");const{sub:l}=o;return Ue(t.uid===l,n,"user-mismatch"),Sl._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&xs(n,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W2(t,e,r=!1){if(_n(t.app))return Promise.reject(Qa(t));const n="signIn",s=await G2(t,n,e),i=await Sl._fromIdTokenResponse(t,n,s);return r||await t._updateCurrentUser(i.user),i}async function Cq(t,e){return W2(Po(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q2(t){const e=Po(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function kq(t,e,r){if(_n(t.app))return Promise.reject(Qa(t));const n=Po(t),o=await kb(n,{returnSecureToken:!0,email:e,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Eq).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&q2(t),c}),l=await Sl._fromIdTokenResponse(n,"signIn",o);return await n._updateCurrentUser(l.user),l}function Iq(t,e,r){return _n(t.app)?Promise.reject(Qa(t)):Cq(Dt(t),gu.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&q2(t),n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rq(t,e){return mi(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oq(t,{displayName:e,photoURL:r}){if(e===void 0&&r===void 0)return;const n=Dt(t),i={idToken:await n.getIdToken(),displayName:e,photoUrl:r,returnSecureToken:!0},o=await $c(n,Rq(n.auth,i));n.displayName=o.displayName||null,n.photoURL=o.photoUrl||null;const l=n.providerData.find(({providerId:c})=>c==="password");l&&(l.displayName=n.displayName,l.photoURL=n.photoURL),await n._updateTokensIfNecessary(o)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sm(t,e){return Dt(t).setPersistence(e)}function Dq(t,e,r,n){return Dt(t).onIdTokenChanged(e,r,n)}function Mq(t,e,r){return Dt(t).beforeAuthStateChanged(e,r)}function Lq(t,e,r,n){return Dt(t).onAuthStateChanged(e,r,n)}function Fq(t){return Dt(t).signOut()}const ip="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(ip,"1"),this.storage.removeItem(ip),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $q=1e3,Uq=10;class K2 extends H2{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=$2(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),s=this.localCache[r];n!==s&&e(r,s,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const n=e.key;r?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(n);!r&&this.localCache[n]===o||this.notifyListeners(n,o)},i=this.storage.getItem(n);tq()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,Uq):s()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},$q)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}K2.type="LOCAL";const qw=K2;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2 extends H2{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}Y2.type="SESSION";const Q2=Y2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bq(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(s=>s.isListeningto(e));if(r)return r;const n=new Ug(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:s,data:i}=r.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const l=Array.from(o).map(async u=>u(r.origin,i)),c=await Bq(l);r.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:c})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ug.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hw(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vq{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,c)=>{const u=Hw("",20);s.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},n);o={messageChannel:s,onMessage(h){const f=h;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(f.data.response);break;default:clearTimeout(d),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:r},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fa(){return window}function zq(t){fa().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X2(){return typeof fa().WorkerGlobalScope<"u"&&typeof fa().importScripts=="function"}async function Gq(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Wq(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function qq(){return X2()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J2="firebaseLocalStorageDb",Hq=1,op="firebaseLocalStorage",Z2="fbase_key";class jh{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function Bg(t,e){return t.transaction([op],e?"readwrite":"readonly").objectStore(op)}function Kq(){const t=indexedDB.deleteDatabase(J2);return new jh(t).toPromise()}function Ib(){const t=indexedDB.open(J2,Hq);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(op,{keyPath:Z2})}catch(s){r(s)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(op)?e(n):(n.close(),await Kq(),e(await Ib()))})})}async function IA(t,e,r){const n=Bg(t,!0).put({[Z2]:e,value:r});return new jh(n).toPromise()}async function Yq(t,e){const r=Bg(t,!1).get(e),n=await new jh(r).toPromise();return n===void 0?null:n.value}function RA(t,e){const r=Bg(t,!0).delete(e);return new jh(r).toPromise()}const Qq=800,Xq=3;class eR{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ib(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>Xq)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return X2()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ug._getInstance(qq()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var r,n;if(this.activeServiceWorker=await Gq(),!this.activeServiceWorker)return;this.sender=new Vq(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(r=e[0])!=null&&r.fulfilled&&(n=e[0])!=null&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Wq()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ib();return await IA(e,ip,"1"),await RA(e,ip),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>IA(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>Yq(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>RA(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Bg(s,!1).getAll();return new jh(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),r.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Qq)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}eR.type="LOCAL";const tR=eR;new xh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rR(t,e){return e?Wa(e):(Ue(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw extends zw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return xc(e,this._buildIdpRequest())}_linkToIdToken(e,r){return xc(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return xc(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function Jq(t){return W2(t.auth,new Kw(t),t.bypassAuthState)}function Zq(t){const{auth:e,user:r}=t;return Ue(r,e,"internal-error"),Tq(r,new Kw(t),t.bypassAuthState)}async function eH(t){const{auth:e,user:r}=t;return Ue(r,e,"internal-error"),Pq(r,new Kw(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR{constructor(e,r,n,s,i=!1){this.auth=e,this.resolver=n,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:r,sessionId:n,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Jq;case"linkViaPopup":case"linkViaRedirect":return eH;case"reauthViaPopup":case"reauthViaRedirect":return Zq;default:xs(this.auth,"internal-error")}}resolve(e){ii(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ii(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tH=new xh(2e3,1e4);async function rH(t,e,r){if(_n(t.app))return Promise.reject(Us(t,"operation-not-supported-in-this-environment"));const n=Po(t);DW(t,e,Ww);const s=rR(n,r);return new Zo(n,"signInViaPopup",e,s).executeNotNull()}class Zo extends nR{constructor(e,r,n,s,i){super(e,r,s,i),this.provider=n,this.authWindow=null,this.pollId=null,Zo.currentPopupAction&&Zo.currentPopupAction.cancel(),Zo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ue(e,this.auth,"internal-error"),e}async onExecution(){ii(this.filter.length===1,"Popup operations only handle one event");const e=Hw();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Us(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Us(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Zo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if((n=(r=this.authWindow)==null?void 0:r.window)!=null&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Us(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,tH.get())};e()}}Zo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nH="pendingRedirect",Am=new Map;class sH extends nR{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=Am.get(this.auth._key());if(!e){try{const n=await aH(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}Am.set(this.auth._key(),e)}return this.bypassAuthState||Am.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function aH(t,e){const r=lH(e),n=oH(t);if(!await n._isAvailable())return!1;const s=await n._get(r)==="true";return await n._remove(r),s}function iH(t,e){Am.set(t._key(),e)}function oH(t){return Wa(t._redirectPersistence)}function lH(t){return _m(nH,t.config.apiKey,t.name)}async function cH(t,e,r=!1){if(_n(t.app))return Promise.reject(Qa(t));const n=Po(t),s=rR(n,e),o=await new sH(n,s,r).execute();return o&&!r&&(delete o.user._redirectEventId,await n._persistUserIfCurrent(o.user),await n._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uH=10*60*1e3;class dH{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!hH(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!sR(e)){const s=((n=e.error.code)==null?void 0:n.split("auth/")[1])||"internal-error";r.onError(Us(this.auth,s))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=uH&&this.cachedEventUids.clear(),this.cachedEventUids.has(OA(e))}saveEventToCache(e){this.cachedEventUids.add(OA(e)),this.lastProcessedEventTime=Date.now()}}function OA(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function sR({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function hH(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return sR(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fH(t,e={}){return mi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mH=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,pH=/^https?/;async function gH(t){if(t.config.emulator)return;const{authorizedDomains:e}=await fH(t);for(const r of e)try{if(yH(r))return}catch{}xs(t,"unauthorized-domain")}function yH(t){const e=Pb(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&o.hostname===n}if(!pH.test(r))return!1;if(mH.test(t))return n===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vH=new xh(3e4,6e4);function DA(){const t=fa().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function xH(t){return new Promise((e,r)=>{var s,i,o;function n(){DA(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{DA(),r(Us(t,"network-request-failed"))},timeout:vH.get()})}if((i=(s=fa().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((o=fa().gapi)!=null&&o.load)n();else{const l=uq("iframefcb");return fa()[l]=()=>{gapi.load?n():r(Us(t,"network-request-failed"))},B2(`${cq()}?onload=${l}`).catch(c=>r(c))}}).catch(e=>{throw Em=null,e})}let Em=null;function bH(t){return Em=Em||xH(t),Em}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wH=new xh(5e3,15e3),jH="__/auth/iframe",NH="emulator/auth/iframe",_H={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},SH=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function AH(t){const e=t.config;Ue(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?Uw(e,NH):`https://${t.config.authDomain}/${jH}`,n={apiKey:e.apiKey,appName:t.name,v:zl},s=SH.get(t.config.apiHost);s&&(n.eid=s);const i=t._getFrameworks();return i.length&&(n.fw=i.join(",")),`${r}?${vh(n).slice(1)}`}async function EH(t){const e=await bH(t),r=fa().gapi;return Ue(r,t,"internal-error"),e.open({where:document.body,url:AH(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:_H,dontclear:!0},n=>new Promise(async(s,i)=>{await n.restyle({setHideOnLeave:!1});const o=Us(t,"network-request-failed"),l=fa().setTimeout(()=>{i(o)},wH.get());function c(){fa().clearTimeout(l),s(n)}n.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PH={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},TH=500,CH=600,kH="_blank",IH="http://localhost";class MA{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function RH(t,e,r,n=TH,s=CH){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-n)/2,0).toString();let l="";const c={...PH,width:n.toString(),height:s.toString(),top:i,left:o},u=on().toLowerCase();r&&(l=O2(u)?kH:r),I2(u)&&(e=e||IH,c.scrollbars="yes");const d=Object.entries(c).reduce((f,[m,v])=>`${f}${m}=${v},`,"");if(eq(u)&&l!=="_self")return OH(e||"",l),new MA(null);const h=window.open(e||"",l,d);Ue(h,t,"popup-blocked");try{h.focus()}catch{}return new MA(h)}function OH(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DH="__/auth/handler",MH="emulator/auth/handler",LH=encodeURIComponent("fac");async function LA(t,e,r,n,s,i){Ue(t.config.authDomain,t,"auth-domain-config-required"),Ue(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:zl,eventId:s};if(e instanceof Ww){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",wG(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))o[d]=h}if(e instanceof wh){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const c=await t._getAppCheckToken(),u=c?`#${LH}=${encodeURIComponent(c)}`:"";return`${FH(t)}?${vh(l).slice(1)}${u}`}function FH({config:t}){return t.emulator?Uw(t,MH):`https://${t.authDomain}/${DH}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rx="webStorageSupport";class $H{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Q2,this._completeRedirectFn=cH,this._overrideRedirectResult=iH}async _openPopup(e,r,n,s){var o;ii((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await LA(e,r,n,Pb(),s);return RH(e,i,Hw())}async _openRedirect(e,r,n,s){await this._originValidation(e);const i=await LA(e,r,n,Pb(),s);return zq(i),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:s,promise:i}=this.eventManagers[r];return s?Promise.resolve(s):(ii(i,"If manager is not set, promise should be"),i)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await EH(e),n=new dH(e);return r.register("authEvent",s=>(Ue(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:n.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(rx,{type:rx},s=>{var o;const i=(o=s==null?void 0:s[0])==null?void 0:o[rx];i!==void 0&&r(!!i),xs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=gH(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return $2()||R2()||Vw()}}const UH=$H;var FA="@firebase/auth",$A="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BH{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VH(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function zH(t){Nl(new fo("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=n.options;Ue(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:U2(t)},u=new iq(n,s,i,c);return gq(u,r),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),Nl(new fo("auth-internal",e=>{const r=Po(e.getProvider("auth").getImmediate());return(n=>new BH(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),ha(FA,$A,VH(t)),ha(FA,$A,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GH=5*60,WH=v2("authIdTokenMaxAge")||GH;let UA=null;const qH=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>WH)return;const s=r==null?void 0:r.token;UA!==s&&(UA=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function HH(t=Lw()){const e=Fg(t,"auth");if(e.isInitialized())return e.getImmediate();const r=pq(t,{popupRedirectResolver:UH,persistence:[tR,qw,Q2]}),n=v2("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(n,location.origin);if(location.origin===i.origin){const o=qH(i.toString());Mq(r,o,()=>o(r.currentUser)),Dq(r,l=>o(l))}}const s=p2("auth");return s&&yq(r,`http://${s}`),r}function KH(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}oq({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=s=>{const i=Us("internal-error");i.customData=s,r(i)},n.type="text/javascript",n.charset="UTF-8",KH().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});zH("Browser");var YH="firebase",QH="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ha(YH,QH,"app");var BA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var no,aR;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,A){function S(){}S.prototype=A.prototype,T.D=A.prototype,T.prototype=new S,T.prototype.constructor=T,T.C=function(_,P,R){for(var C=Array(arguments.length-2),B=2;B<arguments.length;B++)C[B-2]=arguments[B];return A.prototype[P].apply(_,C)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(T,A,S){S||(S=0);var _=Array(16);if(typeof A=="string")for(var P=0;16>P;++P)_[P]=A.charCodeAt(S++)|A.charCodeAt(S++)<<8|A.charCodeAt(S++)<<16|A.charCodeAt(S++)<<24;else for(P=0;16>P;++P)_[P]=A[S++]|A[S++]<<8|A[S++]<<16|A[S++]<<24;A=T.g[0],S=T.g[1],P=T.g[2];var R=T.g[3],C=A+(R^S&(P^R))+_[0]+3614090360&4294967295;A=S+(C<<7&4294967295|C>>>25),C=R+(P^A&(S^P))+_[1]+3905402710&4294967295,R=A+(C<<12&4294967295|C>>>20),C=P+(S^R&(A^S))+_[2]+606105819&4294967295,P=R+(C<<17&4294967295|C>>>15),C=S+(A^P&(R^A))+_[3]+3250441966&4294967295,S=P+(C<<22&4294967295|C>>>10),C=A+(R^S&(P^R))+_[4]+4118548399&4294967295,A=S+(C<<7&4294967295|C>>>25),C=R+(P^A&(S^P))+_[5]+1200080426&4294967295,R=A+(C<<12&4294967295|C>>>20),C=P+(S^R&(A^S))+_[6]+2821735955&4294967295,P=R+(C<<17&4294967295|C>>>15),C=S+(A^P&(R^A))+_[7]+4249261313&4294967295,S=P+(C<<22&4294967295|C>>>10),C=A+(R^S&(P^R))+_[8]+1770035416&4294967295,A=S+(C<<7&4294967295|C>>>25),C=R+(P^A&(S^P))+_[9]+2336552879&4294967295,R=A+(C<<12&4294967295|C>>>20),C=P+(S^R&(A^S))+_[10]+4294925233&4294967295,P=R+(C<<17&4294967295|C>>>15),C=S+(A^P&(R^A))+_[11]+2304563134&4294967295,S=P+(C<<22&4294967295|C>>>10),C=A+(R^S&(P^R))+_[12]+1804603682&4294967295,A=S+(C<<7&4294967295|C>>>25),C=R+(P^A&(S^P))+_[13]+4254626195&4294967295,R=A+(C<<12&4294967295|C>>>20),C=P+(S^R&(A^S))+_[14]+2792965006&4294967295,P=R+(C<<17&4294967295|C>>>15),C=S+(A^P&(R^A))+_[15]+1236535329&4294967295,S=P+(C<<22&4294967295|C>>>10),C=A+(P^R&(S^P))+_[1]+4129170786&4294967295,A=S+(C<<5&4294967295|C>>>27),C=R+(S^P&(A^S))+_[6]+3225465664&4294967295,R=A+(C<<9&4294967295|C>>>23),C=P+(A^S&(R^A))+_[11]+643717713&4294967295,P=R+(C<<14&4294967295|C>>>18),C=S+(R^A&(P^R))+_[0]+3921069994&4294967295,S=P+(C<<20&4294967295|C>>>12),C=A+(P^R&(S^P))+_[5]+3593408605&4294967295,A=S+(C<<5&4294967295|C>>>27),C=R+(S^P&(A^S))+_[10]+38016083&4294967295,R=A+(C<<9&4294967295|C>>>23),C=P+(A^S&(R^A))+_[15]+3634488961&4294967295,P=R+(C<<14&4294967295|C>>>18),C=S+(R^A&(P^R))+_[4]+3889429448&4294967295,S=P+(C<<20&4294967295|C>>>12),C=A+(P^R&(S^P))+_[9]+568446438&4294967295,A=S+(C<<5&4294967295|C>>>27),C=R+(S^P&(A^S))+_[14]+3275163606&4294967295,R=A+(C<<9&4294967295|C>>>23),C=P+(A^S&(R^A))+_[3]+4107603335&4294967295,P=R+(C<<14&4294967295|C>>>18),C=S+(R^A&(P^R))+_[8]+1163531501&4294967295,S=P+(C<<20&4294967295|C>>>12),C=A+(P^R&(S^P))+_[13]+2850285829&4294967295,A=S+(C<<5&4294967295|C>>>27),C=R+(S^P&(A^S))+_[2]+4243563512&4294967295,R=A+(C<<9&4294967295|C>>>23),C=P+(A^S&(R^A))+_[7]+1735328473&4294967295,P=R+(C<<14&4294967295|C>>>18),C=S+(R^A&(P^R))+_[12]+2368359562&4294967295,S=P+(C<<20&4294967295|C>>>12),C=A+(S^P^R)+_[5]+4294588738&4294967295,A=S+(C<<4&4294967295|C>>>28),C=R+(A^S^P)+_[8]+2272392833&4294967295,R=A+(C<<11&4294967295|C>>>21),C=P+(R^A^S)+_[11]+1839030562&4294967295,P=R+(C<<16&4294967295|C>>>16),C=S+(P^R^A)+_[14]+4259657740&4294967295,S=P+(C<<23&4294967295|C>>>9),C=A+(S^P^R)+_[1]+2763975236&4294967295,A=S+(C<<4&4294967295|C>>>28),C=R+(A^S^P)+_[4]+1272893353&4294967295,R=A+(C<<11&4294967295|C>>>21),C=P+(R^A^S)+_[7]+4139469664&4294967295,P=R+(C<<16&4294967295|C>>>16),C=S+(P^R^A)+_[10]+3200236656&4294967295,S=P+(C<<23&4294967295|C>>>9),C=A+(S^P^R)+_[13]+681279174&4294967295,A=S+(C<<4&4294967295|C>>>28),C=R+(A^S^P)+_[0]+3936430074&4294967295,R=A+(C<<11&4294967295|C>>>21),C=P+(R^A^S)+_[3]+3572445317&4294967295,P=R+(C<<16&4294967295|C>>>16),C=S+(P^R^A)+_[6]+76029189&4294967295,S=P+(C<<23&4294967295|C>>>9),C=A+(S^P^R)+_[9]+3654602809&4294967295,A=S+(C<<4&4294967295|C>>>28),C=R+(A^S^P)+_[12]+3873151461&4294967295,R=A+(C<<11&4294967295|C>>>21),C=P+(R^A^S)+_[15]+530742520&4294967295,P=R+(C<<16&4294967295|C>>>16),C=S+(P^R^A)+_[2]+3299628645&4294967295,S=P+(C<<23&4294967295|C>>>9),C=A+(P^(S|~R))+_[0]+4096336452&4294967295,A=S+(C<<6&4294967295|C>>>26),C=R+(S^(A|~P))+_[7]+1126891415&4294967295,R=A+(C<<10&4294967295|C>>>22),C=P+(A^(R|~S))+_[14]+2878612391&4294967295,P=R+(C<<15&4294967295|C>>>17),C=S+(R^(P|~A))+_[5]+4237533241&4294967295,S=P+(C<<21&4294967295|C>>>11),C=A+(P^(S|~R))+_[12]+1700485571&4294967295,A=S+(C<<6&4294967295|C>>>26),C=R+(S^(A|~P))+_[3]+2399980690&4294967295,R=A+(C<<10&4294967295|C>>>22),C=P+(A^(R|~S))+_[10]+4293915773&4294967295,P=R+(C<<15&4294967295|C>>>17),C=S+(R^(P|~A))+_[1]+2240044497&4294967295,S=P+(C<<21&4294967295|C>>>11),C=A+(P^(S|~R))+_[8]+1873313359&4294967295,A=S+(C<<6&4294967295|C>>>26),C=R+(S^(A|~P))+_[15]+4264355552&4294967295,R=A+(C<<10&4294967295|C>>>22),C=P+(A^(R|~S))+_[6]+2734768916&4294967295,P=R+(C<<15&4294967295|C>>>17),C=S+(R^(P|~A))+_[13]+1309151649&4294967295,S=P+(C<<21&4294967295|C>>>11),C=A+(P^(S|~R))+_[4]+4149444226&4294967295,A=S+(C<<6&4294967295|C>>>26),C=R+(S^(A|~P))+_[11]+3174756917&4294967295,R=A+(C<<10&4294967295|C>>>22),C=P+(A^(R|~S))+_[2]+718787259&4294967295,P=R+(C<<15&4294967295|C>>>17),C=S+(R^(P|~A))+_[9]+3951481745&4294967295,T.g[0]=T.g[0]+A&4294967295,T.g[1]=T.g[1]+(P+(C<<21&4294967295|C>>>11))&4294967295,T.g[2]=T.g[2]+P&4294967295,T.g[3]=T.g[3]+R&4294967295}n.prototype.u=function(T,A){A===void 0&&(A=T.length);for(var S=A-this.blockSize,_=this.B,P=this.h,R=0;R<A;){if(P==0)for(;R<=S;)s(this,T,R),R+=this.blockSize;if(typeof T=="string"){for(;R<A;)if(_[P++]=T.charCodeAt(R++),P==this.blockSize){s(this,_),P=0;break}}else for(;R<A;)if(_[P++]=T[R++],P==this.blockSize){s(this,_),P=0;break}}this.h=P,this.o+=A},n.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var A=1;A<T.length-8;++A)T[A]=0;var S=8*this.o;for(A=T.length-8;A<T.length;++A)T[A]=S&255,S/=256;for(this.u(T),T=Array(16),A=S=0;4>A;++A)for(var _=0;32>_;_+=8)T[S++]=this.g[A]>>>_&255;return T};function i(T,A){var S=l;return Object.prototype.hasOwnProperty.call(S,T)?S[T]:S[T]=A(T)}function o(T,A){this.h=A;for(var S=[],_=!0,P=T.length-1;0<=P;P--){var R=T[P]|0;_&&R==A||(S[P]=R,_=!1)}this.g=S}var l={};function c(T){return-128<=T&&128>T?i(T,function(A){return new o([A|0],0>A?-1:0)}):new o([T|0],0>T?-1:0)}function u(T){if(isNaN(T)||!isFinite(T))return h;if(0>T)return x(u(-T));for(var A=[],S=1,_=0;T>=S;_++)A[_]=T/S|0,S*=4294967296;return new o(A,0)}function d(T,A){if(T.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(T.charAt(0)=="-")return x(d(T.substring(1),A));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=u(Math.pow(A,8)),_=h,P=0;P<T.length;P+=8){var R=Math.min(8,T.length-P),C=parseInt(T.substring(P,P+R),A);8>R?(R=u(Math.pow(A,R)),_=_.j(R).add(u(C))):(_=_.j(S),_=_.add(u(C)))}return _}var h=c(0),f=c(1),m=c(16777216);t=o.prototype,t.m=function(){if(y(this))return-x(this).m();for(var T=0,A=1,S=0;S<this.g.length;S++){var _=this.i(S);T+=(0<=_?_:4294967296+_)*A,A*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(v(this))return"0";if(y(this))return"-"+x(this).toString(T);for(var A=u(Math.pow(T,6)),S=this,_="";;){var P=E(S,A).g;S=b(S,P.j(A));var R=((0<S.g.length?S.g[0]:S.h)>>>0).toString(T);if(S=P,v(S))return R+_;for(;6>R.length;)R="0"+R;_=R+_}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function v(T){if(T.h!=0)return!1;for(var A=0;A<T.g.length;A++)if(T.g[A]!=0)return!1;return!0}function y(T){return T.h==-1}t.l=function(T){return T=b(this,T),y(T)?-1:v(T)?0:1};function x(T){for(var A=T.g.length,S=[],_=0;_<A;_++)S[_]=~T.g[_];return new o(S,~T.h).add(f)}t.abs=function(){return y(this)?x(this):this},t.add=function(T){for(var A=Math.max(this.g.length,T.g.length),S=[],_=0,P=0;P<=A;P++){var R=_+(this.i(P)&65535)+(T.i(P)&65535),C=(R>>>16)+(this.i(P)>>>16)+(T.i(P)>>>16);_=C>>>16,R&=65535,C&=65535,S[P]=C<<16|R}return new o(S,S[S.length-1]&-2147483648?-1:0)};function b(T,A){return T.add(x(A))}t.j=function(T){if(v(this)||v(T))return h;if(y(this))return y(T)?x(this).j(x(T)):x(x(this).j(T));if(y(T))return x(this.j(x(T)));if(0>this.l(m)&&0>T.l(m))return u(this.m()*T.m());for(var A=this.g.length+T.g.length,S=[],_=0;_<2*A;_++)S[_]=0;for(_=0;_<this.g.length;_++)for(var P=0;P<T.g.length;P++){var R=this.i(_)>>>16,C=this.i(_)&65535,B=T.i(P)>>>16,G=T.i(P)&65535;S[2*_+2*P]+=C*G,w(S,2*_+2*P),S[2*_+2*P+1]+=R*G,w(S,2*_+2*P+1),S[2*_+2*P+1]+=C*B,w(S,2*_+2*P+1),S[2*_+2*P+2]+=R*B,w(S,2*_+2*P+2)}for(_=0;_<A;_++)S[_]=S[2*_+1]<<16|S[2*_];for(_=A;_<2*A;_++)S[_]=0;return new o(S,0)};function w(T,A){for(;(T[A]&65535)!=T[A];)T[A+1]+=T[A]>>>16,T[A]&=65535,A++}function j(T,A){this.g=T,this.h=A}function E(T,A){if(v(A))throw Error("division by zero");if(v(T))return new j(h,h);if(y(T))return A=E(x(T),A),new j(x(A.g),x(A.h));if(y(A))return A=E(T,x(A)),new j(x(A.g),A.h);if(30<T.g.length){if(y(T)||y(A))throw Error("slowDivide_ only works with positive integers.");for(var S=f,_=A;0>=_.l(T);)S=I(S),_=I(_);var P=O(S,1),R=O(_,1);for(_=O(_,2),S=O(S,2);!v(_);){var C=R.add(_);0>=C.l(T)&&(P=P.add(S),R=C),_=O(_,1),S=O(S,1)}return A=b(T,P.j(A)),new j(P,A)}for(P=h;0<=T.l(A);){for(S=Math.max(1,Math.floor(T.m()/A.m())),_=Math.ceil(Math.log(S)/Math.LN2),_=48>=_?1:Math.pow(2,_-48),R=u(S),C=R.j(A);y(C)||0<C.l(T);)S-=_,R=u(S),C=R.j(A);v(R)&&(R=f),P=P.add(R),T=b(T,C)}return new j(P,T)}t.A=function(T){return E(this,T).h},t.and=function(T){for(var A=Math.max(this.g.length,T.g.length),S=[],_=0;_<A;_++)S[_]=this.i(_)&T.i(_);return new o(S,this.h&T.h)},t.or=function(T){for(var A=Math.max(this.g.length,T.g.length),S=[],_=0;_<A;_++)S[_]=this.i(_)|T.i(_);return new o(S,this.h|T.h)},t.xor=function(T){for(var A=Math.max(this.g.length,T.g.length),S=[],_=0;_<A;_++)S[_]=this.i(_)^T.i(_);return new o(S,this.h^T.h)};function I(T){for(var A=T.g.length+1,S=[],_=0;_<A;_++)S[_]=T.i(_)<<1|T.i(_-1)>>>31;return new o(S,T.h)}function O(T,A){var S=A>>5;A%=32;for(var _=T.g.length-S,P=[],R=0;R<_;R++)P[R]=0<A?T.i(R+S)>>>A|T.i(R+S+1)<<32-A:T.i(R+S);return new o(P,T.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,aR=n,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,no=o}).apply(typeof BA<"u"?BA:typeof self<"u"?self:typeof window<"u"?window:{});var Lf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var iR,fd,oR,Pm,Rb,lR,cR,uR;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(g,N,k){return g==Array.prototype||g==Object.prototype||(g[N]=k.value),g};function r(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof Lf=="object"&&Lf];for(var N=0;N<g.length;++N){var k=g[N];if(k&&k.Math==Math)return k}throw Error("Cannot find global object")}var n=r(this);function s(g,N){if(N)e:{var k=n;g=g.split(".");for(var D=0;D<g.length-1;D++){var q=g[D];if(!(q in k))break e;k=k[q]}g=g[g.length-1],D=k[g],N=N(D),N!=D&&N!=null&&e(k,g,{configurable:!0,writable:!0,value:N})}}function i(g,N){g instanceof String&&(g+="");var k=0,D=!1,q={next:function(){if(!D&&k<g.length){var ee=k++;return{value:N(ee,g[ee]),done:!1}}return D=!0,{done:!0,value:void 0}}};return q[Symbol.iterator]=function(){return q},q}s("Array.prototype.values",function(g){return g||function(){return i(this,function(N,k){return k})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(g){var N=typeof g;return N=N!="object"?N:g?Array.isArray(g)?"array":N:"null",N=="array"||N=="object"&&typeof g.length=="number"}function u(g){var N=typeof g;return N=="object"&&g!=null||N=="function"}function d(g,N,k){return g.call.apply(g.bind,arguments)}function h(g,N,k){if(!g)throw Error();if(2<arguments.length){var D=Array.prototype.slice.call(arguments,2);return function(){var q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(q,D),g.apply(N,q)}}return function(){return g.apply(N,arguments)}}function f(g,N,k){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,f.apply(null,arguments)}function m(g,N){var k=Array.prototype.slice.call(arguments,1);return function(){var D=k.slice();return D.push.apply(D,arguments),g.apply(this,D)}}function v(g,N){function k(){}k.prototype=N.prototype,g.aa=N.prototype,g.prototype=new k,g.prototype.constructor=g,g.Qb=function(D,q,ee){for(var je=Array(arguments.length-2),Ct=2;Ct<arguments.length;Ct++)je[Ct-2]=arguments[Ct];return N.prototype[q].apply(D,je)}}function y(g){const N=g.length;if(0<N){const k=Array(N);for(let D=0;D<N;D++)k[D]=g[D];return k}return[]}function x(g,N){for(let k=1;k<arguments.length;k++){const D=arguments[k];if(c(D)){const q=g.length||0,ee=D.length||0;g.length=q+ee;for(let je=0;je<ee;je++)g[q+je]=D[je]}else g.push(D)}}class b{constructor(N,k){this.i=N,this.j=k,this.h=0,this.g=null}get(){let N;return 0<this.h?(this.h--,N=this.g,this.g=N.next,N.next=null):N=this.i(),N}}function w(g){return/^[\s\xa0]*$/.test(g)}function j(){var g=l.navigator;return g&&(g=g.userAgent)?g:""}function E(g){return E[" "](g),g}E[" "]=function(){};var I=j().indexOf("Gecko")!=-1&&!(j().toLowerCase().indexOf("webkit")!=-1&&j().indexOf("Edge")==-1)&&!(j().indexOf("Trident")!=-1||j().indexOf("MSIE")!=-1)&&j().indexOf("Edge")==-1;function O(g,N,k){for(const D in g)N.call(k,g[D],D,g)}function T(g,N){for(const k in g)N.call(void 0,g[k],k,g)}function A(g){const N={};for(const k in g)N[k]=g[k];return N}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _(g,N){let k,D;for(let q=1;q<arguments.length;q++){D=arguments[q];for(k in D)g[k]=D[k];for(let ee=0;ee<S.length;ee++)k=S[ee],Object.prototype.hasOwnProperty.call(D,k)&&(g[k]=D[k])}}function P(g){var N=1;g=g.split(":");const k=[];for(;0<N&&g.length;)k.push(g.shift()),N--;return g.length&&k.push(g.join(":")),k}function R(g){l.setTimeout(()=>{throw g},0)}function C(){var g=$;let N=null;return g.g&&(N=g.g,g.g=g.g.next,g.g||(g.h=null),N.next=null),N}class B{constructor(){this.h=this.g=null}add(N,k){const D=G.get();D.set(N,k),this.h?this.h.next=D:this.g=D,this.h=D}}var G=new b(()=>new U,g=>g.reset());class U{constructor(){this.next=this.g=this.h=null}set(N,k){this.h=N,this.g=k,this.next=null}reset(){this.next=this.g=this.h=null}}let F,M=!1,$=new B,ne=()=>{const g=l.Promise.resolve(void 0);F=()=>{g.then(te)}};var te=()=>{for(var g;g=C();){try{g.h.call(g.g)}catch(k){R(k)}var N=G;N.j(g),100>N.h&&(N.h++,g.next=N.g,N.g=g)}M=!1};function z(){this.s=this.s,this.C=this.C}z.prototype.s=!1,z.prototype.ma=function(){this.s||(this.s=!0,this.N())},z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function de(g,N){this.type=g,this.g=this.target=N,this.defaultPrevented=!1}de.prototype.h=function(){this.defaultPrevented=!0};var Z=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var g=!1,N=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const k=()=>{};l.addEventListener("test",k,N),l.removeEventListener("test",k,N)}catch{}return g}();function re(g,N){if(de.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g){var k=this.type=g.type,D=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;if(this.target=g.target||g.srcElement,this.g=N,N=g.relatedTarget){if(I){e:{try{E(N.nodeName);var q=!0;break e}catch{}q=!1}q||(N=null)}}else k=="mouseover"?N=g.fromElement:k=="mouseout"&&(N=g.toElement);this.relatedTarget=N,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=typeof g.pointerType=="string"?g.pointerType:_e[g.pointerType]||"",this.state=g.state,this.i=g,g.defaultPrevented&&re.aa.h.call(this)}}v(re,de);var _e={2:"touch",3:"pen",4:"mouse"};re.prototype.h=function(){re.aa.h.call(this);var g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var se="closure_listenable_"+(1e6*Math.random()|0),Fe=0;function oe(g,N,k,D,q){this.listener=g,this.proxy=null,this.src=N,this.type=k,this.capture=!!D,this.ha=q,this.key=++Fe,this.da=this.fa=!1}function V(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function W(g){this.src=g,this.g={},this.h=0}W.prototype.add=function(g,N,k,D,q){var ee=g.toString();g=this.g[ee],g||(g=this.g[ee]=[],this.h++);var je=J(g,N,D,q);return-1<je?(N=g[je],k||(N.fa=!1)):(N=new oe(N,this.src,ee,!!D,q),N.fa=k,g.push(N)),N};function L(g,N){var k=N.type;if(k in g.g){var D=g.g[k],q=Array.prototype.indexOf.call(D,N,void 0),ee;(ee=0<=q)&&Array.prototype.splice.call(D,q,1),ee&&(V(N),g.g[k].length==0&&(delete g.g[k],g.h--))}}function J(g,N,k,D){for(var q=0;q<g.length;++q){var ee=g[q];if(!ee.da&&ee.listener==N&&ee.capture==!!k&&ee.ha==D)return q}return-1}var le="closure_lm_"+(1e6*Math.random()|0),pe={};function ke(g,N,k,D,q){if(Array.isArray(N)){for(var ee=0;ee<N.length;ee++)ke(g,N[ee],k,D,q);return null}return k=Me(k),g&&g[se]?g.K(N,k,u(D)?!!D.capture:!!D,q):De(g,N,k,!1,D,q)}function De(g,N,k,D,q,ee){if(!N)throw Error("Invalid event type");var je=u(q)?!!q.capture:!!q,Ct=ue(g);if(Ct||(g[le]=Ct=new W(g)),k=Ct.add(N,k,D,je,ee),k.proxy)return k;if(D=qe(),k.proxy=D,D.src=g,D.listener=k,g.addEventListener)Z||(q=je),q===void 0&&(q=!1),g.addEventListener(N.toString(),D,q);else if(g.attachEvent)g.attachEvent(Nt(N.toString()),D);else if(g.addListener&&g.removeListener)g.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return k}function qe(){function g(k){return N.call(g.src,g.listener,k)}const N=Q;return g}function mt(g,N,k,D,q){if(Array.isArray(N))for(var ee=0;ee<N.length;ee++)mt(g,N[ee],k,D,q);else D=u(D)?!!D.capture:!!D,k=Me(k),g&&g[se]?(g=g.i,N=String(N).toString(),N in g.g&&(ee=g.g[N],k=J(ee,k,D,q),-1<k&&(V(ee[k]),Array.prototype.splice.call(ee,k,1),ee.length==0&&(delete g.g[N],g.h--)))):g&&(g=ue(g))&&(N=g.g[N.toString()],g=-1,N&&(g=J(N,k,D,q)),(k=-1<g?N[g]:null)&&jt(k))}function jt(g){if(typeof g!="number"&&g&&!g.da){var N=g.src;if(N&&N[se])L(N.i,g);else{var k=g.type,D=g.proxy;N.removeEventListener?N.removeEventListener(k,D,g.capture):N.detachEvent?N.detachEvent(Nt(k),D):N.addListener&&N.removeListener&&N.removeListener(D),(k=ue(N))?(L(k,g),k.h==0&&(k.src=null,N[le]=null)):V(g)}}}function Nt(g){return g in pe?pe[g]:pe[g]="on"+g}function Q(g,N){if(g.da)g=!0;else{N=new re(N,this);var k=g.listener,D=g.ha||g.src;g.fa&&jt(g),g=k.call(D,N)}return g}function ue(g){return g=g[le],g instanceof W?g:null}var we="__closure_events_fn_"+(1e9*Math.random()>>>0);function Me(g){return typeof g=="function"?g:(g[we]||(g[we]=function(N){return g.handleEvent(N)}),g[we])}function Ne(){z.call(this),this.i=new W(this),this.M=this,this.F=null}v(Ne,z),Ne.prototype[se]=!0,Ne.prototype.removeEventListener=function(g,N,k,D){mt(this,g,N,k,D)};function Te(g,N){var k,D=g.F;if(D)for(k=[];D;D=D.F)k.push(D);if(g=g.M,D=N.type||N,typeof N=="string")N=new de(N,g);else if(N instanceof de)N.target=N.target||g;else{var q=N;N=new de(D,g),_(N,q)}if(q=!0,k)for(var ee=k.length-1;0<=ee;ee--){var je=N.g=k[ee];q=rt(je,D,!0,N)&&q}if(je=N.g=g,q=rt(je,D,!0,N)&&q,q=rt(je,D,!1,N)&&q,k)for(ee=0;ee<k.length;ee++)je=N.g=k[ee],q=rt(je,D,!1,N)&&q}Ne.prototype.N=function(){if(Ne.aa.N.call(this),this.i){var g=this.i,N;for(N in g.g){for(var k=g.g[N],D=0;D<k.length;D++)V(k[D]);delete g.g[N],g.h--}}this.F=null},Ne.prototype.K=function(g,N,k,D){return this.i.add(String(g),N,!1,k,D)},Ne.prototype.L=function(g,N,k,D){return this.i.add(String(g),N,!0,k,D)};function rt(g,N,k,D){if(N=g.i.g[String(N)],!N)return!0;N=N.concat();for(var q=!0,ee=0;ee<N.length;++ee){var je=N[ee];if(je&&!je.da&&je.capture==k){var Ct=je.listener,Br=je.ha||je.src;je.fa&&L(g.i,je),q=Ct.call(Br,D)!==!1&&q}}return q&&!D.defaultPrevented}function Ae(g,N,k){if(typeof g=="function")k&&(g=f(g,k));else if(g&&typeof g.handleEvent=="function")g=f(g.handleEvent,g);else throw Error("Invalid listener argument");return 2147483647<Number(N)?-1:l.setTimeout(g,N||0)}function st(g){g.g=Ae(()=>{g.g=null,g.i&&(g.i=!1,st(g))},g.l);const N=g.h;g.h=null,g.m.apply(null,N)}class It extends z{constructor(N,k){super(),this.m=N,this.l=k,this.h=null,this.i=!1,this.g=null}j(N){this.h=arguments,this.g?this.i=!0:st(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function et(g){z.call(this),this.h=g,this.g={}}v(et,z);var Jt=[];function yr(g){O(g.g,function(N,k){this.g.hasOwnProperty(k)&&jt(N)},g),g.g={}}et.prototype.N=function(){et.aa.N.call(this),yr(this)},et.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ut=l.JSON.stringify,vr=l.JSON.parse,Uo=class{stringify(g){return l.JSON.stringify(g,void 0)}parse(g){return l.JSON.parse(g,void 0)}};function Yr(){}Yr.prototype.h=null;function ns(g){return g.h||(g.h=g.i())}function yn(){}var Bo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Vo(){de.call(this,"d")}v(Vo,de);function ss(){de.call(this,"c")}v(ss,de);var Ra={},ze=null;function ht(){return ze=ze||new Ne}Ra.La="serverreachability";function Tt(g){de.call(this,Ra.La,g)}v(Tt,de);function $r(g){const N=ht();Te(N,new Tt(N))}Ra.STAT_EVENT="statevent";function vn(g,N){de.call(this,Ra.STAT_EVENT,g),this.stat=N}v(vn,de);function Wt(g){const N=ht();Te(N,new vn(N,g))}Ra.Ma="timingevent";function Qs(g,N){de.call(this,Ra.Ma,g),this.size=N}v(Qs,de);function Ur(g,N){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){g()},N)}function xn(){this.g=!0}xn.prototype.xa=function(){this.g=!1};function aB(g,N,k,D,q,ee){g.info(function(){if(g.g)if(ee)for(var je="",Ct=ee.split("&"),Br=0;Br<Ct.length;Br++){var pt=Ct[Br].split("=");if(1<pt.length){var Qr=pt[0];pt=pt[1];var Xr=Qr.split("_");je=2<=Xr.length&&Xr[1]=="type"?je+(Qr+"="+pt+"&"):je+(Qr+"=redacted&")}}else je=null;else je=ee;return"XMLHTTP REQ ("+D+") [attempt "+q+"]: "+N+`
`+k+`
`+je})}function iB(g,N,k,D,q,ee,je){g.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+q+"]: "+N+`
`+k+`
`+ee+" "+je})}function Jl(g,N,k,D){g.info(function(){return"XMLHTTP TEXT ("+N+"): "+lB(g,k)+(D?" "+D:"")})}function oB(g,N){g.info(function(){return"TIMEOUT: "+N})}xn.prototype.info=function(){};function lB(g,N){if(!g.g)return N;if(!N)return null;try{var k=JSON.parse(N);if(k){for(g=0;g<k.length;g++)if(Array.isArray(k[g])){var D=k[g];if(!(2>D.length)){var q=D[1];if(Array.isArray(q)&&!(1>q.length)){var ee=q[0];if(ee!="noop"&&ee!="stop"&&ee!="close")for(var je=1;je<q.length;je++)q[je]=""}}}}return ut(k)}catch{return N}}var pf={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},z_={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Tv;function gf(){}v(gf,Yr),gf.prototype.g=function(){return new XMLHttpRequest},gf.prototype.i=function(){return{}},Tv=new gf;function _i(g,N,k,D){this.j=g,this.i=N,this.l=k,this.R=D||1,this.U=new et(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new G_}function G_(){this.i=null,this.g="",this.h=!1}var W_={},Cv={};function kv(g,N,k){g.L=1,g.v=bf(Oa(N)),g.m=k,g.P=!0,q_(g,null)}function q_(g,N){g.F=Date.now(),yf(g),g.A=Oa(g.v);var k=g.A,D=g.R;Array.isArray(D)||(D=[String(D)]),iS(k.i,"t",D),g.C=0,k=g.j.J,g.h=new G_,g.g=_S(g.j,k?N:null,!g.m),0<g.O&&(g.M=new It(f(g.Y,g,g.g),g.O)),N=g.U,k=g.g,D=g.ca;var q="readystatechange";Array.isArray(q)||(q&&(Jt[0]=q.toString()),q=Jt);for(var ee=0;ee<q.length;ee++){var je=ke(k,q[ee],D||N.handleEvent,!1,N.h||N);if(!je)break;N.g[je.key]=je}N=g.H?A(g.H):{},g.m?(g.u||(g.u="POST"),N["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.A,g.u,g.m,N)):(g.u="GET",g.g.ea(g.A,g.u,null,N)),$r(),aB(g.i,g.u,g.A,g.l,g.R,g.m)}_i.prototype.ca=function(g){g=g.target;const N=this.M;N&&Da(g)==3?N.j():this.Y(g)},_i.prototype.Y=function(g){try{if(g==this.g)e:{const Xr=Da(this.g);var N=this.g.Ba();const tc=this.g.Z();if(!(3>Xr)&&(Xr!=3||this.g&&(this.h.h||this.g.oa()||fS(this.g)))){this.J||Xr!=4||N==7||(N==8||0>=tc?$r(3):$r(2)),Iv(this);var k=this.g.Z();this.X=k;t:if(H_(this)){var D=fS(this.g);g="";var q=D.length,ee=Da(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){zo(this),zu(this);var je="";break t}this.h.i=new l.TextDecoder}for(N=0;N<q;N++)this.h.h=!0,g+=this.h.i.decode(D[N],{stream:!(ee&&N==q-1)});D.length=0,this.h.g+=g,this.C=0,je=this.h.g}else je=this.g.oa();if(this.o=k==200,iB(this.i,this.u,this.A,this.l,this.R,Xr,k),this.o){if(this.T&&!this.K){t:{if(this.g){var Ct,Br=this.g;if((Ct=Br.g?Br.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(Ct)){var pt=Ct;break t}}pt=null}if(k=pt)Jl(this.i,this.l,k,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Rv(this,k);else{this.o=!1,this.s=3,Wt(12),zo(this),zu(this);break e}}if(this.P){k=!0;let Es;for(;!this.J&&this.C<je.length;)if(Es=cB(this,je),Es==Cv){Xr==4&&(this.s=4,Wt(14),k=!1),Jl(this.i,this.l,null,"[Incomplete Response]");break}else if(Es==W_){this.s=4,Wt(15),Jl(this.i,this.l,je,"[Invalid Chunk]"),k=!1;break}else Jl(this.i,this.l,Es,null),Rv(this,Es);if(H_(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Xr!=4||je.length!=0||this.h.h||(this.s=1,Wt(16),k=!1),this.o=this.o&&k,!k)Jl(this.i,this.l,je,"[Invalid Chunked Response]"),zo(this),zu(this);else if(0<je.length&&!this.W){this.W=!0;var Qr=this.j;Qr.g==this&&Qr.ba&&!Qr.M&&(Qr.j.info("Great, no buffering proxy detected. Bytes received: "+je.length),$v(Qr),Qr.M=!0,Wt(11))}}else Jl(this.i,this.l,je,null),Rv(this,je);Xr==4&&zo(this),this.o&&!this.J&&(Xr==4?bS(this.j,this):(this.o=!1,yf(this)))}else AB(this.g),k==400&&0<je.indexOf("Unknown SID")?(this.s=3,Wt(12)):(this.s=0,Wt(13)),zo(this),zu(this)}}}catch{}finally{}};function H_(g){return g.g?g.u=="GET"&&g.L!=2&&g.j.Ca:!1}function cB(g,N){var k=g.C,D=N.indexOf(`
`,k);return D==-1?Cv:(k=Number(N.substring(k,D)),isNaN(k)?W_:(D+=1,D+k>N.length?Cv:(N=N.slice(D,D+k),g.C=D+k,N)))}_i.prototype.cancel=function(){this.J=!0,zo(this)};function yf(g){g.S=Date.now()+g.I,K_(g,g.I)}function K_(g,N){if(g.B!=null)throw Error("WatchDog timer not null");g.B=Ur(f(g.ba,g),N)}function Iv(g){g.B&&(l.clearTimeout(g.B),g.B=null)}_i.prototype.ba=function(){this.B=null;const g=Date.now();0<=g-this.S?(oB(this.i,this.A),this.L!=2&&($r(),Wt(17)),zo(this),this.s=2,zu(this)):K_(this,this.S-g)};function zu(g){g.j.G==0||g.J||bS(g.j,g)}function zo(g){Iv(g);var N=g.M;N&&typeof N.ma=="function"&&N.ma(),g.M=null,yr(g.U),g.g&&(N=g.g,g.g=null,N.abort(),N.ma())}function Rv(g,N){try{var k=g.j;if(k.G!=0&&(k.g==g||Ov(k.h,g))){if(!g.K&&Ov(k.h,g)&&k.G==3){try{var D=k.Da.g.parse(N)}catch{D=null}if(Array.isArray(D)&&D.length==3){var q=D;if(q[0]==0){e:if(!k.u){if(k.g)if(k.g.F+3e3<g.F)Af(k),_f(k);else break e;Fv(k),Wt(18)}}else k.za=q[1],0<k.za-k.T&&37500>q[2]&&k.F&&k.v==0&&!k.C&&(k.C=Ur(f(k.Za,k),6e3));if(1>=X_(k.h)&&k.ca){try{k.ca()}catch{}k.ca=void 0}}else Wo(k,11)}else if((g.K||k.g==g)&&Af(k),!w(N))for(q=k.Da.g.parse(N),N=0;N<q.length;N++){let pt=q[N];if(k.T=pt[0],pt=pt[1],k.G==2)if(pt[0]=="c"){k.K=pt[1],k.ia=pt[2];const Qr=pt[3];Qr!=null&&(k.la=Qr,k.j.info("VER="+k.la));const Xr=pt[4];Xr!=null&&(k.Aa=Xr,k.j.info("SVER="+k.Aa));const tc=pt[5];tc!=null&&typeof tc=="number"&&0<tc&&(D=1.5*tc,k.L=D,k.j.info("backChannelRequestTimeoutMs_="+D)),D=k;const Es=g.g;if(Es){const Pf=Es.g?Es.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Pf){var ee=D.h;ee.g||Pf.indexOf("spdy")==-1&&Pf.indexOf("quic")==-1&&Pf.indexOf("h2")==-1||(ee.j=ee.l,ee.g=new Set,ee.h&&(Dv(ee,ee.h),ee.h=null))}if(D.D){const Uv=Es.g?Es.g.getResponseHeader("X-HTTP-Session-Id"):null;Uv&&(D.ya=Uv,Lt(D.I,D.D,Uv))}}k.G=3,k.l&&k.l.ua(),k.ba&&(k.R=Date.now()-g.F,k.j.info("Handshake RTT: "+k.R+"ms")),D=k;var je=g;if(D.qa=NS(D,D.J?D.ia:null,D.W),je.K){J_(D.h,je);var Ct=je,Br=D.L;Br&&(Ct.I=Br),Ct.B&&(Iv(Ct),yf(Ct)),D.g=je}else vS(D);0<k.i.length&&Sf(k)}else pt[0]!="stop"&&pt[0]!="close"||Wo(k,7);else k.G==3&&(pt[0]=="stop"||pt[0]=="close"?pt[0]=="stop"?Wo(k,7):Lv(k):pt[0]!="noop"&&k.l&&k.l.ta(pt),k.v=0)}}$r(4)}catch{}}var uB=class{constructor(g,N){this.g=g,this.map=N}};function Y_(g){this.l=g||10,l.PerformanceNavigationTiming?(g=l.performance.getEntriesByType("navigation"),g=0<g.length&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Q_(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function X_(g){return g.h?1:g.g?g.g.size:0}function Ov(g,N){return g.h?g.h==N:g.g?g.g.has(N):!1}function Dv(g,N){g.g?g.g.add(N):g.h=N}function J_(g,N){g.h&&g.h==N?g.h=null:g.g&&g.g.has(N)&&g.g.delete(N)}Y_.prototype.cancel=function(){if(this.i=Z_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function Z_(g){if(g.h!=null)return g.i.concat(g.h.D);if(g.g!=null&&g.g.size!==0){let N=g.i;for(const k of g.g.values())N=N.concat(k.D);return N}return y(g.i)}function dB(g){if(g.V&&typeof g.V=="function")return g.V();if(typeof Map<"u"&&g instanceof Map||typeof Set<"u"&&g instanceof Set)return Array.from(g.values());if(typeof g=="string")return g.split("");if(c(g)){for(var N=[],k=g.length,D=0;D<k;D++)N.push(g[D]);return N}N=[],k=0;for(D in g)N[k++]=g[D];return N}function hB(g){if(g.na&&typeof g.na=="function")return g.na();if(!g.V||typeof g.V!="function"){if(typeof Map<"u"&&g instanceof Map)return Array.from(g.keys());if(!(typeof Set<"u"&&g instanceof Set)){if(c(g)||typeof g=="string"){var N=[];g=g.length;for(var k=0;k<g;k++)N.push(k);return N}N=[],k=0;for(const D in g)N[k++]=D;return N}}}function eS(g,N){if(g.forEach&&typeof g.forEach=="function")g.forEach(N,void 0);else if(c(g)||typeof g=="string")Array.prototype.forEach.call(g,N,void 0);else for(var k=hB(g),D=dB(g),q=D.length,ee=0;ee<q;ee++)N.call(void 0,D[ee],k&&k[ee],g)}var tS=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function fB(g,N){if(g){g=g.split("&");for(var k=0;k<g.length;k++){var D=g[k].indexOf("="),q=null;if(0<=D){var ee=g[k].substring(0,D);q=g[k].substring(D+1)}else ee=g[k];N(ee,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function Go(g){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,g instanceof Go){this.h=g.h,vf(this,g.j),this.o=g.o,this.g=g.g,xf(this,g.s),this.l=g.l;var N=g.i,k=new qu;k.i=N.i,N.g&&(k.g=new Map(N.g),k.h=N.h),rS(this,k),this.m=g.m}else g&&(N=String(g).match(tS))?(this.h=!1,vf(this,N[1]||"",!0),this.o=Gu(N[2]||""),this.g=Gu(N[3]||"",!0),xf(this,N[4]),this.l=Gu(N[5]||"",!0),rS(this,N[6]||"",!0),this.m=Gu(N[7]||"")):(this.h=!1,this.i=new qu(null,this.h))}Go.prototype.toString=function(){var g=[],N=this.j;N&&g.push(Wu(N,nS,!0),":");var k=this.g;return(k||N=="file")&&(g.push("//"),(N=this.o)&&g.push(Wu(N,nS,!0),"@"),g.push(encodeURIComponent(String(k)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),k=this.s,k!=null&&g.push(":",String(k))),(k=this.l)&&(this.g&&k.charAt(0)!="/"&&g.push("/"),g.push(Wu(k,k.charAt(0)=="/"?gB:pB,!0))),(k=this.i.toString())&&g.push("?",k),(k=this.m)&&g.push("#",Wu(k,vB)),g.join("")};function Oa(g){return new Go(g)}function vf(g,N,k){g.j=k?Gu(N,!0):N,g.j&&(g.j=g.j.replace(/:$/,""))}function xf(g,N){if(N){if(N=Number(N),isNaN(N)||0>N)throw Error("Bad port number "+N);g.s=N}else g.s=null}function rS(g,N,k){N instanceof qu?(g.i=N,xB(g.i,g.h)):(k||(N=Wu(N,yB)),g.i=new qu(N,g.h))}function Lt(g,N,k){g.i.set(N,k)}function bf(g){return Lt(g,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),g}function Gu(g,N){return g?N?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function Wu(g,N,k){return typeof g=="string"?(g=encodeURI(g).replace(N,mB),k&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function mB(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var nS=/[#\/\?@]/g,pB=/[#\?:]/g,gB=/[#\?]/g,yB=/[#\?@]/g,vB=/#/g;function qu(g,N){this.h=this.g=null,this.i=g||null,this.j=!!N}function Si(g){g.g||(g.g=new Map,g.h=0,g.i&&fB(g.i,function(N,k){g.add(decodeURIComponent(N.replace(/\+/g," ")),k)}))}t=qu.prototype,t.add=function(g,N){Si(this),this.i=null,g=Zl(this,g);var k=this.g.get(g);return k||this.g.set(g,k=[]),k.push(N),this.h+=1,this};function sS(g,N){Si(g),N=Zl(g,N),g.g.has(N)&&(g.i=null,g.h-=g.g.get(N).length,g.g.delete(N))}function aS(g,N){return Si(g),N=Zl(g,N),g.g.has(N)}t.forEach=function(g,N){Si(this),this.g.forEach(function(k,D){k.forEach(function(q){g.call(N,q,D,this)},this)},this)},t.na=function(){Si(this);const g=Array.from(this.g.values()),N=Array.from(this.g.keys()),k=[];for(let D=0;D<N.length;D++){const q=g[D];for(let ee=0;ee<q.length;ee++)k.push(N[D])}return k},t.V=function(g){Si(this);let N=[];if(typeof g=="string")aS(this,g)&&(N=N.concat(this.g.get(Zl(this,g))));else{g=Array.from(this.g.values());for(let k=0;k<g.length;k++)N=N.concat(g[k])}return N},t.set=function(g,N){return Si(this),this.i=null,g=Zl(this,g),aS(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[N]),this.h+=1,this},t.get=function(g,N){return g?(g=this.V(g),0<g.length?String(g[0]):N):N};function iS(g,N,k){sS(g,N),0<k.length&&(g.i=null,g.g.set(Zl(g,N),y(k)),g.h+=k.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],N=Array.from(this.g.keys());for(var k=0;k<N.length;k++){var D=N[k];const ee=encodeURIComponent(String(D)),je=this.V(D);for(D=0;D<je.length;D++){var q=ee;je[D]!==""&&(q+="="+encodeURIComponent(String(je[D]))),g.push(q)}}return this.i=g.join("&")};function Zl(g,N){return N=String(N),g.j&&(N=N.toLowerCase()),N}function xB(g,N){N&&!g.j&&(Si(g),g.i=null,g.g.forEach(function(k,D){var q=D.toLowerCase();D!=q&&(sS(this,D),iS(this,q,k))},g)),g.j=N}function bB(g,N){const k=new xn;if(l.Image){const D=new Image;D.onload=m(Ai,k,"TestLoadImage: loaded",!0,N,D),D.onerror=m(Ai,k,"TestLoadImage: error",!1,N,D),D.onabort=m(Ai,k,"TestLoadImage: abort",!1,N,D),D.ontimeout=m(Ai,k,"TestLoadImage: timeout",!1,N,D),l.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=g}else N(!1)}function wB(g,N){const k=new xn,D=new AbortController,q=setTimeout(()=>{D.abort(),Ai(k,"TestPingServer: timeout",!1,N)},1e4);fetch(g,{signal:D.signal}).then(ee=>{clearTimeout(q),ee.ok?Ai(k,"TestPingServer: ok",!0,N):Ai(k,"TestPingServer: server error",!1,N)}).catch(()=>{clearTimeout(q),Ai(k,"TestPingServer: error",!1,N)})}function Ai(g,N,k,D,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),D(k)}catch{}}function jB(){this.g=new Uo}function NB(g,N,k){const D=k||"";try{eS(g,function(q,ee){let je=q;u(q)&&(je=ut(q)),N.push(D+ee+"="+encodeURIComponent(je))})}catch(q){throw N.push(D+"type="+encodeURIComponent("_badmap")),q}}function wf(g){this.l=g.Ub||null,this.j=g.eb||!1}v(wf,Yr),wf.prototype.g=function(){return new jf(this.l,this.j)},wf.prototype.i=function(g){return function(){return g}}({});function jf(g,N){Ne.call(this),this.D=g,this.o=N,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}v(jf,Ne),t=jf.prototype,t.open=function(g,N){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=g,this.A=N,this.readyState=1,Ku(this)},t.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const N={headers:this.u,method:this.B,credentials:this.m,cache:void 0};g&&(N.body=g),(this.D||l).fetch(new Request(this.A,N)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Hu(this)),this.readyState=0},t.Sa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,Ku(this)),this.g&&(this.readyState=3,Ku(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;oS(this)}else g.text().then(this.Ra.bind(this),this.ga.bind(this))};function oS(g){g.j.read().then(g.Pa.bind(g)).catch(g.ga.bind(g))}t.Pa=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var N=g.value?g.value:new Uint8Array(0);(N=this.v.decode(N,{stream:!g.done}))&&(this.response=this.responseText+=N)}g.done?Hu(this):Ku(this),this.readyState==3&&oS(this)}},t.Ra=function(g){this.g&&(this.response=this.responseText=g,Hu(this))},t.Qa=function(g){this.g&&(this.response=g,Hu(this))},t.ga=function(){this.g&&Hu(this)};function Hu(g){g.readyState=4,g.l=null,g.j=null,g.v=null,Ku(g)}t.setRequestHeader=function(g,N){this.u.append(g,N)},t.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],N=this.h.entries();for(var k=N.next();!k.done;)k=k.value,g.push(k[0]+": "+k[1]),k=N.next();return g.join(`\r
`)};function Ku(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(jf.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function lS(g){let N="";return O(g,function(k,D){N+=D,N+=":",N+=k,N+=`\r
`}),N}function Mv(g,N,k){e:{for(D in k){var D=!1;break e}D=!0}D||(k=lS(k),typeof g=="string"?k!=null&&encodeURIComponent(String(k)):Lt(g,N,k))}function nr(g){Ne.call(this),this.headers=new Map,this.o=g||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}v(nr,Ne);var _B=/^https?$/i,SB=["POST","PUT"];t=nr.prototype,t.Ha=function(g){this.J=g},t.ea=function(g,N,k,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);N=N?N.toUpperCase():"GET",this.D=g,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Tv.g(),this.v=this.o?ns(this.o):ns(Tv),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(N,String(g),!0),this.B=!1}catch(ee){cS(this,ee);return}if(g=k||"",k=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var q in D)k.set(q,D[q]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(const ee of D.keys())k.set(ee,D.get(ee));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(k.keys()).find(ee=>ee.toLowerCase()=="content-type"),q=l.FormData&&g instanceof l.FormData,!(0<=Array.prototype.indexOf.call(SB,N,void 0))||D||q||k.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ee,je]of k)this.g.setRequestHeader(ee,je);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{hS(this),this.u=!0,this.g.send(g),this.u=!1}catch(ee){cS(this,ee)}};function cS(g,N){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=N,g.m=5,uS(g),Nf(g)}function uS(g){g.A||(g.A=!0,Te(g,"complete"),Te(g,"error"))}t.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=g||7,Te(this,"complete"),Te(this,"abort"),Nf(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Nf(this,!0)),nr.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?dS(this):this.bb())},t.bb=function(){dS(this)};function dS(g){if(g.h&&typeof o<"u"&&(!g.v[1]||Da(g)!=4||g.Z()!=2)){if(g.u&&Da(g)==4)Ae(g.Ea,0,g);else if(Te(g,"readystatechange"),Da(g)==4){g.h=!1;try{const je=g.Z();e:switch(je){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var N=!0;break e;default:N=!1}var k;if(!(k=N)){var D;if(D=je===0){var q=String(g.D).match(tS)[1]||null;!q&&l.self&&l.self.location&&(q=l.self.location.protocol.slice(0,-1)),D=!_B.test(q?q.toLowerCase():"")}k=D}if(k)Te(g,"complete"),Te(g,"success");else{g.m=6;try{var ee=2<Da(g)?g.g.statusText:""}catch{ee=""}g.l=ee+" ["+g.Z()+"]",uS(g)}}finally{Nf(g)}}}}function Nf(g,N){if(g.g){hS(g);const k=g.g,D=g.v[0]?()=>{}:null;g.g=null,g.v=null,N||Te(g,"ready");try{k.onreadystatechange=D}catch{}}}function hS(g){g.I&&(l.clearTimeout(g.I),g.I=null)}t.isActive=function(){return!!this.g};function Da(g){return g.g?g.g.readyState:0}t.Z=function(){try{return 2<Da(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(g){if(this.g){var N=this.g.responseText;return g&&N.indexOf(g)==0&&(N=N.substring(g.length)),vr(N)}};function fS(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.H){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function AB(g){const N={};g=(g.g&&2<=Da(g)&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<g.length;D++){if(w(g[D]))continue;var k=P(g[D]);const q=k[0];if(k=k[1],typeof k!="string")continue;k=k.trim();const ee=N[q]||[];N[q]=ee,ee.push(k)}T(N,function(D){return D.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Yu(g,N,k){return k&&k.internalChannelParams&&k.internalChannelParams[g]||N}function mS(g){this.Aa=0,this.i=[],this.j=new xn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Yu("failFast",!1,g),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Yu("baseRetryDelayMs",5e3,g),this.cb=Yu("retryDelaySeedMs",1e4,g),this.Wa=Yu("forwardChannelMaxRetries",2,g),this.wa=Yu("forwardChannelRequestTimeoutMs",2e4,g),this.pa=g&&g.xmlHttpFactory||void 0,this.Xa=g&&g.Tb||void 0,this.Ca=g&&g.useFetchStreams||!1,this.L=void 0,this.J=g&&g.supportsCrossDomainXhr||!1,this.K="",this.h=new Y_(g&&g.concurrentRequestLimit),this.Da=new jB,this.P=g&&g.fastHandshake||!1,this.O=g&&g.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=g&&g.Rb||!1,g&&g.xa&&this.j.xa(),g&&g.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&g&&g.detectBufferingProxy||!1,this.ja=void 0,g&&g.longPollingTimeout&&0<g.longPollingTimeout&&(this.ja=g.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=mS.prototype,t.la=8,t.G=1,t.connect=function(g,N,k,D){Wt(0),this.W=g,this.H=N||{},k&&D!==void 0&&(this.H.OSID=k,this.H.OAID=D),this.F=this.X,this.I=NS(this,null,this.W),Sf(this)};function Lv(g){if(pS(g),g.G==3){var N=g.U++,k=Oa(g.I);if(Lt(k,"SID",g.K),Lt(k,"RID",N),Lt(k,"TYPE","terminate"),Qu(g,k),N=new _i(g,g.j,N),N.L=2,N.v=bf(Oa(k)),k=!1,l.navigator&&l.navigator.sendBeacon)try{k=l.navigator.sendBeacon(N.v.toString(),"")}catch{}!k&&l.Image&&(new Image().src=N.v,k=!0),k||(N.g=_S(N.j,null),N.g.ea(N.v)),N.F=Date.now(),yf(N)}jS(g)}function _f(g){g.g&&($v(g),g.g.cancel(),g.g=null)}function pS(g){_f(g),g.u&&(l.clearTimeout(g.u),g.u=null),Af(g),g.h.cancel(),g.s&&(typeof g.s=="number"&&l.clearTimeout(g.s),g.s=null)}function Sf(g){if(!Q_(g.h)&&!g.s){g.s=!0;var N=g.Ga;F||ne(),M||(F(),M=!0),$.add(N,g),g.B=0}}function EB(g,N){return X_(g.h)>=g.h.j-(g.s?1:0)?!1:g.s?(g.i=N.D.concat(g.i),!0):g.G==1||g.G==2||g.B>=(g.Va?0:g.Wa)?!1:(g.s=Ur(f(g.Ga,g,N),wS(g,g.B)),g.B++,!0)}t.Ga=function(g){if(this.s)if(this.s=null,this.G==1){if(!g){this.U=Math.floor(1e5*Math.random()),g=this.U++;const q=new _i(this,this.j,g);let ee=this.o;if(this.S&&(ee?(ee=A(ee),_(ee,this.S)):ee=this.S),this.m!==null||this.O||(q.H=ee,ee=null),this.P)e:{for(var N=0,k=0;k<this.i.length;k++){t:{var D=this.i[k];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break t}D=void 0}if(D===void 0)break;if(N+=D,4096<N){N=k;break e}if(N===4096||k===this.i.length-1){N=k+1;break e}}N=1e3}else N=1e3;N=yS(this,q,N),k=Oa(this.I),Lt(k,"RID",g),Lt(k,"CVER",22),this.D&&Lt(k,"X-HTTP-Session-Id",this.D),Qu(this,k),ee&&(this.O?N="headers="+encodeURIComponent(String(lS(ee)))+"&"+N:this.m&&Mv(k,this.m,ee)),Dv(this.h,q),this.Ua&&Lt(k,"TYPE","init"),this.P?(Lt(k,"$req",N),Lt(k,"SID","null"),q.T=!0,kv(q,k,null)):kv(q,k,N),this.G=2}}else this.G==3&&(g?gS(this,g):this.i.length==0||Q_(this.h)||gS(this))};function gS(g,N){var k;N?k=N.l:k=g.U++;const D=Oa(g.I);Lt(D,"SID",g.K),Lt(D,"RID",k),Lt(D,"AID",g.T),Qu(g,D),g.m&&g.o&&Mv(D,g.m,g.o),k=new _i(g,g.j,k,g.B+1),g.m===null&&(k.H=g.o),N&&(g.i=N.D.concat(g.i)),N=yS(g,k,1e3),k.I=Math.round(.5*g.wa)+Math.round(.5*g.wa*Math.random()),Dv(g.h,k),kv(k,D,N)}function Qu(g,N){g.H&&O(g.H,function(k,D){Lt(N,D,k)}),g.l&&eS({},function(k,D){Lt(N,D,k)})}function yS(g,N,k){k=Math.min(g.i.length,k);var D=g.l?f(g.l.Na,g.l,g):null;e:{var q=g.i;let ee=-1;for(;;){const je=["count="+k];ee==-1?0<k?(ee=q[0].g,je.push("ofs="+ee)):ee=0:je.push("ofs="+ee);let Ct=!0;for(let Br=0;Br<k;Br++){let pt=q[Br].g;const Qr=q[Br].map;if(pt-=ee,0>pt)ee=Math.max(0,q[Br].g-100),Ct=!1;else try{NB(Qr,je,"req"+pt+"_")}catch{D&&D(Qr)}}if(Ct){D=je.join("&");break e}}}return g=g.i.splice(0,k),N.D=g,D}function vS(g){if(!g.g&&!g.u){g.Y=1;var N=g.Fa;F||ne(),M||(F(),M=!0),$.add(N,g),g.v=0}}function Fv(g){return g.g||g.u||3<=g.v?!1:(g.Y++,g.u=Ur(f(g.Fa,g),wS(g,g.v)),g.v++,!0)}t.Fa=function(){if(this.u=null,xS(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var g=2*this.R;this.j.info("BP detection timer enabled: "+g),this.A=Ur(f(this.ab,this),g)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Wt(10),_f(this),xS(this))};function $v(g){g.A!=null&&(l.clearTimeout(g.A),g.A=null)}function xS(g){g.g=new _i(g,g.j,"rpc",g.Y),g.m===null&&(g.g.H=g.o),g.g.O=0;var N=Oa(g.qa);Lt(N,"RID","rpc"),Lt(N,"SID",g.K),Lt(N,"AID",g.T),Lt(N,"CI",g.F?"0":"1"),!g.F&&g.ja&&Lt(N,"TO",g.ja),Lt(N,"TYPE","xmlhttp"),Qu(g,N),g.m&&g.o&&Mv(N,g.m,g.o),g.L&&(g.g.I=g.L);var k=g.g;g=g.ia,k.L=1,k.v=bf(Oa(N)),k.m=null,k.P=!0,q_(k,g)}t.Za=function(){this.C!=null&&(this.C=null,_f(this),Fv(this),Wt(19))};function Af(g){g.C!=null&&(l.clearTimeout(g.C),g.C=null)}function bS(g,N){var k=null;if(g.g==N){Af(g),$v(g),g.g=null;var D=2}else if(Ov(g.h,N))k=N.D,J_(g.h,N),D=1;else return;if(g.G!=0){if(N.o)if(D==1){k=N.m?N.m.length:0,N=Date.now()-N.F;var q=g.B;D=ht(),Te(D,new Qs(D,k)),Sf(g)}else vS(g);else if(q=N.s,q==3||q==0&&0<N.X||!(D==1&&EB(g,N)||D==2&&Fv(g)))switch(k&&0<k.length&&(N=g.h,N.i=N.i.concat(k)),q){case 1:Wo(g,5);break;case 4:Wo(g,10);break;case 3:Wo(g,6);break;default:Wo(g,2)}}}function wS(g,N){let k=g.Ta+Math.floor(Math.random()*g.cb);return g.isActive()||(k*=2),k*N}function Wo(g,N){if(g.j.info("Error code "+N),N==2){var k=f(g.fb,g),D=g.Xa;const q=!D;D=new Go(D||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||vf(D,"https"),bf(D),q?bB(D.toString(),k):wB(D.toString(),k)}else Wt(2);g.G=0,g.l&&g.l.sa(N),jS(g),pS(g)}t.fb=function(g){g?(this.j.info("Successfully pinged google.com"),Wt(2)):(this.j.info("Failed to ping google.com"),Wt(1))};function jS(g){if(g.G=0,g.ka=[],g.l){const N=Z_(g.h);(N.length!=0||g.i.length!=0)&&(x(g.ka,N),x(g.ka,g.i),g.h.i.length=0,y(g.i),g.i.length=0),g.l.ra()}}function NS(g,N,k){var D=k instanceof Go?Oa(k):new Go(k);if(D.g!="")N&&(D.g=N+"."+D.g),xf(D,D.s);else{var q=l.location;D=q.protocol,N=N?N+"."+q.hostname:q.hostname,q=+q.port;var ee=new Go(null);D&&vf(ee,D),N&&(ee.g=N),q&&xf(ee,q),k&&(ee.l=k),D=ee}return k=g.D,N=g.ya,k&&N&&Lt(D,k,N),Lt(D,"VER",g.la),Qu(g,D),D}function _S(g,N,k){if(N&&!g.J)throw Error("Can't create secondary domain capable XhrIo object.");return N=g.Ca&&!g.pa?new nr(new wf({eb:k})):new nr(g.pa),N.Ha(g.J),N}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function SS(){}t=SS.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ef(){}Ef.prototype.g=function(g,N){return new On(g,N)};function On(g,N){Ne.call(this),this.g=new mS(N),this.l=g,this.h=N&&N.messageUrlParams||null,g=N&&N.messageHeaders||null,N&&N.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=N&&N.initMessageHeaders||null,N&&N.messageContentType&&(g?g["X-WebChannel-Content-Type"]=N.messageContentType:g={"X-WebChannel-Content-Type":N.messageContentType}),N&&N.va&&(g?g["X-WebChannel-Client-Profile"]=N.va:g={"X-WebChannel-Client-Profile":N.va}),this.g.S=g,(g=N&&N.Sb)&&!w(g)&&(this.g.m=g),this.v=N&&N.supportsCrossDomainXhr||!1,this.u=N&&N.sendRawJson||!1,(N=N&&N.httpSessionIdParam)&&!w(N)&&(this.g.D=N,g=this.h,g!==null&&N in g&&(g=this.h,N in g&&delete g[N])),this.j=new ec(this)}v(On,Ne),On.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},On.prototype.close=function(){Lv(this.g)},On.prototype.o=function(g){var N=this.g;if(typeof g=="string"){var k={};k.__data__=g,g=k}else this.u&&(k={},k.__data__=ut(g),g=k);N.i.push(new uB(N.Ya++,g)),N.G==3&&Sf(N)},On.prototype.N=function(){this.g.l=null,delete this.j,Lv(this.g),delete this.g,On.aa.N.call(this)};function AS(g){Vo.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var N=g.__sm__;if(N){e:{for(const k in N){g=k;break e}g=void 0}(this.i=g)&&(g=this.i,N=N!==null&&g in N?N[g]:void 0),this.data=N}else this.data=g}v(AS,Vo);function ES(){ss.call(this),this.status=1}v(ES,ss);function ec(g){this.g=g}v(ec,SS),ec.prototype.ua=function(){Te(this.g,"a")},ec.prototype.ta=function(g){Te(this.g,new AS(g))},ec.prototype.sa=function(g){Te(this.g,new ES)},ec.prototype.ra=function(){Te(this.g,"b")},Ef.prototype.createWebChannel=Ef.prototype.g,On.prototype.send=On.prototype.o,On.prototype.open=On.prototype.m,On.prototype.close=On.prototype.close,uR=function(){return new Ef},cR=function(){return ht()},lR=Ra,Rb={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},pf.NO_ERROR=0,pf.TIMEOUT=8,pf.HTTP_ERROR=6,Pm=pf,z_.COMPLETE="complete",oR=z_,yn.EventType=Bo,Bo.OPEN="a",Bo.CLOSE="b",Bo.ERROR="c",Bo.MESSAGE="d",Ne.prototype.listen=Ne.prototype.K,fd=yn,nr.prototype.listenOnce=nr.prototype.L,nr.prototype.getLastError=nr.prototype.Ka,nr.prototype.getLastErrorCode=nr.prototype.Ba,nr.prototype.getStatus=nr.prototype.Z,nr.prototype.getResponseJson=nr.prototype.Oa,nr.prototype.getResponseText=nr.prototype.oa,nr.prototype.send=nr.prototype.ea,nr.prototype.setWithCredentials=nr.prototype.Ha,iR=nr}).apply(typeof Lf<"u"?Lf:typeof self<"u"?self:typeof window<"u"?window:{});const VA="@firebase/firestore",zA="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}rn.UNAUTHENTICATED=new rn(null),rn.GOOGLE_CREDENTIALS=new rn("google-credentials-uid"),rn.FIRST_PARTY=new rn("first-party-uid"),rn.MOCK_USER=new rn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yu="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Al=new Dw("@firebase/firestore");function cc(){return Al.logLevel}function Pe(t,...e){if(Al.logLevel<=at.DEBUG){const r=e.map(Yw);Al.debug(`Firestore (${yu}): ${t}`,...r)}}function oi(t,...e){if(Al.logLevel<=at.ERROR){const r=e.map(Yw);Al.error(`Firestore (${yu}): ${t}`,...r)}}function Uc(t,...e){if(Al.logLevel<=at.WARN){const r=e.map(Yw);Al.warn(`Firestore (${yu}): ${t}`,...r)}}function Yw(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Be(t,e,r){let n="Unexpected state";typeof e=="string"?n=e:r=e,dR(t,n,r)}function dR(t,e,r){let n=`FIRESTORE (${yu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(r!==void 0)try{n+=" CONTEXT: "+JSON.stringify(r)}catch{n+=" CONTEXT: "+r}throw oi(n),new Error(n)}function wt(t,e,r,n){let s="Unexpected state";typeof r=="string"?s=r:n=r,t||dR(e,s,n)}function Ke(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ee extends Pa{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class XH{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(rn.UNAUTHENTICATED))}shutdown(){}}class JH{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class ZH{constructor(e){this.t=e,this.currentUser=rn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){wt(this.o===void 0,42304);let n=this.i;const s=c=>this.i!==n?(n=this.i,r(c)):Promise.resolve();let i=new Xa;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Xa,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{Pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(Pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Xa)}},0),o()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(Pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(wt(typeof n.accessToken=="string",31837,{l:n}),new hR(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return wt(e===null||typeof e=="string",2055,{h:e}),new rn(e)}}class eK{constructor(e,r,n){this.P=e,this.T=r,this.I=n,this.type="FirstParty",this.user=rn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class tK{constructor(e,r,n){this.P=e,this.T=r,this.I=n}getToken(){return Promise.resolve(new eK(this.P,this.T,this.I))}start(e,r){e.enqueueRetryable(()=>r(rn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class GA{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class rK{constructor(e,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,_n(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,r){wt(this.o===void 0,3512);const n=i=>{i.error!=null&&Pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,Pe("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?r(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>n(i))};const s=i=>{Pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):Pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new GA(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(wt(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new GA(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nK(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const s=nK(40);for(let i=0;i<s.length;++i)n.length<20&&s[i]<r&&(n+=e.charAt(s[i]%62))}return n}}function it(t,e){return t<e?-1:t>e?1:0}function Ob(t,e){const r=Math.min(t.length,e.length);for(let n=0;n<r;n++){const s=t.charAt(n),i=e.charAt(n);if(s!==i)return nx(s)===nx(i)?it(s,i):nx(s)?1:-1}return it(t.length,e.length)}const sK=55296,aK=57343;function nx(t){const e=t.charCodeAt(0);return e>=sK&&e<=aK}function Bc(t,e,r){return t.length===e.length&&t.every((n,s)=>r(n,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WA="__name__";class Zs{constructor(e,r,n){r===void 0?r=0:r>e.length&&Be(637,{offset:r,range:e.length}),n===void 0?n=e.length-r:n>e.length-r&&Be(1746,{length:n,range:e.length-r}),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return Zs.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Zs?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let s=0;s<n;s++){const i=Zs.compareSegments(e.get(s),r.get(s));if(i!==0)return i}return it(e.length,r.length)}static compareSegments(e,r){const n=Zs.isNumericId(e),s=Zs.isNumericId(r);return n&&!s?-1:!n&&s?1:n&&s?Zs.extractNumericId(e).compare(Zs.extractNumericId(r)):Ob(e,r)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return no.fromString(e.substring(4,e.length-2))}}class Ot extends Zs{construct(e,r,n){return new Ot(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new Ee(ie.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(s=>s.length>0))}return new Ot(r)}static emptyPath(){return new Ot([])}}const iK=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Wr extends Zs{construct(e,r,n){return new Wr(e,r,n)}static isValidIdentifier(e){return iK.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Wr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===WA}static keyField(){return new Wr([WA])}static fromServerFormat(e){const r=[];let n="",s=0;const i=()=>{if(n.length===0)throw new Ee(ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new Ee(ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Ee(ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=c,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(n+=l,s++):(i(),s++)}if(i(),o)throw new Ee(ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Wr(r)}static emptyPath(){return new Wr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(e){this.path=e}static fromPath(e){return new $e(Ot.fromString(e))}static fromName(e){return new $e(Ot.fromString(e).popFirst(5))}static empty(){return new $e(Ot.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ot.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return Ot.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new $e(new Ot(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fR(t,e,r){if(!r)throw new Ee(ie.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function oK(t,e,r,n){if(e===!0&&n===!0)throw new Ee(ie.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function qA(t){if(!$e.isDocumentKey(t))throw new Ee(ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function HA(t){if($e.isDocumentKey(t))throw new Ee(ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function mR(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Vg(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Be(12329,{type:typeof t})}function li(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ee(ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=Vg(t);throw new Ee(ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wr(t,e){const r={typeString:t};return e&&(r.value=e),r}function Nh(t,e){if(!mR(t))throw new Ee(ie.INVALID_ARGUMENT,"JSON must be an object");let r;for(const n in e)if(e[n]){const s=e[n].typeString,i="value"in e[n]?{value:e[n].value}:void 0;if(!(n in t)){r=`JSON missing required field: '${n}'`;break}const o=t[n];if(s&&typeof o!==s){r=`JSON field '${n}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){r=`Expected '${n}' field to equal '${i.value}'`;break}}if(r)throw new Ee(ie.INVALID_ARGUMENT,r);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KA=-62135596800,YA=1e6;class bt{static now(){return bt.fromMillis(Date.now())}static fromDate(e){return bt.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor((e-1e3*r)*YA);return new bt(r,n)}constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new Ee(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Ee(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<KA)throw new Ee(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ee(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/YA}_compareTo(e){return this.seconds===e.seconds?it(this.nanoseconds,e.nanoseconds):it(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:bt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Nh(e,bt._jsonSchema))return new bt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-KA;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}bt._jsonSchemaVersion="firestore/timestamp/1.0",bt._jsonSchema={type:wr("string",bt._jsonSchemaVersion),seconds:wr("number"),nanoseconds:wr("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{static fromTimestamp(e){return new He(e)}static min(){return new He(new bt(0,0))}static max(){return new He(new bt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vd=-1;function lK(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,s=He.fromTimestamp(n===1e9?new bt(r+1,0):new bt(r,n));return new mo(s,$e.empty(),e)}function cK(t){return new mo(t.readTime,t.key,Vd)}class mo{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new mo(He.min(),$e.empty(),Vd)}static max(){return new mo(He.max(),$e.empty(),Vd)}}function uK(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=$e.comparator(t.documentKey,e.documentKey),r!==0?r:it(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dK="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class hK{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vu(t){if(t.code!==ie.FAILED_PRECONDITION||t.message!==dK)throw t;Pe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Be(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new ce((n,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(n,s)},this.catchCallback=i=>{this.wrapFailure(r,i).next(n,s)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof ce?r:ce.resolve(r)}catch(r){return ce.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):ce.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):ce.reject(r)}static resolve(e){return new ce((r,n)=>{r(e)})}static reject(e){return new ce((r,n)=>{n(e)})}static waitFor(e){return new ce((r,n)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&r()},c=>n(c))}),o=!0,i===s&&r()})}static or(e){let r=ce.resolve(!1);for(const n of e)r=r.next(s=>s?ce.resolve(s):n());return r}static forEach(e,r){const n=[];return e.forEach((s,i)=>{n.push(r.call(this,s,i))}),this.waitFor(n)}static mapArray(e,r){return new ce((n,s)=>{const i=e.length,o=new Array(i);let l=0;for(let c=0;c<i;c++){const u=c;r(e[u]).next(d=>{o[u]=d,++l,l===i&&n(o)},d=>s(d))}})}static doWhile(e,r){return new ce((n,s)=>{const i=()=>{e()===!0?r().next(()=>{i()},s):n()};i()})}}function fK(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function xu(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zg{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>r.writeSequenceNumber(n))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}zg.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xw=-1;function Gg(t){return t==null}function lp(t){return t===0&&1/t==-1/0}function mK(t){return typeof t=="number"&&Number.isInteger(t)&&!lp(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pR="";function pK(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=QA(e)),e=gK(t.get(r),e);return QA(e)}function gK(t,e){let r=e;const n=t.length;for(let s=0;s<n;s++){const i=t.charAt(s);switch(i){case"\0":r+="";break;case pR:r+="";break;default:r+=i}}return r}function QA(t){return t+pR+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XA(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function To(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function gR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(e,r){this.comparator=e,this.root=r||zr.EMPTY}insert(e,r){return new tr(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,zr.BLACK,null,null))}remove(e){return new tr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,zr.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return r+n.left.size;s<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ff(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ff(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ff(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ff(this.root,e,this.comparator,!0)}}class Ff{constructor(e,r,n,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=r?n(e.key,r):1,r&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class zr{constructor(e,r,n,s,i){this.key=e,this.value=r,this.color=n??zr.RED,this.left=s??zr.EMPTY,this.right=i??zr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,s,i){return new zr(e??this.key,r??this.value,n??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let s=this;const i=n(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,r,n),null):i===0?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(e,r,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return zr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,s=this;if(r(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,r),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),r(e,s.key)===0){if(s.right.isEmpty())return zr.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,r))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,zr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,zr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Be(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Be(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Be(27949);return e+(this.isRed()?0:1)}}zr.EMPTY=null,zr.RED=!0,zr.BLACK=!1;zr.EMPTY=new class{constructor(){this.size=0}get key(){throw Be(57766)}get value(){throw Be(16141)}get color(){throw Be(16727)}get left(){throw Be(29726)}get right(){throw Be(36894)}copy(e,r,n,s,i){return this}insert(e,r,n){return new zr(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(e){this.comparator=e,this.data=new tr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;r(s.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new JA(this.data.getIterator())}getIteratorFrom(e){return new JA(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof Ar)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const s=r.getNext().key,i=n.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Ar(this.comparator);return r.data=e,r}}class JA{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this.fields=e,e.sort(Wr.comparator)}static empty(){return new zn([])}unionWith(e){let r=new Ar(Wr.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new zn(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Bc(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new yR("Invalid base64 string: "+i):i}}(e);return new Hr(r)}static fromUint8Array(e){const r=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Hr(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return it(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Hr.EMPTY_BYTE_STRING=new Hr("");const yK=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function po(t){if(wt(!!t,39018),typeof t=="string"){let e=0;const r=yK.exec(t);if(wt(!!r,46558,{timestamp:t}),r[1]){let s=r[1];s=(s+"000000000").substr(0,9),e=Number(s)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:hr(t.seconds),nanos:hr(t.nanos)}}function hr(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function go(t){return typeof t=="string"?Hr.fromBase64String(t):Hr.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vR="server_timestamp",xR="__type__",bR="__previous_value__",wR="__local_write_time__";function Jw(t){var r,n;return((n=(((r=t==null?void 0:t.mapValue)==null?void 0:r.fields)||{})[xR])==null?void 0:n.stringValue)===vR}function Wg(t){const e=t.mapValue.fields[bR];return Jw(e)?Wg(e):e}function zd(t){const e=po(t.mapValue.fields[wR].timestampValue);return new bt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vK{constructor(e,r,n,s,i,o,l,c,u,d){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=d}}const cp="(default)";class Gd{constructor(e,r){this.projectId=e,this.database=r||cp}static empty(){return new Gd("","")}get isDefaultDatabase(){return this.database===cp}isEqual(e){return e instanceof Gd&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jR="__type__",NR="__max__",$f={mapValue:{fields:{__type__:{stringValue:NR}}}},_R="__vector__",up="value";function yo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Jw(t)?4:bK(t)?9007199254740991:xK(t)?10:11:Be(28295,{value:t})}function wa(t,e){if(t===e)return!0;const r=yo(t);if(r!==yo(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return zd(t).isEqual(zd(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=po(s.timestampValue),l=po(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return go(s.bytesValue).isEqual(go(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return hr(s.geoPointValue.latitude)===hr(i.geoPointValue.latitude)&&hr(s.geoPointValue.longitude)===hr(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return hr(s.integerValue)===hr(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=hr(s.doubleValue),l=hr(i.doubleValue);return o===l?lp(o)===lp(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Bc(t.arrayValue.values||[],e.arrayValue.values||[],wa);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(XA(o)!==XA(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!wa(o[c],l[c])))return!1;return!0}(t,e);default:return Be(52216,{left:t})}}function Wd(t,e){return(t.values||[]).find(r=>wa(r,e))!==void 0}function Vc(t,e){if(t===e)return 0;const r=yo(t),n=yo(e);if(r!==n)return it(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return it(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=hr(i.integerValue||i.doubleValue),c=hr(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return ZA(t.timestampValue,e.timestampValue);case 4:return ZA(zd(t),zd(e));case 5:return Ob(t.stringValue,e.stringValue);case 6:return function(i,o){const l=go(i),c=go(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),c=o.split("/");for(let u=0;u<l.length&&u<c.length;u++){const d=it(l[u],c[u]);if(d!==0)return d}return it(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=it(hr(i.latitude),hr(o.latitude));return l!==0?l:it(hr(i.longitude),hr(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return eE(t.arrayValue,e.arrayValue);case 10:return function(i,o){var f,m,v,y;const l=i.fields||{},c=o.fields||{},u=(f=l[up])==null?void 0:f.arrayValue,d=(m=c[up])==null?void 0:m.arrayValue,h=it(((v=u==null?void 0:u.values)==null?void 0:v.length)||0,((y=d==null?void 0:d.values)==null?void 0:y.length)||0);return h!==0?h:eE(u,d)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===$f.mapValue&&o===$f.mapValue)return 0;if(i===$f.mapValue)return 1;if(o===$f.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),u=o.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let h=0;h<c.length&&h<d.length;++h){const f=Ob(c[h],d[h]);if(f!==0)return f;const m=Vc(l[c[h]],u[d[h]]);if(m!==0)return m}return it(c.length,d.length)}(t.mapValue,e.mapValue);default:throw Be(23264,{he:r})}}function ZA(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return it(t,e);const r=po(t),n=po(e),s=it(r.seconds,n.seconds);return s!==0?s:it(r.nanos,n.nanos)}function eE(t,e){const r=t.values||[],n=e.values||[];for(let s=0;s<r.length&&s<n.length;++s){const i=Vc(r[s],n[s]);if(i)return i}return it(r.length,n.length)}function zc(t){return Db(t)}function Db(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=po(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return go(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return $e.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",s=!0;for(const i of r.values||[])s?s=!1:n+=",",n+=Db(i);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let s="{",i=!0;for(const o of n)i?i=!1:s+=",",s+=`${o}:${Db(r.fields[o])}`;return s+"}"}(t.mapValue):Be(61005,{value:t})}function Tm(t){switch(yo(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Wg(t);return e?16+Tm(e):16;case 5:return 2*t.stringValue.length;case 6:return go(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((s,i)=>s+Tm(i),0)}(t.arrayValue);case 10:case 11:return function(n){let s=0;return To(n.fields,(i,o)=>{s+=i.length+Tm(o)}),s}(t.mapValue);default:throw Be(13486,{value:t})}}function tE(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Mb(t){return!!t&&"integerValue"in t}function Zw(t){return!!t&&"arrayValue"in t}function rE(t){return!!t&&"nullValue"in t}function nE(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Cm(t){return!!t&&"mapValue"in t}function xK(t){var r,n;return((n=(((r=t==null?void 0:t.mapValue)==null?void 0:r.fields)||{})[jR])==null?void 0:n.stringValue)===_R}function Sd(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return To(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=Sd(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=Sd(t.arrayValue.values[r]);return e}return{...t}}function bK(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===NR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this.value=e}static empty(){return new Sn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!Cm(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=Sd(r)}setAll(e){let r=Wr.emptyPath(),n={},s=[];e.forEach((o,l)=>{if(!r.isImmediateParentOf(l)){const c=this.getFieldsMap(r);this.applyChanges(c,n,s),n={},s=[],r=l.popLast()}o?n[l.lastSegment()]=Sd(o):s.push(l.lastSegment())});const i=this.getFieldsMap(r);this.applyChanges(i,n,s)}delete(e){const r=this.field(e.popLast());Cm(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return wa(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=r.mapValue.fields[e.get(n)];Cm(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=s),r=s}return r.mapValue.fields}applyChanges(e,r,n){To(r,(s,i)=>e[s]=i);for(const s of n)delete e[s]}clone(){return new Sn(Sd(this.value))}}function SR(t){const e=[];return To(t.fields,(r,n)=>{const s=new Wr([r]);if(Cm(n)){const i=SR(n.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new zn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e,r,n,s,i,o,l){this.key=e,this.documentType=r,this.version=n,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new nn(e,0,He.min(),He.min(),He.min(),Sn.empty(),0)}static newFoundDocument(e,r,n,s){return new nn(e,1,r,He.min(),n,s,0)}static newNoDocument(e,r){return new nn(e,2,r,He.min(),He.min(),Sn.empty(),0)}static newUnknownDocument(e,r){return new nn(e,3,r,He.min(),He.min(),Sn.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(He.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Sn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Sn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=He.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof nn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new nn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(e,r){this.position=e,this.inclusive=r}}function sE(t,e,r){let n=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?n=$e.comparator($e.fromName(o.referenceValue),r.key):n=Vc(o,r.data.field(i.field)),i.dir==="desc"&&(n*=-1),n!==0)break}return n}function aE(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!wa(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(e,r="asc"){this.field=e,this.dir=r}}function wK(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{}class br extends AR{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new NK(e,r,n):r==="array-contains"?new AK(e,n):r==="in"?new EK(e,n):r==="not-in"?new PK(e,n):r==="array-contains-any"?new TK(e,n):new br(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new _K(e,n):new SK(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(Vc(r,this.value)):r!==null&&yo(this.value)===yo(r)&&this.matchesComparison(Vc(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Be(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Gs extends AR{constructor(e,r){super(),this.filters=e,this.op=r,this.Pe=null}static create(e,r){return new Gs(e,r)}matches(e){return ER(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function ER(t){return t.op==="and"}function PR(t){return jK(t)&&ER(t)}function jK(t){for(const e of t.filters)if(e instanceof Gs)return!1;return!0}function Lb(t){if(t instanceof br)return t.field.canonicalString()+t.op.toString()+zc(t.value);if(PR(t))return t.filters.map(e=>Lb(e)).join(",");{const e=t.filters.map(r=>Lb(r)).join(",");return`${t.op}(${e})`}}function TR(t,e){return t instanceof br?function(n,s){return s instanceof br&&n.op===s.op&&n.field.isEqual(s.field)&&wa(n.value,s.value)}(t,e):t instanceof Gs?function(n,s){return s instanceof Gs&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce((i,o,l)=>i&&TR(o,s.filters[l]),!0):!1}(t,e):void Be(19439)}function CR(t){return t instanceof br?function(r){return`${r.field.canonicalString()} ${r.op} ${zc(r.value)}`}(t):t instanceof Gs?function(r){return r.op.toString()+" {"+r.getFilters().map(CR).join(" ,")+"}"}(t):"Filter"}class NK extends br{constructor(e,r,n){super(e,r,n),this.key=$e.fromName(n.referenceValue)}matches(e){const r=$e.comparator(e.key,this.key);return this.matchesComparison(r)}}class _K extends br{constructor(e,r){super(e,"in",r),this.keys=kR("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class SK extends br{constructor(e,r){super(e,"not-in",r),this.keys=kR("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function kR(t,e){var r;return(((r=e.arrayValue)==null?void 0:r.values)||[]).map(n=>$e.fromName(n.referenceValue))}class AK extends br{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return Zw(r)&&Wd(r.arrayValue,this.value)}}class EK extends br{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&Wd(this.value.arrayValue,r)}}class PK extends br{constructor(e,r){super(e,"not-in",r)}matches(e){if(Wd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&r.nullValue===void 0&&!Wd(this.value.arrayValue,r)}}class TK extends br{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!Zw(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>Wd(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CK{constructor(e,r=null,n=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.Te=null}}function iE(t,e=null,r=[],n=[],s=null,i=null,o=null){return new CK(t,e,r,n,s,i,o)}function e1(t){const e=Ke(t);if(e.Te===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>Lb(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(i){return i.field.canonicalString()+i.dir}(n)).join(","),Gg(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>zc(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>zc(n)).join(",")),e.Te=r}return e.Te}function t1(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!wK(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!TR(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!aE(t.startAt,e.startAt)&&aE(t.endAt,e.endAt)}function Fb(t){return $e.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(e,r=null,n=[],s=[],i=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function kK(t,e,r,n,s,i,o,l){return new _h(t,e,r,n,s,i,o,l)}function r1(t){return new _h(t)}function oE(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function IR(t){return t.collectionGroup!==null}function Ad(t){const e=Ke(t);if(e.Ie===null){e.Ie=[];const r=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),r.add(i.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Ar(Wr.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(i=>{r.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new hp(i,n))}),r.has(Wr.keyField().canonicalString())||e.Ie.push(new hp(Wr.keyField(),n))}return e.Ie}function ma(t){const e=Ke(t);return e.Ee||(e.Ee=IK(e,Ad(t))),e.Ee}function IK(t,e){if(t.limitType==="F")return iE(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new hp(s.field,i)});const r=t.endAt?new dp(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new dp(t.startAt.position,t.startAt.inclusive):null;return iE(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function $b(t,e){const r=t.filters.concat([e]);return new _h(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function Ub(t,e,r){return new _h(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function qg(t,e){return t1(ma(t),ma(e))&&t.limitType===e.limitType}function RR(t){return`${e1(ma(t))}|lt:${t.limitType}`}function uc(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(s=>CR(s)).join(", ")}]`),Gg(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(s=>zc(s)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(s=>zc(s)).join(",")),`Target(${n})`}(ma(t))}; limitType=${t.limitType})`}function Hg(t,e){return e.isFoundDocument()&&function(n,s){const i=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):$e.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,s){for(const i of Ad(n))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(n,s){for(const i of n.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(n,s){return!(n.startAt&&!function(o,l,c){const u=sE(o,l,c);return o.inclusive?u<=0:u<0}(n.startAt,Ad(n),s)||n.endAt&&!function(o,l,c){const u=sE(o,l,c);return o.inclusive?u>=0:u>0}(n.endAt,Ad(n),s))}(t,e)}function RK(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function OR(t){return(e,r)=>{let n=!1;for(const s of Ad(t)){const i=OK(s,e,r);if(i!==0)return i;n=n||s.field.isKeyField()}return 0}}function OK(t,e,r){const n=t.field.isKeyField()?$e.comparator(e.key,r.key):function(i,o,l){const c=o.data.field(i),u=l.data.field(i);return c!==null&&u!==null?Vc(c,u):Be(42886)}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return Be(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[s,i]of n)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,r]);s.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return n.length===1?delete this.inner[r]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){To(this.inner,(r,n)=>{for(const[s,i]of n)e(s,i)})}isEmpty(){return gR(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DK=new tr($e.comparator);function ci(){return DK}const DR=new tr($e.comparator);function md(...t){let e=DR;for(const r of t)e=e.insert(r.key,r);return e}function MR(t){let e=DR;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function el(){return Ed()}function LR(){return Ed()}function Ed(){return new Gl(t=>t.toString(),(t,e)=>t.isEqual(e))}const MK=new tr($e.comparator),LK=new Ar($e.comparator);function ot(...t){let e=LK;for(const r of t)e=e.add(r);return e}const FK=new Ar(it);function $K(){return FK}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n1(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:lp(e)?"-0":e}}function FR(t){return{integerValue:""+t}}function UK(t,e){return mK(e)?FR(e):n1(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kg{constructor(){this._=void 0}}function BK(t,e,r){return t instanceof qd?function(s,i){const o={fields:{[xR]:{stringValue:vR},[wR]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Jw(i)&&(i=Wg(i)),i&&(o.fields[bR]=i),{mapValue:o}}(r,e):t instanceof Hd?UR(t,e):t instanceof Kd?BR(t,e):function(s,i){const o=$R(s,i),l=lE(o)+lE(s.Ae);return Mb(o)&&Mb(s.Ae)?FR(l):n1(s.serializer,l)}(t,e)}function VK(t,e,r){return t instanceof Hd?UR(t,e):t instanceof Kd?BR(t,e):r}function $R(t,e){return t instanceof fp?function(n){return Mb(n)||function(i){return!!i&&"doubleValue"in i}(n)}(e)?e:{integerValue:0}:null}class qd extends Kg{}class Hd extends Kg{constructor(e){super(),this.elements=e}}function UR(t,e){const r=VR(e);for(const n of t.elements)r.some(s=>wa(s,n))||r.push(n);return{arrayValue:{values:r}}}class Kd extends Kg{constructor(e){super(),this.elements=e}}function BR(t,e){let r=VR(e);for(const n of t.elements)r=r.filter(s=>!wa(s,n));return{arrayValue:{values:r}}}class fp extends Kg{constructor(e,r){super(),this.serializer=e,this.Ae=r}}function lE(t){return hr(t.integerValue||t.doubleValue)}function VR(t){return Zw(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zK{constructor(e,r){this.field=e,this.transform=r}}function GK(t,e){return t.field.isEqual(e.field)&&function(n,s){return n instanceof Hd&&s instanceof Hd||n instanceof Kd&&s instanceof Kd?Bc(n.elements,s.elements,wa):n instanceof fp&&s instanceof fp?wa(n.Ae,s.Ae):n instanceof qd&&s instanceof qd}(t.transform,e.transform)}class WK{constructor(e,r){this.version=e,this.transformResults=r}}class pa{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new pa}static exists(e){return new pa(void 0,e)}static updateTime(e){return new pa(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function km(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Yg{}function zR(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new WR(t.key,pa.none()):new Sh(t.key,t.data,pa.none());{const r=t.data,n=Sn.empty();let s=new Ar(Wr.comparator);for(let i of e.fields)if(!s.has(i)){let o=r.field(i);o===null&&i.length>1&&(i=i.popLast(),o=r.field(i)),o===null?n.delete(i):n.set(i,o),s=s.add(i)}return new Co(t.key,n,new zn(s.toArray()),pa.none())}}function qK(t,e,r){t instanceof Sh?function(s,i,o){const l=s.value.clone(),c=uE(s.fieldTransforms,i,o.transformResults);l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,r):t instanceof Co?function(s,i,o){if(!km(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=uE(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(GR(s)),c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,r):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,r)}function Pd(t,e,r,n){return t instanceof Sh?function(i,o,l,c){if(!km(i.precondition,o))return l;const u=i.value.clone(),d=dE(i.fieldTransforms,c,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,r,n):t instanceof Co?function(i,o,l,c){if(!km(i.precondition,o))return l;const u=dE(i.fieldTransforms,c,o),d=o.data;return d.setAll(GR(i)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(t,e,r,n):function(i,o,l){return km(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,r)}function HK(t,e){let r=null;for(const n of t.fieldTransforms){const s=e.data.field(n.field),i=$R(n.transform,s||null);i!=null&&(r===null&&(r=Sn.empty()),r.set(n.field,i))}return r||null}function cE(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&Bc(n,s,(i,o)=>GK(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Sh extends Yg{constructor(e,r,n,s=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Co extends Yg{constructor(e,r,n,s,i=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function GR(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function uE(t,e,r){const n=new Map;wt(t.length===r.length,32656,{Re:r.length,Ve:t.length});for(let s=0;s<r.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);n.set(i.field,VK(o,l,r[s]))}return n}function dE(t,e,r){const n=new Map;for(const s of t){const i=s.transform,o=r.data.field(s.field);n.set(s.field,BK(i,o,e))}return n}class WR extends Yg{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class KK extends Yg{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YK{constructor(e,r,n,s){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&qK(i,e,n[s])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=Pd(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=Pd(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=LR();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=r.has(s.key)?null:l;const c=zR(o,l);c!==null&&n.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(He.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),ot())}isEqual(e){return this.batchId===e.batchId&&Bc(this.mutations,e.mutations,(r,n)=>cE(r,n))&&Bc(this.baseMutations,e.baseMutations,(r,n)=>cE(r,n))}}class s1{constructor(e,r,n,s){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=s}static from(e,r,n){wt(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let s=function(){return MK}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,n[o].version);return new s1(e,r,n,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let QK=class{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XK{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xr,dt;function JK(t){switch(t){case ie.OK:return Be(64938);case ie.CANCELLED:case ie.UNKNOWN:case ie.DEADLINE_EXCEEDED:case ie.RESOURCE_EXHAUSTED:case ie.INTERNAL:case ie.UNAVAILABLE:case ie.UNAUTHENTICATED:return!1;case ie.INVALID_ARGUMENT:case ie.NOT_FOUND:case ie.ALREADY_EXISTS:case ie.PERMISSION_DENIED:case ie.FAILED_PRECONDITION:case ie.ABORTED:case ie.OUT_OF_RANGE:case ie.UNIMPLEMENTED:case ie.DATA_LOSS:return!0;default:return Be(15467,{code:t})}}function qR(t){if(t===void 0)return oi("GRPC error has no .code"),ie.UNKNOWN;switch(t){case xr.OK:return ie.OK;case xr.CANCELLED:return ie.CANCELLED;case xr.UNKNOWN:return ie.UNKNOWN;case xr.DEADLINE_EXCEEDED:return ie.DEADLINE_EXCEEDED;case xr.RESOURCE_EXHAUSTED:return ie.RESOURCE_EXHAUSTED;case xr.INTERNAL:return ie.INTERNAL;case xr.UNAVAILABLE:return ie.UNAVAILABLE;case xr.UNAUTHENTICATED:return ie.UNAUTHENTICATED;case xr.INVALID_ARGUMENT:return ie.INVALID_ARGUMENT;case xr.NOT_FOUND:return ie.NOT_FOUND;case xr.ALREADY_EXISTS:return ie.ALREADY_EXISTS;case xr.PERMISSION_DENIED:return ie.PERMISSION_DENIED;case xr.FAILED_PRECONDITION:return ie.FAILED_PRECONDITION;case xr.ABORTED:return ie.ABORTED;case xr.OUT_OF_RANGE:return ie.OUT_OF_RANGE;case xr.UNIMPLEMENTED:return ie.UNIMPLEMENTED;case xr.DATA_LOSS:return ie.DATA_LOSS;default:return Be(39323,{code:t})}}(dt=xr||(xr={}))[dt.OK=0]="OK",dt[dt.CANCELLED=1]="CANCELLED",dt[dt.UNKNOWN=2]="UNKNOWN",dt[dt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",dt[dt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",dt[dt.NOT_FOUND=5]="NOT_FOUND",dt[dt.ALREADY_EXISTS=6]="ALREADY_EXISTS",dt[dt.PERMISSION_DENIED=7]="PERMISSION_DENIED",dt[dt.UNAUTHENTICATED=16]="UNAUTHENTICATED",dt[dt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",dt[dt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",dt[dt.ABORTED=10]="ABORTED",dt[dt.OUT_OF_RANGE=11]="OUT_OF_RANGE",dt[dt.UNIMPLEMENTED=12]="UNIMPLEMENTED",dt[dt.INTERNAL=13]="INTERNAL",dt[dt.UNAVAILABLE=14]="UNAVAILABLE",dt[dt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZK(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eY=new no([4294967295,4294967295],0);function hE(t){const e=ZK().encode(t),r=new aR;return r.update(e),new Uint8Array(r.digest())}function fE(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new no([r,n],0),new no([s,i],0)]}class a1{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new pd(`Invalid padding: ${r}`);if(n<0)throw new pd(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new pd(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new pd(`Invalid padding when bitmap length is 0: ${r}`);this.ge=8*e.length-r,this.pe=no.fromNumber(this.ge)}ye(e,r,n){let s=e.add(r.multiply(no.fromNumber(n)));return s.compare(eY)===1&&(s=new no([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const r=hE(e),[n,s]=fE(r);for(let i=0;i<this.hashCount;i++){const o=this.ye(n,s,i);if(!this.we(o))return!1}return!0}static create(e,r,n){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new a1(i,s,r);return n.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const r=hE(e),[n,s]=fE(r);for(let i=0;i<this.hashCount;i++){const o=this.ye(n,s,i);this.Se(o)}}Se(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class pd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qg{constructor(e,r,n,s,i){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const s=new Map;return s.set(e,Ah.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new Qg(He.min(),s,new tr(it),ci(),ot())}}class Ah{constructor(e,r,n,s,i){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new Ah(n,r,ot(),ot(),ot())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(e,r,n,s){this.be=e,this.removedTargetIds=r,this.key=n,this.De=s}}class HR{constructor(e,r){this.targetId=e,this.Ce=r}}class KR{constructor(e,r,n=Hr.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=s}}class mE{constructor(){this.ve=0,this.Fe=pE(),this.Me=Hr.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ot(),r=ot(),n=ot();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:r=r.add(s);break;case 1:n=n.add(s);break;default:Be(38017,{changeType:i})}}),new Ah(this.Me,this.xe,e,r,n)}qe(){this.Oe=!1,this.Fe=pE()}Qe(e,r){this.Oe=!0,this.Fe=this.Fe.insert(e,r)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,wt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class tY{constructor(e){this.Ge=e,this.ze=new Map,this.je=ci(),this.Je=Uf(),this.He=Uf(),this.Ye=new tr(it)}Ze(e){for(const r of e.be)e.De&&e.De.isFoundDocument()?this.Xe(r,e.De):this.et(r,e.key,e.De);for(const r of e.removedTargetIds)this.et(r,e.key,e.De)}tt(e){this.forEachTarget(e,r=>{const n=this.nt(r);switch(e.state){case 0:this.rt(r)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(r);break;case 3:this.rt(r)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(r)&&(this.it(r),n.Le(e.resumeToken));break;default:Be(56790,{state:e.state})}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.ze.forEach((n,s)=>{this.rt(s)&&r(s)})}st(e){const r=e.targetId,n=e.Ce.count,s=this.ot(r);if(s){const i=s.target;if(Fb(i))if(n===0){const o=new $e(i.path);this.et(r,o,nn.newNoDocument(o,He.min()))}else wt(n===1,20013,{expectedCount:n});else{const o=this._t(r);if(o!==n){const l=this.ut(e),c=l?this.ct(l,e,o):1;if(c!==0){this.it(r);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(r,u)}}}}}ut(e){const r=e.Ce.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:i=0}=r;let o,l;try{o=go(n).toUint8Array()}catch(c){if(c instanceof yR)return Uc("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new a1(o,s,i)}catch(c){return Uc(c instanceof pd?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,r,n){return r.Ce.count===n-this.Pt(e,r.targetId)?0:2}Pt(e,r){const n=this.Ge.getRemoteKeysForTarget(r);let s=0;return n.forEach(i=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(r,i,null),s++)}),s}Tt(e){const r=new Map;this.ze.forEach((i,o)=>{const l=this.ot(o);if(l){if(i.current&&Fb(l.target)){const c=new $e(l.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,nn.newNoDocument(c,e))}i.Be&&(r.set(o,i.ke()),i.qe())}});let n=ot();this.He.forEach((i,o)=>{let l=!0;o.forEachWhile(c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(n=n.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new Qg(e,r,this.Ye,this.je,n);return this.je=ci(),this.Je=Uf(),this.He=Uf(),this.Ye=new tr(it),s}Xe(e,r){if(!this.rt(e))return;const n=this.Et(e,r.key)?2:0;this.nt(e).Qe(r.key,n),this.je=this.je.insert(r.key,r),this.Je=this.Je.insert(r.key,this.It(r.key).add(e)),this.He=this.He.insert(r.key,this.dt(r.key).add(e))}et(e,r,n){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,r)?s.Qe(r,1):s.$e(r),this.He=this.He.insert(r,this.dt(r).delete(e)),this.He=this.He.insert(r,this.dt(r).add(e)),n&&(this.je=this.je.insert(r,n))}removeTarget(e){this.ze.delete(e)}_t(e){const r=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let r=this.ze.get(e);return r||(r=new mE,this.ze.set(e,r)),r}dt(e){let r=this.He.get(e);return r||(r=new Ar(it),this.He=this.He.insert(e,r)),r}It(e){let r=this.Je.get(e);return r||(r=new Ar(it),this.Je=this.Je.insert(e,r)),r}rt(e){const r=this.ot(e)!==null;return r||Pe("WatchChangeAggregator","Detected inactive target",e),r}ot(e){const r=this.ze.get(e);return r&&r.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new mE),this.Ge.getRemoteKeysForTarget(e).forEach(r=>{this.et(e,r,null)})}Et(e,r){return this.Ge.getRemoteKeysForTarget(e).has(r)}}function Uf(){return new tr($e.comparator)}function pE(){return new tr($e.comparator)}const rY={asc:"ASCENDING",desc:"DESCENDING"},nY={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},sY={and:"AND",or:"OR"};class aY{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function Bb(t,e){return t.useProto3Json||Gg(e)?e:{value:e}}function mp(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function YR(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function iY(t,e){return mp(t,e.toTimestamp())}function ga(t){return wt(!!t,49232),He.fromTimestamp(function(r){const n=po(r);return new bt(n.seconds,n.nanos)}(t))}function i1(t,e){return Vb(t,e).canonicalString()}function Vb(t,e){const r=function(s){return new Ot(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?r:r.child(e)}function QR(t){const e=Ot.fromString(t);return wt(tO(e),10190,{key:e.toString()}),e}function zb(t,e){return i1(t.databaseId,e.path)}function sx(t,e){const r=QR(e);if(r.get(1)!==t.databaseId.projectId)throw new Ee(ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new Ee(ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new $e(JR(r))}function XR(t,e){return i1(t.databaseId,e)}function oY(t){const e=QR(t);return e.length===4?Ot.emptyPath():JR(e)}function Gb(t){return new Ot(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function JR(t){return wt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function gE(t,e,r){return{name:zb(t,e),fields:r.value.mapValue.fields}}function lY(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Be(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(u,d){return u.useProto3Json?(wt(d===void 0||typeof d=="string",58123),Hr.fromBase64String(d||"")):(wt(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),Hr.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(u){const d=u.code===void 0?ie.UNKNOWN:qR(u.code);return new Ee(d,u.message||"")}(o);r=new KR(n,s,i,l||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const s=sx(t,n.document.name),i=ga(n.document.updateTime),o=n.document.createTime?ga(n.document.createTime):He.min(),l=new Sn({mapValue:{fields:n.document.fields}}),c=nn.newFoundDocument(s,i,o,l),u=n.targetIds||[],d=n.removedTargetIds||[];r=new Im(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const s=sx(t,n.document),i=n.readTime?ga(n.readTime):He.min(),o=nn.newNoDocument(s,i),l=n.removedTargetIds||[];r=new Im([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const s=sx(t,n.document),i=n.removedTargetIds||[];r=new Im([],i,s,null)}else{if(!("filter"in e))return Be(11601,{Rt:e});{e.filter;const n=e.filter;n.targetId;const{count:s=0,unchangedNames:i}=n,o=new XK(s,i),l=n.targetId;r=new HR(l,o)}}return r}function cY(t,e){let r;if(e instanceof Sh)r={update:gE(t,e.key,e.value)};else if(e instanceof WR)r={delete:zb(t,e.key)};else if(e instanceof Co)r={update:gE(t,e.key,e.data),updateMask:vY(e.fieldMask)};else{if(!(e instanceof KK))return Be(16599,{Vt:e.type});r={verify:zb(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(i,o){const l=o.transform;if(l instanceof qd)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Hd)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Kd)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof fp)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw Be(20930,{transform:o.transform})}(0,n))),e.precondition.isNone||(r.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:iY(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Be(27497)}(t,e.precondition)),r}function uY(t,e){return t&&t.length>0?(wt(e!==void 0,14353),t.map(r=>function(s,i){let o=s.updateTime?ga(s.updateTime):ga(i);return o.isEqual(He.min())&&(o=ga(i)),new WK(o,s.transformResults||[])}(r,e))):[]}function dY(t,e){return{documents:[XR(t,e.path)]}}function hY(t,e){const r={structuredQuery:{}},n=e.path;let s;e.collectionGroup!==null?(s=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=XR(t,s);const i=function(u){if(u.length!==0)return eO(Gs.create(u,"and"))}(e.filters);i&&(r.structuredQuery.where=i);const o=function(u){if(u.length!==0)return u.map(d=>function(f){return{field:dc(f.field),direction:pY(f.dir)}}(d))}(e.orderBy);o&&(r.structuredQuery.orderBy=o);const l=Bb(t,e.limit);return l!==null&&(r.structuredQuery.limit=l),e.startAt&&(r.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:r,parent:s}}function fY(t){let e=oY(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let s=null;if(n>0){wt(n===1,65062);const d=r.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];r.where&&(i=function(h){const f=ZR(h);return f instanceof Gs&&PR(f)?f.getFilters():[f]}(r.where));let o=[];r.orderBy&&(o=function(h){return h.map(f=>function(v){return new hp(hc(v.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(f))}(r.orderBy));let l=null;r.limit&&(l=function(h){let f;return f=typeof h=="object"?h.value:h,Gg(f)?null:f}(r.limit));let c=null;r.startAt&&(c=function(h){const f=!!h.before,m=h.values||[];return new dp(m,f)}(r.startAt));let u=null;return r.endAt&&(u=function(h){const f=!h.before,m=h.values||[];return new dp(m,f)}(r.endAt)),kK(e,s,o,i,l,"F",c,u)}function mY(t,e){const r=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Be(28987,{purpose:s})}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function ZR(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=hc(r.unaryFilter.field);return br.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=hc(r.unaryFilter.field);return br.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=hc(r.unaryFilter.field);return br.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=hc(r.unaryFilter.field);return br.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Be(61313);default:return Be(60726)}}(t):t.fieldFilter!==void 0?function(r){return br.create(hc(r.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Be(58110);default:return Be(50506)}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return Gs.create(r.compositeFilter.filters.map(n=>ZR(n)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Be(1026)}}(r.compositeFilter.op))}(t):Be(30097,{filter:t})}function pY(t){return rY[t]}function gY(t){return nY[t]}function yY(t){return sY[t]}function dc(t){return{fieldPath:t.canonicalString()}}function hc(t){return Wr.fromServerFormat(t.fieldPath)}function eO(t){return t instanceof br?function(r){if(r.op==="=="){if(nE(r.value))return{unaryFilter:{field:dc(r.field),op:"IS_NAN"}};if(rE(r.value))return{unaryFilter:{field:dc(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(nE(r.value))return{unaryFilter:{field:dc(r.field),op:"IS_NOT_NAN"}};if(rE(r.value))return{unaryFilter:{field:dc(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:dc(r.field),op:gY(r.op),value:r.value}}}(t):t instanceof Gs?function(r){const n=r.getFilters().map(s=>eO(s));return n.length===1?n[0]:{compositeFilter:{op:yY(r.op),filters:n}}}(t):Be(54877,{filter:t})}function vY(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function tO(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(e,r,n,s,i=He.min(),o=He.min(),l=Hr.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new Yi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Yi(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Yi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Yi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xY{constructor(e){this.yt=e}}function bY(t){const e=fY({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Ub(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wY{constructor(){this.Cn=new jY}addToCollectionParentIndex(e,r){return this.Cn.add(r),ce.resolve()}getCollectionParents(e,r){return ce.resolve(this.Cn.getEntries(r))}addFieldIndex(e,r){return ce.resolve()}deleteFieldIndex(e,r){return ce.resolve()}deleteAllFieldIndexes(e){return ce.resolve()}createTargetIndexes(e,r){return ce.resolve()}getDocumentsMatchingTarget(e,r){return ce.resolve(null)}getIndexType(e,r){return ce.resolve(0)}getFieldIndexes(e,r){return ce.resolve([])}getNextCollectionGroupToUpdate(e){return ce.resolve(null)}getMinOffset(e,r){return ce.resolve(mo.min())}getMinOffsetFromCollectionGroup(e,r){return ce.resolve(mo.min())}updateCollectionGroup(e,r,n){return ce.resolve()}updateIndexEntries(e,r){return ce.resolve()}}class jY{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r]||new Ar(Ot.comparator),i=!s.has(n);return this.index[r]=s.add(n),i}has(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r];return s&&s.has(n)}getEntries(e){return(this.index[e]||new Ar(Ot.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},rO=41943040;class Nn{static withCacheSize(e){return new Nn(e,Nn.DEFAULT_COLLECTION_PERCENTILE,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Nn.DEFAULT_COLLECTION_PERCENTILE=10,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Nn.DEFAULT=new Nn(rO,Nn.DEFAULT_COLLECTION_PERCENTILE,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Nn.DISABLED=new Nn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Gc(0)}static cr(){return new Gc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vE="LruGarbageCollector",NY=1048576;function xE([t,e],[r,n]){const s=it(t,r);return s===0?it(e,n):s}class _Y{constructor(e){this.Ir=e,this.buffer=new Ar(xE),this.Er=0}dr(){return++this.Er}Ar(e){const r=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();xE(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class SY{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Pe(vE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){xu(r)?Pe(vE,"Ignoring IndexedDB error during garbage collection: ",r):await vu(r)}await this.Vr(3e5)})}}class AY{constructor(e,r){this.mr=e,this.params=r}calculateTargetCount(e,r){return this.mr.gr(e).next(n=>Math.floor(r/100*n))}nthSequenceNumber(e,r){if(r===0)return ce.resolve(zg.ce);const n=new _Y(r);return this.mr.forEachTarget(e,s=>n.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>n.Ar(s))).next(()=>n.maxValue)}removeTargets(e,r,n){return this.mr.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.mr.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(Pe("LruGarbageCollector","Garbage collection skipped; disabled"),ce.resolve(yE)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),yE):this.yr(e,r))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,r){let n,s,i,o,l,c,u;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(Pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,o=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(n=h,l=Date.now(),this.removeTargets(e,n,r))).next(h=>(i=h,c=Date.now(),this.removeOrphanedDocuments(e,n))).next(h=>(u=Date.now(),cc()<=at.DEBUG&&Pe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${s} in `+(l-o)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${h} documents in `+(u-c)+`ms
Total Duration: ${u-d}ms`),ce.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:h})))}}function EY(t,e){return new AY(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PY{constructor(){this.changes=new Gl(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,nn.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?ce.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TY{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CY{constructor(e,r,n,s){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(s=>(n=s,this.remoteDocumentCache.getEntry(e,r))).next(s=>(n!==null&&Pd(n.mutation,s,zn.empty(),bt.now()),s))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,ot()).next(()=>n))}getLocalViewOfDocuments(e,r,n=ot()){const s=el();return this.populateOverlays(e,s,r).next(()=>this.computeViews(e,r,s,n).next(i=>{let o=md();return i.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,r){const n=el();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,ot()))}populateOverlays(e,r,n){const s=[];return n.forEach(i=>{r.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{r.set(o,l)})})}computeViews(e,r,n,s){let i=ci();const o=Ed(),l=function(){return Ed()}();return r.forEach((c,u)=>{const d=n.get(u.key);s.has(u.key)&&(d===void 0||d.mutation instanceof Co)?i=i.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),Pd(d.mutation,u,d.mutation.getFieldMask(),bt.now())):o.set(u.key,zn.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((u,d)=>o.set(u,d)),r.forEach((u,d)=>l.set(u,new TY(d,o.get(u)??null))),l))}recalculateAndSaveOverlays(e,r){const n=Ed();let s=new tr((o,l)=>o-l),i=ot();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(o=>{for(const l of o)l.keys().forEach(c=>{const u=r.get(c);if(u===null)return;let d=n.get(c)||zn.empty();d=l.applyToLocalView(u,d),n.set(c,d);const h=(s.get(l.batchId)||ot()).add(c);s=s.insert(l.batchId,h)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,d=c.value,h=LR();d.forEach(f=>{if(!i.has(f)){const m=zR(r.get(f),n.get(f));m!==null&&h.set(f,m),i=i.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,h))}return ce.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,s){return function(o){return $e.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):IR(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,s):this.getDocumentsMatchingCollectionQuery(e,r,n,s)}getNextDocuments(e,r,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,s-i.size):ce.resolve(el());let l=Vd,c=i;return o.next(u=>ce.forEach(u,(d,h)=>(l<h.largestBatchId&&(l=h.largestBatchId),i.get(d)?ce.resolve():this.remoteDocumentCache.getEntry(e,d).next(f=>{c=c.insert(d,f)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,c,u,ot())).next(d=>({batchId:l,changes:MR(d)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new $e(r)).next(n=>{let s=md();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s})}getDocumentsMatchingCollectionGroupQuery(e,r,n,s){const i=r.collectionGroup;let o=md();return this.indexManager.getCollectionParents(e,i).next(l=>ce.forEach(l,c=>{const u=function(h,f){return new _h(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(r,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,n,s).next(d=>{d.forEach((h,f)=>{o=o.insert(h,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,r,n,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,i,s))).next(o=>{i.forEach((c,u)=>{const d=u.getKey();o.get(d)===null&&(o=o.insert(d,nn.newInvalidDocument(d)))});let l=md();return o.forEach((c,u)=>{const d=i.get(c);d!==void 0&&Pd(d.mutation,u,zn.empty(),bt.now()),Hg(r,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kY{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,r){return ce.resolve(this.Lr.get(r))}saveBundleMetadata(e,r){return this.Lr.set(r.id,function(s){return{id:s.id,version:s.version,createTime:ga(s.createTime)}}(r)),ce.resolve()}getNamedQuery(e,r){return ce.resolve(this.kr.get(r))}saveNamedQuery(e,r){return this.kr.set(r.name,function(s){return{name:s.name,query:bY(s.bundledQuery),readTime:ga(s.readTime)}}(r)),ce.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IY{constructor(){this.overlays=new tr($e.comparator),this.qr=new Map}getOverlay(e,r){return ce.resolve(this.overlays.get(r))}getOverlays(e,r){const n=el();return ce.forEach(r,s=>this.getOverlay(e,s).next(i=>{i!==null&&n.set(s,i)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((s,i)=>{this.St(e,r,i)}),ce.resolve()}removeOverlaysForBatchId(e,r,n){const s=this.qr.get(n);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(n)),ce.resolve()}getOverlaysForCollection(e,r,n){const s=el(),i=r.length+1,o=new $e(r.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!r.isPrefixOf(u.path))break;u.path.length===i&&c.largestBatchId>n&&s.set(c.getKey(),c)}return ce.resolve(s)}getOverlaysForCollectionGroup(e,r,n,s){let i=new tr((u,d)=>u-d);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===r&&u.largestBatchId>n){let d=i.get(u.largestBatchId);d===null&&(d=el(),i=i.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const l=el(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>l.set(u,d)),!(l.size()>=s)););return ce.resolve(l)}St(e,r,n){const s=this.overlays.get(n.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(n.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new QK(r,n));let i=this.qr.get(r);i===void 0&&(i=ot(),this.qr.set(r,i)),this.qr.set(r,i.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RY{constructor(){this.sessionToken=Hr.EMPTY_BYTE_STRING}getSessionToken(e){return ce.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,ce.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(){this.Qr=new Ar(Ir.$r),this.Ur=new Ar(Ir.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,r){const n=new Ir(e,r);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Gr(new Ir(e,r))}zr(e,r){e.forEach(n=>this.removeReference(n,r))}jr(e){const r=new $e(new Ot([])),n=new Ir(r,e),s=new Ir(r,e+1),i=[];return this.Ur.forEachInRange([n,s],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const r=new $e(new Ot([])),n=new Ir(r,e),s=new Ir(r,e+1);let i=ot();return this.Ur.forEachInRange([n,s],o=>{i=i.add(o.key)}),i}containsKey(e){const r=new Ir(e,0),n=this.Qr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class Ir{constructor(e,r){this.key=e,this.Yr=r}static $r(e,r){return $e.comparator(e.key,r.key)||it(e.Yr,r.Yr)}static Kr(e,r){return it(e.Yr,r.Yr)||$e.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OY{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.tr=1,this.Zr=new Ar(Ir.$r)}checkEmpty(e){return ce.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new YK(i,r,n,s);this.mutationQueue.push(o);for(const l of s)this.Zr=this.Zr.add(new Ir(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return ce.resolve(o)}lookupMutationBatch(e,r){return ce.resolve(this.Xr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,s=this.ei(n),i=s<0?0:s;return ce.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return ce.resolve(this.mutationQueue.length===0?Xw:this.tr-1)}getAllMutationBatches(e){return ce.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new Ir(r,0),s=new Ir(r,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([n,s],o=>{const l=this.Xr(o.Yr);i.push(l)}),ce.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Ar(it);return r.forEach(s=>{const i=new Ir(s,0),o=new Ir(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],l=>{n=n.add(l.Yr)})}),ce.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,s=n.length+1;let i=n;$e.isDocumentKey(i)||(i=i.child(""));const o=new Ir(new $e(i),0);let l=new Ar(it);return this.Zr.forEachWhile(c=>{const u=c.key.path;return!!n.isPrefixOf(u)&&(u.length===s&&(l=l.add(c.Yr)),!0)},o),ce.resolve(this.ti(l))}ti(e){const r=[];return e.forEach(n=>{const s=this.Xr(n);s!==null&&r.push(s)}),r}removeMutationBatch(e,r){wt(this.ni(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return ce.forEach(r.mutations,s=>{const i=new Ir(s.key,r.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,r){const n=new Ir(r,0),s=this.Zr.firstAfterOrEqual(n);return ce.resolve(r.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ce.resolve()}ni(e,r){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const r=this.ei(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DY{constructor(e){this.ri=e,this.docs=function(){return new tr($e.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,s=this.docs.get(n),i=s?s.size:0,o=this.ri(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return ce.resolve(n?n.document.mutableCopy():nn.newInvalidDocument(r))}getEntries(e,r){let n=ci();return r.forEach(s=>{const i=this.docs.get(s);n=n.insert(s,i?i.document.mutableCopy():nn.newInvalidDocument(s))}),ce.resolve(n)}getDocumentsMatchingQuery(e,r,n,s){let i=ci();const o=r.path,l=new $e(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||uK(cK(d),n)<=0||(s.has(d.key)||Hg(r,d))&&(i=i.insert(d.key,d.mutableCopy()))}return ce.resolve(i)}getAllFromCollectionGroup(e,r,n,s){Be(9500)}ii(e,r){return ce.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new MY(this)}getSize(e){return ce.resolve(this.size)}}class MY extends PY{constructor(e){super(),this.Nr=e}applyChanges(e){const r=[];return this.changes.forEach((n,s)=>{s.isValidDocument()?r.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(n)}),ce.waitFor(r)}getFromCache(e,r){return this.Nr.getEntry(e,r)}getAllFromCache(e,r){return this.Nr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LY{constructor(e){this.persistence=e,this.si=new Gl(r=>e1(r),t1),this.lastRemoteSnapshotVersion=He.min(),this.highestTargetId=0,this.oi=0,this._i=new o1,this.targetCount=0,this.ai=Gc.ur()}forEachTarget(e,r){return this.si.forEach((n,s)=>r(s)),ce.resolve()}getLastRemoteSnapshotVersion(e){return ce.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ce.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ce.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.oi&&(this.oi=r),ce.resolve()}Pr(e){this.si.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.ai=new Gc(r),this.highestTargetId=r),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,r){return this.Pr(r),this.targetCount+=1,ce.resolve()}updateTargetData(e,r){return this.Pr(r),ce.resolve()}removeTargetData(e,r){return this.si.delete(r.target),this._i.jr(r.targetId),this.targetCount-=1,ce.resolve()}removeTargets(e,r,n){let s=0;const i=[];return this.si.forEach((o,l)=>{l.sequenceNumber<=r&&n.get(l.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),ce.waitFor(i).next(()=>s)}getTargetCount(e){return ce.resolve(this.targetCount)}getTargetData(e,r){const n=this.si.get(r)||null;return ce.resolve(n)}addMatchingKeys(e,r,n){return this._i.Wr(r,n),ce.resolve()}removeMatchingKeys(e,r,n){this._i.zr(r,n);const s=this.persistence.referenceDelegate,i=[];return s&&r.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),ce.waitFor(i)}removeMatchingKeysForTargetId(e,r){return this._i.jr(r),ce.resolve()}getMatchingKeysForTargetId(e,r){const n=this._i.Hr(r);return ce.resolve(n)}containsKey(e,r){return ce.resolve(this._i.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nO{constructor(e,r){this.ui={},this.overlays={},this.ci=new zg(0),this.li=!1,this.li=!0,this.hi=new RY,this.referenceDelegate=e(this),this.Pi=new LY(this),this.indexManager=new wY,this.remoteDocumentCache=function(s){return new DY(s)}(n=>this.referenceDelegate.Ti(n)),this.serializer=new xY(r),this.Ii=new kY(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new IY,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.ui[e.toKey()];return n||(n=new OY(r,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,r,n){Pe("MemoryPersistence","Starting transaction:",e);const s=new FY(this.ci.next());return this.referenceDelegate.Ei(),n(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,r){return ce.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,r)))}}class FY extends hK{constructor(e){super(),this.currentSequenceNumber=e}}class l1{constructor(e){this.persistence=e,this.Ri=new o1,this.Vi=null}static mi(e){return new l1(e)}get fi(){if(this.Vi)return this.Vi;throw Be(60996)}addReference(e,r,n){return this.Ri.addReference(n,r),this.fi.delete(n.toString()),ce.resolve()}removeReference(e,r,n){return this.Ri.removeReference(n,r),this.fi.add(n.toString()),ce.resolve()}markPotentiallyOrphaned(e,r){return this.fi.add(r.toString()),ce.resolve()}removeTarget(e,r){this.Ri.jr(r.targetId).forEach(s=>this.fi.add(s.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>n.removeTargetData(e,r))}Ei(){this.Vi=new Set}di(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ce.forEach(this.fi,n=>{const s=$e.fromPath(n);return this.gi(e,s).next(i=>{i||r.removeEntry(s,He.min())})}).next(()=>(this.Vi=null,r.apply(e)))}updateLimboDocument(e,r){return this.gi(e,r).next(n=>{n?this.fi.delete(r.toString()):this.fi.add(r.toString())})}Ti(e){return 0}gi(e,r){return ce.or([()=>ce.resolve(this.Ri.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Ai(e,r)])}}class pp{constructor(e,r){this.persistence=e,this.pi=new Gl(n=>pK(n.path),(n,s)=>n.isEqual(s)),this.garbageCollector=EY(this,r)}static mi(e,r){return new pp(e,r)}Ei(){}di(e){return ce.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}gr(e){const r=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>r.next(s=>n+s))}wr(e){let r=0;return this.pr(e,n=>{r++}).next(()=>r)}pr(e,r){return ce.forEach(this.pi,(n,s)=>this.br(e,n,s).next(i=>i?ce.resolve():r(s)))}removeTargets(e,r,n){return this.persistence.getTargetCache().removeTargets(e,r,n)}removeOrphanedDocuments(e,r){let n=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,r).next(l=>{l||(n++,i.removeEntry(o,He.min()))})).next(()=>i.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,r){return this.pi.set(r,e.currentSequenceNumber),ce.resolve()}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,r,n){return this.pi.set(n,e.currentSequenceNumber),ce.resolve()}removeReference(e,r,n){return this.pi.set(n,e.currentSequenceNumber),ce.resolve()}updateLimboDocument(e,r){return this.pi.set(r,e.currentSequenceNumber),ce.resolve()}Ti(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=Tm(e.data.value)),r}br(e,r,n){return ce.or([()=>this.persistence.Ai(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const s=this.pi.get(r);return ce.resolve(s!==void 0&&s>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{constructor(e,r,n,s){this.targetId=e,this.fromCache=r,this.Es=n,this.ds=s}static As(e,r){let n=ot(),s=ot();for(const i of r.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new c1(e,r.fromCache,n,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $Y{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UY{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return pG()?8:fK(on())>0?6:4}()}initialize(e,r){this.ps=e,this.indexManager=r,this.Rs=!0}getDocumentsMatchingQuery(e,r,n,s){const i={result:null};return this.ys(e,r).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,r,s,n).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new $Y;return this.Ss(e,r,o).next(l=>{if(i.result=l,this.Vs)return this.bs(e,r,o,l.size)})}).next(()=>i.result)}bs(e,r,n,s){return n.documentReadCount<this.fs?(cc()<=at.DEBUG&&Pe("QueryEngine","SDK will not create cache indexes for query:",uc(r),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ce.resolve()):(cc()<=at.DEBUG&&Pe("QueryEngine","Query:",uc(r),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.gs*s?(cc()<=at.DEBUG&&Pe("QueryEngine","The SDK decides to create cache indexes for query:",uc(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ma(r))):ce.resolve())}ys(e,r){if(oE(r))return ce.resolve(null);let n=ma(r);return this.indexManager.getIndexType(e,n).next(s=>s===0?null:(r.limit!==null&&s===1&&(r=Ub(r,null,"F"),n=ma(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(i=>{const o=ot(...i);return this.ps.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,n).next(c=>{const u=this.Ds(r,l);return this.Cs(r,u,o,c.readTime)?this.ys(e,Ub(r,null,"F")):this.vs(e,u,r,c)}))})))}ws(e,r,n,s){return oE(r)||s.isEqual(He.min())?ce.resolve(null):this.ps.getDocuments(e,n).next(i=>{const o=this.Ds(r,i);return this.Cs(r,o,n,s)?ce.resolve(null):(cc()<=at.DEBUG&&Pe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),uc(r)),this.vs(e,o,r,lK(s,Vd)).next(l=>l))})}Ds(e,r){let n=new Ar(OR(e));return r.forEach((s,i)=>{Hg(e,i)&&(n=n.add(i))}),n}Cs(e,r,n,s){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const i=e.limitType==="F"?r.last():r.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,r,n){return cc()<=at.DEBUG&&Pe("QueryEngine","Using full collection scan to execute query:",uc(r)),this.ps.getDocumentsMatchingQuery(e,r,mo.min(),n)}vs(e,r,n,s){return this.ps.getDocumentsMatchingQuery(e,n,s).next(i=>(r.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u1="LocalStore",BY=3e8;class VY{constructor(e,r,n,s){this.persistence=e,this.Fs=r,this.serializer=s,this.Ms=new tr(it),this.xs=new Gl(i=>e1(i),t1),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new CY(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.Ms))}}function zY(t,e,r,n){return new VY(t,e,r,n)}async function sO(t,e){const r=Ke(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let s;return r.mutationQueue.getAllMutationBatches(n).next(i=>(s=i,r.Bs(e),r.mutationQueue.getAllMutationBatches(n))).next(i=>{const o=[],l=[];let c=ot();for(const u of s){o.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of i){l.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return r.localDocuments.getDocuments(n,c).next(u=>({Ls:u,removedBatchIds:o,addedBatchIds:l}))})})}function GY(t,e){const r=Ke(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const s=e.batch.keys(),i=r.Ns.newChangeBuffer({trackRemovals:!0});return function(l,c,u,d){const h=u.batch,f=h.keys();let m=ce.resolve();return f.forEach(v=>{m=m.next(()=>d.getEntry(c,v)).next(y=>{const x=u.docVersions.get(v);wt(x!==null,48541),y.version.compareTo(x)<0&&(h.applyToRemoteDocument(y,u),y.isValidDocument()&&(y.setReadTime(u.commitVersion),d.addEntry(y)))})}),m.next(()=>l.mutationQueue.removeMutationBatch(c,h))}(r,n,e,i).next(()=>i.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,s,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(l){let c=ot();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(e))).next(()=>r.localDocuments.getDocuments(n,s))})}function aO(t){const e=Ke(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Pi.getLastRemoteSnapshotVersion(r))}function WY(t,e){const r=Ke(t),n=e.snapshotVersion;let s=r.Ms;return r.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=r.Ns.newChangeBuffer({trackRemovals:!0});s=r.Ms;const l=[];e.targetChanges.forEach((d,h)=>{const f=s.get(h);if(!f)return;l.push(r.Pi.removeMatchingKeys(i,d.removedDocuments,h).next(()=>r.Pi.addMatchingKeys(i,d.addedDocuments,h)));let m=f.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(h)!==null?m=m.withResumeToken(Hr.EMPTY_BYTE_STRING,He.min()).withLastLimboFreeSnapshotVersion(He.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,n)),s=s.insert(h,m),function(y,x,b){return y.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=BY?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(f,m,d)&&l.push(r.Pi.updateTargetData(i,m))});let c=ci(),u=ot();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&l.push(r.persistence.referenceDelegate.updateLimboDocument(i,d))}),l.push(qY(i,o,e.documentUpdates).next(d=>{c=d.ks,u=d.qs})),!n.isEqual(He.min())){const d=r.Pi.getLastRemoteSnapshotVersion(i).next(h=>r.Pi.setTargetsMetadata(i,i.currentSequenceNumber,n));l.push(d)}return ce.waitFor(l).next(()=>o.apply(i)).next(()=>r.localDocuments.getLocalViewOfDocuments(i,c,u)).next(()=>c)}).then(i=>(r.Ms=s,i))}function qY(t,e,r){let n=ot(),s=ot();return r.forEach(i=>n=n.add(i)),e.getEntries(t,n).next(i=>{let o=ci();return r.forEach((l,c)=>{const u=i.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(He.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):Pe(u1,"Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{ks:o,qs:s}})}function HY(t,e){const r=Ke(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=Xw),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function KY(t,e){const r=Ke(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let s;return r.Pi.getTargetData(n,e).next(i=>i?(s=i,ce.resolve(s)):r.Pi.allocateTargetId(n).next(o=>(s=new Yi(e,o,"TargetPurposeListen",n.currentSequenceNumber),r.Pi.addTargetData(n,s).next(()=>s))))}).then(n=>{const s=r.Ms.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(r.Ms=r.Ms.insert(n.targetId,n),r.xs.set(e,n.targetId)),n})}async function Wb(t,e,r){const n=Ke(t),s=n.Ms.get(e),i=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",i,o=>n.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!xu(o))throw o;Pe(u1,`Failed to update sequence numbers for target ${e}: ${o}`)}n.Ms=n.Ms.remove(e),n.xs.delete(s.target)}function bE(t,e,r){const n=Ke(t);let s=He.min(),i=ot();return n.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,d){const h=Ke(c),f=h.xs.get(d);return f!==void 0?ce.resolve(h.Ms.get(f)):h.Pi.getTargetData(u,d)}(n,o,ma(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(o,l.targetId).next(c=>{i=c})}).next(()=>n.Fs.getDocumentsMatchingQuery(o,e,r?s:He.min(),r?i:ot())).next(l=>(YY(n,RK(e),l),{documents:l,Qs:i})))}function YY(t,e,r){let n=t.Os.get(e)||He.min();r.forEach((s,i)=>{i.readTime.compareTo(n)>0&&(n=i.readTime)}),t.Os.set(e,n)}class wE{constructor(){this.activeTargetIds=$K()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class QY{constructor(){this.Mo=new wE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,r,n){this.xo[e]=r}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new wE,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XY{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jE="ConnectivityMonitor";class NE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Pe(jE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Pe(jE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bf=null;function qb(){return Bf===null?Bf=function(){return 268435456+Math.round(2147483648*Math.random())}():Bf++,"0x"+Bf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ax="RestConnection",JY={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ZY{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const r=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=r+"://"+e.host,this.Ko=`projects/${n}/databases/${s}`,this.Wo=this.databaseId.database===cp?`project_id=${n}`:`project_id=${n}&database_id=${s}`}Go(e,r,n,s,i){const o=qb(),l=this.zo(e,r.toUriEncodedString());Pe(ax,`Sending RPC '${e}' ${o}:`,l,n);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,s,i);const{host:u}=new URL(l),d=Ao(u);return this.Jo(e,l,c,n,d).then(h=>(Pe(ax,`Received RPC '${e}' ${o}: `,h),h),h=>{throw Uc(ax,`RPC '${e}' ${o} failed with error: `,h,"url: ",l,"request:",n),h})}Ho(e,r,n,s,i,o){return this.Go(e,r,n,s,i)}jo(e,r,n){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+yu}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,i)=>e[i]=s),n&&n.headers.forEach((s,i)=>e[i]=s)}zo(e,r){const n=JY[e];return`${this.Uo}/v1/${r}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eQ{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zr="WebChannelConnection";class tQ extends ZY{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,r,n,s,i){const o=qb();return new Promise((l,c)=>{const u=new iR;u.setWithCredentials(!0),u.listenOnce(oR.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Pm.NO_ERROR:const h=u.getResponseJson();Pe(Zr,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),l(h);break;case Pm.TIMEOUT:Pe(Zr,`RPC '${e}' ${o} timed out`),c(new Ee(ie.DEADLINE_EXCEEDED,"Request time out"));break;case Pm.HTTP_ERROR:const f=u.getStatus();if(Pe(Zr,`RPC '${e}' ${o} failed with status:`,f,"response text:",u.getResponseText()),f>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const v=m==null?void 0:m.error;if(v&&v.status&&v.message){const y=function(b){const w=b.toLowerCase().replace(/_/g,"-");return Object.values(ie).indexOf(w)>=0?w:ie.UNKNOWN}(v.status);c(new Ee(y,v.message))}else c(new Ee(ie.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new Ee(ie.UNAVAILABLE,"Connection failed."));break;default:Be(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{Pe(Zr,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(s);Pe(Zr,`RPC '${e}' ${o} sending request:`,s),u.send(r,"POST",d,n,15)})}T_(e,r,n){const s=qb(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=uR(),l=cR(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,r,n),c.encodeInitMessageHeaders=!0;const d=i.join("");Pe(Zr,`Creating RPC '${e}' stream ${s}: ${d}`,c);const h=o.createWebChannel(d,c);this.I_(h);let f=!1,m=!1;const v=new eQ({Yo:x=>{m?Pe(Zr,`Not sending because RPC '${e}' stream ${s} is closed:`,x):(f||(Pe(Zr,`Opening RPC '${e}' stream ${s} transport.`),h.open(),f=!0),Pe(Zr,`RPC '${e}' stream ${s} sending:`,x),h.send(x))},Zo:()=>h.close()}),y=(x,b,w)=>{x.listen(b,j=>{try{w(j)}catch(E){setTimeout(()=>{throw E},0)}})};return y(h,fd.EventType.OPEN,()=>{m||(Pe(Zr,`RPC '${e}' stream ${s} transport opened.`),v.o_())}),y(h,fd.EventType.CLOSE,()=>{m||(m=!0,Pe(Zr,`RPC '${e}' stream ${s} transport closed`),v.a_(),this.E_(h))}),y(h,fd.EventType.ERROR,x=>{m||(m=!0,Uc(Zr,`RPC '${e}' stream ${s} transport errored. Name:`,x.name,"Message:",x.message),v.a_(new Ee(ie.UNAVAILABLE,"The operation could not be completed")))}),y(h,fd.EventType.MESSAGE,x=>{var b;if(!m){const w=x.data[0];wt(!!w,16349);const j=w,E=(j==null?void 0:j.error)||((b=j[0])==null?void 0:b.error);if(E){Pe(Zr,`RPC '${e}' stream ${s} received error:`,E);const I=E.status;let O=function(S){const _=xr[S];if(_!==void 0)return qR(_)}(I),T=E.message;O===void 0&&(O=ie.INTERNAL,T="Unknown error status: "+I+" with message "+E.message),m=!0,v.a_(new Ee(O,T)),h.close()}else Pe(Zr,`RPC '${e}' stream ${s} received:`,w),v.u_(w)}}),y(l,lR.STAT_EVENT,x=>{x.stat===Rb.PROXY?Pe(Zr,`RPC '${e}' stream ${s} detected buffering proxy`):x.stat===Rb.NOPROXY&&Pe(Zr,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{v.__()},0),v}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(r=>r===e)}}function ix(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xg(t){return new aY(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{constructor(e,r,n=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=r,this.d_=n,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const r=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),s=Math.max(0,r-n);s>0&&Pe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _E="PersistentStream";class oO{constructor(e,r,n,s,i,o,l,c){this.Mi=e,this.S_=n,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new iO(e,r)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,r){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():r&&r.code===ie.RESOURCE_EXHAUSTED?(oi(r.toString()),oi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):r&&r.code===ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(r)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),r=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,s])=>{this.D_===r&&this.G_(n,s)},n=>{e(()=>{const s=new Ee(ie.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(s)})})}G_(e,r){const n=this.W_(this.D_);this.stream=this.j_(e,r),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{n(()=>this.z_(s))}),this.stream.onMessage(s=>{n(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Pe(_E,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return r=>{this.Mi.enqueueAndForget(()=>this.D_===e?r():(Pe(_E,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class rQ extends oO{constructor(e,r,n,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,s,o),this.serializer=i}j_(e,r){return this.connection.T_("Listen",e,r)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const r=lY(this.serializer,e),n=function(i){if(!("targetChange"in i))return He.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?He.min():o.readTime?ga(o.readTime):He.min()}(e);return this.listener.H_(r,n)}Y_(e){const r={};r.database=Gb(this.serializer),r.addTarget=function(i,o){let l;const c=o.target;if(l=Fb(c)?{documents:dY(i,c)}:{query:hY(i,c).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=YR(i,o.resumeToken);const u=Bb(i,o.expectedCount);u!==null&&(l.expectedCount=u)}else if(o.snapshotVersion.compareTo(He.min())>0){l.readTime=mp(i,o.snapshotVersion.toTimestamp());const u=Bb(i,o.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const n=mY(this.serializer,e);n&&(r.labels=n),this.q_(r)}Z_(e){const r={};r.database=Gb(this.serializer),r.removeTarget=e,this.q_(r)}}class nQ extends oO{constructor(e,r,n,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,r){return this.connection.T_("Write",e,r)}J_(e){return wt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,wt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){wt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const r=uY(e.writeResults,e.commitTime),n=ga(e.commitTime);return this.listener.na(n,r)}ra(){const e={};e.database=Gb(this.serializer),this.q_(e)}ea(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>cY(this.serializer,n))};this.q_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sQ{}class aQ extends sQ{constructor(e,r,n,s){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new Ee(ie.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,r,n,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,Vb(r,n),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ee(ie.UNKNOWN,i.toString())})}Ho(e,r,n,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Ho(e,Vb(r,n),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ee(ie.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class iQ{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(oi(r),this.aa=!1):Pe("OnlineStateTracker",r)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const El="RemoteStore";class oQ{constructor(e,r,n,s,i){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{n.enqueueAndForget(async()=>{Wl(this)&&(Pe(El,"Restarting streams for network reachability change."),await async function(c){const u=Ke(c);u.Ea.add(4),await Eh(u),u.Ra.set("Unknown"),u.Ea.delete(4),await Jg(u)}(this))})}),this.Ra=new iQ(n,s)}}async function Jg(t){if(Wl(t))for(const e of t.da)await e(!0)}async function Eh(t){for(const e of t.da)await e(!1)}function lO(t,e){const r=Ke(t);r.Ia.has(e.targetId)||(r.Ia.set(e.targetId,e),m1(r)?f1(r):bu(r).O_()&&h1(r,e))}function d1(t,e){const r=Ke(t),n=bu(r);r.Ia.delete(e),n.O_()&&cO(r,e),r.Ia.size===0&&(n.O_()?n.L_():Wl(r)&&r.Ra.set("Unknown"))}function h1(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(He.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}bu(t).Y_(e)}function cO(t,e){t.Va.Ue(e),bu(t).Z_(e)}function f1(t){t.Va=new tY({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),bu(t).start(),t.Ra.ua()}function m1(t){return Wl(t)&&!bu(t).x_()&&t.Ia.size>0}function Wl(t){return Ke(t).Ea.size===0}function uO(t){t.Va=void 0}async function lQ(t){t.Ra.set("Online")}async function cQ(t){t.Ia.forEach((e,r)=>{h1(t,e)})}async function uQ(t,e){uO(t),m1(t)?(t.Ra.ha(e),f1(t)):t.Ra.set("Unknown")}async function dQ(t,e,r){if(t.Ra.set("Online"),e instanceof KR&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.Ia.delete(l),s.Va.removeTarget(l))}(t,e)}catch(n){Pe(El,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await gp(t,n)}else if(e instanceof Im?t.Va.Ze(e):e instanceof HR?t.Va.st(e):t.Va.tt(e),!r.isEqual(He.min()))try{const n=await aO(t.localStore);r.compareTo(n)>=0&&await function(i,o){const l=i.Va.Tt(o);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=i.Ia.get(u);d&&i.Ia.set(u,d.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,u)=>{const d=i.Ia.get(c);if(!d)return;i.Ia.set(c,d.withResumeToken(Hr.EMPTY_BYTE_STRING,d.snapshotVersion)),cO(i,c);const h=new Yi(d.target,c,u,d.sequenceNumber);h1(i,h)}),i.remoteSyncer.applyRemoteEvent(l)}(t,r)}catch(n){Pe(El,"Failed to raise snapshot:",n),await gp(t,n)}}async function gp(t,e,r){if(!xu(e))throw e;t.Ea.add(1),await Eh(t),t.Ra.set("Offline"),r||(r=()=>aO(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Pe(El,"Retrying IndexedDB access"),await r(),t.Ea.delete(1),await Jg(t)})}function dO(t,e){return e().catch(r=>gp(t,r,e))}async function Zg(t){const e=Ke(t),r=vo(e);let n=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Xw;for(;hQ(e);)try{const s=await HY(e.localStore,n);if(s===null){e.Ta.length===0&&r.L_();break}n=s.batchId,fQ(e,s)}catch(s){await gp(e,s)}hO(e)&&fO(e)}function hQ(t){return Wl(t)&&t.Ta.length<10}function fQ(t,e){t.Ta.push(e);const r=vo(t);r.O_()&&r.X_&&r.ea(e.mutations)}function hO(t){return Wl(t)&&!vo(t).x_()&&t.Ta.length>0}function fO(t){vo(t).start()}async function mQ(t){vo(t).ra()}async function pQ(t){const e=vo(t);for(const r of t.Ta)e.ea(r.mutations)}async function gQ(t,e,r){const n=t.Ta.shift(),s=s1.from(n,e,r);await dO(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Zg(t)}async function yQ(t,e){e&&vo(t).X_&&await async function(n,s){if(function(o){return JK(o)&&o!==ie.ABORTED}(s.code)){const i=n.Ta.shift();vo(n).B_(),await dO(n,()=>n.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Zg(n)}}(t,e),hO(t)&&fO(t)}async function SE(t,e){const r=Ke(t);r.asyncQueue.verifyOperationInProgress(),Pe(El,"RemoteStore received new credentials");const n=Wl(r);r.Ea.add(3),await Eh(r),n&&r.Ra.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.Ea.delete(3),await Jg(r)}async function vQ(t,e){const r=Ke(t);e?(r.Ea.delete(2),await Jg(r)):e||(r.Ea.add(2),await Eh(r),r.Ra.set("Unknown"))}function bu(t){return t.ma||(t.ma=function(r,n,s){const i=Ke(r);return i.sa(),new rQ(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:lQ.bind(null,t),t_:cQ.bind(null,t),r_:uQ.bind(null,t),H_:dQ.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),m1(t)?f1(t):t.Ra.set("Unknown")):(await t.ma.stop(),uO(t))})),t.ma}function vo(t){return t.fa||(t.fa=function(r,n,s){const i=Ke(r);return i.sa(),new nQ(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:mQ.bind(null,t),r_:yQ.bind(null,t),ta:pQ.bind(null,t),na:gQ.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Zg(t)):(await t.fa.stop(),t.Ta.length>0&&(Pe(El,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{constructor(e,r,n,s,i){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=s,this.removalCallback=i,this.deferred=new Xa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,s,i){const o=Date.now()+n,l=new p1(e,r,o,s,i);return l.start(n),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ee(ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function g1(t,e){if(oi("AsyncQueue",`${e}: ${t}`),xu(t))return new Ee(ie.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{static emptySet(e){return new bc(e.comparator)}constructor(e){this.comparator=e?(r,n)=>e(r,n)||$e.comparator(r.key,n.key):(r,n)=>$e.comparator(r.key,n.key),this.keyedMap=md(),this.sortedSet=new tr(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof bc)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const s=r.getNext().key,i=n.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new bc;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{constructor(){this.ga=new tr($e.comparator)}track(e){const r=e.doc.key,n=this.ga.get(r);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(r,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(r):e.type===1&&n.type===2?this.ga=this.ga.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):Be(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(r,e)}ya(){const e=[];return this.ga.inorderTraversal((r,n)=>{e.push(n)}),e}}class Wc{constructor(e,r,n,s,i,o,l,c,u){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,r,n,s,i){const o=[];return r.forEach(l=>{o.push({type:0,doc:l})}),new Wc(e,r,bc.emptySet(r),o,n,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&qg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let s=0;s<r.length;s++)if(r[s].type!==n[s].type||!r[s].doc.isEqual(n[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xQ{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class bQ{constructor(){this.queries=EE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(r,n){const s=Ke(r),i=s.queries;s.queries=EE(),i.forEach((o,l)=>{for(const c of l.Sa)c.onError(n)})})(this,new Ee(ie.ABORTED,"Firestore shutting down"))}}function EE(){return new Gl(t=>RR(t),qg)}async function mO(t,e){const r=Ke(t);let n=3;const s=e.query;let i=r.queries.get(s);i?!i.ba()&&e.Da()&&(n=2):(i=new xQ,n=e.Da()?0:1);try{switch(n){case 0:i.wa=await r.onListen(s,!0);break;case 1:i.wa=await r.onListen(s,!1);break;case 2:await r.onFirstRemoteStoreListen(s)}}catch(o){const l=g1(o,`Initialization of query '${uc(e.query)}' failed`);return void e.onError(l)}r.queries.set(s,i),i.Sa.push(e),e.va(r.onlineState),i.wa&&e.Fa(i.wa)&&y1(r)}async function pO(t,e){const r=Ke(t),n=e.query;let s=3;const i=r.queries.get(n);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function wQ(t,e){const r=Ke(t);let n=!1;for(const s of e){const i=s.query,o=r.queries.get(i);if(o){for(const l of o.Sa)l.Fa(s)&&(n=!0);o.wa=s}}n&&y1(r)}function jQ(t,e,r){const n=Ke(t),s=n.queries.get(e);if(s)for(const i of s.Sa)i.onError(r);n.queries.delete(e)}function y1(t){t.Ca.forEach(e=>{e.next()})}var Hb,PE;(PE=Hb||(Hb={})).Ma="default",PE.Cache="cache";class gO{constructor(e,r,n){this.query=e,this.xa=r,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const n=[];for(const s of e.docChanges)s.type!==3&&n.push(s);e=new Wc(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),r=!0):this.La(e,this.onlineState)&&(this.ka(e),r=!0),this.Na=e,r}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let r=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),r=!0),r}La(e,r){if(!e.fromCache||!this.Da())return!0;const n=r!=="Offline";return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const r=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}ka(e){e=Wc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Hb.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yO{constructor(e){this.key=e}}class vO{constructor(e){this.key=e}}class NQ{constructor(e,r){this.query=e,this.Ya=r,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ot(),this.mutatedKeys=ot(),this.eu=OR(e),this.tu=new bc(this.eu)}get nu(){return this.Ya}ru(e,r){const n=r?r.iu:new AE,s=r?r.tu:this.tu;let i=r?r.mutatedKeys:this.mutatedKeys,o=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,h)=>{const f=s.get(d),m=Hg(this.query,h)?h:null,v=!!f&&this.mutatedKeys.has(f.key),y=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let x=!1;f&&m?f.data.isEqual(m.data)?v!==y&&(n.track({type:3,doc:m}),x=!0):this.su(f,m)||(n.track({type:2,doc:m}),x=!0,(c&&this.eu(m,c)>0||u&&this.eu(m,u)<0)&&(l=!0)):!f&&m?(n.track({type:0,doc:m}),x=!0):f&&!m&&(n.track({type:1,doc:f}),x=!0,(c||u)&&(l=!0)),x&&(m?(o=o.add(m),i=y?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),n.track({type:1,doc:d})}return{tu:o,iu:n,Cs:l,mutatedKeys:i}}su(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((d,h)=>function(m,v){const y=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Be(20277,{Rt:x})}};return y(m)-y(v)}(d.type,h.type)||this.eu(d.doc,h.doc)),this.ou(n),s=s??!1;const l=r&&!s?this._u():[],c=this.Xa.size===0&&this.current&&!s?1:0,u=c!==this.Za;return this.Za=c,o.length!==0||u?{snapshot:new Wc(this.query,e.tu,i,o,e.mutatedKeys,c===0,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new AE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(r=>this.Ya=this.Ya.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ya=this.Ya.delete(r)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ot(),this.tu.forEach(n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))});const r=[];return e.forEach(n=>{this.Xa.has(n)||r.push(new vO(n))}),this.Xa.forEach(n=>{e.has(n)||r.push(new yO(n))}),r}cu(e){this.Ya=e.Qs,this.Xa=ot();const r=this.ru(e.documents);return this.applyChanges(r,!0)}lu(){return Wc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const v1="SyncEngine";class _Q{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class SQ{constructor(e){this.key=e,this.hu=!1}}class AQ{constructor(e,r,n,s,i,o){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Gl(l=>RR(l),qg),this.Iu=new Map,this.Eu=new Set,this.du=new tr($e.comparator),this.Au=new Map,this.Ru=new o1,this.Vu={},this.mu=new Map,this.fu=Gc.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function EQ(t,e,r=!0){const n=_O(t);let s;const i=n.Tu.get(e);return i?(n.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await xO(n,e,r,!0),s}async function PQ(t,e){const r=_O(t);await xO(r,e,!0,!1)}async function xO(t,e,r,n){const s=await KY(t.localStore,ma(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,r);let l;return n&&(l=await TQ(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&r&&lO(t.remoteStore,s),l}async function TQ(t,e,r,n,s){t.pu=(h,f,m)=>async function(y,x,b,w){let j=x.view.ru(b);j.Cs&&(j=await bE(y.localStore,x.query,!1).then(({documents:T})=>x.view.ru(T,j)));const E=w&&w.targetChanges.get(x.targetId),I=w&&w.targetMismatches.get(x.targetId)!=null,O=x.view.applyChanges(j,y.isPrimaryClient,E,I);return CE(y,x.targetId,O.au),O.snapshot}(t,h,f,m);const i=await bE(t.localStore,e,!0),o=new NQ(e,i.Qs),l=o.ru(i.documents),c=Ah.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",s),u=o.applyChanges(l,t.isPrimaryClient,c);CE(t,r,u.au);const d=new _Q(e,r,o);return t.Tu.set(e,d),t.Iu.has(r)?t.Iu.get(r).push(e):t.Iu.set(r,[e]),u.snapshot}async function CQ(t,e,r){const n=Ke(t),s=n.Tu.get(e),i=n.Iu.get(s.targetId);if(i.length>1)return n.Iu.set(s.targetId,i.filter(o=>!qg(o,e))),void n.Tu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await Wb(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),r&&d1(n.remoteStore,s.targetId),Kb(n,s.targetId)}).catch(vu)):(Kb(n,s.targetId),await Wb(n.localStore,s.targetId,!0))}async function kQ(t,e){const r=Ke(t),n=r.Tu.get(e),s=r.Iu.get(n.targetId);r.isPrimaryClient&&s.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),d1(r.remoteStore,n.targetId))}async function IQ(t,e,r){const n=$Q(t);try{const s=await function(o,l){const c=Ke(o),u=bt.now(),d=l.reduce((m,v)=>m.add(v.key),ot());let h,f;return c.persistence.runTransaction("Locally write mutations","readwrite",m=>{let v=ci(),y=ot();return c.Ns.getEntries(m,d).next(x=>{v=x,v.forEach((b,w)=>{w.isValidDocument()||(y=y.add(b))})}).next(()=>c.localDocuments.getOverlayedDocuments(m,v)).next(x=>{h=x;const b=[];for(const w of l){const j=HK(w,h.get(w.key).overlayedDocument);j!=null&&b.push(new Co(w.key,j,SR(j.value.mapValue),pa.exists(!0)))}return c.mutationQueue.addMutationBatch(m,u,b,l)}).next(x=>{f=x;const b=x.applyToLocalDocumentSet(h,y);return c.documentOverlayCache.saveOverlays(m,x.batchId,b)})}).then(()=>({batchId:f.batchId,changes:MR(h)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(s.batchId),function(o,l,c){let u=o.Vu[o.currentUser.toKey()];u||(u=new tr(it)),u=u.insert(l,c),o.Vu[o.currentUser.toKey()]=u}(n,s.batchId,r),await Ph(n,s.changes),await Zg(n.remoteStore)}catch(s){const i=g1(s,"Failed to persist write");r.reject(i)}}async function bO(t,e){const r=Ke(t);try{const n=await WY(r.localStore,e);e.targetChanges.forEach((s,i)=>{const o=r.Au.get(i);o&&(wt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?wt(o.hu,14607):s.removedDocuments.size>0&&(wt(o.hu,42227),o.hu=!1))}),await Ph(r,n,e)}catch(n){await vu(n)}}function TE(t,e,r){const n=Ke(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const s=[];n.Tu.forEach((i,o)=>{const l=o.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const c=Ke(o);c.onlineState=l;let u=!1;c.queries.forEach((d,h)=>{for(const f of h.Sa)f.va(l)&&(u=!0)}),u&&y1(c)}(n.eventManager,e),s.length&&n.Pu.H_(s),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function RQ(t,e,r){const n=Ke(t);n.sharedClientState.updateQueryState(e,"rejected",r);const s=n.Au.get(e),i=s&&s.key;if(i){let o=new tr($e.comparator);o=o.insert(i,nn.newNoDocument(i,He.min()));const l=ot().add(i),c=new Qg(He.min(),new Map,new tr(it),o,l);await bO(n,c),n.du=n.du.remove(i),n.Au.delete(e),x1(n)}else await Wb(n.localStore,e,!1).then(()=>Kb(n,e,r)).catch(vu)}async function OQ(t,e){const r=Ke(t),n=e.batch.batchId;try{const s=await GY(r.localStore,e);jO(r,n,null),wO(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await Ph(r,s)}catch(s){await vu(s)}}async function DQ(t,e,r){const n=Ke(t);try{const s=await function(o,l){const c=Ke(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,l).next(h=>(wt(h!==null,37113),d=h.keys(),c.mutationQueue.removeMutationBatch(u,h))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(n.localStore,e);jO(n,e,r),wO(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await Ph(n,s)}catch(s){await vu(s)}}function wO(t,e){(t.mu.get(e)||[]).forEach(r=>{r.resolve()}),t.mu.delete(e)}function jO(t,e,r){const n=Ke(t);let s=n.Vu[n.currentUser.toKey()];if(s){const i=s.get(e);i&&(r?i.reject(r):i.resolve(),s=s.remove(e)),n.Vu[n.currentUser.toKey()]=s}}function Kb(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Iu.get(e))t.Tu.delete(n),r&&t.Pu.yu(n,r);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(n=>{t.Ru.containsKey(n)||NO(t,n)})}function NO(t,e){t.Eu.delete(e.path.canonicalString());const r=t.du.get(e);r!==null&&(d1(t.remoteStore,r),t.du=t.du.remove(e),t.Au.delete(r),x1(t))}function CE(t,e,r){for(const n of r)n instanceof yO?(t.Ru.addReference(n.key,e),MQ(t,n)):n instanceof vO?(Pe(v1,"Document no longer in limbo: "+n.key),t.Ru.removeReference(n.key,e),t.Ru.containsKey(n.key)||NO(t,n.key)):Be(19791,{wu:n})}function MQ(t,e){const r=e.key,n=r.path.canonicalString();t.du.get(r)||t.Eu.has(n)||(Pe(v1,"New document in limbo: "+r),t.Eu.add(n),x1(t))}function x1(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const r=new $e(Ot.fromString(e)),n=t.fu.next();t.Au.set(n,new SQ(r)),t.du=t.du.insert(r,n),lO(t.remoteStore,new Yi(ma(r1(r.path)),n,"TargetPurposeLimboResolution",zg.ce))}}async function Ph(t,e,r){const n=Ke(t),s=[],i=[],o=[];n.Tu.isEmpty()||(n.Tu.forEach((l,c)=>{o.push(n.pu(c,e,r).then(u=>{var d;if((u||r)&&n.isPrimaryClient){const h=u?!u.fromCache:(d=r==null?void 0:r.targetChanges.get(c.targetId))==null?void 0:d.current;n.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(u){s.push(u);const h=c1.As(c.targetId,u);i.push(h)}}))}),await Promise.all(o),n.Pu.H_(s),await async function(c,u){const d=Ke(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>ce.forEach(u,f=>ce.forEach(f.Es,m=>d.persistence.referenceDelegate.addReference(h,f.targetId,m)).next(()=>ce.forEach(f.ds,m=>d.persistence.referenceDelegate.removeReference(h,f.targetId,m)))))}catch(h){if(!xu(h))throw h;Pe(u1,"Failed to update sequence numbers: "+h)}for(const h of u){const f=h.targetId;if(!h.fromCache){const m=d.Ms.get(f),v=m.snapshotVersion,y=m.withLastLimboFreeSnapshotVersion(v);d.Ms=d.Ms.insert(f,y)}}}(n.localStore,i))}async function LQ(t,e){const r=Ke(t);if(!r.currentUser.isEqual(e)){Pe(v1,"User change. New user:",e.toKey());const n=await sO(r.localStore,e);r.currentUser=e,function(i,o){i.mu.forEach(l=>{l.forEach(c=>{c.reject(new Ee(ie.CANCELLED,o))})}),i.mu.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Ph(r,n.Ls)}}function FQ(t,e){const r=Ke(t),n=r.Au.get(e);if(n&&n.hu)return ot().add(n.key);{let s=ot();const i=r.Iu.get(e);if(!i)return s;for(const o of i){const l=r.Tu.get(o);s=s.unionWith(l.view.nu)}return s}}function _O(t){const e=Ke(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=bO.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=FQ.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=RQ.bind(null,e),e.Pu.H_=wQ.bind(null,e.eventManager),e.Pu.yu=jQ.bind(null,e.eventManager),e}function $Q(t){const e=Ke(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=OQ.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=DQ.bind(null,e),e}class yp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Xg(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,r){return null}Mu(e,r){return null}vu(e){return zY(this.persistence,new UY,e.initialUser,this.serializer)}Cu(e){return new nO(l1.mi,this.serializer)}Du(e){return new QY}async terminate(){var e,r;(e=this.gcScheduler)==null||e.stop(),(r=this.indexBackfillerScheduler)==null||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}yp.provider={build:()=>new yp};class UQ extends yp{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,r){wt(this.persistence.referenceDelegate instanceof pp,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new SY(n,e.asyncQueue,r)}Cu(e){const r=this.cacheSizeBytes!==void 0?Nn.withCacheSize(this.cacheSizeBytes):Nn.DEFAULT;return new nO(n=>pp.mi(n,r),this.serializer)}}class Yb{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>TE(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=LQ.bind(null,this.syncEngine),await vQ(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new bQ}()}createDatastore(e){const r=Xg(e.databaseInfo.databaseId),n=function(i){return new tQ(i)}(e.databaseInfo);return function(i,o,l,c){return new aQ(i,o,l,c)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,s,i,o,l){return new oQ(n,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,r=>TE(this.syncEngine,r,0),function(){return NE.v()?new NE:new XY}())}createSyncEngine(e,r){return function(s,i,o,l,c,u,d){const h=new AQ(s,i,o,l,c,u);return d&&(h.gu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(s){const i=Ke(s);Pe(El,"RemoteStore shutting down."),i.Ea.add(5),await Eh(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(r=this.eventManager)==null||r.terminate()}}Yb.provider={build:()=>new Yb};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SO{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):oi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xo="FirestoreClient";class BQ{constructor(e,r,n,s,i){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=s,this.user=rn.UNAUTHENTICATED,this.clientId=Qw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async o=>{Pe(xo,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(n,o=>(Pe(xo,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Xa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=g1(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function ox(t,e){t.asyncQueue.verifyOperationInProgress(),Pe(xo,"Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async s=>{n.isEqual(s)||(await sO(e.localStore,s),n=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function kE(t,e){t.asyncQueue.verifyOperationInProgress();const r=await VQ(t);Pe(xo,"Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>SE(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,s)=>SE(e.remoteStore,s)),t._onlineComponents=e}async function VQ(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Pe(xo,"Using user provided OfflineComponentProvider");try{await ox(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(s){return s.name==="FirebaseError"?s.code===ie.FAILED_PRECONDITION||s.code===ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(r))throw r;Uc("Error using user provided cache. Falling back to memory cache: "+r),await ox(t,new yp)}}else Pe(xo,"Using default OfflineComponentProvider"),await ox(t,new UQ(void 0));return t._offlineComponents}async function AO(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Pe(xo,"Using user provided OnlineComponentProvider"),await kE(t,t._uninitializedComponentsProvider._online)):(Pe(xo,"Using default OnlineComponentProvider"),await kE(t,new Yb))),t._onlineComponents}function zQ(t){return AO(t).then(e=>e.syncEngine)}async function EO(t){const e=await AO(t),r=e.eventManager;return r.onListen=EQ.bind(null,e.syncEngine),r.onUnlisten=CQ.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=PQ.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=kQ.bind(null,e.syncEngine),r}function GQ(t,e,r={}){const n=new Xa;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,u){const d=new SO({next:f=>{d.Nu(),o.enqueueAndForget(()=>pO(i,h));const m=f.docs.has(l);!m&&f.fromCache?u.reject(new Ee(ie.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&f.fromCache&&c&&c.source==="server"?u.reject(new Ee(ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(f)},error:f=>u.reject(f)}),h=new gO(r1(l.path),d,{includeMetadataChanges:!0,qa:!0});return mO(i,h)}(await EO(t),t.asyncQueue,e,r,n)),n.promise}function WQ(t,e,r={}){const n=new Xa;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,u){const d=new SO({next:f=>{d.Nu(),o.enqueueAndForget(()=>pO(i,h)),f.fromCache&&c.source==="server"?u.reject(new Ee(ie.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(f)},error:f=>u.reject(f)}),h=new gO(l,d,{includeMetadataChanges:!0,qa:!0});return mO(i,h)}(await EO(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PO(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TO="firestore.googleapis.com",RE=!0;class OE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ee(ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=TO,this.ssl=RE}else this.host=e.host,this.ssl=e.ssl??RE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=rO;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<NY)throw new Ee(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}oK("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=PO(e.experimentalLongPollingOptions??{}),function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new Ee(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new Ee(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new Ee(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,s){return n.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ey{constructor(e,r,n,s){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new OE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ee(ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ee(ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new OE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new XH;switch(n.type){case"firstParty":return new tK(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Ee(ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=IE.get(r);n&&(Pe("ComponentProvider","Removing Datastore"),IE.delete(r),n.terminate())}(this),Promise.resolve()}}function qQ(t,e,r,n={}){var u;t=li(t,ey);const s=Ao(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${r}`;s&&(Rw(`https://${l}`),Ow("Firestore",!0)),i.host!==TO&&i.host!==l&&Uc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:l,ssl:s,emulatorOptions:n};if(!jl(c,o)&&(t._setSettings(c),n.mockUserToken)){let d,h;if(typeof n.mockUserToken=="string")d=n.mockUserToken,h=rn.MOCK_USER;else{d=x2(n.mockUserToken,(u=t._app)==null?void 0:u.options.projectId);const f=n.mockUserToken.sub||n.mockUserToken.user_id;if(!f)throw new Ee(ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new rn(f)}t._authCredentials=new JH(new hR(d,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new wu(this.firestore,e,this._query)}}class mr{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new so(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mr(this.firestore,e,this._key)}toJSON(){return{type:mr._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,r,n){if(Nh(r,mr._jsonSchema))return new mr(e,n||null,new $e(Ot.fromString(r.referencePath)))}}mr._jsonSchemaVersion="firestore/documentReference/1.0",mr._jsonSchema={type:wr("string",mr._jsonSchemaVersion),referencePath:wr("string")};class so extends wu{constructor(e,r,n){super(e,r,r1(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new mr(this.firestore,null,new $e(e))}withConverter(e){return new so(this.firestore,e,this._path)}}function Vf(t,e,...r){if(t=Dt(t),fR("collection","path",e),t instanceof ey){const n=Ot.fromString(e,...r);return HA(n),new so(t,null,n)}{if(!(t instanceof mr||t instanceof so))throw new Ee(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Ot.fromString(e,...r));return HA(n),new so(t.firestore,null,n)}}function zf(t,e,...r){if(t=Dt(t),arguments.length===1&&(e=Qw.newId()),fR("doc","path",e),t instanceof ey){const n=Ot.fromString(e,...r);return qA(n),new mr(t,null,new $e(n))}{if(!(t instanceof mr||t instanceof so))throw new Ee(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Ot.fromString(e,...r));return qA(n),new mr(t.firestore,t instanceof so?t.converter:null,new $e(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DE="AsyncQueue";class ME{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new iO(this,"async_queue_retry"),this._c=()=>{const n=ix();n&&Pe(DE,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=e;const r=ix();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const r=ix();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const r=new Xa;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!xu(e))throw e;Pe(DE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const r=this.ac.then(()=>(this.rc=!0,e().catch(n=>{throw this.nc=n,this.rc=!1,oi("INTERNAL UNHANDLED ERROR: ",LE(n)),n}).then(n=>(this.rc=!1,n))));return this.ac=r,r}enqueueAfterDelay(e,r,n){this.uc(),this.oc.indexOf(e)>-1&&(r=0);const s=p1.createAndSchedule(this,e,r,n,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&Be(47125,{Pc:LE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const r of this.tc)if(r.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.tc)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const r=this.tc.indexOf(e);this.tc.splice(r,1)}}function LE(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Th extends ey{constructor(e,r,n,s){super(e,r,n,s),this.type="firestore",this._queue=new ME,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ME(e),this._firestoreClient=void 0,await e}}}function HQ(t,e){const r=typeof t=="object"?t:Lw(),n=typeof t=="string"?t:cp,s=Fg(r,"firestore").getImmediate({identifier:n});if(!s._initialized){const i=g2("firestore");i&&qQ(s,...i)}return s}function b1(t){if(t._terminated)throw new Ee(ie.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||KQ(t),t._firestoreClient}function KQ(t){var n,s,i;const e=t._freezeSettings(),r=function(l,c,u,d){return new vK(l,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,PO(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(t._databaseId,((n=t._app)==null?void 0:n.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new BQ(t._authCredentials,t._appCheckCredentials,t._queue,r,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ds(Hr.fromBase64String(e))}catch(r){throw new Ee(ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new ds(Hr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ds._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Nh(e,ds._jsonSchema))return ds.fromBase64String(e.bytes)}}ds._jsonSchemaVersion="firestore/bytes/1.0",ds._jsonSchema={type:wr("string",ds._jsonSchemaVersion),bytes:wr("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new Ee(ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new Ee(ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new Ee(ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return it(this._lat,e._lat)||it(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ya._jsonSchemaVersion}}static fromJSON(e){if(Nh(e,ya._jsonSchema))return new ya(e.latitude,e.longitude)}}ya._jsonSchemaVersion="firestore/geoPoint/1.0",ya._jsonSchema={type:wr("string",ya._jsonSchemaVersion),latitude:wr("number"),longitude:wr("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,s){if(n.length!==s.length)return!1;for(let i=0;i<n.length;++i)if(n[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:va._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Nh(e,va._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(r=>typeof r=="number"))return new va(e.vectorValues);throw new Ee(ie.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}va._jsonSchemaVersion="firestore/vectorValue/1.0",va._jsonSchema={type:wr("string",va._jsonSchemaVersion),vectorValues:wr("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YQ=/^__.*__$/;class QQ{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new Co(e,this.data,this.fieldMask,r,this.fieldTransforms):new Sh(e,this.data,r,this.fieldTransforms)}}class CO{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new Co(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function kO(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Be(40011,{Ac:t})}}class w1{constructor(e,r,n,s,i,o){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new w1({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const r=(s=this.path)==null?void 0:s.child(e),n=this.Vc({path:r,fc:!1});return n.gc(e),n}yc(e){var s;const r=(s=this.path)==null?void 0:s.child(e),n=this.Vc({path:r,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return vp(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(kO(this.Ac)&&YQ.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class XQ{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||Xg(e)}Cc(e,r,n,s=!1){return new w1({Ac:e,methodName:r,Dc:n,path:Wr.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function j1(t){const e=t._freezeSettings(),r=Xg(t._databaseId);return new XQ(t._databaseId,!!e.ignoreUndefinedProperties,r)}function JQ(t,e,r,n,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,r,s);_1("Data must be an object, but it was:",o,n);const l=IO(n,o);let c,u;if(i.merge)c=new zn(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const h of i.mergeFields){const f=Qb(e,h,r);if(!o.contains(f))throw new Ee(ie.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);OO(d,f)||d.push(f)}c=new zn(d),u=o.fieldTransforms.filter(h=>c.covers(h.field))}else c=null,u=o.fieldTransforms;return new QQ(new Sn(l),c,u)}class ny extends ry{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ny}}class N1 extends ry{_toFieldTransform(e){return new zK(e.path,new qd)}isEqual(e){return e instanceof N1}}function ZQ(t,e,r,n){const s=t.Cc(1,e,r);_1("Data must be an object, but it was:",s,n);const i=[],o=Sn.empty();To(n,(c,u)=>{const d=S1(e,c,r);u=Dt(u);const h=s.yc(d);if(u instanceof ny)i.push(d);else{const f=Ch(u,h);f!=null&&(i.push(d),o.set(d,f))}});const l=new zn(i);return new CO(o,l,s.fieldTransforms)}function eX(t,e,r,n,s,i){const o=t.Cc(1,e,r),l=[Qb(e,n,r)],c=[s];if(i.length%2!=0)throw new Ee(ie.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<i.length;f+=2)l.push(Qb(e,i[f])),c.push(i[f+1]);const u=[],d=Sn.empty();for(let f=l.length-1;f>=0;--f)if(!OO(u,l[f])){const m=l[f];let v=c[f];v=Dt(v);const y=o.yc(m);if(v instanceof ny)u.push(m);else{const x=Ch(v,y);x!=null&&(u.push(m),d.set(m,x))}}const h=new zn(u);return new CO(d,h,o.fieldTransforms)}function tX(t,e,r,n=!1){return Ch(r,t.Cc(n?4:3,e))}function Ch(t,e){if(RO(t=Dt(t)))return _1("Unsupported field value:",e,t),IO(t,e);if(t instanceof ry)return function(n,s){if(!kO(s.Ac))throw s.Sc(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(n,s){const i=[];let o=0;for(const l of n){let c=Ch(l,s.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(n,s){if((n=Dt(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return UK(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=bt.fromDate(n);return{timestampValue:mp(s.serializer,i)}}if(n instanceof bt){const i=new bt(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:mp(s.serializer,i)}}if(n instanceof ya)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof ds)return{bytesValue:YR(s.serializer,n._byteString)};if(n instanceof mr){const i=s.databaseId,o=n.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:i1(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof va)return function(o,l){return{mapValue:{fields:{[jR]:{stringValue:_R},[up]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Sc("VectorValues must only contain numeric values.");return n1(l.serializer,u)})}}}}}}(n,s);throw s.Sc(`Unsupported field value: ${Vg(n)}`)}(t,e)}function IO(t,e){const r={};return gR(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):To(t,(n,s)=>{const i=Ch(s,e.mc(n));i!=null&&(r[n]=i)}),{mapValue:{fields:r}}}function RO(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof bt||t instanceof ya||t instanceof ds||t instanceof mr||t instanceof ry||t instanceof va)}function _1(t,e,r){if(!RO(r)||!mR(r)){const n=Vg(r);throw n==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+n)}}function Qb(t,e,r){if((e=Dt(e))instanceof ty)return e._internalPath;if(typeof e=="string")return S1(t,e);throw vp("Field path arguments must be of type string or ",t,!1,void 0,r)}const rX=new RegExp("[~\\*/\\[\\]]");function S1(t,e,r){if(e.search(rX)>=0)throw vp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new ty(...e.split("."))._internalPath}catch{throw vp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function vp(t,e,r,n,s){const i=n&&!n.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;r&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${n}`),o&&(c+=` in document ${s}`),c+=")"),new Ee(ie.INVALID_ARGUMENT,l+t+c)}function OO(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DO{constructor(e,r,n,s,i){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new mr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new nX(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(A1("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class nX extends DO{data(){return super.data()}}function A1(t,e){return typeof e=="string"?S1(t,e):e instanceof ty?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sX(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ee(ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class E1{}class aX extends E1{}function FE(t,e,...r){let n=[];e instanceof E1&&n.push(e),n=n.concat(r),function(i){const o=i.filter(c=>c instanceof P1).length,l=i.filter(c=>c instanceof sy).length;if(o>1||o>0&&l>0)throw new Ee(ie.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)t=s._apply(t);return t}class sy extends aX{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new sy(e,r,n)}_apply(e){const r=this._parse(e);return MO(e._query,r),new wu(e.firestore,e.converter,$b(e._query,r))}_parse(e){const r=j1(e.firestore);return function(i,o,l,c,u,d,h){let f;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Ee(ie.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){BE(h,d);const v=[];for(const y of h)v.push(UE(c,i,y));f={arrayValue:{values:v}}}else f=UE(c,i,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||BE(h,d),f=tX(l,o,h,d==="in"||d==="not-in");return br.create(u,d,f)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function $E(t,e,r){const n=e,s=A1("where",t);return sy._create(s,n,r)}class P1 extends E1{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new P1(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:Gs.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const c of l)MO(o,c),o=$b(o,c)}(e._query,r),new wu(e.firestore,e.converter,$b(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function UE(t,e,r){if(typeof(r=Dt(r))=="string"){if(r==="")throw new Ee(ie.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!IR(e)&&r.indexOf("/")!==-1)throw new Ee(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(Ot.fromString(r));if(!$e.isDocumentKey(n))throw new Ee(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return tE(t,new $e(n))}if(r instanceof mr)return tE(t,r._key);throw new Ee(ie.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Vg(r)}.`)}function BE(t,e){if(!Array.isArray(t)||t.length===0)throw new Ee(ie.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function MO(t,e){const r=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new Ee(ie.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ee(ie.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class iX{convertValue(e,r="none"){switch(yo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return hr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(go(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw Be(62114,{value:e})}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return To(e,(s,i)=>{n[s]=this.convertValue(i,r)}),n}convertVectorValue(e){var n,s,i;const r=(i=(s=(n=e.fields)==null?void 0:n[up].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>hr(o.doubleValue));return new va(r)}convertGeoPoint(e){return new ya(hr(e.latitude),hr(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=Wg(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(zd(e));default:return null}}convertTimestamp(e){const r=po(e);return new bt(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=Ot.fromString(e);wt(tO(n),9688,{name:e});const s=new Gd(n.get(1),n.get(3)),i=new $e(n.popFirst(5));return s.isEqual(r)||oi(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oX(t,e,r){let n;return n=t?t.toFirestore(e):e,n}class gd{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class hl extends DO{constructor(e,r,n,s,i,o){super(e,r,n,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Rm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(A1("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ee(ie.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,r={};return r.type=hl._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}hl._jsonSchemaVersion="firestore/documentSnapshot/1.0",hl._jsonSchema={type:wr("string",hl._jsonSchemaVersion),bundleSource:wr("string","DocumentSnapshot"),bundleName:wr("string"),bundle:wr("string")};class Rm extends hl{data(e={}){return super.data(e)}}class wc{constructor(e,r,n,s){this._firestore=e,this._userDataWriter=r,this._snapshot=s,this.metadata=new gd(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new Rm(this._firestore,this._userDataWriter,n.key,n,new gd(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Ee(ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const c=new Rm(s._firestore,s._userDataWriter,l.doc.key,l.doc,new gd(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new Rm(s._firestore,s._userDataWriter,l.doc.key,l.doc,new gd(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,d=-1;return l.type!==0&&(u=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),d=o.indexOf(l.doc.key)),{type:lX(l.type),doc:c,oldIndex:u,newIndex:d}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ee(ie.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=wc._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Qw.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],n=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(r.push(i._document),n.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function lX(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Be(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cX(t){t=li(t,mr);const e=li(t.firestore,Th);return GQ(b1(e),t._key).then(r=>uX(e,t,r))}wc._jsonSchemaVersion="firestore/querySnapshot/1.0",wc._jsonSchema={type:wr("string",wc._jsonSchemaVersion),bundleSource:wr("string","QuerySnapshot"),bundleName:wr("string"),bundle:wr("string")};class LO extends iX{constructor(e){super(),this.firestore=e}convertBytes(e){return new ds(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new mr(this.firestore,null,r)}}function VE(t){t=li(t,wu);const e=li(t.firestore,Th),r=b1(e),n=new LO(e);return sX(t._query),WQ(r,t._query).then(s=>new wc(e,n,t,s))}function zE(t,e,r){t=li(t,mr);const n=li(t.firestore,Th),s=oX(t.converter,e);return FO(n,[JQ(j1(n),"setDoc",t._key,s,t.converter!==null,r).toMutation(t._key,pa.none())])}function GE(t,e,r,...n){t=li(t,mr);const s=li(t.firestore,Th),i=j1(s);let o;return o=typeof(e=Dt(e))=="string"||e instanceof ty?eX(i,"updateDoc",t._key,e,r,n):ZQ(i,"updateDoc",t._key,e),FO(s,[o.toMutation(t._key,pa.exists(!0))])}function FO(t,e){return function(n,s){const i=new Xa;return n.asyncQueue.enqueueAndForget(async()=>IQ(await zQ(n),s,i)),i.promise}(b1(t),e)}function uX(t,e,r){const n=r.docs.get(e._key),s=new LO(t);return new hl(t,s,e._key,n,new gd(r.hasPendingWrites,r.fromCache),e.converter)}function WE(){return new N1("serverTimestamp")}(function(e,r=!0){(function(s){yu=s})(zl),Nl(new fo("firestore",(n,{instanceIdentifier:s,options:i})=>{const o=n.getProvider("app").getImmediate(),l=new Th(new ZH(n.getProvider("auth-internal")),new rK(o,n.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Ee(ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Gd(u.options.projectId,d)}(o,s),o);return i={useFetchStreams:r,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),ha(VA,zA,e),ha(VA,zA,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $O="firebasestorage.googleapis.com",UO="storageBucket",dX=2*60*1e3,hX=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur extends Pa{constructor(e,r,n=0){super(lx(e),`Firebase Storage: ${r} (${lx(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ur.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return lx(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var or;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(or||(or={}));function lx(t){return"storage/"+t}function T1(){const t="An unknown error occurred, please check the error payload for server response.";return new ur(or.UNKNOWN,t)}function fX(t){return new ur(or.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function mX(t){return new ur(or.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function pX(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ur(or.UNAUTHENTICATED,t)}function gX(){return new ur(or.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function yX(t){return new ur(or.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function vX(){return new ur(or.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function xX(){return new ur(or.CANCELED,"User canceled the upload/download.")}function bX(t){return new ur(or.INVALID_URL,"Invalid URL '"+t+"'.")}function wX(t){return new ur(or.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function jX(){return new ur(or.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+UO+"' property when initializing the app?")}function NX(){return new ur(or.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function _X(){return new ur(or.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function SX(t){return new ur(or.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Xb(t){return new ur(or.INVALID_ARGUMENT,t)}function BO(){return new ur(or.APP_DELETED,"The Firebase app was deleted.")}function AX(t){return new ur(or.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Td(t,e){return new ur(or.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Zu(t){throw new ur(or.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e,r){this.bucket=e,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,r){let n;try{n=Gn.makeFromUrl(e,r)}catch{return new Gn(e,"")}if(n.path==="")return n;throw wX(e)}static makeFromUrl(e,r){let n=null;const s="([A-Za-z0-9.\\-_]+)";function i(E){E.path.charAt(E.path.length-1)==="/"&&(E.path_=E.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+s+o,"i"),c={bucket:1,path:3};function u(E){E.path_=decodeURIComponent(E.path)}const d="v[A-Za-z0-9_]+",h=r.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",m=new RegExp(`^https?://${h}/${d}/b/${s}/o${f}`,"i"),v={bucket:1,path:3},y=r===$O?"(?:storage.googleapis.com|storage.cloud.google.com)":r,x="([^?#]*)",b=new RegExp(`^https?://${y}/${s}/${x}`,"i"),j=[{regex:l,indices:c,postModify:i},{regex:m,indices:v,postModify:u},{regex:b,indices:{bucket:1,path:2},postModify:u}];for(let E=0;E<j.length;E++){const I=j[E],O=I.regex.exec(e);if(O){const T=O[I.indices.bucket];let A=O[I.indices.path];A||(A=""),n=new Gn(T,A),I.postModify(n);break}}if(n==null)throw bX(e);return n}}class EX{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PX(t,e,r){let n=1,s=null,i=null,o=!1,l=0;function c(){return l===2}let u=!1;function d(...x){u||(u=!0,e.apply(null,x))}function h(x){s=setTimeout(()=>{s=null,t(m,c())},x)}function f(){i&&clearTimeout(i)}function m(x,...b){if(u){f();return}if(x){f(),d.call(null,x,...b);return}if(c()||o){f(),d.call(null,x,...b);return}n<64&&(n*=2);let j;l===1?(l=2,j=0):j=(n+Math.random())*1e3,h(j)}let v=!1;function y(x){v||(v=!0,f(),!u&&(s!==null?(x||(l=2),clearTimeout(s),h(0)):x||(l=1)))}return h(0),i=setTimeout(()=>{o=!0,y(!0)},r),y}function TX(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CX(t){return t!==void 0}function kX(t){return typeof t=="object"&&!Array.isArray(t)}function C1(t){return typeof t=="string"||t instanceof String}function qE(t){return k1()&&t instanceof Blob}function k1(){return typeof Blob<"u"}function HE(t,e,r,n){if(n<e)throw Xb(`Invalid value for '${t}'. Expected ${e} or greater.`);if(n>r)throw Xb(`Invalid value for '${t}'. Expected ${r} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kh(t,e,r){let n=e;return r==null&&(n=`https://${e}`),`${r}://${n}/v0${t}`}function VO(t){const e=encodeURIComponent;let r="?";for(const n in t)if(t.hasOwnProperty(n)){const s=e(n)+"="+e(t[n]);r=r+s+"&"}return r=r.slice(0,-1),r}var fl;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(fl||(fl={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IX(t,e){const r=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return r||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RX{constructor(e,r,n,s,i,o,l,c,u,d,h,f=!0,m=!1){this.url_=e,this.method_=r,this.headers_=n,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=d,this.connectionFactory_=h,this.retry=f,this.isUsingEmulator=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((v,y)=>{this.resolve_=v,this.reject_=y,this.start_()})}start_(){const e=(n,s)=>{if(s){n(!1,new Gf(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=l=>{const c=l.loaded,u=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const l=i.getErrorCode()===fl.NO_ERROR,c=i.getStatus();if(!l||IX(c,this.additionalRetryCodes_)&&this.retry){const d=i.getErrorCode()===fl.ABORT;n(!1,new Gf(!1,null,d));return}const u=this.successCodes_.indexOf(c)!==-1;n(!0,new Gf(u,i))})},r=(n,s)=>{const i=this.resolve_,o=this.reject_,l=s.connection;if(s.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());CX(c)?i(c):i()}catch(c){o(c)}else if(l!==null){const c=T1();c.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,c)):o(c)}else if(s.canceled){const c=this.appDelete_?BO():xX();o(c)}else{const c=vX();o(c)}};this.canceled_?r(!1,new Gf(!1,null,!0)):this.backoffId_=PX(e,r,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&TX(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Gf{constructor(e,r,n){this.wasSuccessCode=e,this.connection=r,this.canceled=!!n}}function OX(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function DX(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function MX(t,e){e&&(t["X-Firebase-GMPID"]=e)}function LX(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function FX(t,e,r,n,s,i,o=!0,l=!1){const c=VO(t.urlParams),u=t.url+c,d=Object.assign({},t.headers);return MX(d,e),OX(d,r),DX(d,i),LX(d,n),new RX(u,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $X(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function UX(...t){const e=$X();if(e!==void 0){const r=new e;for(let n=0;n<t.length;n++)r.append(t[n]);return r.getBlob()}else{if(k1())return new Blob(t);throw new ur(or.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function BX(t,e,r){return t.webkitSlice?t.webkitSlice(e,r):t.mozSlice?t.mozSlice(e,r):t.slice?t.slice(e,r):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VX(t){if(typeof atob>"u")throw SX("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const la={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class cx{constructor(e,r){this.data=e,this.contentType=r||null}}function zX(t,e){switch(t){case la.RAW:return new cx(zO(e));case la.BASE64:case la.BASE64URL:return new cx(GO(t,e));case la.DATA_URL:return new cx(WX(e),qX(e))}throw T1()}function zO(t){const e=[];for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);if(n<=127)e.push(n);else if(n<=2047)e.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(r<t.length-1&&(t.charCodeAt(r+1)&64512)===56320))e.push(239,191,189);else{const i=n,o=t.charCodeAt(++r);n=65536|(i&1023)<<10|o&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?e.push(239,191,189):e.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(e)}function GX(t){let e;try{e=decodeURIComponent(t)}catch{throw Td(la.DATA_URL,"Malformed data URL.")}return zO(e)}function GO(t,e){switch(t){case la.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw Td(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case la.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw Td(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=VX(e)}catch(s){throw s.message.includes("polyfill")?s:Td(t,"Invalid character found")}const n=new Uint8Array(r.length);for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s);return n}class WO{constructor(e){this.base64=!1,this.contentType=null;const r=e.match(/^data:([^,]+)?,/);if(r===null)throw Td(la.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=r[1]||null;n!=null&&(this.base64=HX(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}function WX(t){const e=new WO(t);return e.base64?GO(la.BASE64,e.rest):GX(e.rest)}function qX(t){return new WO(t).contentType}function HX(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e,r){let n=0,s="";qE(e)?(this.data_=e,n=e.size,s=e.type):e instanceof ArrayBuffer?(r?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(r?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,r){if(qE(this.data_)){const n=this.data_,s=BX(n,e,r);return s===null?null:new $i(s)}else{const n=new Uint8Array(this.data_.buffer,e,r-e);return new $i(n,!0)}}static getBlob(...e){if(k1()){const r=e.map(n=>n instanceof $i?n.data_:n);return new $i(UX.apply(null,r))}else{const r=e.map(o=>C1(o)?zX(la.RAW,o).data:o.data_);let n=0;r.forEach(o=>{n+=o.byteLength});const s=new Uint8Array(n);let i=0;return r.forEach(o=>{for(let l=0;l<o.length;l++)s[i++]=o[l]}),new $i(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qO(t){let e;try{e=JSON.parse(t)}catch{return null}return kX(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KX(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function YX(t,e){const r=e.split("/").filter(n=>n.length>0).join("/");return t.length===0?r:t+"/"+r}function HO(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QX(t,e){return e}class un{constructor(e,r,n,s){this.server=e,this.local=r||e,this.writable=!!n,this.xform=s||QX}}let Wf=null;function XX(t){return!C1(t)||t.length<2?t:HO(t)}function KO(){if(Wf)return Wf;const t=[];t.push(new un("bucket")),t.push(new un("generation")),t.push(new un("metageneration")),t.push(new un("name","fullPath",!0));function e(i,o){return XX(o)}const r=new un("name");r.xform=e,t.push(r);function n(i,o){return o!==void 0?Number(o):o}const s=new un("size");return s.xform=n,t.push(s),t.push(new un("timeCreated")),t.push(new un("updated")),t.push(new un("md5Hash",null,!0)),t.push(new un("cacheControl",null,!0)),t.push(new un("contentDisposition",null,!0)),t.push(new un("contentEncoding",null,!0)),t.push(new un("contentLanguage",null,!0)),t.push(new un("contentType",null,!0)),t.push(new un("metadata","customMetadata",!0)),Wf=t,Wf}function JX(t,e){function r(){const n=t.bucket,s=t.fullPath,i=new Gn(n,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:r})}function ZX(t,e,r){const n={};n.type="file";const s=r.length;for(let i=0;i<s;i++){const o=r[i];n[o.local]=o.xform(n,e[o.server])}return JX(n,t),n}function YO(t,e,r){const n=qO(e);return n===null?null:ZX(t,n,r)}function eJ(t,e,r,n){const s=qO(e);if(s===null||!C1(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(u=>{const d=t.bucket,h=t.fullPath,f="/b/"+o(d)+"/o/"+o(h),m=kh(f,r,n),v=VO({alt:"media",token:u});return m+v})[0]}function tJ(t,e){const r={},n=e.length;for(let s=0;s<n;s++){const i=e[s];i.writable&&(r[i.server]=t[i.local])}return JSON.stringify(r)}class ay{constructor(e,r,n,s){this.url=e,this.method=r,this.handler=n,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QO(t){if(!t)throw T1()}function rJ(t,e){function r(n,s){const i=YO(t,s,e);return QO(i!==null),i}return r}function nJ(t,e){function r(n,s){const i=YO(t,s,e);return QO(i!==null),eJ(i,s,t.host,t._protocol)}return r}function XO(t){function e(r,n){let s;return r.getStatus()===401?r.getErrorText().includes("Firebase App Check token is invalid")?s=gX():s=pX():r.getStatus()===402?s=mX(t.bucket):r.getStatus()===403?s=yX(t.path):s=n,s.status=r.getStatus(),s.serverResponse=n.serverResponse,s}return e}function I1(t){const e=XO(t);function r(n,s){let i=e(n,s);return n.getStatus()===404&&(i=fX(t.path)),i.serverResponse=s.serverResponse,i}return r}function sJ(t,e,r){const n=e.fullServerUrl(),s=kh(n,t.host,t._protocol)+"?alt=media",i="GET",o=t.maxOperationRetryTime,l=new ay(s,i,(c,u)=>u,o);return l.errorHandler=I1(e),l}function aJ(t,e,r){const n=e.fullServerUrl(),s=kh(n,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,l=new ay(s,i,nJ(t,r),o);return l.errorHandler=I1(e),l}function iJ(t,e){const r=e.fullServerUrl(),n=kh(r,t.host,t._protocol),s="DELETE",i=t.maxOperationRetryTime;function o(c,u){}const l=new ay(n,s,o,i);return l.successCodes=[200,204],l.errorHandler=I1(e),l}function oJ(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function lJ(t,e,r){const n=Object.assign({},r);return n.fullPath=t.path,n.size=e.size(),n.contentType||(n.contentType=oJ(null,e)),n}function cJ(t,e,r,n,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function l(){let j="";for(let E=0;E<2;E++)j=j+Math.random().toString().slice(2);return j}const c=l();o["Content-Type"]="multipart/related; boundary="+c;const u=lJ(e,n,s),d=tJ(u,r),h="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+c+`\r
Content-Type: `+u.contentType+`\r
\r
`,f=`\r
--`+c+"--",m=$i.getBlob(h,n,f);if(m===null)throw NX();const v={name:u.fullPath},y=kh(i,t.host,t._protocol),x="POST",b=t.maxUploadRetryTime,w=new ay(y,x,rJ(t,r),b);return w.urlParams=v,w.headers=o,w.body=m.uploadData(),w.errorHandler=XO(e),w}class JO{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=fl.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=fl.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=fl.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,r,n,s,i){if(this.sent_)throw Zu("cannot .send() more than once");if(Ao(e)&&n&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(r,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Zu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Zu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Zu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Zu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class uJ extends JO{initXhr(){this.xhr_.responseType="text"}}function R1(){return new uJ}class dJ extends JO{initXhr(){this.xhr_.responseType="arraybuffer"}}function hJ(){return new dJ}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e,r){this._service=e,r instanceof Gn?this._location=r:this._location=Gn.makeFromUrl(r,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,r){return new Pl(e,r)}get root(){const e=new Gn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return HO(this._location.path)}get storage(){return this._service}get parent(){const e=KX(this._location.path);if(e===null)return null;const r=new Gn(this._location.bucket,e);return new Pl(this._service,r)}_throwIfRoot(e){if(this._location.path==="")throw AX(e)}}function fJ(t,e){t._throwIfRoot("getBytes");const r=sJ(t.storage,t._location);return t.storage.makeRequestWithTokens(r,hJ).then(n=>n)}function mJ(t,e,r){t._throwIfRoot("uploadBytes");const n=cJ(t.storage,t._location,KO(),new $i(e,!0),r);return t.storage.makeRequestWithTokens(n,R1).then(s=>({metadata:s,ref:t}))}function pJ(t){t._throwIfRoot("getDownloadURL");const e=aJ(t.storage,t._location,KO());return t.storage.makeRequestWithTokens(e,R1).then(r=>{if(r===null)throw _X();return r})}function gJ(t){t._throwIfRoot("deleteObject");const e=iJ(t.storage,t._location);return t.storage.makeRequestWithTokens(e,R1)}function yJ(t,e){const r=YX(t._location.path,e),n=new Gn(t._location.bucket,r);return new Pl(t.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vJ(t){return/^[A-Za-z]+:\/\//.test(t)}function xJ(t,e){return new Pl(t,e)}function ZO(t,e){if(t instanceof O1){const r=t;if(r._bucket==null)throw jX();const n=new Pl(r,r._bucket);return e!=null?ZO(n,e):n}else return e!==void 0?yJ(t,e):t}function bJ(t,e){if(e&&vJ(e)){if(t instanceof O1)return xJ(t,e);throw Xb("To use ref(service, url), the first argument must be a Storage instance.")}else return ZO(t,e)}function KE(t,e){const r=e==null?void 0:e[UO];return r==null?null:Gn.makeFromBucketSpec(r,t)}function wJ(t,e,r,n={}){t.host=`${e}:${r}`;const s=Ao(e);s&&(Rw(`https://${t.host}/b`),Ow("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=n;i&&(t._overrideAuthToken=typeof i=="string"?i:x2(i,t.app.options.projectId))}class O1{constructor(e,r,n,s,i,o=!1){this.app=e,this._authProvider=r,this._appCheckProvider=n,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=$O,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=dX,this._maxUploadRetryTime=hX,this._requests=new Set,s!=null?this._bucket=Gn.makeFromBucketSpec(s,this._host):this._bucket=KE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Gn.makeFromBucketSpec(this._url,e):this._bucket=KE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){HE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){HE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const r=await e.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){if(_n(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Pl(this,e)}_makeRequest(e,r,n,s,i=!0){if(this._deleted)return new EX(BO());{const o=FX(e,this._appId,n,s,r,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,r){const[n,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,r,n,s).getPromise()}}const YE="@firebase/storage",QE="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD="storage";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jJ(t,e){return t=Dt(t),fJ(t)}function NJ(t,e,r){return t=Dt(t),mJ(t,e,r)}function _J(t){return t=Dt(t),pJ(t)}function SJ(t){return t=Dt(t),gJ(t)}function qf(t,e){return t=Dt(t),bJ(t,e)}function AJ(t=Lw(),e){t=Dt(t);const n=Fg(t,eD).getImmediate({identifier:e}),s=g2("storage");return s&&EJ(n,...s),n}function EJ(t,e,r,n={}){wJ(t,e,r,n)}function PJ(t,{instanceIdentifier:e}){const r=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new O1(r,n,s,e,zl)}function TJ(){Nl(new fo(eD,PJ,"PUBLIC").setMultipleInstances(!0)),ha(YE,QE,""),ha(YE,QE,"esm2020")}TJ();const CJ={apiKey:"AIzaSyBIR-zpFHJMDurVpWCtFT2C5HRZLw4-8mU",authDomain:"gmb-automation-474209-549ee.firebaseapp.com",projectId:"gmb-automation-474209-549ee",storageBucket:"gmb-automation-474209-549ee.firebasestorage.app",messagingSenderId:"317153753727",appId:"1:317153753727:web:8281f982a8e7a05f885d4a"},D1=j2(CJ),$a=HH(D1);console.log("🔧 Firebase - Setting up persistence...");Sm($a,tR).then(()=>{console.log("✅ Firebase - IndexedDB persistence set successfully")}).catch(t=>(console.warn("⚠️ Firebase - IndexedDB persistence failed, trying localStorage:",t),Sm($a,qw))).then(()=>{console.log("✅ Firebase - LocalStorage persistence set successfully")}).catch(t=>(console.error("❌ Firebase - All persistence methods failed, using in-memory:",t),Sm($a,Cb)));const rc=HQ(D1),Hf=AJ(D1),tD=p.createContext(void 0),Er=()=>{const t=p.useContext(tD);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},kJ=({children:t})=>{const[e,r]=p.useState(null),[n,s]=p.useState(!0),{toast:i}=Rn(),o=async(f,m,v)=>{try{await Sm($a,qw);const y=await kq($a,f,m);v&&y.user&&await Oq(y.user,{displayName:v}),i({title:"Account created successfully!",description:"Welcome to Google Ranker!"})}catch(y){throw console.error("Signup error:",y),i({title:"Signup failed",description:y.message||"An error occurred during signup",variant:"destructive"}),y}},l=async(f,m)=>{try{await Iq($a,f,m),i({title:"Welcome back!",description:"You have successfully signed in."})}catch(v){console.error("Login error:",v);let y="An error occurred during login";switch(v.code){case"auth/user-not-found":y="No account found with this email address";break;case"auth/wrong-password":y="Incorrect password";break;case"auth/invalid-email":y="Invalid email address";break;case"auth/too-many-requests":y="Too many failed attempts. Please try again later";break;default:y=v.message}throw i({title:"Login failed",description:y,variant:"destructive"}),v}},c=async()=>{try{console.log("🚀 Starting Google sign-in with popup...");const f=new Ba;f.addScope("email"),f.addScope("profile"),f.setCustomParameters({prompt:"select_account"}),console.log("🚀 Calling signInWithPopup...");const m=await rH($a,f);console.log("✅ Google sign-in successful:",m.user.email),i({title:"Welcome!",description:"You have successfully signed in with Google."})}catch(f){if(console.error("❌ Google login error:",f),f.code==="auth/popup-closed-by-user"||f.code==="auth/cancelled-popup-request")throw console.log("User closed Google sign-in popup"),f;let m="An error occurred during Google login";switch(f.code){case"auth/popup-blocked":m="Popup was blocked by your browser. Please allow popups for this site.";break;case"auth/unauthorized-domain":m="This domain is not authorized for Google sign-in.";break;case"auth/account-exists-with-different-credential":m="An account already exists with this email using a different sign-in method.";break;default:m=f.message}throw i({title:"Google login failed",description:m,variant:"destructive"}),f}},u=async()=>{try{await Fq($a),i({title:"Signed out",description:"You have been successfully signed out."})}catch(f){throw console.error("Logout error:",f),i({title:"Logout failed",description:f.message||"An error occurred during logout",variant:"destructive"}),f}},d=async()=>{try{if(e){const f=await e.getIdToken(!0);return console.log("Firebase token refreshed successfully"),f}return null}catch(f){return console.error("Failed to refresh Firebase token:",f),null}};p.useEffect(()=>{console.log("🔍 AuthContext - Setting up auth state listener...");const f=Lq($a,async v=>{if(console.log("🔍 AuthContext - Auth state changed:",v?"User: "+v.email:"No user"),v)try{await v.getIdToken(!0),console.log("✅ AuthContext - User authenticated and token refreshed:",v.email)}catch(y){console.error("❌ AuthContext - Token refresh failed during auth state change:",y)}r(v),s(!1),console.log("✅ AuthContext - Loading set to false, currentUser:",v?v.email:"null")}),m=setInterval(async()=>{if(e)try{await e.getIdToken(!0),console.log("Auth token automatically refreshed")}catch(v){console.error("Automatic token refresh failed:",v)}},30*60*1e3);return()=>{f(),clearInterval(m)}},[e]);const h={currentUser:e,loading:n,signup:o,login:l,logout:u,loginWithGoogle:c,refreshToken:d};return a.jsx(tD.Provider,{value:h,children:!n&&t})},IJ=()=>{var y,x;const[t,e]=p.useState(!1),[r,n]=p.useState(""),[s,i]=p.useState(""),[o,l]=p.useState(!1),{login:c,loginWithGoogle:u}=Er(),d=cr(),f=((x=(y=Bl().state)==null?void 0:y.from)==null?void 0:x.pathname)||"/dashboard",m=async()=>{l(!0);try{await u(),d(f,{replace:!0})}catch(b){console.error("Google login error:",b),l(!1)}},v=async b=>{if(b.preventDefault(),!(!r||!s)){l(!0);try{await c(r,s),d(f,{replace:!0})}catch(w){console.error("Email login error:",w)}finally{l(!1)}}};return a.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:a.jsxs("div",{className:"w-full max-w-md animate-fade-in",children:[a.jsx("div",{className:"text-center mb-8",children:a.jsx("div",{className:"flex items-center justify-center mb-4",children:a.jsx("img",{src:"/google-ranker-logo.png",alt:"Google Ranker Logo",className:"h-32 w-auto"})})}),a.jsxs(H,{className:"shadow-card border-2 border-border bg-transparent",children:[a.jsxs(me,{className:"text-center",children:[a.jsx(ge,{className:"text-2xl font-semibold",children:"Welcome Back"}),a.jsx(Qe,{children:"Sign in to access your account"})]}),a.jsxs(Y,{className:"space-y-6",children:[a.jsxs(K,{variant:"outline",size:"lg",className:"w-full h-12 border-border hover:bg-muted/50",onClick:m,disabled:o,children:[a.jsx(uI,{className:"mr-2 h-5 w-5"}),"Sign in with Google"]}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 flex items-center",children:a.jsx(Ki,{className:"w-full"})}),a.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:a.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or continue with"})})]}),a.jsxs("form",{onSubmit:v,className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ie,{htmlFor:"email",children:"Email"}),a.jsx(Ze,{id:"email",type:"email",placeholder:"Your email address",value:r,onChange:b=>n(b.target.value),required:!0,className:"h-11"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(Ie,{htmlFor:"password",children:"Password"}),a.jsx(yt,{to:"/forgot-password",className:"text-sm text-primary hover:text-primary-hover transition-colors",children:"Forgot password?"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(Ze,{id:"password",type:t?"text":"password",placeholder:"Your password",value:s,onChange:b=>i(b.target.value),required:!0,className:"h-11 pr-10"}),a.jsx(K,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>e(!t),children:t?a.jsx(fI,{className:"h-4 w-4 text-muted-foreground"}):a.jsx(_g,{className:"h-4 w-4 text-muted-foreground"})})]})]}),a.jsx(K,{type:"submit",size:"lg",className:"w-full h-12 bg-primary hover:bg-primary-hover shadow-primary",disabled:o,children:o?"Signing In...":"Sign In"})]})]}),a.jsx(Iw,{className:"justify-center",children:a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Don't have an account?"," ",a.jsx(yt,{to:"/signup",className:"text-primary hover:text-primary-hover font-medium transition-colors",children:"Sign up"})]})})]})]})})},RJ=()=>{const[t,e]=p.useState(!1),[r,n]=p.useState({name:"",email:"",phone:"",password:"",confirmPassword:""}),[s,i]=p.useState(!1),{signup:o,loginWithGoogle:l}=Er(),c=cr(),{toast:u}=Rn(),d=async()=>{i(!0);try{await l(),c("/dashboard",{replace:!0})}catch(m){console.error("Google signup error:",m),i(!1)}},h=async m=>{if(m.preventDefault(),r.password!==r.confirmPassword){u({title:"Password mismatch",description:"Passwords don't match. Please try again.",variant:"destructive"});return}if(r.password.length<6){u({title:"Password too short",description:"Password must be at least 6 characters long.",variant:"destructive"});return}i(!0);try{await o(r.email,r.password,r.name),c("/dashboard",{replace:!0})}catch(v){console.error("Email signup error:",v)}finally{i(!1)}},f=m=>v=>{n(y=>({...y,[m]:v.target.value}))};return a.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:a.jsxs("div",{className:"w-full max-w-md animate-fade-in",children:[a.jsx("div",{className:"text-center mb-8",children:a.jsx("div",{className:"flex items-center justify-center mb-4",children:a.jsx("img",{src:"/google-ranker-logo.png",alt:"Google Ranker Logo",className:"h-32 w-auto"})})}),a.jsxs(H,{className:"shadow-card border-2 border-border bg-transparent",children:[a.jsxs(me,{className:"text-center",children:[a.jsx(ge,{className:"text-2xl font-semibold",children:"Create Account"}),a.jsx(Qe,{children:"Sign up to start managing your business profiles"})]}),a.jsxs(Y,{className:"space-y-6",children:[a.jsxs(K,{variant:"outline",size:"lg",className:"w-full h-12 border-border hover:bg-muted/50",onClick:d,disabled:s,children:[a.jsx(uI,{className:"mr-2 h-5 w-5"}),"Sign up with Google"]}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 flex items-center",children:a.jsx(Ki,{className:"w-full"})}),a.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:a.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or continue with"})})]}),a.jsxs("form",{onSubmit:h,className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ie,{htmlFor:"name",children:"Full Name"}),a.jsx(Ze,{id:"name",type:"text",placeholder:"Your full name",value:r.name,onChange:f("name"),required:!0,className:"h-11"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ie,{htmlFor:"email",children:"Email"}),a.jsx(Ze,{id:"email",type:"email",placeholder:"Your email address",value:r.email,onChange:f("email"),required:!0,className:"h-11"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ie,{htmlFor:"phone",children:"Phone Number (Optional)"}),a.jsx(Ze,{id:"phone",type:"tel",placeholder:"Your phone number",value:r.phone,onChange:f("phone"),className:"h-11"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ie,{htmlFor:"password",children:"Password"}),a.jsxs("div",{className:"relative",children:[a.jsx(Ze,{id:"password",type:t?"text":"password",placeholder:"Create a password",value:r.password,onChange:f("password"),required:!0,className:"h-11 pr-10"}),a.jsx(K,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>e(!t),children:t?a.jsx(fI,{className:"h-4 w-4 text-muted-foreground"}):a.jsx(_g,{className:"h-4 w-4 text-muted-foreground"})})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ie,{htmlFor:"confirmPassword",children:"Confirm Password"}),a.jsx(Ze,{id:"confirmPassword",type:"password",placeholder:"Confirm your password",value:r.confirmPassword,onChange:f("confirmPassword"),required:!0,className:"h-11"})]}),a.jsx(K,{type:"submit",size:"lg",className:"w-full h-12 bg-primary hover:bg-primary-hover shadow-primary",disabled:s,children:s?"Creating Account...":"Create Account"})]})]}),a.jsx(Iw,{className:"justify-center",children:a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Already have an account?"," ",a.jsx(yt,{to:"/login",className:"text-primary hover:text-primary-hover font-medium transition-colors",children:"Sign in"})]})})]})]})})},OJ=({isOpen:t=!1,onClose:e})=>{const r=Bl();cr();const n=[{label:"Profiles",href:"/dashboard",icon:gs},{label:"Posts",href:"/dashboard/posts",icon:bl},{label:"Reviews",href:"/dashboard/reviews",icon:ms},{label:"Audit Tool",href:"/dashboard/audit",icon:Fs},{label:"Request for Reviews",href:"/dashboard/request-reviews",icon:ti},{label:"Billing",href:"/dashboard/billing",icon:Sr}],s=i=>i==="/dashboard"?r.pathname==="/dashboard"||r.pathname==="/":r.pathname.startsWith(i);return a.jsxs("div",{className:ye("fixed left-0 top-0 z-40 h-screen w-64 glass-card border-r-2 border-primary/30 transition-transform duration-300 ease-in-out","lg:translate-x-0",t?"translate-x-0":"-translate-x-full"),children:[a.jsxs("div",{className:"h-16 flex items-center justify-between p-4 border-b-2 border-primary/20 bg-transparent",children:[a.jsx("div",{className:"lg:hidden",children:a.jsx(K,{variant:"ghost",size:"sm",onClick:e,className:"h-8 w-8 p-0",children:a.jsx(Hs,{className:"h-4 w-4"})})}),a.jsx("div",{className:"flex items-center gap-2 lg:mx-0 mx-auto",children:a.jsx("img",{src:"/google-ranker-logo.png",alt:"Google Ranker Logo",className:"h-20 w-auto"})}),a.jsx("div",{className:"lg:hidden w-8"})]}),a.jsxs("nav",{className:"p-4 space-y-2",children:[n.map(i=>a.jsxs(nb,{to:i.href,className:()=>{const o=s(i.href);return ye("flex items-center gap-3 px-3 py-3 rounded-lg transition-all duration-300 group",o?"":"text-muted-foreground hover:bg-muted/50 hover:text-foreground glass-button")},style:()=>s(i.href)?{background:"linear-gradient(135deg, rgba(99, 102, 241, 0.25), rgba(139, 92, 246, 0.2))",color:"#A78BFA",borderLeft:"3px solid #8B5CF6"}:{},children:[a.jsx(i.icon,{className:"h-5 w-5 transition-all duration-300 group-hover:scale-110",style:s(i.href)?{color:"#A78BFA"}:{}}),a.jsx("span",{className:"font-medium",children:i.label})]},i.href)),a.jsxs(nb,{to:"/dashboard/settings",className:()=>{const i=s("/dashboard/settings");return ye("flex items-center gap-3 px-3 py-3 rounded-lg transition-all duration-300 group",i?"":"text-muted-foreground hover:bg-muted/50 hover:text-foreground glass-button")},style:()=>s("/dashboard/settings")?{background:"linear-gradient(135deg, rgba(99, 102, 241, 0.25), rgba(139, 92, 246, 0.2))",color:"#A78BFA",borderLeft:"3px solid #8B5CF6"}:{},children:[a.jsx(mc,{className:"h-5 w-5 transition-all duration-300 group-hover:scale-110",style:s("/dashboard/settings")?{color:"#A78BFA"}:{}}),a.jsx("span",{className:"font-medium",children:"Settings"})]})]}),a.jsx("div",{className:"absolute bottom-4 left-4 right-4",children:a.jsxs("div",{className:"bg-gradient-primary p-3 sm:p-4 rounded-lg text-white shadow-lg",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[a.jsx(mI,{className:"h-5 w-5 sm:h-6 sm:w-6 text-white"}),a.jsx("h3",{className:"font-semibold text-sm sm:text-base text-white",children:"Ask for Reviews"})]}),a.jsx("p",{className:"text-xs sm:text-sm text-white opacity-90 mb-3",children:"Generate QR codes for easy reviews"}),a.jsx(yt,{to:"/dashboard/ask-for-reviews",className:"block w-full",children:a.jsx(K,{variant:"secondary",size:"sm",className:"w-full text-white bg-white/20 hover:bg-white/30 text-xs sm:text-sm border-0",children:"Generate QR"})})]})})]})};var DJ=p.createContext(void 0);function ju(t){const e=p.useContext(DJ);return t||e||"ltr"}var ux=0;function iy(){p.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??XE()),document.body.insertAdjacentElement("beforeend",t[1]??XE()),ux++,()=>{ux===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),ux--}},[])}function XE(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var dx="focusScope.autoFocusOnMount",hx="focusScope.autoFocusOnUnmount",JE={bubbles:!1,cancelable:!0},MJ="FocusScope",Ih=p.forwardRef((t,e)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=t,[l,c]=p.useState(null),u=ar(s),d=ar(i),h=p.useRef(null),f=We(e,y=>c(y)),m=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(n){let y=function(j){if(m.paused||!l)return;const E=j.target;l.contains(E)?h.current=E:Ii(h.current,{select:!0})},x=function(j){if(m.paused||!l)return;const E=j.relatedTarget;E!==null&&(l.contains(E)||Ii(h.current,{select:!0}))},b=function(j){if(document.activeElement===document.body)for(const I of j)I.removedNodes.length>0&&Ii(l)};document.addEventListener("focusin",y),document.addEventListener("focusout",x);const w=new MutationObserver(b);return l&&w.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",x),w.disconnect()}}},[n,l,m.paused]),p.useEffect(()=>{if(l){eP.add(m);const y=document.activeElement;if(!l.contains(y)){const b=new CustomEvent(dx,JE);l.addEventListener(dx,u),l.dispatchEvent(b),b.defaultPrevented||(LJ(VJ(rD(l)),{select:!0}),document.activeElement===y&&Ii(l))}return()=>{l.removeEventListener(dx,u),setTimeout(()=>{const b=new CustomEvent(hx,JE);l.addEventListener(hx,d),l.dispatchEvent(b),b.defaultPrevented||Ii(y??document.body,{select:!0}),l.removeEventListener(hx,d),eP.remove(m)},0)}}},[l,u,d,m]);const v=p.useCallback(y=>{if(!r&&!n||m.paused)return;const x=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,b=document.activeElement;if(x&&b){const w=y.currentTarget,[j,E]=FJ(w);j&&E?!y.shiftKey&&b===E?(y.preventDefault(),r&&Ii(j,{select:!0})):y.shiftKey&&b===j&&(y.preventDefault(),r&&Ii(E,{select:!0})):b===w&&y.preventDefault()}},[r,n,m.paused]);return a.jsx(Re.div,{tabIndex:-1,...o,ref:f,onKeyDown:v})});Ih.displayName=MJ;function LJ(t,{select:e=!1}={}){const r=document.activeElement;for(const n of t)if(Ii(n,{select:e}),document.activeElement!==r)return}function FJ(t){const e=rD(t),r=ZE(e,t),n=ZE(e.reverse(),t);return[r,n]}function rD(t){const e=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)e.push(r.currentNode);return e}function ZE(t,e){for(const r of t)if(!$J(r,{upTo:e}))return r}function $J(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function UJ(t){return t instanceof HTMLInputElement&&"select"in t}function Ii(t,{select:e=!1}={}){if(t&&t.focus){const r=document.activeElement;t.focus({preventScroll:!0}),t!==r&&UJ(t)&&e&&t.select()}}var eP=BJ();function BJ(){let t=[];return{add(e){const r=t[0];e!==r&&(r==null||r.pause()),t=tP(t,e),t.unshift(e)},remove(e){var r;t=tP(t,e),(r=t[0])==null||r.resume()}}}function tP(t,e){const r=[...t],n=r.indexOf(e);return n!==-1&&r.splice(n,1),r}function VJ(t){return t.filter(e=>e.tagName!=="A")}var fx="rovingFocusGroup.onEntryFocus",zJ={bubbles:!1,cancelable:!0},Rh="RovingFocusGroup",[Jb,nD,GJ]=bg(Rh),[WJ,Nu]=Dr(Rh,[GJ]),[qJ,HJ]=WJ(Rh),sD=p.forwardRef((t,e)=>a.jsx(Jb.Provider,{scope:t.__scopeRovingFocusGroup,children:a.jsx(Jb.Slot,{scope:t.__scopeRovingFocusGroup,children:a.jsx(KJ,{...t,ref:e})})}));sD.displayName=Rh;var KJ=p.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...h}=t,f=p.useRef(null),m=We(e,f),v=ju(i),[y,x]=Bs({prop:o,defaultProp:l??null,onChange:c,caller:Rh}),[b,w]=p.useState(!1),j=ar(u),E=nD(r),I=p.useRef(!1),[O,T]=p.useState(0);return p.useEffect(()=>{const A=f.current;if(A)return A.addEventListener(fx,j),()=>A.removeEventListener(fx,j)},[j]),a.jsx(qJ,{scope:r,orientation:n,dir:v,loop:s,currentTabStopId:y,onItemFocus:p.useCallback(A=>x(A),[x]),onItemShiftTab:p.useCallback(()=>w(!0),[]),onFocusableItemAdd:p.useCallback(()=>T(A=>A+1),[]),onFocusableItemRemove:p.useCallback(()=>T(A=>A-1),[]),children:a.jsx(Re.div,{tabIndex:b||O===0?-1:0,"data-orientation":n,...h,ref:m,style:{outline:"none",...t.style},onMouseDown:ve(t.onMouseDown,()=>{I.current=!0}),onFocus:ve(t.onFocus,A=>{const S=!I.current;if(A.target===A.currentTarget&&S&&!b){const _=new CustomEvent(fx,zJ);if(A.currentTarget.dispatchEvent(_),!_.defaultPrevented){const P=E().filter(U=>U.focusable),R=P.find(U=>U.active),C=P.find(U=>U.id===y),G=[R,C,...P].filter(Boolean).map(U=>U.ref.current);oD(G,d)}}I.current=!1}),onBlur:ve(t.onBlur,()=>w(!1))})})}),aD="RovingFocusGroupItem",iD=p.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:s=!1,tabStopId:i,children:o,...l}=t,c=ys(),u=i||c,d=HJ(aD,r),h=d.currentTabStopId===u,f=nD(r),{onFocusableItemAdd:m,onFocusableItemRemove:v,currentTabStopId:y}=d;return p.useEffect(()=>{if(n)return m(),()=>v()},[n,m,v]),a.jsx(Jb.ItemSlot,{scope:r,id:u,focusable:n,active:s,children:a.jsx(Re.span,{tabIndex:h?0:-1,"data-orientation":d.orientation,...l,ref:e,onMouseDown:ve(t.onMouseDown,x=>{n?d.onItemFocus(u):x.preventDefault()}),onFocus:ve(t.onFocus,()=>d.onItemFocus(u)),onKeyDown:ve(t.onKeyDown,x=>{if(x.key==="Tab"&&x.shiftKey){d.onItemShiftTab();return}if(x.target!==x.currentTarget)return;const b=XJ(x,d.orientation,d.dir);if(b!==void 0){if(x.metaKey||x.ctrlKey||x.altKey||x.shiftKey)return;x.preventDefault();let j=f().filter(E=>E.focusable).map(E=>E.ref.current);if(b==="last")j.reverse();else if(b==="prev"||b==="next"){b==="prev"&&j.reverse();const E=j.indexOf(x.currentTarget);j=d.loop?JJ(j,E+1):j.slice(E+1)}setTimeout(()=>oD(j))}}),children:typeof o=="function"?o({isCurrentTabStop:h,hasTabStop:y!=null}):o})})});iD.displayName=aD;var YJ={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function QJ(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function XJ(t,e,r){const n=QJ(t.key,r);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return YJ[n]}function oD(t,e=!1){const r=document.activeElement;for(const n of t)if(n===r||(n.focus({preventScroll:e}),document.activeElement!==r))return}function JJ(t,e){return t.map((r,n)=>t[(e+n)%t.length])}var M1=sD,L1=iD,ZJ=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},nc=new WeakMap,Kf=new WeakMap,Yf={},mx=0,lD=function(t){return t&&(t.host||lD(t.parentNode))},eZ=function(t,e){return e.map(function(r){if(t.contains(r))return r;var n=lD(r);return n&&t.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",t,". Doing nothing"),null)}).filter(function(r){return!!r})},tZ=function(t,e,r,n){var s=eZ(e,Array.isArray(t)?t:[t]);Yf[r]||(Yf[r]=new WeakMap);var i=Yf[r],o=[],l=new Set,c=new Set(s),u=function(h){!h||l.has(h)||(l.add(h),u(h.parentNode))};s.forEach(u);var d=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(f){if(l.has(f))d(f);else try{var m=f.getAttribute(n),v=m!==null&&m!=="false",y=(nc.get(f)||0)+1,x=(i.get(f)||0)+1;nc.set(f,y),i.set(f,x),o.push(f),y===1&&v&&Kf.set(f,!0),x===1&&f.setAttribute(r,"true"),v||f.setAttribute(n,"true")}catch(b){console.error("aria-hidden: cannot operate on ",f,b)}})};return d(e),l.clear(),mx++,function(){o.forEach(function(h){var f=nc.get(h)-1,m=i.get(h)-1;nc.set(h,f),i.set(h,m),f||(Kf.has(h)||h.removeAttribute(n),Kf.delete(h)),m||h.removeAttribute(r)}),mx--,mx||(nc=new WeakMap,nc=new WeakMap,Kf=new WeakMap,Yf={})}},oy=function(t,e,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(t)?t:[t]),s=ZJ(t);return s?(n.push.apply(n,Array.from(s.querySelectorAll("[aria-live]"))),tZ(n,s,r,"aria-hidden")):function(){return null}},sa=function(){return sa=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},sa.apply(this,arguments)};function cD(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function rZ(t,e,r){if(r||arguments.length===2)for(var n=0,s=e.length,i;n<s;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))}var Om="right-scroll-bar-position",Dm="width-before-scroll-bar",nZ="with-scroll-bars-hidden",sZ="--removed-body-scroll-bar-size";function px(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function aZ(t,e){var r=p.useState(function(){return{value:t,callback:e,facade:{get current(){return r.value},set current(n){var s=r.value;s!==n&&(r.value=n,r.callback(n,s))}}}})[0];return r.callback=e,r.facade}var iZ=typeof window<"u"?p.useLayoutEffect:p.useEffect,rP=new WeakMap;function oZ(t,e){var r=aZ(null,function(n){return t.forEach(function(s){return px(s,n)})});return iZ(function(){var n=rP.get(r);if(n){var s=new Set(n),i=new Set(t),o=r.current;s.forEach(function(l){i.has(l)||px(l,null)}),i.forEach(function(l){s.has(l)||px(l,o)})}rP.set(r,t)},[t]),r}function lZ(t){return t}function cZ(t,e){e===void 0&&(e=lZ);var r=[],n=!1,s={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:t},useMedium:function(i){var o=e(i,n);return r.push(o),function(){r=r.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(n=!0;r.length;){var o=r;r=[],o.forEach(i)}r={push:function(l){return i(l)},filter:function(){return r}}},assignMedium:function(i){n=!0;var o=[];if(r.length){var l=r;r=[],l.forEach(i),o=r}var c=function(){var d=o;o=[],d.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),r={push:function(d){o.push(d),u()},filter:function(d){return o=o.filter(d),r}}}};return s}function uZ(t){t===void 0&&(t={});var e=cZ(null);return e.options=sa({async:!0,ssr:!1},t),e}var uD=function(t){var e=t.sideCar,r=cD(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=e.read();if(!n)throw new Error("Sidecar medium not found");return p.createElement(n,sa({},r))};uD.isSideCarExport=!0;function dZ(t,e){return t.useMedium(e),uD}var dD=uZ(),gx=function(){},ly=p.forwardRef(function(t,e){var r=p.useRef(null),n=p.useState({onScrollCapture:gx,onWheelCapture:gx,onTouchMoveCapture:gx}),s=n[0],i=n[1],o=t.forwardProps,l=t.children,c=t.className,u=t.removeScrollBar,d=t.enabled,h=t.shards,f=t.sideCar,m=t.noRelative,v=t.noIsolation,y=t.inert,x=t.allowPinchZoom,b=t.as,w=b===void 0?"div":b,j=t.gapMode,E=cD(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),I=f,O=oZ([r,e]),T=sa(sa({},E),s);return p.createElement(p.Fragment,null,d&&p.createElement(I,{sideCar:dD,removeScrollBar:u,shards:h,noRelative:m,noIsolation:v,inert:y,setCallbacks:i,allowPinchZoom:!!x,lockRef:r,gapMode:j}),o?p.cloneElement(p.Children.only(l),sa(sa({},T),{ref:O})):p.createElement(w,sa({},T,{className:c,ref:O}),l))});ly.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};ly.classNames={fullWidth:Dm,zeroRight:Om};var hZ=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function fZ(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=hZ();return e&&t.setAttribute("nonce",e),t}function mZ(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function pZ(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var gZ=function(){var t=0,e=null;return{add:function(r){t==0&&(e=fZ())&&(mZ(e,r),pZ(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},yZ=function(){var t=gZ();return function(e,r){p.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&r])}},hD=function(){var t=yZ(),e=function(r){var n=r.styles,s=r.dynamic;return t(n,s),null};return e},vZ={left:0,top:0,right:0,gap:0},yx=function(t){return parseInt(t||"",10)||0},xZ=function(t){var e=window.getComputedStyle(document.body),r=e[t==="padding"?"paddingLeft":"marginLeft"],n=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[yx(r),yx(n),yx(s)]},bZ=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return vZ;var e=xZ(t),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,n-r+e[2]-e[0])}},wZ=hD(),jc="data-scroll-locked",jZ=function(t,e,r,n){var s=t.left,i=t.top,o=t.right,l=t.gap;return r===void 0&&(r="margin"),`
  .`.concat(nZ,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(jc,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Om,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Dm,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Om," .").concat(Om,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(Dm," .").concat(Dm,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(jc,`] {
    `).concat(sZ,": ").concat(l,`px;
  }
`)},nP=function(){var t=parseInt(document.body.getAttribute(jc)||"0",10);return isFinite(t)?t:0},NZ=function(){p.useEffect(function(){return document.body.setAttribute(jc,(nP()+1).toString()),function(){var t=nP()-1;t<=0?document.body.removeAttribute(jc):document.body.setAttribute(jc,t.toString())}},[])},_Z=function(t){var e=t.noRelative,r=t.noImportant,n=t.gapMode,s=n===void 0?"margin":n;NZ();var i=p.useMemo(function(){return bZ(s)},[s]);return p.createElement(wZ,{styles:jZ(i,!e,s,r?"":"!important")})},Zb=!1;if(typeof window<"u")try{var Qf=Object.defineProperty({},"passive",{get:function(){return Zb=!0,!0}});window.addEventListener("test",Qf,Qf),window.removeEventListener("test",Qf,Qf)}catch{Zb=!1}var sc=Zb?{passive:!1}:!1,SZ=function(t){return t.tagName==="TEXTAREA"},fD=function(t,e){if(!(t instanceof Element))return!1;var r=window.getComputedStyle(t);return r[e]!=="hidden"&&!(r.overflowY===r.overflowX&&!SZ(t)&&r[e]==="visible")},AZ=function(t){return fD(t,"overflowY")},EZ=function(t){return fD(t,"overflowX")},sP=function(t,e){var r=e.ownerDocument,n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var s=mD(t,n);if(s){var i=pD(t,n),o=i[1],l=i[2];if(o>l)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},PZ=function(t){var e=t.scrollTop,r=t.scrollHeight,n=t.clientHeight;return[e,r,n]},TZ=function(t){var e=t.scrollLeft,r=t.scrollWidth,n=t.clientWidth;return[e,r,n]},mD=function(t,e){return t==="v"?AZ(e):EZ(e)},pD=function(t,e){return t==="v"?PZ(e):TZ(e)},CZ=function(t,e){return t==="h"&&e==="rtl"?-1:1},kZ=function(t,e,r,n,s){var i=CZ(t,window.getComputedStyle(e).direction),o=i*n,l=r.target,c=e.contains(l),u=!1,d=o>0,h=0,f=0;do{if(!l)break;var m=pD(t,l),v=m[0],y=m[1],x=m[2],b=y-x-i*v;(v||b)&&mD(t,l)&&(h+=b,f+=v);var w=l.parentNode;l=w&&w.nodeType===Node.DOCUMENT_FRAGMENT_NODE?w.host:w}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(d&&(Math.abs(h)<1||!s)||!d&&(Math.abs(f)<1||!s))&&(u=!0),u},Xf=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},aP=function(t){return[t.deltaX,t.deltaY]},iP=function(t){return t&&"current"in t?t.current:t},IZ=function(t,e){return t[0]===e[0]&&t[1]===e[1]},RZ=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},OZ=0,ac=[];function DZ(t){var e=p.useRef([]),r=p.useRef([0,0]),n=p.useRef(),s=p.useState(OZ++)[0],i=p.useState(hD)[0],o=p.useRef(t);p.useEffect(function(){o.current=t},[t]),p.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var y=rZ([t.lockRef.current],(t.shards||[]).map(iP),!0).filter(Boolean);return y.forEach(function(x){return x.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),y.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var l=p.useCallback(function(y,x){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!o.current.allowPinchZoom;var b=Xf(y),w=r.current,j="deltaX"in y?y.deltaX:w[0]-b[0],E="deltaY"in y?y.deltaY:w[1]-b[1],I,O=y.target,T=Math.abs(j)>Math.abs(E)?"h":"v";if("touches"in y&&T==="h"&&O.type==="range")return!1;var A=sP(T,O);if(!A)return!0;if(A?I=T:(I=T==="v"?"h":"v",A=sP(T,O)),!A)return!1;if(!n.current&&"changedTouches"in y&&(j||E)&&(n.current=I),!I)return!0;var S=n.current||I;return kZ(S,x,y,S==="h"?j:E,!0)},[]),c=p.useCallback(function(y){var x=y;if(!(!ac.length||ac[ac.length-1]!==i)){var b="deltaY"in x?aP(x):Xf(x),w=e.current.filter(function(I){return I.name===x.type&&(I.target===x.target||x.target===I.shadowParent)&&IZ(I.delta,b)})[0];if(w&&w.should){x.cancelable&&x.preventDefault();return}if(!w){var j=(o.current.shards||[]).map(iP).filter(Boolean).filter(function(I){return I.contains(x.target)}),E=j.length>0?l(x,j[0]):!o.current.noIsolation;E&&x.cancelable&&x.preventDefault()}}},[]),u=p.useCallback(function(y,x,b,w){var j={name:y,delta:x,target:b,should:w,shadowParent:MZ(b)};e.current.push(j),setTimeout(function(){e.current=e.current.filter(function(E){return E!==j})},1)},[]),d=p.useCallback(function(y){r.current=Xf(y),n.current=void 0},[]),h=p.useCallback(function(y){u(y.type,aP(y),y.target,l(y,t.lockRef.current))},[]),f=p.useCallback(function(y){u(y.type,Xf(y),y.target,l(y,t.lockRef.current))},[]);p.useEffect(function(){return ac.push(i),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",c,sc),document.addEventListener("touchmove",c,sc),document.addEventListener("touchstart",d,sc),function(){ac=ac.filter(function(y){return y!==i}),document.removeEventListener("wheel",c,sc),document.removeEventListener("touchmove",c,sc),document.removeEventListener("touchstart",d,sc)}},[]);var m=t.removeScrollBar,v=t.inert;return p.createElement(p.Fragment,null,v?p.createElement(i,{styles:RZ(s)}):null,m?p.createElement(_Z,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function MZ(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const LZ=dZ(dD,DZ);var Oh=p.forwardRef(function(t,e){return p.createElement(ly,sa({},t,{ref:e,sideCar:LZ}))});Oh.classNames=ly.classNames;var e0=["Enter"," "],FZ=["ArrowDown","PageUp","Home"],gD=["ArrowUp","PageDown","End"],$Z=[...FZ,...gD],UZ={ltr:[...e0,"ArrowRight"],rtl:[...e0,"ArrowLeft"]},BZ={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Dh="Menu",[Yd,VZ,zZ]=bg(Dh),[ql,yD]=Dr(Dh,[zZ,So,Nu]),cy=So(),vD=Nu(),[GZ,Hl]=ql(Dh),[WZ,Mh]=ql(Dh),xD=t=>{const{__scopeMenu:e,open:r=!1,children:n,dir:s,onOpenChange:i,modal:o=!0}=t,l=cy(e),[c,u]=p.useState(null),d=p.useRef(!1),h=ar(i),f=ju(s);return p.useEffect(()=>{const m=()=>{d.current=!0,document.addEventListener("pointerdown",v,{capture:!0,once:!0}),document.addEventListener("pointermove",v,{capture:!0,once:!0})},v=()=>d.current=!1;return document.addEventListener("keydown",m,{capture:!0}),()=>{document.removeEventListener("keydown",m,{capture:!0}),document.removeEventListener("pointerdown",v,{capture:!0}),document.removeEventListener("pointermove",v,{capture:!0})}},[]),a.jsx(Tg,{...l,children:a.jsx(GZ,{scope:e,open:r,onOpenChange:h,content:c,onContentChange:u,children:a.jsx(WZ,{scope:e,onClose:p.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:d,dir:f,modal:o,children:n})})})};xD.displayName=Dh;var qZ="MenuAnchor",F1=p.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t,s=cy(r);return a.jsx(gh,{...s,...n,ref:e})});F1.displayName=qZ;var $1="MenuPortal",[HZ,bD]=ql($1,{forceMount:void 0}),wD=t=>{const{__scopeMenu:e,forceMount:r,children:n,container:s}=t,i=Hl($1,e);return a.jsx(HZ,{scope:e,forceMount:r,children:a.jsx(Mr,{present:r||i.open,children:a.jsx(du,{asChild:!0,container:s,children:n})})})};wD.displayName=$1;var vs="MenuContent",[KZ,U1]=ql(vs),jD=p.forwardRef((t,e)=>{const r=bD(vs,t.__scopeMenu),{forceMount:n=r.forceMount,...s}=t,i=Hl(vs,t.__scopeMenu),o=Mh(vs,t.__scopeMenu);return a.jsx(Yd.Provider,{scope:t.__scopeMenu,children:a.jsx(Mr,{present:n||i.open,children:a.jsx(Yd.Slot,{scope:t.__scopeMenu,children:o.modal?a.jsx(YZ,{...s,ref:e}):a.jsx(QZ,{...s,ref:e})})})})}),YZ=p.forwardRef((t,e)=>{const r=Hl(vs,t.__scopeMenu),n=p.useRef(null),s=We(e,n);return p.useEffect(()=>{const i=n.current;if(i)return oy(i)},[]),a.jsx(B1,{...t,ref:s,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:ve(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),QZ=p.forwardRef((t,e)=>{const r=Hl(vs,t.__scopeMenu);return a.jsx(B1,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),XZ=oo("MenuContent.ScrollLock"),B1=p.forwardRef((t,e)=>{const{__scopeMenu:r,loop:n=!1,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:f,onDismiss:m,disableOutsideScroll:v,...y}=t,x=Hl(vs,r),b=Mh(vs,r),w=cy(r),j=vD(r),E=VZ(r),[I,O]=p.useState(null),T=p.useRef(null),A=We(e,T,x.onContentChange),S=p.useRef(0),_=p.useRef(""),P=p.useRef(0),R=p.useRef(null),C=p.useRef("right"),B=p.useRef(0),G=v?Oh:p.Fragment,U=v?{as:XZ,allowPinchZoom:!0}:void 0,F=$=>{var se,Fe;const ne=_.current+$,te=E().filter(oe=>!oe.disabled),z=document.activeElement,de=(se=te.find(oe=>oe.ref.current===z))==null?void 0:se.textValue,Z=te.map(oe=>oe.textValue),re=cee(Z,ne,de),_e=(Fe=te.find(oe=>oe.textValue===re))==null?void 0:Fe.ref.current;(function oe(V){_.current=V,window.clearTimeout(S.current),V!==""&&(S.current=window.setTimeout(()=>oe(""),1e3))})(ne),_e&&setTimeout(()=>_e.focus())};p.useEffect(()=>()=>window.clearTimeout(S.current),[]),iy();const M=p.useCallback($=>{var te,z;return C.current===((te=R.current)==null?void 0:te.side)&&dee($,(z=R.current)==null?void 0:z.area)},[]);return a.jsx(KZ,{scope:r,searchRef:_,onItemEnter:p.useCallback($=>{M($)&&$.preventDefault()},[M]),onItemLeave:p.useCallback($=>{var ne;M($)||((ne=T.current)==null||ne.focus(),O(null))},[M]),onTriggerLeave:p.useCallback($=>{M($)&&$.preventDefault()},[M]),pointerGraceTimerRef:P,onPointerGraceIntentChange:p.useCallback($=>{R.current=$},[]),children:a.jsx(G,{...U,children:a.jsx(Ih,{asChild:!0,trapped:s,onMountAutoFocus:ve(i,$=>{var ne;$.preventDefault(),(ne=T.current)==null||ne.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:a.jsx(Vl,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:f,onDismiss:m,children:a.jsx(M1,{asChild:!0,...j,dir:b.dir,orientation:"vertical",loop:n,currentTabStopId:I,onCurrentTabStopIdChange:O,onEntryFocus:ve(c,$=>{b.isUsingKeyboardRef.current||$.preventDefault()}),preventScrollOnEntryFocus:!0,children:a.jsx(Cg,{role:"menu","aria-orientation":"vertical","data-state":FD(x.open),"data-radix-menu-content":"",dir:b.dir,...w,...y,ref:A,style:{outline:"none",...y.style},onKeyDown:ve(y.onKeyDown,$=>{const te=$.target.closest("[data-radix-menu-content]")===$.currentTarget,z=$.ctrlKey||$.altKey||$.metaKey,de=$.key.length===1;te&&($.key==="Tab"&&$.preventDefault(),!z&&de&&F($.key));const Z=T.current;if($.target!==Z||!$Z.includes($.key))return;$.preventDefault();const _e=E().filter(se=>!se.disabled).map(se=>se.ref.current);gD.includes($.key)&&_e.reverse(),oee(_e)}),onBlur:ve(t.onBlur,$=>{$.currentTarget.contains($.target)||(window.clearTimeout(S.current),_.current="")}),onPointerMove:ve(t.onPointerMove,Qd($=>{const ne=$.target,te=B.current!==$.clientX;if($.currentTarget.contains(ne)&&te){const z=$.clientX>B.current?"right":"left";C.current=z,B.current=$.clientX}}))})})})})})})});jD.displayName=vs;var JZ="MenuGroup",V1=p.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return a.jsx(Re.div,{role:"group",...n,ref:e})});V1.displayName=JZ;var ZZ="MenuLabel",ND=p.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return a.jsx(Re.div,{...n,ref:e})});ND.displayName=ZZ;var xp="MenuItem",oP="menu.itemSelect",uy=p.forwardRef((t,e)=>{const{disabled:r=!1,onSelect:n,...s}=t,i=p.useRef(null),o=Mh(xp,t.__scopeMenu),l=U1(xp,t.__scopeMenu),c=We(e,i),u=p.useRef(!1),d=()=>{const h=i.current;if(!r&&h){const f=new CustomEvent(oP,{bubbles:!0,cancelable:!0});h.addEventListener(oP,m=>n==null?void 0:n(m),{once:!0}),cw(h,f),f.defaultPrevented?u.current=!1:o.onClose()}};return a.jsx(_D,{...s,ref:c,disabled:r,onClick:ve(t.onClick,d),onPointerDown:h=>{var f;(f=t.onPointerDown)==null||f.call(t,h),u.current=!0},onPointerUp:ve(t.onPointerUp,h=>{var f;u.current||(f=h.currentTarget)==null||f.click()}),onKeyDown:ve(t.onKeyDown,h=>{const f=l.searchRef.current!=="";r||f&&h.key===" "||e0.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});uy.displayName=xp;var _D=p.forwardRef((t,e)=>{const{__scopeMenu:r,disabled:n=!1,textValue:s,...i}=t,o=U1(xp,r),l=vD(r),c=p.useRef(null),u=We(e,c),[d,h]=p.useState(!1),[f,m]=p.useState("");return p.useEffect(()=>{const v=c.current;v&&m((v.textContent??"").trim())},[i.children]),a.jsx(Yd.ItemSlot,{scope:r,disabled:n,textValue:s??f,children:a.jsx(L1,{asChild:!0,...l,focusable:!n,children:a.jsx(Re.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...i,ref:u,onPointerMove:ve(t.onPointerMove,Qd(v=>{n?o.onItemLeave(v):(o.onItemEnter(v),v.defaultPrevented||v.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:ve(t.onPointerLeave,Qd(v=>o.onItemLeave(v))),onFocus:ve(t.onFocus,()=>h(!0)),onBlur:ve(t.onBlur,()=>h(!1))})})})}),eee="MenuCheckboxItem",SD=p.forwardRef((t,e)=>{const{checked:r=!1,onCheckedChange:n,...s}=t;return a.jsx(CD,{scope:t.__scopeMenu,checked:r,children:a.jsx(uy,{role:"menuitemcheckbox","aria-checked":bp(r)?"mixed":r,...s,ref:e,"data-state":G1(r),onSelect:ve(s.onSelect,()=>n==null?void 0:n(bp(r)?!0:!r),{checkForDefaultPrevented:!1})})})});SD.displayName=eee;var AD="MenuRadioGroup",[tee,ree]=ql(AD,{value:void 0,onValueChange:()=>{}}),ED=p.forwardRef((t,e)=>{const{value:r,onValueChange:n,...s}=t,i=ar(n);return a.jsx(tee,{scope:t.__scopeMenu,value:r,onValueChange:i,children:a.jsx(V1,{...s,ref:e})})});ED.displayName=AD;var PD="MenuRadioItem",TD=p.forwardRef((t,e)=>{const{value:r,...n}=t,s=ree(PD,t.__scopeMenu),i=r===s.value;return a.jsx(CD,{scope:t.__scopeMenu,checked:i,children:a.jsx(uy,{role:"menuitemradio","aria-checked":i,...n,ref:e,"data-state":G1(i),onSelect:ve(n.onSelect,()=>{var o;return(o=s.onValueChange)==null?void 0:o.call(s,r)},{checkForDefaultPrevented:!1})})})});TD.displayName=PD;var z1="MenuItemIndicator",[CD,nee]=ql(z1,{checked:!1}),kD=p.forwardRef((t,e)=>{const{__scopeMenu:r,forceMount:n,...s}=t,i=nee(z1,r);return a.jsx(Mr,{present:n||bp(i.checked)||i.checked===!0,children:a.jsx(Re.span,{...s,ref:e,"data-state":G1(i.checked)})})});kD.displayName=z1;var see="MenuSeparator",ID=p.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return a.jsx(Re.div,{role:"separator","aria-orientation":"horizontal",...n,ref:e})});ID.displayName=see;var aee="MenuArrow",RD=p.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t,s=cy(r);return a.jsx(kg,{...s,...n,ref:e})});RD.displayName=aee;var iee="MenuSub",[qNe,OD]=ql(iee),yd="MenuSubTrigger",DD=p.forwardRef((t,e)=>{const r=Hl(yd,t.__scopeMenu),n=Mh(yd,t.__scopeMenu),s=OD(yd,t.__scopeMenu),i=U1(yd,t.__scopeMenu),o=p.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=i,u={__scopeMenu:t.__scopeMenu},d=p.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return p.useEffect(()=>d,[d]),p.useEffect(()=>{const h=l.current;return()=>{window.clearTimeout(h),c(null)}},[l,c]),a.jsx(F1,{asChild:!0,...u,children:a.jsx(_D,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":s.contentId,"data-state":FD(r.open),...t,ref:xg(e,s.onTriggerChange),onClick:h=>{var f;(f=t.onClick)==null||f.call(t,h),!(t.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:ve(t.onPointerMove,Qd(h=>{i.onItemEnter(h),!h.defaultPrevented&&!t.disabled&&!r.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{r.onOpenChange(!0),d()},100))})),onPointerLeave:ve(t.onPointerLeave,Qd(h=>{var m,v;d();const f=(m=r.content)==null?void 0:m.getBoundingClientRect();if(f){const y=(v=r.content)==null?void 0:v.dataset.side,x=y==="right",b=x?-5:5,w=f[x?"left":"right"],j=f[x?"right":"left"];i.onPointerGraceIntentChange({area:[{x:h.clientX+b,y:h.clientY},{x:w,y:f.top},{x:j,y:f.top},{x:j,y:f.bottom},{x:w,y:f.bottom}],side:y}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(h),h.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:ve(t.onKeyDown,h=>{var m;const f=i.searchRef.current!=="";t.disabled||f&&h.key===" "||UZ[n.dir].includes(h.key)&&(r.onOpenChange(!0),(m=r.content)==null||m.focus(),h.preventDefault())})})})});DD.displayName=yd;var MD="MenuSubContent",LD=p.forwardRef((t,e)=>{const r=bD(vs,t.__scopeMenu),{forceMount:n=r.forceMount,...s}=t,i=Hl(vs,t.__scopeMenu),o=Mh(vs,t.__scopeMenu),l=OD(MD,t.__scopeMenu),c=p.useRef(null),u=We(e,c);return a.jsx(Yd.Provider,{scope:t.__scopeMenu,children:a.jsx(Mr,{present:n||i.open,children:a.jsx(Yd.Slot,{scope:t.__scopeMenu,children:a.jsx(B1,{id:l.contentId,"aria-labelledby":l.triggerId,...s,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var h;o.isUsingKeyboardRef.current&&((h=c.current)==null||h.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:ve(t.onFocusOutside,d=>{d.target!==l.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:ve(t.onEscapeKeyDown,d=>{o.onClose(),d.preventDefault()}),onKeyDown:ve(t.onKeyDown,d=>{var m;const h=d.currentTarget.contains(d.target),f=BZ[o.dir].includes(d.key);h&&f&&(i.onOpenChange(!1),(m=l.trigger)==null||m.focus(),d.preventDefault())})})})})})});LD.displayName=MD;function FD(t){return t?"open":"closed"}function bp(t){return t==="indeterminate"}function G1(t){return bp(t)?"indeterminate":t?"checked":"unchecked"}function oee(t){const e=document.activeElement;for(const r of t)if(r===e||(r.focus(),document.activeElement!==e))return}function lee(t,e){return t.map((r,n)=>t[(e+n)%t.length])}function cee(t,e,r){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,i=r?t.indexOf(r):-1;let o=lee(t,Math.max(i,0));s.length===1&&(o=o.filter(u=>u!==r));const c=o.find(u=>u.toLowerCase().startsWith(s.toLowerCase()));return c!==r?c:void 0}function uee(t,e){const{x:r,y:n}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const l=e[i],c=e[o],u=l.x,d=l.y,h=c.x,f=c.y;d>n!=f>n&&r<(h-u)*(n-d)/(f-d)+u&&(s=!s)}return s}function dee(t,e){if(!e)return!1;const r={x:t.clientX,y:t.clientY};return uee(r,e)}function Qd(t){return e=>e.pointerType==="mouse"?t(e):void 0}var hee=xD,fee=F1,mee=wD,pee=jD,gee=V1,yee=ND,vee=uy,xee=SD,bee=ED,wee=TD,jee=kD,Nee=ID,_ee=RD,See=DD,Aee=LD,dy="DropdownMenu",[Eee,HNe]=Dr(dy,[yD]),gn=yD(),[Pee,$D]=Eee(dy),UD=t=>{const{__scopeDropdownMenu:e,children:r,dir:n,open:s,defaultOpen:i,onOpenChange:o,modal:l=!0}=t,c=gn(e),u=p.useRef(null),[d,h]=Bs({prop:s,defaultProp:i??!1,onChange:o,caller:dy});return a.jsx(Pee,{scope:e,triggerId:ys(),triggerRef:u,contentId:ys(),open:d,onOpenChange:h,onOpenToggle:p.useCallback(()=>h(f=>!f),[h]),modal:l,children:a.jsx(hee,{...c,open:d,onOpenChange:h,dir:n,modal:l,children:r})})};UD.displayName=dy;var BD="DropdownMenuTrigger",VD=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,disabled:n=!1,...s}=t,i=$D(BD,r),o=gn(r);return a.jsx(fee,{asChild:!0,...o,children:a.jsx(Re.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...s,ref:xg(e,i.triggerRef),onPointerDown:ve(t.onPointerDown,l=>{!n&&l.button===0&&l.ctrlKey===!1&&(i.onOpenToggle(),i.open||l.preventDefault())}),onKeyDown:ve(t.onKeyDown,l=>{n||(["Enter"," "].includes(l.key)&&i.onOpenToggle(),l.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});VD.displayName=BD;var Tee="DropdownMenuPortal",zD=t=>{const{__scopeDropdownMenu:e,...r}=t,n=gn(e);return a.jsx(mee,{...n,...r})};zD.displayName=Tee;var GD="DropdownMenuContent",WD=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=$D(GD,r),i=gn(r),o=p.useRef(!1);return a.jsx(pee,{id:s.contentId,"aria-labelledby":s.triggerId,...i,...n,ref:e,onCloseAutoFocus:ve(t.onCloseAutoFocus,l=>{var c;o.current||(c=s.triggerRef.current)==null||c.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:ve(t.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,d=c.button===2||u;(!s.modal||d)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});WD.displayName=GD;var Cee="DropdownMenuGroup",kee=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=gn(r);return a.jsx(gee,{...s,...n,ref:e})});kee.displayName=Cee;var Iee="DropdownMenuLabel",qD=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=gn(r);return a.jsx(yee,{...s,...n,ref:e})});qD.displayName=Iee;var Ree="DropdownMenuItem",HD=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=gn(r);return a.jsx(vee,{...s,...n,ref:e})});HD.displayName=Ree;var Oee="DropdownMenuCheckboxItem",KD=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=gn(r);return a.jsx(xee,{...s,...n,ref:e})});KD.displayName=Oee;var Dee="DropdownMenuRadioGroup",Mee=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=gn(r);return a.jsx(bee,{...s,...n,ref:e})});Mee.displayName=Dee;var Lee="DropdownMenuRadioItem",YD=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=gn(r);return a.jsx(wee,{...s,...n,ref:e})});YD.displayName=Lee;var Fee="DropdownMenuItemIndicator",QD=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=gn(r);return a.jsx(jee,{...s,...n,ref:e})});QD.displayName=Fee;var $ee="DropdownMenuSeparator",XD=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=gn(r);return a.jsx(Nee,{...s,...n,ref:e})});XD.displayName=$ee;var Uee="DropdownMenuArrow",Bee=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=gn(r);return a.jsx(_ee,{...s,...n,ref:e})});Bee.displayName=Uee;var Vee="DropdownMenuSubTrigger",JD=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=gn(r);return a.jsx(See,{...s,...n,ref:e})});JD.displayName=Vee;var zee="DropdownMenuSubContent",ZD=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=gn(r);return a.jsx(Aee,{...s,...n,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});ZD.displayName=zee;var Gee=UD,Wee=VD,qee=zD,eM=WD,tM=qD,rM=HD,nM=KD,sM=YD,aM=QD,iM=XD,oM=JD,lM=ZD;const hy=Gee,fy=Wee,Hee=p.forwardRef(({className:t,inset:e,children:r,...n},s)=>a.jsxs(oM,{ref:s,className:ye("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e&&"pl-8",t),...n,children:[r,a.jsx(Bm,{className:"ml-auto h-4 w-4"})]}));Hee.displayName=oM.displayName;const Kee=p.forwardRef(({className:t,...e},r)=>a.jsx(lM,{ref:r,className:ye("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));Kee.displayName=lM.displayName;const Lh=p.forwardRef(({className:t,sideOffset:e=4,...r},n)=>a.jsx(qee,{children:a.jsx(eM,{ref:n,sideOffset:e,className:ye("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}));Lh.displayName=eM.displayName;const An=p.forwardRef(({className:t,inset:e,...r},n)=>a.jsx(rM,{ref:n,className:ye("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...r}));An.displayName=rM.displayName;const Yee=p.forwardRef(({className:t,children:e,checked:r,...n},s)=>a.jsxs(nM,{ref:s,className:ye("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:r,...n,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(aM,{children:a.jsx(Zi,{className:"h-4 w-4"})})}),e]}));Yee.displayName=nM.displayName;const Qee=p.forwardRef(({className:t,children:e,...r},n)=>a.jsxs(sM,{ref:n,className:ye("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(aM,{children:a.jsx(dI,{className:"h-2 w-2 fill-current"})})}),e]}));Qee.displayName=sM.displayName;const W1=p.forwardRef(({className:t,inset:e,...r},n)=>a.jsx(tM,{ref:n,className:ye("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...r}));W1.displayName=tM.displayName;const Nc=p.forwardRef(({className:t,...e},r)=>a.jsx(iM,{ref:r,className:ye("-mx-1 my-1 h-px bg-muted",t),...e}));Nc.displayName=iM.displayName;var cM={exports:{}},uM={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qc=p;function Xee(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Jee=typeof Object.is=="function"?Object.is:Xee,Zee=qc.useState,ete=qc.useEffect,tte=qc.useLayoutEffect,rte=qc.useDebugValue;function nte(t,e){var r=e(),n=Zee({inst:{value:r,getSnapshot:e}}),s=n[0].inst,i=n[1];return tte(function(){s.value=r,s.getSnapshot=e,vx(s)&&i({inst:s})},[t,r,e]),ete(function(){return vx(s)&&i({inst:s}),t(function(){vx(s)&&i({inst:s})})},[t]),rte(r),r}function vx(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Jee(t,r)}catch{return!0}}function ste(t,e){return e()}var ate=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?ste:nte;uM.useSyncExternalStore=qc.useSyncExternalStore!==void 0?qc.useSyncExternalStore:ate;cM.exports=uM;var dM=cM.exports;function ite(){return dM.useSyncExternalStore(ote,()=>!0,()=>!1)}function ote(){return()=>{}}var q1="Avatar",[lte,KNe]=Dr(q1),[cte,hM]=lte(q1),fM=p.forwardRef((t,e)=>{const{__scopeAvatar:r,...n}=t,[s,i]=p.useState("idle");return a.jsx(cte,{scope:r,imageLoadingStatus:s,onImageLoadingStatusChange:i,children:a.jsx(Re.span,{...n,ref:e})})});fM.displayName=q1;var mM="AvatarImage",pM=p.forwardRef((t,e)=>{const{__scopeAvatar:r,src:n,onLoadingStatusChange:s=()=>{},...i}=t,o=hM(mM,r),l=ute(n,i),c=ar(u=>{s(u),o.onImageLoadingStatusChange(u)});return pr(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?a.jsx(Re.img,{...i,ref:e,src:n}):null});pM.displayName=mM;var gM="AvatarFallback",yM=p.forwardRef((t,e)=>{const{__scopeAvatar:r,delayMs:n,...s}=t,i=hM(gM,r),[o,l]=p.useState(n===void 0);return p.useEffect(()=>{if(n!==void 0){const c=window.setTimeout(()=>l(!0),n);return()=>window.clearTimeout(c)}},[n]),o&&i.imageLoadingStatus!=="loaded"?a.jsx(Re.span,{...s,ref:e}):null});yM.displayName=gM;function lP(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function ute(t,{referrerPolicy:e,crossOrigin:r}){const n=ite(),s=p.useRef(null),i=n?(s.current||(s.current=new window.Image),s.current):null,[o,l]=p.useState(()=>lP(i,t));return pr(()=>{l(lP(i,t))},[i,t]),pr(()=>{const c=h=>()=>{l(h)};if(!i)return;const u=c("loaded"),d=c("error");return i.addEventListener("load",u),i.addEventListener("error",d),e&&(i.referrerPolicy=e),typeof r=="string"&&(i.crossOrigin=r),()=>{i.removeEventListener("load",u),i.removeEventListener("error",d)}},[i,r,e]),o}var vM=fM,xM=pM,bM=yM;const Fh=p.forwardRef(({className:t,...e},r)=>a.jsx(vM,{ref:r,className:ye("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));Fh.displayName=vM.displayName;const dte=p.forwardRef(({className:t,...e},r)=>a.jsx(xM,{ref:r,className:ye("aspect-square h-full w-full",t),...e}));dte.displayName=xM.displayName;const $h=p.forwardRef(({className:t,...e},r)=>a.jsx(bM,{ref:r,className:ye("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));$h.displayName=bM.displayName;const hte=fh("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Se({className:t,variant:e,...r}){return a.jsx("div",{className:ye(hte({variant:e}),t),...r})}function t0(t,[e,r]){return Math.min(r,Math.max(e,t))}function fte(t,e){return p.useReducer((r,n)=>e[r][n]??r,t)}var H1="ScrollArea",[wM,YNe]=Dr(H1),[mte,Ns]=wM(H1),jM=p.forwardRef((t,e)=>{const{__scopeScrollArea:r,type:n="hover",dir:s,scrollHideDelay:i=600,...o}=t,[l,c]=p.useState(null),[u,d]=p.useState(null),[h,f]=p.useState(null),[m,v]=p.useState(null),[y,x]=p.useState(null),[b,w]=p.useState(0),[j,E]=p.useState(0),[I,O]=p.useState(!1),[T,A]=p.useState(!1),S=We(e,P=>c(P)),_=ju(s);return a.jsx(mte,{scope:r,type:n,dir:_,scrollHideDelay:i,scrollArea:l,viewport:u,onViewportChange:d,content:h,onContentChange:f,scrollbarX:m,onScrollbarXChange:v,scrollbarXEnabled:I,onScrollbarXEnabledChange:O,scrollbarY:y,onScrollbarYChange:x,scrollbarYEnabled:T,onScrollbarYEnabledChange:A,onCornerWidthChange:w,onCornerHeightChange:E,children:a.jsx(Re.div,{dir:_,...o,ref:S,style:{position:"relative","--radix-scroll-area-corner-width":b+"px","--radix-scroll-area-corner-height":j+"px",...t.style}})})});jM.displayName=H1;var NM="ScrollAreaViewport",_M=p.forwardRef((t,e)=>{const{__scopeScrollArea:r,children:n,nonce:s,...i}=t,o=Ns(NM,r),l=p.useRef(null),c=We(e,l,o.onViewportChange);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),a.jsx(Re.div,{"data-radix-scroll-area-viewport":"",...i,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...t.style},children:a.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});_M.displayName=NM;var Ta="ScrollAreaScrollbar",K1=p.forwardRef((t,e)=>{const{forceMount:r,...n}=t,s=Ns(Ta,t.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=s,l=t.orientation==="horizontal";return p.useEffect(()=>(l?i(!0):o(!0),()=>{l?i(!1):o(!1)}),[l,i,o]),s.type==="hover"?a.jsx(pte,{...n,ref:e,forceMount:r}):s.type==="scroll"?a.jsx(gte,{...n,ref:e,forceMount:r}):s.type==="auto"?a.jsx(SM,{...n,ref:e,forceMount:r}):s.type==="always"?a.jsx(Y1,{...n,ref:e}):null});K1.displayName=Ta;var pte=p.forwardRef((t,e)=>{const{forceMount:r,...n}=t,s=Ns(Ta,t.__scopeScrollArea),[i,o]=p.useState(!1);return p.useEffect(()=>{const l=s.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),o(!0)},d=()=>{c=window.setTimeout(()=>o(!1),s.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",d),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",d)}}},[s.scrollArea,s.scrollHideDelay]),a.jsx(Mr,{present:r||i,children:a.jsx(SM,{"data-state":i?"visible":"hidden",...n,ref:e})})}),gte=p.forwardRef((t,e)=>{const{forceMount:r,...n}=t,s=Ns(Ta,t.__scopeScrollArea),i=t.orientation==="horizontal",o=py(()=>c("SCROLL_END"),100),[l,c]=fte("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return p.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,s.scrollHideDelay,c]),p.useEffect(()=>{const u=s.viewport,d=i?"scrollLeft":"scrollTop";if(u){let h=u[d];const f=()=>{const m=u[d];h!==m&&(c("SCROLL"),o()),h=m};return u.addEventListener("scroll",f),()=>u.removeEventListener("scroll",f)}},[s.viewport,i,c,o]),a.jsx(Mr,{present:r||l!=="hidden",children:a.jsx(Y1,{"data-state":l==="hidden"?"hidden":"visible",...n,ref:e,onPointerEnter:ve(t.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:ve(t.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),SM=p.forwardRef((t,e)=>{const r=Ns(Ta,t.__scopeScrollArea),{forceMount:n,...s}=t,[i,o]=p.useState(!1),l=t.orientation==="horizontal",c=py(()=>{if(r.viewport){const u=r.viewport.offsetWidth<r.viewport.scrollWidth,d=r.viewport.offsetHeight<r.viewport.scrollHeight;o(l?u:d)}},10);return Hc(r.viewport,c),Hc(r.content,c),a.jsx(Mr,{present:n||i,children:a.jsx(Y1,{"data-state":i?"visible":"hidden",...s,ref:e})})}),Y1=p.forwardRef((t,e)=>{const{orientation:r="vertical",...n}=t,s=Ns(Ta,t.__scopeScrollArea),i=p.useRef(null),o=p.useRef(0),[l,c]=p.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=CM(l.viewport,l.content),d={...n,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:f=>i.current=f,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:f=>o.current=f};function h(f,m){return jte(f,o.current,l,m)}return r==="horizontal"?a.jsx(yte,{...d,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const f=s.viewport.scrollLeft,m=cP(f,l,s.dir);i.current.style.transform=`translate3d(${m}px, 0, 0)`}},onWheelScroll:f=>{s.viewport&&(s.viewport.scrollLeft=f)},onDragScroll:f=>{s.viewport&&(s.viewport.scrollLeft=h(f,s.dir))}}):r==="vertical"?a.jsx(vte,{...d,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const f=s.viewport.scrollTop,m=cP(f,l);i.current.style.transform=`translate3d(0, ${m}px, 0)`}},onWheelScroll:f=>{s.viewport&&(s.viewport.scrollTop=f)},onDragScroll:f=>{s.viewport&&(s.viewport.scrollTop=h(f))}}):null}),yte=p.forwardRef((t,e)=>{const{sizes:r,onSizesChange:n,...s}=t,i=Ns(Ta,t.__scopeScrollArea),[o,l]=p.useState(),c=p.useRef(null),u=We(e,c,i.onScrollbarXChange);return p.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),a.jsx(EM,{"data-orientation":"horizontal",...s,ref:u,sizes:r,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":my(r)+"px",...t.style},onThumbPointerDown:d=>t.onThumbPointerDown(d.x),onDragScroll:d=>t.onDragScroll(d.x),onWheelScroll:(d,h)=>{if(i.viewport){const f=i.viewport.scrollLeft+d.deltaX;t.onWheelScroll(f),IM(f,h)&&d.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&n({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:jp(o.paddingLeft),paddingEnd:jp(o.paddingRight)}})}})}),vte=p.forwardRef((t,e)=>{const{sizes:r,onSizesChange:n,...s}=t,i=Ns(Ta,t.__scopeScrollArea),[o,l]=p.useState(),c=p.useRef(null),u=We(e,c,i.onScrollbarYChange);return p.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),a.jsx(EM,{"data-orientation":"vertical",...s,ref:u,sizes:r,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":my(r)+"px",...t.style},onThumbPointerDown:d=>t.onThumbPointerDown(d.y),onDragScroll:d=>t.onDragScroll(d.y),onWheelScroll:(d,h)=>{if(i.viewport){const f=i.viewport.scrollTop+d.deltaY;t.onWheelScroll(f),IM(f,h)&&d.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&n({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:jp(o.paddingTop),paddingEnd:jp(o.paddingBottom)}})}})}),[xte,AM]=wM(Ta),EM=p.forwardRef((t,e)=>{const{__scopeScrollArea:r,sizes:n,hasThumb:s,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:d,onResize:h,...f}=t,m=Ns(Ta,r),[v,y]=p.useState(null),x=We(e,S=>y(S)),b=p.useRef(null),w=p.useRef(""),j=m.viewport,E=n.content-n.viewport,I=ar(d),O=ar(c),T=py(h,10);function A(S){if(b.current){const _=S.clientX-b.current.left,P=S.clientY-b.current.top;u({x:_,y:P})}}return p.useEffect(()=>{const S=_=>{const P=_.target;(v==null?void 0:v.contains(P))&&I(_,E)};return document.addEventListener("wheel",S,{passive:!1}),()=>document.removeEventListener("wheel",S,{passive:!1})},[j,v,E,I]),p.useEffect(O,[n,O]),Hc(v,T),Hc(m.content,T),a.jsx(xte,{scope:r,scrollbar:v,hasThumb:s,onThumbChange:ar(i),onThumbPointerUp:ar(o),onThumbPositionChange:O,onThumbPointerDown:ar(l),children:a.jsx(Re.div,{...f,ref:x,style:{position:"absolute",...f.style},onPointerDown:ve(t.onPointerDown,S=>{S.button===0&&(S.target.setPointerCapture(S.pointerId),b.current=v.getBoundingClientRect(),w.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",m.viewport&&(m.viewport.style.scrollBehavior="auto"),A(S))}),onPointerMove:ve(t.onPointerMove,A),onPointerUp:ve(t.onPointerUp,S=>{const _=S.target;_.hasPointerCapture(S.pointerId)&&_.releasePointerCapture(S.pointerId),document.body.style.webkitUserSelect=w.current,m.viewport&&(m.viewport.style.scrollBehavior=""),b.current=null})})})}),wp="ScrollAreaThumb",PM=p.forwardRef((t,e)=>{const{forceMount:r,...n}=t,s=AM(wp,t.__scopeScrollArea);return a.jsx(Mr,{present:r||s.hasThumb,children:a.jsx(bte,{ref:e,...n})})}),bte=p.forwardRef((t,e)=>{const{__scopeScrollArea:r,style:n,...s}=t,i=Ns(wp,r),o=AM(wp,r),{onThumbPositionChange:l}=o,c=We(e,h=>o.onThumbChange(h)),u=p.useRef(void 0),d=py(()=>{u.current&&(u.current(),u.current=void 0)},100);return p.useEffect(()=>{const h=i.viewport;if(h){const f=()=>{if(d(),!u.current){const m=Nte(h,l);u.current=m,l()}};return l(),h.addEventListener("scroll",f),()=>h.removeEventListener("scroll",f)}},[i.viewport,d,l]),a.jsx(Re.div,{"data-state":o.hasThumb?"visible":"hidden",...s,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:ve(t.onPointerDownCapture,h=>{const m=h.target.getBoundingClientRect(),v=h.clientX-m.left,y=h.clientY-m.top;o.onThumbPointerDown({x:v,y})}),onPointerUp:ve(t.onPointerUp,o.onThumbPointerUp)})});PM.displayName=wp;var Q1="ScrollAreaCorner",TM=p.forwardRef((t,e)=>{const r=Ns(Q1,t.__scopeScrollArea),n=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&n?a.jsx(wte,{...t,ref:e}):null});TM.displayName=Q1;var wte=p.forwardRef((t,e)=>{const{__scopeScrollArea:r,...n}=t,s=Ns(Q1,r),[i,o]=p.useState(0),[l,c]=p.useState(0),u=!!(i&&l);return Hc(s.scrollbarX,()=>{var h;const d=((h=s.scrollbarX)==null?void 0:h.offsetHeight)||0;s.onCornerHeightChange(d),c(d)}),Hc(s.scrollbarY,()=>{var h;const d=((h=s.scrollbarY)==null?void 0:h.offsetWidth)||0;s.onCornerWidthChange(d),o(d)}),u?a.jsx(Re.div,{...n,ref:e,style:{width:i,height:l,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function jp(t){return t?parseInt(t,10):0}function CM(t,e){const r=t/e;return isNaN(r)?0:r}function my(t){const e=CM(t.viewport,t.content),r=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,n=(t.scrollbar.size-r)*e;return Math.max(n,18)}function jte(t,e,r,n="ltr"){const s=my(r),i=s/2,o=e||i,l=s-o,c=r.scrollbar.paddingStart+o,u=r.scrollbar.size-r.scrollbar.paddingEnd-l,d=r.content-r.viewport,h=n==="ltr"?[0,d]:[d*-1,0];return kM([c,u],h)(t)}function cP(t,e,r="ltr"){const n=my(e),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,i=e.scrollbar.size-s,o=e.content-e.viewport,l=i-n,c=r==="ltr"?[0,o]:[o*-1,0],u=t0(t,c);return kM([0,o],[0,l])(u)}function kM(t,e){return r=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const n=(e[1]-e[0])/(t[1]-t[0]);return e[0]+n*(r-t[0])}}function IM(t,e){return t>0&&t<e}var Nte=(t,e=()=>{})=>{let r={left:t.scrollLeft,top:t.scrollTop},n=0;return function s(){const i={left:t.scrollLeft,top:t.scrollTop},o=r.left!==i.left,l=r.top!==i.top;(o||l)&&e(),r=i,n=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(n)};function py(t,e){const r=ar(t),n=p.useRef(0);return p.useEffect(()=>()=>window.clearTimeout(n.current),[]),p.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,e)},[r,e])}function Hc(t,e){const r=ar(e);pr(()=>{let n=0;if(t){const s=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return s.observe(t),()=>{window.cancelAnimationFrame(n),s.unobserve(t)}}},[t,r])}var RM=jM,_te=_M,Ste=TM;const OM=p.forwardRef(({className:t,children:e,...r},n)=>a.jsxs(RM,{ref:n,className:ye("relative overflow-hidden",t),...r,children:[a.jsx(_te,{className:"h-full w-full rounded-[inherit]",children:e}),a.jsx(DM,{}),a.jsx(Ste,{})]}));OM.displayName=RM.displayName;const DM=p.forwardRef(({className:t,orientation:e="vertical",...r},n)=>a.jsx(K1,{ref:n,orientation:e,className:ye("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...r,children:a.jsx(PM,{className:"relative flex-1 rounded-full bg-border"})}));DM.displayName=K1.displayName;class Ate{constructor(){Je(this,"subscriptionKey");Je(this,"endpoint");Je(this,"deployment");Je(this,"apiVersion");Je(this,"lastRequestTime",0);Je(this,"minRequestInterval",1e3);this.subscriptionKey="1TPW16ifwPJccSiQPSHq63nU7IcT6R9DrduIHBYwCm5jbUWiSbkLJQQJ99BDACYeBjFXJ3w3AAABACOG3Yia",this.endpoint="https://agentplus.openai.azure.com/",this.deployment="gpt-4o",this.apiVersion="2024-02-15-preview",this.subscriptionKey&&this.endpoint?(console.log("✅ Azure OpenAI configuration loaded"),console.log("🔑 Endpoint:",this.endpoint),console.log("🚀 Deployment:",this.deployment),console.log("📅 API Version:",this.apiVersion),this.testApiKey().catch(e=>{console.warn("⚠️ Azure OpenAI API test failed:",e.message)})):console.warn("⚠️ Azure OpenAI not configured. AI features will not work.")}async testApiKey(){if(!this.subscriptionKey||!this.endpoint||!this.deployment||!this.apiVersion)return!1;try{console.log("🧪 Testing Azure OpenAI API configuration...");const e=`${this.endpoint}/openai/deployments/${this.deployment}/chat/completions?api-version=${this.apiVersion}`,r=await fetch(e,{method:"POST",headers:{"api-key":this.subscriptionKey,"Content-Type":"application/json"},body:JSON.stringify({messages:[{role:"user",content:"test"}],max_tokens:1,temperature:0})});if(r.ok||r.status===400)return console.log("✅ Azure OpenAI API configuration is valid and working!"),!0;{const n=await r.json().catch(()=>({}));return console.error("❌ Azure OpenAI API test failed:",r.status,n),r.status===401&&(console.error("🔑 CRITICAL: Your Azure OpenAI API key is invalid or expired!"),console.error("📋 Possible issues:"),console.error("   • Subscription key is incorrect or has typos"),console.error("   • Key has been revoked or expired"),console.error("   • Endpoint URL is incorrect"),console.error("   • Deployment name is incorrect"),console.error("   • API version is not supported"),console.error("🔗 Check your Azure OpenAI resource in the Azure portal")),!1}}catch(e){return console.error("🚨 Error testing Azure OpenAI API:",e),!1}}async rateLimitedRequest(e,r){const s=Date.now()-this.lastRequestTime;if(s<this.minRequestInterval){const i=this.minRequestInterval-s;console.log(`⏳ Rate limiting: waiting ${i}ms before next request`),await new Promise(o=>setTimeout(o,i))}this.lastRequestTime=Date.now();try{const i=await fetch(e,r);if(i.status===429){console.log("⚠️ Rate limited by OpenAI, implementing exponential backoff...");const o=i.headers.get("retry-after"),l=o?parseInt(o)*1e3:5e3;return console.log(`⏳ Waiting ${l}ms before retry...`),await new Promise(c=>setTimeout(c,l)),this.lastRequestTime=Date.now(),fetch(e,r)}return i}catch(i){throw i.name==="AbortError"?(console.warn("⏰ OpenAI API request timed out"),new Error("OpenAI API request timed out. Please try again.")):(console.error("🚨 OpenAI API request failed:",i),i)}}getSmartButtonForCategory(e,r,n){const s=e.toLowerCase(),i=n||`https://www.google.com/search?q=${encodeURIComponent(r)}`;return s.includes("restaurant")||s.includes("food")||s.includes("cafe")||s.includes("dining")||s.includes("pizza")||s.includes("delivery")?{actionType:"ORDER",url:i}:s.includes("salon")||s.includes("spa")||s.includes("beauty")||s.includes("health")||s.includes("dental")||s.includes("medical")||s.includes("appointment")||s.includes("consultation")||s.includes("fitness")||s.includes("gym")?{actionType:"BOOK",url:i}:s.includes("retail")||s.includes("store")||s.includes("shop")||s.includes("clothing")||s.includes("fashion")||s.includes("jewelry")||s.includes("electronics")||s.includes("furniture")?{actionType:"SHOP",url:i}:s.includes("education")||s.includes("training")||s.includes("school")||s.includes("academy")||s.includes("course")||s.includes("class")||s.includes("learning")||s.includes("tuition")?{actionType:"SIGN_UP",url:i}:{actionType:"LEARN_MORE",url:i}}getFallbackContent(e,r,n,s,i){throw new Error("AI content generation is required. Please configure Azure OpenAI in your environment settings.")}enforceWordLimit(e,r=120){const n=e.trim().split(/\s+/);if(n.length<=r)return e;console.warn(`⚠️ Content exceeds ${r} words (${n.length} words), truncating...`);const s=n.slice(0,r).join(" "),i=s.lastIndexOf("."),o=s.lastIndexOf("!"),l=s.lastIndexOf("?"),c=Math.max(i,o,l);return c>s.length-10?s.substring(0,c+1):s+(s.endsWith(".")||s.endsWith("!")||s.endsWith("?")?"":"...")}async generatePostContent(e,r,n,s,i){var v,y,x,b;if(!e||e.trim()==="")throw new Error("Business information is required to generate content.");if(!this.subscriptionKey||!this.endpoint||!this.deployment||!this.apiVersion)throw new Error("Azure OpenAI not configured. Please configure Azure OpenAI in your environment settings to generate content.");const o=typeof n=="string"?n.split(",").map(w=>w.trim()).filter(w=>w.length>0):n,l=o.length>0?o.join(", "):"quality service, customer satisfaction",c=new Date().getHours(),u=new Date().getDay(),d=Date.now()%10,h=[`Write a post for a ${r} business. Name: ${e}. Location: ${s||"local area"}. Focus on: ${l}. Write exactly 100-120 words. Mention the name once. Talk about actual ${r} services/features. End with one clear action.`,`Create a post about what ${e} offers as a ${r}${s?` in ${s}`:""}. Focus areas: ${l}. Write 100-120 words. For hotels: mention rooms, amenities. For restaurants: food, atmosphere. For services: expertise, results. One name mention only.`,`Write about why customers choose this ${r}. Business: ${e}${s?` in ${s}`:""}. Highlight: ${l}. Exactly 100-120 words. Focus on real benefits specific to ${r}. Single name mention. Natural tone.`,`Describe the ${r} experience at ${e}${s?`, ${s}`:""}. Keywords: ${l}. Write 100-120 words focusing on what customers actually experience. One business name mention. Conversational style.`,`Explain what makes this ${r} special. Name: ${e}${s?`, located in ${s}`:""}. Strengths: ${l}. Write exactly 100-120 words about actual ${r} value. Mention name once only. End with action.`],f=(c+u+d)%h.length,m=h[f];console.log(`🎯 Using prompt variation #${f+1} for variety`),console.log("🤖 Generating content with Azure OpenAI..."),console.log("📝 Prompt:",m.substring(0,100)+"...");try{const w=new AbortController,j=setTimeout(()=>w.abort(),3e4),E=`${this.endpoint}/openai/deployments/${this.deployment}/chat/completions?api-version=${this.apiVersion}`,I=await this.rateLimitedRequest(E,{method:"POST",headers:{"api-key":this.subscriptionKey,"Content-Type":"application/json"},body:JSON.stringify({messages:[{role:"system",content:"You write natural Google Business Profile posts. RULES: 1) Write 100-120 words exactly. 2) Mention business name ONLY ONCE. 3) Focus on what the business actually offers - for hotels: rooms, amenities, stays; for restaurants: food, dining; for services: solutions, expertise. 4) Never repeat the business name or use it as an adjective. 5) Write conversationally, not like an ad. 6) Be specific to the business type."},{role:"user",content:m}],max_tokens:150,temperature:.9}),signal:w.signal});if(clearTimeout(j),!I.ok){const _=await I.json().catch(()=>({}));throw console.error("🚨 OpenAI API Error:",I.status,_),I.status===401?(console.error("🔑 API Key Issue - Your Azure OpenAI subscription key is invalid or expired"),console.error("💡 Solutions:"),console.error("   1. Check your subscription key in the Azure portal"),console.error("   2. Verify the endpoint URL is correct"),console.error("   3. Ensure the deployment name matches your Azure OpenAI deployment"),console.error("   4. Check the API version is supported"),new Error("Azure OpenAI API key is invalid or expired. Please check your Azure OpenAI configuration.")):I.status===429?(console.error("🚫 Rate limit exceeded - too many requests"),new Error("Azure OpenAI rate limit exceeded. Please try again later.")):I.status===403?(console.error("🚫 Access denied - insufficient permissions"),new Error("Azure OpenAI access denied. Check your subscription and permissions.")):new Error(`Azure OpenAI API error: ${I.status} - ${((v=_.error)==null?void 0:v.message)||"Unknown error"}`)}const T=(b=(x=(y=(await I.json()).choices[0])==null?void 0:y.message)==null?void 0:x.content)==null?void 0:b.trim();if(!T)throw new Error("No content generated by Azure OpenAI");console.log("✅ Content generated successfully with Azure OpenAI"),console.log("📝 Generated content:",T.substring(0,100)+"...");const A=this.enforceWordLimit(T),S=A.trim().split(/\s+/).length;return console.log(`📊 Final content word count: ${S}/120 words (min: 100)`),{content:A,callToAction:this.getSmartButtonForCategory(r,e,i)}}catch(w){throw console.error("Failed to generate content with Azure OpenAI:",w),new Error("Failed to generate AI content. Please check your Azure OpenAI configuration and try again.")}}async validateApiKey(){return await this.testApiKey()}getApiKeyStatus(){const e=!!(this.subscriptionKey&&this.endpoint&&this.deployment&&this.apiVersion);return{configured:e,format:e?"Azure OpenAI":"None",preview:e?`Endpoint: ${this.endpoint}, Deployment: ${this.deployment}`:"Not configured"}}async generateAIResponse(e,r){var n,s,i;if(!this.subscriptionKey||!this.endpoint||!this.deployment||!this.apiVersion)throw new Error("Azure OpenAI not configured. Please check your configuration.");console.log("🤖 Generating AI response with Azure OpenAI...");try{const o=new AbortController,l=setTimeout(()=>o.abort(),6e4),c=`${this.endpoint}/openai/deployments/${this.deployment}/chat/completions?api-version=${this.apiVersion}`,u=await this.rateLimitedRequest(c,{method:"POST",headers:{"api-key":this.subscriptionKey,"Content-Type":"application/json"},body:JSON.stringify({messages:[{role:"user",content:e}],max_tokens:2e3,temperature:.7}),signal:o.signal});if(clearTimeout(l),!u.ok){const f=await u.json().catch(()=>({}));throw console.error("🚨 OpenAI API Error:",u.status,f),new Error(`Azure OpenAI API error: ${u.status}`)}const h=(i=(s=(n=(await u.json()).choices[0])==null?void 0:n.message)==null?void 0:s.content)==null?void 0:i.trim();if(!h)throw new Error("No response generated by Azure OpenAI");return console.log("✅ AI response generated successfully"),h}catch(o){throw console.error("Failed to generate AI response:",o),new Error("Failed to generate AI insights. Please try again.")}}getFallbackReviewResponse(e,r){throw new Error("Azure OpenAI is required to generate review responses. Please configure Azure OpenAI in your environment settings.")}async generateReviewResponse(e,r,n){var o,l,c,u;if(!this.subscriptionKey||!this.endpoint||!this.deployment||!this.apiVersion)throw new Error("Azure OpenAI is required to generate review responses. Please configure Azure OpenAI in your environment settings.");const s=n>=4?"grateful and professional":"understanding and solution-focused",i=`Generate a professional response to this Google Business review for "${e}":

Review (${n}/5 stars): "${r}"

Requirements:
- Keep response under 120 words maximum
- Be ${s}
- ${n>=4?"Thank them for their positive feedback":"Acknowledge their concerns and offer to resolve issues"}
- Include the business name naturally
- Be authentic and personalized
- ${n<4?"Offer to discuss offline if appropriate":"Invite them to return"}

Generate ONLY the response text, no additional formatting.`;try{const d=`${this.endpoint}/openai/deployments/${this.deployment}/chat/completions?api-version=${this.apiVersion}`,h=await this.rateLimitedRequest(d,{method:"POST",headers:{"api-key":this.subscriptionKey,"Content-Type":"application/json"},body:JSON.stringify({messages:[{role:"system",content:"You are a professional customer service representative responding to Google Business reviews. Be authentic, helpful, and appropriately emotional. Keep responses under 120 words."},{role:"user",content:i}],max_tokens:120,temperature:.6})});if(!h.ok){const v=await h.json().catch(()=>({}));throw new Error(`Azure OpenAI API error: ${h.status} - ${((o=v.error)==null?void 0:o.message)||"Unknown error"}`)}const m=(u=(c=(l=(await h.json()).choices[0])==null?void 0:l.message)==null?void 0:c.content)==null?void 0:u.trim();if(!m)throw new Error("No response generated by Azure OpenAI");return m}catch(d){throw console.error("Failed to generate review response with Azure OpenAI:",d),new Error("Failed to generate AI review response. Please check your Azure OpenAI configuration and try again.")}}}const Qi=new Ate,Ete=(t,e)=>Qi.generateAIResponse(t,e);typeof window<"u"&&(window.openaiService=Qi,window.testAzureOpenAI=async()=>{console.log("🧪 Manual Azure OpenAI API Test");const t=Qi.getApiKeyStatus();if(console.log("📊 API Configuration Status:",t),t.configured){console.log("🔍 Testing API configuration validity...");const e=await Qi.validateApiKey();if(console.log(e?"✅ Azure OpenAI is working!":"❌ Azure OpenAI failed test"),e){console.log("🎯 Testing content generation...");try{const r=await Qi.generatePostContent("Test Business","service",["quality","professional","reliable"],"Test Location");console.log("✅ Content generated successfully:",r.content.substring(0,100)+"...")}catch(r){console.error("❌ Content generation failed:",r.message)}}}else console.warn("⚠️ Azure OpenAI not configured")},console.log("🛠️ Azure OpenAI Debug Tools Available:"),console.log("   window.openaiService - Access the service directly"),console.log("   window.testAzureOpenAI() - Run comprehensive API test"));class Pte{constructor(){Je(this,"STORAGE_PATH","DATA");Je(this,"isStorageAvailable",!1);Je(this,"STORAGE_TIMEOUT",1e4)}async saveTokens(e,r,n){if(!e){console.log("⚠️ No userId provided, skipping save");return}if(!this.isStorageAvailable){console.log("⚠️ Firebase Storage unavailable, skipping save");return}try{console.log("💾 Saving tokens to Firebase Storage for user:",e);const s={googleTokens:r,userInfo:n,lastUpdated:Date.now()},i=JSON.stringify(s),o=new Blob([i],{type:"application/json"}),l=qf(Hf,`${this.STORAGE_PATH}/users/${e}/tokens.json`),c=NJ(l,o);await this.withTimeout(c,this.STORAGE_TIMEOUT),console.log("✅ Tokens saved to Firebase Storage successfully for user:",e)}catch(s){console.warn("⚠️ Failed to save tokens to Firebase Storage:",s),this.handleStorageError(s)}}async getTokens(e){if(!this.isStorageAvailable||!e)return console.log("⚠️ Firebase Storage unavailable or no userId, skipping retrieval"),null;try{console.log("📖 Retrieving tokens from Firebase Storage for user:",e);const r=qf(Hf,`${this.STORAGE_PATH}/users/${e}/tokens.json`),n=jJ(r),s=await this.withTimeout(n,this.STORAGE_TIMEOUT),o=new TextDecoder().decode(s),c=JSON.parse(o).googleTokens,u=Date.now();return c.expires_at&&u>=c.expires_at?(console.log("⚠️ Tokens are expired, removing from Firebase Storage"),this.deleteTokens(e).catch(d=>console.warn("Failed to delete expired tokens:",d)),null):(console.log("✅ Tokens retrieved from Firebase Storage successfully for user:",e),c)}catch(r){return console.warn("⚠️ Error retrieving tokens from Firebase Storage:",r),this.handleStorageError(r),null}}async deleteTokens(e){if(!this.isStorageAvailable||!e){console.log("⚠️ Firebase Storage unavailable or no userId, skipping delete");return}try{console.log("🗑️ Deleting tokens from Firebase Storage for user:",e);const r=qf(Hf,`${this.STORAGE_PATH}/users/${e}/tokens.json`),n=SJ(r);await this.withTimeout(n,this.STORAGE_TIMEOUT),console.log("✅ Tokens deleted from Firebase Storage successfully for user:",e)}catch(r){console.warn("⚠️ Error deleting tokens from Firebase Storage:",r),this.handleStorageError(r)}}async hasTokens(e){try{if(!e)return!1;const r=qf(Hf,`${this.STORAGE_PATH}/users/${e}/tokens.json`);return await _J(r),!0}catch{return console.log("ℹ️ No tokens found in Firebase Storage for user:",e),!1}}async migrateFromLocalStorage(e){if(!this.isStorageAvailable||!e)return console.log("⚠️ Firebase Storage unavailable or no userId, skipping migration"),!1;try{if(await this.getTokens(e))return console.log("ℹ️ Tokens already exist in Firebase Storage, skipping migration"),!0;const n=localStorage.getItem("google_business_tokens"),s=localStorage.getItem("google_business_connected");if(n&&s==="true")try{const i=JSON.parse(n),o={access_token:i.access_token,token_type:i.token_type||"Bearer",expires_in:i.expires_in||3600,scope:i.scope||"",refresh_token:i.refresh_token,stored_at:Date.now(),expires_at:Date.now()+(i.expires_in||3600)*1e3};return await this.saveTokens(e,o),console.log("✅ Successfully migrated tokens from localStorage to Firebase Storage"),localStorage.removeItem("google_business_tokens"),localStorage.removeItem("google_business_connected"),console.log("🧹 Cleared tokens from localStorage after migration"),!0}catch(i){return console.error("❌ Error parsing localStorage tokens for migration:",i),!1}return console.log("ℹ️ No tokens found in localStorage to migrate"),!1}catch(r){return console.warn("⚠️ Error during token migration:",r),!1}}async withTimeout(e,r){const n=new Promise((s,i)=>{setTimeout(()=>i(new Error(`Firebase Storage operation timed out after ${r}ms`)),r)});return Promise.race([e,n])}handleStorageError(e){const r=(e==null?void 0:e.message)||"Unknown error",n=r.includes("offline")||r.includes("timeout")||r.includes("transport errored")||r.includes("network error")||r.includes("Failed to fetch"),s=r.includes("quota")||r.includes("rate")||r.includes("too many requests"),i=r.includes("permission")||r.includes("unauthorized")||r.includes("forbidden"),o=r.includes("object does not exist")||r.includes("not found")||r.includes("404");n?(console.log("⚠️ Firebase Storage network connectivity issues detected, temporarily disabling"),this.isStorageAvailable=!1,setTimeout(()=>{console.log("🔄 Re-enabling Firebase Storage after network issue resolution attempt"),this.isStorageAvailable=!0},3e4)):s?(console.log("⚠️ Firebase Storage quota/rate limit exceeded, temporarily disabling"),this.isStorageAvailable=!1,setTimeout(()=>{console.log("🔄 Re-enabling Firebase Storage after quota cooldown"),this.isStorageAvailable=!0},12e4)):i?console.error("❌ Firebase Storage permission error - this may require manual intervention:",r):o?console.log("ℹ️ File not found in Firebase Storage (normal for first-time users)"):(console.log("⚠️ Firebase Storage error (keeping service available):",r),this.isStorageAvailable=!1,setTimeout(()=>{this.isStorageAvailable=!0},1e4))}}const ic=new Pte;class Tte{constructor(){Je(this,"cache",new Map);Je(this,"DEFAULT_TTL",5*60*1e3);Je(this,"LONG_TTL",30*60*1e3);this.loadCacheFromStorage(),setInterval(()=>this.saveCacheToStorage(),3e4)}get(e){const r=this.cache.get(e);return r?Date.now()>r.expiresAt?(console.log(`[Cache] EXPIRED: ${e}`),this.cache.delete(e),null):(console.log(`[Cache] HIT: ${e}`),r.data):(console.log(`[Cache] MISS: ${e}`),null)}set(e,r,n){const s=n||this.DEFAULT_TTL,i={data:r,timestamp:Date.now(),expiresAt:Date.now()+s};this.cache.set(e,i),console.log(`[Cache] SET: ${e} (TTL: ${s}ms)`)}invalidate(e){this.cache.delete(e),console.log(`[Cache] INVALIDATED: ${e}`)}invalidatePattern(e){const r=new RegExp(e),n=[];this.cache.forEach((s,i)=>{r.test(i)&&n.push(i)}),n.forEach(s=>this.cache.delete(s)),console.log(`[Cache] INVALIDATED ${n.length} entries matching pattern: ${e}`)}clear(){this.cache.clear(),console.log("[Cache] CLEARED all entries"),this.saveCacheToStorage()}loadCacheFromStorage(){try{const e=localStorage.getItem("gbp_cache");if(e){const r=JSON.parse(e),n=Date.now();Object.entries(r).forEach(([s,i])=>{i.expiresAt>n&&this.cache.set(s,i)}),console.log(`[Cache] Loaded ${this.cache.size} entries from storage`)}}catch(e){console.error("[Cache] Failed to load from storage:",e)}}saveCacheToStorage(){try{const e={};this.cache.forEach((r,n)=>{e[n]=r}),localStorage.setItem("gbp_cache",JSON.stringify(e)),console.log(`[Cache] Saved ${this.cache.size} entries to storage`)}catch(e){console.error("[Cache] Failed to save to storage:",e)}}getAccountsCacheKey(e){return`accounts:${e||"default"}`}getLocationsCacheKey(e){return`locations:${e}`}getReviewsCacheKey(e){return`reviews:${e}`}getPostsCacheKey(e){return`posts:${e}`}cacheAccounts(e,r){const n=this.getAccountsCacheKey(r);this.set(n,e,this.LONG_TTL)}getCachedAccounts(e){const r=this.getAccountsCacheKey(e);return this.get(r)}cacheLocations(e,r){const n=this.getLocationsCacheKey(e);this.set(n,r,this.DEFAULT_TTL)}getCachedLocations(e){const r=this.getLocationsCacheKey(e);return this.get(r)}batchCache(e){e.accounts&&this.cacheAccounts(e.accounts),e.locations&&Object.entries(e.locations).forEach(([r,n])=>{this.cacheLocations(r,n)})}}const Xs=new Tte,uP=["https://www.googleapis.com/auth/business.manage","https://www.googleapis.com/auth/plus.business.manage","profile","email"];class Cte{constructor(){Je(this,"clientId");Je(this,"accessToken",null);Je(this,"isGoogleLibLoaded",!1);Je(this,"backendUrl");Je(this,"currentUserId",null);Je(this,"cache",new Map);Je(this,"CACHE_TTL",2*60*1e3);Je(this,"connectionMonitorInterval",null);Je(this,"lastConnectionCheck",0);Je(this,"connectionFailures",0);Je(this,"MAX_CONNECTION_FAILURES",3);this.clientId="574451618275-vl5r928f5pj6ogj4le1o75tilhiagmfu.apps.googleusercontent.com",this.backendUrl="http://localhost:5000",this.initializeGoogleAPI()}async initializeGoogleAPI(){return new Promise(e=>{var i,o;if((o=(i=window.google)==null?void 0:i.accounts)!=null&&o.oauth2){console.log("✅ DEBUGGING: Google Identity Services already available"),this.isGoogleLibLoaded=!0,e();return}let r=0;const n=50,s=()=>{var l,c;r++,(c=(l=window.google)==null?void 0:l.accounts)!=null&&c.oauth2?(console.log("✅ DEBUGGING: Google Identity Services loaded after waiting"),this.isGoogleLibLoaded=!0,e()):r>=n?(console.error("❌ DEBUGGING: Timeout waiting for Google Identity Services"),e()):(console.log(`⏳ DEBUGGING: Waiting for Google Identity Services... (${r}/${n})`),setTimeout(s,100))};if(document.querySelector('script[src*="accounts.google.com/gsi/client"]'))console.log("📥 DEBUGGING: Google Identity Services script already in DOM, checking availability..."),s();else{console.log("📥 DEBUGGING: Loading Google Identity Services script...");const l=document.createElement("script");l.src="https://accounts.google.com/gsi/client",l.async=!0,l.defer=!0,l.onload=()=>{console.log("📥 DEBUGGING: Google Identity Services script loaded, checking availability..."),s()},l.onerror=()=>{console.error("❌ DEBUGGING: Failed to load Google Identity Services script"),e()},document.head.appendChild(l)}})}async connectGoogleBusiness(){console.log("🔄 Starting backend OAuth flow for permanent connection...");try{const e=await fetch(`${this.backendUrl}/auth/google/url?userId=${this.currentUserId||""}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw new Error("Failed to get OAuth URL from backend");const{authUrl:r}=await e.json();console.log("✅ Got OAuth URL from backend"),sessionStorage.setItem("oauth_return_url",window.location.pathname),console.log("🔄 Redirecting to Google OAuth..."),window.location.href=r}catch(e){throw console.error("❌ Backend OAuth flow error:",e),e}}setCurrentUserId(e){this.currentUserId=e,console.log("🔍 DEBUGGING: Current user ID set to:",e)}async loadStoredTokens(e){try{const r=e||this.currentUserId;if(console.log("🔍 DEBUGGING loadStoredTokens:",{userIdProvided:!!e,currentUserIdSet:!!this.currentUserId,userIdToUse:r}),sessionStorage.getItem("oauth_success")==="true"&&(console.log("✅ OAuth just completed via redirect, clearing session flags"),sessionStorage.removeItem("oauth_success"),sessionStorage.removeItem("oauth_complete")),!r)return console.log("❌ No userId available to fetch tokens"),!1;try{console.log("🔍 Fetching tokens from backend for user:",r);const n=await fetch(`${this.backendUrl}/auth/google/token-status/${r}`);if(n.ok){const s=await n.json();if(s.hasRefreshToken&&s.refresh_token)return this.accessToken=s.access_token||s.refresh_token,console.log("✅ Loaded permanent tokens from backend for user:",r),console.log("✅ Token expires at:",new Date(s.expiry_date||Date.now()+36e5).toISOString()),this.startConnectionMonitoring(),!0;console.log("⚠️ Backend has tokens but no refresh token available")}}catch(n){console.warn("⚠️ Backend token fetch failed:",n)}try{console.log("🔄 Trying fallback: Loading tokens from Firebase Storage (frontend)...");const n=await ic.getTokens(r);if(n&&n.access_token)return this.accessToken=n.access_token,console.log("✅ Loaded tokens from Firebase Storage (frontend fallback)"),localStorage.setItem("google_business_tokens",JSON.stringify(n)),this.startConnectionMonitoring(),!0}catch(n){console.warn("⚠️ Firebase Storage (frontend) token fetch failed:",n)}return console.log("❌ No valid stored tokens found in backend or Firebase Storage"),!1}catch(r){return console.error("❌ Error loading stored tokens:",r),!1}}async backgroundSyncToFirestore(e,r){try{const n={access_token:r.access_token,token_type:r.token_type||"Bearer",expires_in:r.expires_in||3600,scope:r.scope||"",refresh_token:r.refresh_token,stored_at:r.stored_at||Date.now(),expires_at:r.expires_at||Date.now()+r.expires_in*1e3};await ic.saveTokens(e,n),console.log("🔄 Background sync to Firestore completed")}catch(n){console.debug("Background Firestore sync failed (non-critical):",n)}}getCacheKey(e,r){return`${e}-${JSON.stringify(r)}`}getFromCache(e){const r=this.cache.get(e);return r&&Date.now()<r.expires?(console.log(`📦 Cache hit for: ${e}`),r.data):(r&&this.cache.delete(e),null)}setCache(e,r){this.cache.set(e,{data:r,expires:Date.now()+this.CACHE_TTL}),console.log(`💾 Cached result for: ${e}`)}async storeTokensInFirestore(e){try{if(!this.currentUserId){console.log("ℹ️ No current user ID, skipping Firestore token storage");return}await ic.saveTokens(this.currentUserId,e),console.log("✅ DEBUGGING: Tokens also stored in Firestore")}catch(r){console.warn("⚠️ Failed to store tokens in Firestore (non-critical):",r)}}isTokenExpired(){const e=localStorage.getItem("google_business_tokens");if(!e)return console.log("❌ No tokens found in localStorage"),!0;try{const r=JSON.parse(e),n=r.expires_at||r.stored_at+r.expires_in*1e3,s=Date.now(),i=30*60*1e3,o=s>=n-i,l=Math.max(0,(n-s)/1e3/60);return console.log(`🔍 Token expiry check: ${o?"EXPIRED/EXPIRING SOON":"VALID"} (${l.toFixed(1)} minutes left)`),o}catch(r){return console.error("❌ Error parsing tokens for expiry check:",r),!0}}async validateTokens(){try{if(!this.accessToken)return console.log("❌ No access token available for validation"),!1;console.log("🔍 Validating token with Google...");const e=await fetch(`https://www.googleapis.com/oauth2/v1/tokeninfo?access_token=${this.accessToken}`,{method:"GET"});if(e.ok){const r=await e.json();return console.log("✅ Token validation successful, expires in:",r.expires_in,"seconds"),!0}else return console.log("❌ Token validation failed with status:",e.status),!1}catch(e){return console.error("❌ Token validation error:",e),!1}}async refreshAccessToken(){let r=null;for(let n=1;n<=3;n++)try{if(console.log(`🔄 Token refresh attempt ${n}/3`),this.currentUserId){console.log("🔄 Attempting backend token refresh..."),await this.refreshTokenViaBackend(),console.log("✅ Backend token refresh successful");return}console.log("🔄 Attempting frontend token refresh..."),await this.refreshTokenViaFrontend(),console.log("✅ Frontend token refresh successful");return}catch(s){if(r=s,console.warn(`⚠️ Token refresh attempt ${n} failed:`,s),!this.isRetryableError(s)||n===3){console.error(`❌ Token refresh failed after ${n} attempts`);break}const o=Math.pow(2,n-1)*1e3;console.log(`⏳ Retrying token refresh in ${o}ms...`),await new Promise(l=>setTimeout(l,o))}throw r||new Error("Token refresh failed after all retry attempts")}isRetryableError(e){const r=e.message.toLowerCase();return["network error","fetch failed","connection failed","timeout","temporarily unavailable","service unavailable","too many requests"].some(s=>r.includes(s))}async refreshTokenViaBackend(){if(!this.currentUserId)throw new Error("User ID required for backend token refresh");try{let e=null,r=null;try{r=await ic.getTokens(this.currentUserId),e=(r==null?void 0:r.refresh_token)||null,e&&console.log("✅ Found refresh token in Firebase Storage")}catch(o){console.warn("⚠️ Firebase Storage token retrieval failed:",o)}if(!e)try{const o=localStorage.getItem("google_business_tokens");if(o){const l=JSON.parse(o);e=l.refresh_token,e&&(console.log("✅ Found refresh token in localStorage (fallback)"),r=l)}}catch(o){console.warn("⚠️ localStorage token retrieval failed:",o)}if(!e)try{const o=await fetch(`${this.backendUrl}/auth/google/token-status/${this.currentUserId}`);o.ok&&(e=(await o.json()).refresh_token,e&&console.log("✅ Found refresh token in backend storage"))}catch(o){console.warn("⚠️ Backend token check failed:",o)}if(!e)throw new Error("No refresh token available from any source (Firebase Storage, localStorage, or backend)");console.log("🔄 Using backend to refresh Google access token...");const n=await fetch(`${this.backendUrl}/auth/google/refresh`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refresh_token:e,userId:this.currentUserId})});if(!n.ok){let o;try{o=await n.json()}catch{o={error:n.statusText}}throw console.error("❌ Backend refresh failed:",{status:n.status,statusText:n.statusText,error:o}),n.status===401?(localStorage.removeItem("google_business_tokens"),this.accessToken=null,new Error("Token refresh failed: Invalid or expired refresh token. Please reconnect your Google Business Profile.")):new Error(`Backend refresh failed: ${o.error||o.message||n.statusText}`)}const s=await n.json();console.log("✅ Backend token refresh successful"),this.accessToken=s.tokens.access_token;const i={access_token:s.tokens.access_token,token_type:"Bearer",expires_in:s.tokens.expires_in||3600,scope:s.tokens.scope||(r==null?void 0:r.scope)||uP.join(" "),refresh_token:s.tokens.refresh_token||e,stored_at:Date.now(),expires_at:s.tokens.expiry_date||Date.now()+(s.tokens.expires_in||3600)*1e3};localStorage.setItem("google_business_tokens",JSON.stringify(i)),localStorage.setItem("google_business_connection_time",Date.now().toString());try{await this.storeTokensInFirestore(i),console.log("✅ Tokens stored in Firebase Storage successfully")}catch(o){console.warn("⚠️ Failed to store tokens in Firebase Storage, continuing with localStorage only:",o)}}catch(e){throw console.error("❌ Backend token refresh failed:",e),e}}async refreshTokenViaFrontend(){return new Promise((e,r)=>{var s,i;if(!((i=(s=window.google)==null?void 0:s.accounts)!=null&&i.oauth2)){r(new Error("Google Identity Services not loaded"));return}console.log("🔄 Refreshing Google access token via frontend..."),window.google.accounts.oauth2.initTokenClient({client_id:this.clientId,scope:uP.join(" "),prompt:"consent",include_granted_scopes:!0,callback:o=>{if(o.error){console.error("❌ Frontend token refresh failed:",o.error),r(new Error(`Token refresh failed: ${o.error}`));return}console.log("✅ Frontend token refreshed successfully"),this.accessToken=o.access_token;const l={access_token:o.access_token,token_type:"Bearer",expires_in:o.expires_in||3600,scope:o.scope,refresh_token:o.refresh_token,stored_at:Date.now(),expires_at:Date.now()+(o.expires_in||3600)*1e3};localStorage.setItem("google_business_tokens",JSON.stringify(l)),localStorage.setItem("google_business_connection_time",Date.now().toString()),this.storeTokensInFirestore(l).catch(c=>{console.warn("⚠️ Failed to store refreshed tokens in Firebase Storage:",c)}),e()}}).requestAccessToken()})}async ensureValidToken(){if(this.isTokenExpired()){console.log("Token expired or expiring soon, refreshing..."),await this.refreshAccessToken();return}const e="last_token_validation",r=localStorage.getItem(e),n=Date.now(),s=5*60*1e3;(!r||n-parseInt(r)>s)&&(console.log("🔍 Performing periodic token validation with Google..."),await this.validateTokens()?localStorage.setItem(e,n.toString()):(console.log("❌ Token validation failed, forcing refresh..."),await this.refreshAccessToken()))}async handleUnauthorizedAndRetry(e,r){console.log(`🔑 Got 401 for ${e}, attempting to refresh token...`);try{this.invalidateOperationCache(e),await this.refreshAccessToken(),console.log(`🔄 Token refreshed, retrying ${e}...`);const n=await r();if(n.ok){const s=await n.json();if(console.log(`✅ Retry successful after token refresh for ${e}`),e==="accounts"){const i=s.accounts||[];if(i.length===0)throw new Error("No Google Business Profile accounts found.");return i}else return e==="reviews"?s.reviews||[]:e==="posts"?s.posts||[]:s}else{if(n.status===401)throw console.error(`❌ Still getting 401 after token refresh for ${e} - token may be permanently invalid`),new Error(`Authentication failed permanently. Please reconnect your Google Business Profile. (${e})`);if(n.status===403)throw console.error(`❌ Permission denied for ${e} - insufficient permissions`),new Error(`Access denied. Please ensure your Google Business Profile has the required permissions for ${e}.`);if(n.status===429)throw console.error(`❌ Rate limit exceeded for ${e}`),new Error(`Too many requests. Please wait a moment before trying again. (${e})`);{const s=await n.json().catch(()=>({error:n.statusText}));throw new Error(`Retry failed for ${e}: ${s.error||n.statusText}`)}}}catch(n){throw console.error(`❌ Token refresh/retry failed for ${e}:`,n),n instanceof Error&&n.message.includes("Authentication")?n:new Error(`Authentication expired. Please reconnect your Google Business Profile. (${e})`)}}invalidateOperationCache(e){e==="accounts"?(Xs.invalidatePattern("accounts:.*"),Xs.invalidatePattern("locations:.*")):e==="reviews"?Xs.invalidatePattern("reviews:.*"):e==="posts"&&Xs.invalidatePattern("posts:.*"),console.log(`🗑️ Cleared cache for ${e} after authentication refresh`)}async getBusinessAccounts(){var e,r;try{const n=Xs.getCachedAccounts(this.currentUserId);if(n)return console.log("✅ Using cached Google Business Profile accounts"),n;if(await this.ensureValidToken(),!this.accessToken)throw new Error("No access token available");console.log("Fetching Google Business Profile accounts via backend API"),console.log("🔍 ACCOUNTS DEBUG: Backend URL being used:",this.backendUrl),console.log("🔍 ACCOUNTS DEBUG: VITE_BACKEND_URL env var:","http://localhost:5000"),console.log("🔍 ACCOUNTS DEBUG: Full URL:",`${this.backendUrl}/api/accounts`);const s=new AbortController,i=setTimeout(()=>s.abort(),5e3),o=await fetch(`${this.backendUrl}/api/accounts?_t=${Date.now()}`,{method:"GET",headers:{Authorization:`Bearer ${this.accessToken}`,"Content-Type":"application/json"},signal:s.signal});if(clearTimeout(i),!o.ok){const f=await o.json();if(console.error("Backend accounts API error:",f),o.status===401)return await this.handleUnauthorizedAndRetry("accounts",()=>fetch(`${this.backendUrl}/api/accounts?_t=${Date.now()}`,{method:"GET",headers:{Authorization:`Bearer ${this.accessToken}`,"Content-Type":"application/json"}}));throw o.status===403?new Error("Access denied. Please ensure your Google Business Profile has the required permissions."):new Error(`Failed to fetch accounts: ${o.statusText}`)}const l=await o.json();console.log(`Google Business Profile accounts received via backend (${l.apiUsed}):`,l);const c=l.accounts||[];if(c.length===0)throw new Error("No Google Business Profile accounts found. Please ensure you have a verified Google Business Profile.");const u=[],d=c.map(async f=>{console.log("🔍 DEBUGGING: Processing account:",f);try{const m=await this.getAccountLocations(f.name);return console.log(`🔍 DEBUGGING: Got ${m.length} locations for account ${f.name}`),{account:f,locations:m}}catch(m){return console.warn(`⚠️ Failed to load locations for account ${f.name}:`,m),{account:f,locations:[]}}}),h=await Promise.all(d);for(const{account:f,locations:m}of h)for(const v of m){let y="VERIFIED";(e=v.metadata)!=null&&e.suspended?y="SUSPENDED":(r=v.metadata)!=null&&r.duplicate&&(y="DUPLICATE"),console.log("🔍 DEBUGGING: Location state mapping:",{locationName:v.displayName,metadata:v.metadata,finalState:y}),u.push({name:v.name,accountName:v.displayName,type:"BUSINESS",role:"OWNER",state:y,locations:[v]})}return Xs.cacheAccounts(u,this.currentUserId),console.log("✅ Cached business accounts for faster future loads"),u}catch(n){if(console.error("Error fetching business accounts:",n),n instanceof TypeError&&n.message.includes("fetch"))return console.warn("CORS blocked API access - creating accounts with demo locations"),[{name:"accounts/your-business-account",accountName:"Your Business Account",type:"BUSINESS",role:"OWNER",state:"VERIFIED",locations:[{name:"accounts/your-business-account/locations/location-1",locationId:"location-1",displayName:"Main Business Location",address:{addressLines:["[CORS blocked - add backend for real data]"],locality:"Your City",administrativeArea:"Your State",postalCode:"12345",countryCode:"US"},phoneNumber:"+1 (555) 123-4567",websiteUrl:"https://yourbusiness.com",categories:[{name:"Your Business Category",categoryId:"your_category"}],metadata:{duplicate:!1,suspended:!1,canDelete:!1,canUpdate:!0}}]}];throw n}}async getAccountLocations(e){try{const r=e.split("/").pop()||e,n=Xs.getCachedLocations(r);if(n)return console.log("✅ Using cached locations for account:",e),n;if(!this.accessToken)throw new Error("No access token available");console.log("Fetching locations via backend API with pagination:",e);const s=new AbortController,i=setTimeout(()=>s.abort(),4e3),o=await fetch(`${this.backendUrl}/api/accounts/${encodeURIComponent(e)}/locations`,{method:"GET",headers:{Authorization:`Bearer ${this.accessToken}`,"Content-Type":"application/json"},signal:s.signal});if(clearTimeout(i),console.log("🔍 DEBUGGING: Backend locations response status:",o.status),!o.ok){const h=await o.text();console.error(`❌ DEBUGGING: Locations API error (${o.status}):`,h),console.error("❌ DEBUGGING: This should trigger fallback to demo locations...");try{const f=JSON.parse(h);console.error("❌ DEBUGGING: Parsed error:",f)}catch{console.error("❌ DEBUGGING: Raw error text:",h)}return o.status===400?(console.warn(`⚠️ Account ${e} - Google Business Profile locations API returned 400. Creating demo locations.`),[{name:`${e}/locations/sitaram-guest-house`,locationId:"sitaram-guest-house",displayName:"SITARAM GUEST HOUSE",address:{addressLines:["Varanasi"],locality:"Varanasi",administrativeArea:"Uttar Pradesh",postalCode:"221001",countryCode:"IN"},phoneNumber:"",websiteUrl:"",categories:[{name:"Guest House",categoryId:"guest_house"}],metadata:{duplicate:!1,suspended:!1,canDelete:!1,canUpdate:!0}},{name:`${e}/locations/tree-house-retreat`,locationId:"tree-house-retreat",displayName:"Tree House Retreat Mohani",address:{addressLines:["Kullu"],locality:"Kullu",administrativeArea:"Himachal Pradesh",postalCode:"175101",countryCode:"IN"},phoneNumber:"",websiteUrl:"",categories:[{name:"Resort",categoryId:"resort"}],metadata:{duplicate:!1,suspended:!1,canDelete:!1,canUpdate:!0}},{name:`${e}/locations/kevins-bed-breakfast`,locationId:"kevins-bed-breakfast",displayName:"KEVINS BED & BREAKFAST",address:{addressLines:["Port Blair"],locality:"Port Blair",administrativeArea:"Andaman and Nicobar Islands",postalCode:"744101",countryCode:"IN"},phoneNumber:"",websiteUrl:"",categories:[{name:"Bed & Breakfast",categoryId:"bed_breakfast"}],metadata:{duplicate:!1,suspended:!1,canDelete:!1,canUpdate:!0}}]):o.status===403||o.status===404?(console.warn(`No locations found or insufficient permissions for account ${e}`),[]):o.status===0?(console.warn("CORS blocked locations API call - this is expected in frontend-only mode"),[]):[]}const l=await o.json();console.log("✅ Backend locations API succeeded! Data:",l);const c=l.locations||[];console.log(`✅ Found ${c.length} locations via backend with pagination`),console.log("✅ First location sample:",c[0]);const u=c.map(h=>{var f,m,v,y,x,b,w,j,E;return{name:h.name,locationId:this.extractLocationId(h.name),displayName:h.title||h.displayName||"Unnamed Location",title:h.title,storefrontAddress:h.storefrontAddress,phoneNumbers:h.phoneNumbers,websiteUri:h.websiteUri,categories:h.categories,profile:h.profile,regularHours:h.regularHours,serviceArea:h.serviceArea,labels:h.labels,languageCode:h.languageCode,openInfo:h.openInfo,specialHours:h.specialHours,latlng:h.latlng,metadata:h.metadata,address:{addressLines:((f=h.storefrontAddress)==null?void 0:f.addressLines)||[],locality:((m=h.storefrontAddress)==null?void 0:m.locality)||"",administrativeArea:((v=h.storefrontAddress)==null?void 0:v.administrativeArea)||"",postalCode:((y=h.storefrontAddress)==null?void 0:y.postalCode)||"",countryCode:((x=h.storefrontAddress)==null?void 0:x.regionCode)||""},phoneNumber:((w=(b=h.phoneNumbers)==null?void 0:b[0])==null?void 0:w.number)||"",websiteUrl:h.websiteUri,categoriesFormatted:((j=h.categories)!=null&&j.primaryCategory?[h.categories.primaryCategory]:[]).concat(((E=h.categories)==null?void 0:E.additionalCategories)||[]).map(I=>({name:I.displayName||I.name||I,categoryId:I.categoryId||I.name||I}))}}),d=e.split("/").pop()||e;return Xs.cacheLocations(d,u),console.log("✅ Cached locations for account:",e),u}catch(r){return console.error("Error fetching account locations:",r),[]}}extractLocationId(e){const r=e.split("/");return r[r.length-1]}extractIdFromName(e){const r=e.split("/");return r[r.length-1]}generatePostSuggestions(e,r="business"){return[`🌟 Thank you to all our amazing customers for making ${e} what it is today! Your support means everything to us. #CustomerAppreciation #ThankYou`,`📍 Visit us at ${e}! We're committed to providing exceptional service and creating memorable experiences for every customer. #QualityService #CustomerFirst`,`💼 At ${e}, we believe in building lasting relationships with our community. Come experience the difference that personalized service makes! #CommunityFirst #Excellence`,`🔥 Exciting things are happening at ${e}! Stay tuned for our latest updates and special offers. Follow us to never miss out! #StayTuned #SpecialOffers`,`👥 Our team at ${e} is dedicated to exceeding your expectations. We're here to serve you with professionalism and care. #TeamExcellence #CustomerCare`]}generateReviewReplySuggestions(e,r){return e>=4?["Thank you so much for your wonderful review! We're thrilled that you had a great experience with us. Your feedback motivates our team to continue providing excellent service. We look forward to serving you again soon! 🌟","We're delighted to hear about your positive experience! Thank you for taking the time to share your feedback. It means a lot to our team. We can't wait to welcome you back! ⭐","Your kind words truly made our day! We're so happy we could provide you with exceptional service. Thank you for choosing us and for this amazing review. See you again soon! 😊"]:e===3?["Thank you for your feedback. We appreciate you taking the time to share your experience. We're always looking for ways to improve, and your input is valuable to us. Please don't hesitate to reach out if there's anything specific we can do better. 👍","We appreciate your honest review. Your experience matters to us, and we'd love the opportunity to make it even better next time. Please feel free to contact us directly to discuss how we can improve. Thank you for giving us a chance! 🤝","Thank you for your review. We value all feedback as it helps us grow and improve our services. We'd welcome the chance to discuss your experience further and show you the improvements we've made. Hope to see you again! 💪"]:["Thank you for bringing this to our attention. We sincerely apologize that your experience didn't meet your expectations. Your feedback is important to us, and we'd like the opportunity to make this right. Please contact us directly so we can discuss this further and improve. 🙏","We're truly sorry to hear about your experience. This is not the level of service we strive to provide. We take your feedback seriously and would appreciate the chance to discuss this with you directly to ensure this doesn't happen again. Please reach out to us. 🤝","Thank you for your honest feedback. We apologize that we fell short of your expectations. We're committed to learning from this experience and making improvements. We'd love the opportunity to regain your trust. Please contact us directly to discuss. 💙"]}async getLocationPosts(e){var r;try{if(!this.accessToken)throw new Error("No access token available");const n=this.getCacheKey("posts",{locationNameOrId:e}),s=this.getFromCache(n);if(s)return s;console.log("Fetching posts for location via backend:",e);let i;e.includes("/")?i=this.extractLocationId(e):i=e;const o=await fetch(`${this.backendUrl}/api/locations/${i}/posts`,{method:"GET",headers:{Authorization:`Bearer ${this.accessToken}`,"Content-Type":"application/json"}});if(!o.ok){if(o.status===401)return await this.handleUnauthorizedAndRetry("posts",()=>fetch(`${this.backendUrl}/api/locations/${i}/posts`,{method:"GET",headers:{Authorization:`Bearer ${this.accessToken}`,"Content-Type":"application/json"}}));const u=await o.json();throw console.error("Backend posts fetch error:",u),new Error(`Failed to fetch posts: ${o.status}`)}const l=await o.json();console.log("✅ Posts fetched successfully via backend:",((r=l.posts)==null?void 0:r.length)||0);const c=(l.posts||[]).map(u=>({id:this.extractIdFromName(u.name),name:u.name,locationName:e,summary:u.summary,callToAction:u.callToAction,media:u.media,topicType:u.topicType||"STANDARD",languageCode:u.languageCode||"en",createTime:u.createTime,updateTime:u.updateTime,searchUrl:u.searchUrl}));return this.setCache(n,c),c}catch(n){return console.error("Error fetching location posts via backend:",n),[]}}async createLocationPost(e,r){var n,s,i,o,l,c,u,d,h,f;try{if(!this.accessToken)throw new Error("No access token available");console.log("🚀 Creating real post via backend API"),console.log("Location Input:",e,"Type:",typeof e),console.log("Post Data:",r);let m;e.includes("/")?(m=encodeURIComponent(e),console.log("🔍 Using encoded full location name:",m)):(m=e,console.log("🔍 Using location ID directly:",m));const v=`${this.backendUrl}/api/locations/${m}/posts`;console.log("🔍 Final API URL:",v);const y={summary:r.summary,topicType:r.topicType||"STANDARD",callToAction:r.callToAction};console.log("🔍 Request body:",y);const x=await fetch(v,{method:"POST",headers:{Authorization:`Bearer ${this.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify(y)});if(console.log("🔍 Response status:",x.status),console.log("🔍 Response headers:",Object.fromEntries(x.headers.entries())),!x.ok){const E=await x.text();if(console.error("❌ Backend post creation error (raw response):",E),E.trim().startsWith("<!DOCTYPE")||E.trim().startsWith("<html"))throw new Error(`Backend returned HTML error page instead of JSON. URL: ${v}. This usually means the endpoint doesn't exist or there's a routing issue.`);let I;try{I=JSON.parse(E)}catch{throw new Error(`Backend returned non-JSON response: ${E.substring(0,200)}...`)}throw console.error("❌ Parsed error data:",I),x.status===404?new Error(`Post endpoint not found. Please check if the location ID is correct: ${m}`):x.status===503?new Error("Google Business Profile API temporarily unavailable. Please try again in a few minutes."):new Error(`Failed to create post: ${x.status} - ${I.error}`)}const b=await x.json();console.log("✅ Real post created successfully via backend:",b);const w={id:this.extractIdFromName(((n=b.post)==null?void 0:n.name)||""),name:((s=b.post)==null?void 0:s.name)||"",locationName:e,summary:((i=b.post)==null?void 0:i.summary)||r.summary,callToAction:((o=b.post)==null?void 0:o.callToAction)||r.callToAction,media:((l=b.post)==null?void 0:l.media)||[],topicType:((c=b.post)==null?void 0:c.topicType)||r.topicType||"STANDARD",languageCode:((u=b.post)==null?void 0:u.languageCode)||"en",createTime:((d=b.post)==null?void 0:d.createTime)||new Date().toISOString(),updateTime:((h=b.post)==null?void 0:h.updateTime)||new Date().toISOString(),searchUrl:(f=b.post)==null?void 0:f.searchUrl},j=this.getCacheKey("posts",{locationNameOrId:e});return this.cache.delete(j),console.log("🗑️ Invalidated post cache for location after creation"),w}catch(m){throw console.error("❌ Error creating location post via backend:",m),m}}async getLocationReviews(e,r={}){var n;try{if(!this.accessToken)throw new Error("No access token available");const s=this.getCacheKey("reviews",{locationName:e});if(!r.forceRefresh){const d=this.getFromCache(s);if(d)return d}console.log("Fetching reviews for location via backend:",e,"options:",r);const i=this.extractLocationId(e),o=new URL(`${this.backendUrl}/api/locations/${i}/reviews`);r.forceRefresh&&(o.searchParams.append("forceRefresh","true"),o.searchParams.append("_t",Date.now().toString()));const l=await fetch(o.toString(),{method:"GET",headers:{Authorization:`Bearer ${this.accessToken}`,"Content-Type":"application/json"}});if(!l.ok){if(l.status===401)return await this.handleUnauthorizedAndRetry("reviews",()=>fetch(o.toString(),{method:"GET",headers:{Authorization:`Bearer ${this.accessToken}`,"Content-Type":"application/json"}}));const d=await l.json();if(console.error("Backend reviews fetch error:",d),l.status===503)return console.warn("⚠️ Google Business Profile API temporarily unavailable. This is normal during high usage periods."),[];throw new Error(`Failed to fetch reviews: ${d.error||l.statusText}`)}const c=await l.json();console.log("✅ Reviews fetched successfully via backend:",((n=c.reviews)==null?void 0:n.length)||0);const u=(c.reviews||[]).map(d=>{var h,f;return{id:this.extractIdFromName(d.name),name:d.name,reviewer:{displayName:((h=d.reviewer)==null?void 0:h.displayName)||"Anonymous",profilePhotoUrl:(f=d.reviewer)==null?void 0:f.profilePhotoUrl},starRating:d.starRating||5,comment:d.comment||"",createTime:d.createTime,updateTime:d.updateTime,reply:d.reply?{comment:d.reply.comment,updateTime:d.reply.updateTime}:void 0}});return this.setCache(s,u),u}catch(s){return console.error("Error fetching location reviews via backend:",s),[]}}async replyToReview(e,r){try{if(!this.accessToken)throw new Error("No access token available");console.log("🚀 Replying to review via backend API:",e,"with text:",r);const n=e.split("/"),s=n[3],i=n[5],o=await fetch(`${this.backendUrl}/api/locations/${s}/reviews/${i}/reply`,{method:"PUT",headers:{Authorization:`Bearer ${this.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify({comment:r})});if(!o.ok){const d=await o.json();throw console.error("❌ Backend review reply error:",d),new Error(`Failed to reply to review: ${o.status} - ${d.error}`)}const l=await o.json();console.log("✅ Review reply sent successfully via backend:",l);const c=`accounts/${e.split("/")[1]}/locations/${s}`,u=this.getCacheKey("reviews",{locationName:c});this.cache.delete(u),console.log("🗑️ Invalidated review cache for location after reply")}catch(n){throw console.error("❌ Error replying to review via backend:",n),n}}async permanentDisconnect(){try{const e=[],r=this.accessToken;localStorage.removeItem("google_business_tokens"),localStorage.removeItem("google_business_connected"),localStorage.removeItem("google_business_connection_time"),localStorage.removeItem("last_token_validation"),this.accessToken=null,this.stopConnectionMonitoring(),this.cache.clear(),Xs.clear(),r&&e.push(fetch(`https://oauth2.googleapis.com/revoke?token=${r}`,{method:"POST"}).catch(n=>{console.debug("Token revocation failed (non-critical):",n)})),this.currentUserId&&e.push(ic.deleteTokens(this.currentUserId).then(()=>console.log("✅ Tokens permanently deleted from Firebase Storage")).catch(n=>console.debug("Firebase deletion failed (non-critical):",n))),e.length>0&&await Promise.race([Promise.allSettled(e),new Promise(n=>setTimeout(n,2e3))]),console.log("✅ Permanent disconnect completed - all tokens deleted everywhere")}catch(e){console.error("Error during permanent disconnect:",e)}}async disconnect(){try{const e=[],r=this.accessToken;if(this.currentUserId&&r){const n=localStorage.getItem("google_business_tokens");if(n)try{const s=JSON.parse(n);console.log("💾 Saving tokens to Firebase before disconnect..."),e.push(ic.saveTokens(this.currentUserId,s).then(()=>console.log("✅ Tokens preserved in Firebase Storage")).catch(i=>console.warn("⚠️ Failed to preserve tokens in Firebase:",i)))}catch(s){console.warn("Failed to parse tokens for Firebase backup:",s)}}if(localStorage.removeItem("google_business_tokens"),localStorage.removeItem("google_business_connected"),localStorage.removeItem("google_business_connection_time"),localStorage.removeItem("last_token_validation"),this.accessToken=null,this.stopConnectionMonitoring(),this.cache.clear(),Xs.clear(),e.length>0)try{await Promise.race([Promise.allSettled(e),new Promise(n=>setTimeout(n,2e3))])}catch(n){console.debug("Some disconnect operations failed (non-critical):",n)}console.log("✅ Disconnect completed successfully - tokens preserved in Firebase")}catch(e){console.error("Error disconnecting Google Business Profile:",e),console.log("⚠️ Disconnect completed with some errors (non-critical)")}}async recoverConnection(){try{return console.log("🔄 Attempting connection recovery..."),await this.loadStoredTokens(this.currentUserId)?(await this.validateTokens()||(console.log("🔄 Stored tokens invalid, attempting refresh..."),await this.refreshAccessToken()),await this.validateTokens(),console.log("✅ Connection recovery successful"),!0):(console.log("❌ No stored tokens available for recovery"),!1)}catch(e){return console.error("❌ Connection recovery failed:",e),!1}}isConnected(){const e=!!this.accessToken;return console.log("Connection check:",{hasToken:e,connected:e}),e}getAccessToken(){return this.accessToken}async getLocationPhotos(e){var r;try{if(!this.accessToken)throw new Error("No access token available");console.log("Fetching photos for location via backend:",e);const n=await fetch(`${this.backendUrl}/api/locations/${e}/photos`,{method:"GET",headers:{Authorization:`Bearer ${this.accessToken}`,"Content-Type":"application/json"}});if(!n.ok){const i=await n.json();return console.error("Backend photos fetch error:",i),n.status===401?await this.handleUnauthorizedAndRetry("photos",()=>fetch(`${this.backendUrl}/api/locations/${e}/photos`,{method:"GET",headers:{Authorization:`Bearer ${this.accessToken}`,"Content-Type":"application/json"}})):(console.warn("Photos API failed, returning empty array for graceful degradation"),[])}const s=await n.json();return console.log("✅ Photos fetched successfully via backend:",((r=s.photos)==null?void 0:r.length)||0),s.photos||[]}catch(n){return console.error("Error fetching location photos via backend:",n),[]}}async getLocationInsights(e,r,n){try{if(!this.accessToken)throw new Error("No access token available");console.log("Fetching performance insights for location via backend:",e);const s=new URLSearchParams;r&&s.append("startDate",r),n&&s.append("endDate",n);const i=await fetch(`${this.backendUrl}/api/locations/${e}/insights?${s}`,{method:"GET",headers:{Authorization:`Bearer ${this.accessToken}`,"Content-Type":"application/json"}});if(!i.ok){const l=await i.json();throw console.error("Backend insights fetch error:",l),new Error(`Failed to fetch insights: ${i.status}`)}const o=await i.json();return console.log("✅ Insights fetched successfully via backend:",o.apiUsed),o}catch(s){throw console.error("Error fetching location insights via backend:",s),s}}getDemoBusinessAccounts(){return console.log("📊 Providing demo business accounts (CORS blocked real API)"),[{name:"accounts/demo-account-1",accountName:"Your Business Account",type:"BUSINESS",role:"OWNER",state:"VERIFIED",locations:[{name:"accounts/demo-account-1/locations/demo-location-1",locationId:"demo-location-1",displayName:"Main Business Location",address:{addressLines:["123 Business St"],locality:"Business City",administrativeArea:"BC",postalCode:"12345",countryCode:"US"},phoneNumber:"+1 (555) 123-4567",websiteUrl:"https://yourbusiness.com",categories:[{name:"Professional Services",categoryId:"professional_services"}],metadata:{duplicate:!1,suspended:!1,canDelete:!1,canUpdate:!0}}]}]}startConnectionMonitoring(){this.connectionMonitorInterval||(console.log("🔄 Starting proactive Google Business Profile connection monitoring (24/7 mode)"),console.log("📅 Schedule: Token refresh every 30 minutes to prevent expiry"),this.connectionMonitorInterval=setInterval(async()=>{await this.checkConnectionHealth()},30*60*1e3),setTimeout(()=>this.checkConnectionHealth(),3e4),console.log("✅ Proactive token refresh monitoring started - tokens will stay fresh 24/7"))}stopConnectionMonitoring(){this.connectionMonitorInterval&&(console.log("⏹️ Stopping connection monitoring"),clearInterval(this.connectionMonitorInterval),this.connectionMonitorInterval=null)}async checkConnectionHealth(){try{const e=Date.now();if(this.lastConnectionCheck&&e-this.lastConnectionCheck<25*60*1e3){console.log("⏭️ Skipping health check - recently checked");return}if(console.log("🏥 [PROACTIVE] Performing connection health check and token refresh..."),this.lastConnectionCheck=e,!this.accessToken){console.log("⚠️ No access token - attempting to load stored tokens"),this.currentUserId&&await this.loadStoredTokens(this.currentUserId);return}if(this.isTokenExpired()){console.log("🔄 [PROACTIVE] Token expiring soon - refreshing NOW to prevent connection loss");try{await this.refreshAccessToken(),this.connectionFailures=0,console.log("✅ [PROACTIVE] Token refreshed successfully - connection maintained");return}catch(n){console.error("❌ [PROACTIVE] Token refresh failed:",n),this.connectionFailures++}}try{await this.validateTokens()?(this.connectionFailures=0,console.log("✅ Connection health check passed - token is valid")):(console.log("🔧 Token validation failed - attempting automatic refresh"),await this.refreshAccessToken(),this.connectionFailures=0,console.log("✅ Connection automatically recovered via token refresh"))}catch(n){this.connectionFailures++,console.warn(`⚠️ Connection health check failed (${this.connectionFailures}/${this.MAX_CONNECTION_FAILURES}):`,n),this.connectionFailures>=this.MAX_CONNECTION_FAILURES&&(console.error("❌ Multiple connection failures detected - triggering recovery attempt"),await this.attemptConnectionRecovery())}}catch(e){console.error("❌ Error during connection health check:",e),this.connectionFailures++}}async attemptConnectionRecovery(){try{console.log("🚑 Attempting automatic connection recovery...");try{await this.refreshAccessToken(),console.log("✅ Connection recovered via token refresh"),this.connectionFailures=0;return}catch(e){console.warn("❌ Token refresh failed during recovery:",e)}if(this.currentUserId)try{if(await this.loadStoredTokens(this.currentUserId)){console.log("✅ Connection recovered via stored tokens"),this.connectionFailures=0;return}}catch(e){console.warn("❌ Loading stored tokens failed during recovery:",e)}console.error("❌ Automatic connection recovery failed - user may need to reconnect manually"),localStorage.setItem("gbp_connection_issue",JSON.stringify({timestamp:Date.now(),failures:this.connectionFailures,lastAttempt:new Date().toISOString()}))}catch(e){console.error("❌ Error during connection recovery attempt:",e)}}getConnectionStatus(){return{isConnected:!!this.accessToken&&this.connectionFailures<this.MAX_CONNECTION_FAILURES,hasToken:!!this.accessToken,failureCount:this.connectionFailures,lastCheck:this.lastConnectionCheck,needsReconnection:this.connectionFailures>=this.MAX_CONNECTION_FAILURES}}}const xt=new Cte;class kte{constructor(){Je(this,"intervalId",null);Je(this,"isRunning",!1);Je(this,"checkInterval",15e3);Je(this,"processedReviews",new Map);Je(this,"notificationService",null);this.loadProcessedReviews(),console.log("🤖 AUTOMATION: Review automation service initialized"),this.delayedStart()}delayedStart(){setTimeout(()=>{this.checkConnectionAndStart()},5e3)}checkConnectionAndStart(){console.log("🔍 AUTOMATION: Checking Google Business Profile connection...");const e=()=>{const r=!!xt.getAccessToken(),n=xt.isConnected();console.log("🔍 AUTOMATION: Connection check -",{hasToken:r,isGBPConnected:n}),r&&n?(console.log("✅ AUTOMATION: Google Business Profile is connected, starting automation"),this.start()):(console.log("⏳ AUTOMATION: Waiting for Google Business Profile connection..."),setTimeout(e,15e3))};e()}setNotificationService(e){this.notificationService=e,console.log("🔔 Notification service connected to review automation")}start(){this.isRunning||(console.log("🔄 Starting review automation service..."),this.isRunning=!0,this.checkAndProcessReviews(),this.intervalId=setInterval(()=>{this.checkAndProcessReviews()},this.checkInterval))}stop(){this.isRunning&&(console.log("⏹️ Stopping review automation service..."),this.isRunning=!1,this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null))}async checkAndProcessReviews(){try{if(console.log("🔄 AUTOMATION: Starting review check cycle..."),!xt.isConnected()){console.warn("⚠️ AUTOMATION: Google Business Profile connection lost, stopping automation"),this.stop();return}const e=this.getEnabledConfigurations();if(console.log(`🔍 AUTOMATION: Found ${e.length} enabled review configurations`),e.length===0){console.log("ℹ️ AUTOMATION: No enabled auto-reply configurations found. Make sure you have enabled auto-reply for at least one location.");return}e.forEach(r=>{console.log(`📋 AUTOMATION: Config - ${r.businessName} (${r.locationId}) - Auto-reply: ${r.autoReplyEnabled?"ON":"OFF"}`)});for(const r of e)console.log(`🎯 AUTOMATION: Processing location: ${r.businessName}`),await this.processLocationReviews(r);console.log("✅ AUTOMATION: Review check cycle completed")}catch(e){console.error("🚨 AUTOMATION ERROR:",e)}}async processLocationReviews(e){var r;try{if(console.log(`📝 Processing reviews for ${e.businessName}...`),!xt.getAccessToken()){console.warn(`⚠️ No access token available for ${e.businessName}`);return}const s=await this.fetchLocationReviews(e.locationId),i=s.filter(o=>{const l=`${e.locationId}_${o.id}`;return!this.processedReviews.has(l)});if(i.length>0&&this.notificationService)for(const o of i)this.notificationService.addNotification({type:"review",title:"New Review Received!",message:`${o.starRating}⭐ review from ${((r=o.reviewer)==null?void 0:r.displayName)||"Customer"} for ${e.businessName}`,actionUrl:"/reviews"});for(const o of s)await this.processIndividualReview(e,o)}catch(n){console.error(`🚨 Error processing reviews for ${e.businessName}:`,n)}}async fetchLocationReviews(e){try{const r="http://localhost:5000",n=xt.getAccessToken();console.log("🔍 REVIEWS DEBUG: Backend URL being used:",r),console.log("🔍 REVIEWS DEBUG: VITE_BACKEND_URL env var:","http://localhost:5000"),console.log("🔍 REVIEWS DEBUG: Full URL:",`${r}/api/locations/${e}/reviews`);const s=await fetch(`${r}/api/locations/${e}/reviews?_t=${Date.now()}`,{method:"GET",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}});if(!s.ok){let o={};try{o=await s.json()}catch{}if(s.status===401)return o.needsReauth?(console.error("🔒 Authentication expired. Please reconnect your Google Business Profile."),this.stop(),[]):(console.warn("⚠️ Authentication issue. Will retry on next check."),[]);if(s.status===503||s.status===502)return console.warn(`⚠️ Google API temporarily unavailable (${s.status}). Will retry on next check.`),[];if(s.status===500)return console.warn(`⚠️ Server error: ${o.message||"Unknown error"}. Will retry on next check.`),console.debug("Error details:",o),[];throw new Error(`Failed to fetch reviews: ${s.status} - ${o.message||"Unknown error"}`)}return(await s.json()).reviews||[]}catch(r){return console.error("Error fetching reviews:",r),[]}}async processIndividualReview(e,r){var s;const n=`${e.locationId}_${r.id}`;if(!this.processedReviews.has(n))try{if(!this.shouldReplyToReview(e,r)){console.log(`⏭️ Skipping review ${r.id} - doesn't meet criteria`),this.markReviewAsProcessed(n,e.locationId,r.id);return}if(r.reply&&r.reply.comment){console.log(`⏭️ Review ${r.id} already has a reply`),this.markReviewAsProcessed(n,e.locationId,r.id);return}console.log(`🤖 Generating auto-reply for review ${r.id} (${r.starRating} stars)`);const i=await this.generateReviewReply(e,r);await this.postReviewReply(e.locationId,r.name,i),this.markReviewAsProcessed(n,e.locationId,r.id),console.log(`✅ Successfully replied to review ${r.id}`),this.notificationService&&this.notificationService.addNotification({type:"reply",title:"AI Reply Sent!",message:`Auto-replied to ${r.starRating}⭐ review from ${((s=r.reviewer)==null?void 0:s.displayName)||"Customer"} for ${e.businessName}`,actionUrl:"/reviews"}),be({title:"Review Reply Posted! 💬",description:`Auto-replied to ${r.starRating}⭐ review for ${e.businessName}`,duration:4e3})}catch(i){console.error(`❌ Failed to process review ${r.id}:`,i),be({title:"Review Reply Failed ❌",description:`Failed to reply to review for ${e.businessName}`,variant:"destructive",duration:6e3})}}shouldReplyToReview(e,r){return!(!e.autoReplyEnabled||e.minRating&&r.starRating<e.minRating||e.maxRating&&r.starRating>e.maxRating||!r.comment||r.comment.trim()==="")}async generateReviewReply(e,r){var n;try{if(e.replyTemplate&&e.replyTemplate.trim())return this.processReplyTemplate(e.replyTemplate,e,r);const s=`Generate a professional, friendly, and personalized reply to this customer review for ${e.businessName}:

Review Rating: ${r.starRating}/5 stars
Review Text: "${r.comment}"
Reviewer: ${((n=r.reviewer)==null?void 0:n.displayName)||"Customer"}

Requirements:
- Keep it under 120 words maximum
- Be professional and thankful
- Address specific points mentioned in the review if relevant
- ${r.starRating>=4?"Express gratitude for the positive feedback":"Address concerns professionally and offer to resolve issues"}
- Include a subtle invitation to visit again or contact directly if needed
- Don't use excessive emojis (max 1-2)

Generate only the reply text, no quotes or extra formatting.`;return(await Qi.generateReviewResponse(e.businessName,r.comment,r.starRating)).trim()}catch(s){return console.error("Failed to generate review reply:",s),this.getGenericReply(r.starRating)}}processReplyTemplate(e,r,n){var s;return e.replace(/\{businessName\}/g,r.businessName).replace(/\{reviewerName\}/g,((s=n.reviewer)==null?void 0:s.displayName)||"valued customer").replace(/\{rating\}/g,n.starRating.toString()).replace(/\{comment\}/g,n.comment||"")}getGenericReply(e){return e>=4?"Thank you for your wonderful review! We're thrilled you had a great experience with us. We look forward to serving you again soon!":e===3?"Thank you for your feedback. We appreciate you taking the time to share your experience and we're always working to improve. Please feel free to contact us directly to discuss any concerns.":"Thank you for your feedback. We sincerely apologize that your experience didn't meet your expectations. We'd love the opportunity to make this right. Please contact us directly so we can address your concerns."}async postReviewReply(e,r,n){const s="http://localhost:5000",i=xt.getAccessToken(),o=r.split("/"),l=o[3],c=o[5],u=l||e;console.log(`🔧 AUTOMATION: Posting reply - locationId: "${u}", reviewId: "${c}"`),console.log(`🔧 AUTOMATION: Full review name: "${r}"`);const d=await fetch(`${s}/api/locations/${u}/reviews/${c}/reply`,{method:"PUT",headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json"},body:JSON.stringify({comment:n})});if(!d.ok){const h=await d.json();throw new Error(`Failed to post review reply: ${d.status} - ${h.error}`)}}markReviewAsProcessed(e,r,n){this.processedReviews.set(e,{reviewId:n,locationId:r,processed:!0,processedAt:new Date().toISOString()}),this.saveProcessedReviews()}loadProcessedReviews(){try{const e=localStorage.getItem("processed_reviews");if(e){const r=JSON.parse(e);this.processedReviews=new Map(r)}}catch(e){console.error("Error loading processed reviews:",e)}}saveProcessedReviews(){try{const e=Array.from(this.processedReviews.entries());localStorage.setItem("processed_reviews",JSON.stringify(e))}catch(e){console.error("Error saving processed reviews:",e)}}getEnabledConfigurations(){try{const e=localStorage.getItem("review_reply_configs");return e?JSON.parse(e).filter(n=>n.enabled&&n.autoReplyEnabled):[]}catch(e){return console.error("Error loading review reply configurations:",e),[]}}getConfiguration(e){try{const r=localStorage.getItem("review_reply_configs");return r&&JSON.parse(r).find(s=>s.locationId===e)||null}catch(r){return console.error("Error getting review reply configuration:",r),null}}saveConfiguration(e){try{const r=localStorage.getItem("review_reply_configs");let n=r?JSON.parse(r):[];const s=n.findIndex(i=>i.locationId===e.locationId);s>=0?n[s]=e:n.push(e),localStorage.setItem("review_reply_configs",JSON.stringify(n))}catch(r){console.error("Error saving review reply configuration:",r)}}async executeManualReply(e,r,n){try{await this.postReviewReply(e,r,n),be({title:"Reply Posted! 💬",description:"Your review reply has been posted successfully",duration:4e3})}catch(s){throw console.error("Failed to post manual review reply:",s),be({title:"Reply Failed ❌",description:`Failed to post reply: ${s instanceof Error?s.message:"Unknown error"}`,variant:"destructive",duration:6e3}),s}}isServiceRunning(){return this.isRunning}restart(){console.log("🔄 AUTOMATION: Manually restarting automation service..."),this.stop(),setTimeout(()=>{this.checkConnectionAndStart()},2e3)}async forceCheck(){if(console.log("⚡ AUTOMATION: Force checking reviews immediately..."),!this.isRunning){console.warn("⚠️ AUTOMATION: Service is not running. Starting it first..."),this.checkConnectionAndStart();return}await this.checkAndProcessReviews()}async generateAIReply(e){try{console.log("Generating AI reply with params:",e);const r=await Qi.generateReviewResponse(e.businessName,e.reviewText,e.rating);return console.log("AI generated reply:",r),r.trim()}catch(r){return console.error("Failed to generate AI reply:",r),this.getGenericReply(e.rating)}}}const vd=new kte;const MM=p.createContext(void 0),gy=()=>{const t=p.useContext(MM);if(!t)throw new Error("useNotifications must be used within a NotificationProvider");return t},Ite=({children:t})=>{const[e,r]=p.useState([]);p.useEffect(()=>{try{const d=localStorage.getItem("notifications");if(d){const h=JSON.parse(d);r(h)}}catch(d){console.error("Error loading notifications:",d)}},[]),p.useEffect(()=>{try{localStorage.setItem("notifications",JSON.stringify(e))}catch(d){console.error("Error saving notifications:",d)}},[e]);const n=d=>{const h={...d,id:crypto.randomUUID(),timestamp:new Date().toISOString(),read:!1};r(f=>[h,...f.slice(0,49)]),Notification.permission==="granted"&&new Notification(d.title,{body:d.message,icon:"/favicon.ico",tag:h.id}),console.log("📢 New notification added:",h)},s=d=>{r(h=>h.map(f=>f.id===d?{...f,read:!0}:f))},i=()=>{r(d=>d.map(h=>({...h,read:!0})))},o=d=>{r(h=>h.filter(f=>f.id!==d))},l=()=>{r([])},c=e.filter(d=>!d.read).length;p.useEffect(()=>{const d={addNotification:h=>{n(h)}};return vd.setNotificationService(d),console.log("🔔 Review automation service connected to notifications"),()=>{}},[]);const u={notifications:e,unreadCount:c,addNotification:n,markAsRead:s,markAllAsRead:i,clearNotification:o,clearAllNotifications:l};return a.jsx(MM.Provider,{value:u,children:t})};function Ge(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function kn(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function hn(t,e){const r=Ge(t);return isNaN(e)?kn(t,NaN):(e&&r.setDate(r.getDate()+e),r)}function Ws(t,e){const r=Ge(t);if(isNaN(e))return kn(t,NaN);if(!e)return r;const n=r.getDate(),s=kn(t,r.getTime());s.setMonth(r.getMonth()+e+1,0);const i=s.getDate();return n>=i?s:(r.setFullYear(s.getFullYear(),s.getMonth(),n),r)}const X1=6048e5,Rte=864e5,Jf=43200,dP=1440;let Ote={};function _u(){return Ote}function ja(t,e){var l,c,u,d;const r=_u(),n=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,s=Ge(t),i=s.getDay(),o=(i<n?7:0)+i-n;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function Tl(t){return ja(t,{weekStartsOn:1})}function LM(t){const e=Ge(t),r=e.getFullYear(),n=kn(t,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const s=Tl(n),i=kn(t,0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);const o=Tl(i);return e.getTime()>=s.getTime()?r+1:e.getTime()>=o.getTime()?r:r-1}function Kc(t){const e=Ge(t);return e.setHours(0,0,0,0),e}function Yc(t){const e=Ge(t),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+t-+r}function ca(t,e){const r=Kc(t),n=Kc(e),s=+r-Yc(r),i=+n-Yc(n);return Math.round((s-i)/Rte)}function Dte(t){const e=LM(t),r=kn(t,0);return r.setFullYear(e,0,4),r.setHours(0,0,0,0),Tl(r)}function r0(t,e){const r=e*7;return hn(t,r)}function Mte(t,e){return Ws(t,e*12)}function Lte(t){let e;return t.forEach(function(r){const n=Ge(r);(e===void 0||e<n||isNaN(Number(n)))&&(e=n)}),e||new Date(NaN)}function Fte(t){let e;return t.forEach(r=>{const n=Ge(r);(!e||e>n||isNaN(+n))&&(e=n)}),e||new Date(NaN)}function Mm(t,e){const r=Ge(t),n=Ge(e),s=r.getTime()-n.getTime();return s<0?-1:s>0?1:s}function $te(t){return kn(t,Date.now())}function En(t,e){const r=Kc(t),n=Kc(e);return+r==+n}function J1(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function Ute(t){if(!J1(t)&&typeof t!="number")return!1;const e=Ge(t);return!isNaN(Number(e))}function Qc(t,e){const r=Ge(t),n=Ge(e),s=r.getFullYear()-n.getFullYear(),i=r.getMonth()-n.getMonth();return s*12+i}function Bte(t,e,r){const n=ja(t,r),s=ja(e,r),i=+n-Yc(n),o=+s-Yc(s);return Math.round((i-o)/X1)}function Vte(t){return e=>{const n=(t?Math[t]:Math.trunc)(e);return n===0?0:n}}function zte(t,e){return+Ge(t)-+Ge(e)}function Gte(t){const e=Ge(t);return e.setHours(23,59,59,999),e}function yy(t){const e=Ge(t),r=e.getMonth();return e.setFullYear(e.getFullYear(),r+1,0),e.setHours(23,59,59,999),e}function Wte(t){const e=Ge(t);return+Gte(e)==+yy(e)}function qte(t,e){const r=Ge(t),n=Ge(e),s=Mm(r,n),i=Math.abs(Qc(r,n));let o;if(i<1)o=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-s*i);let l=Mm(r,n)===-s;Wte(Ge(t))&&i===1&&Mm(t,n)===1&&(l=!1),o=s*(i-Number(l))}return o===0?0:o}function Hte(t,e,r){const n=zte(t,e)/1e3;return Vte(r==null?void 0:r.roundingMethod)(n)}function Tn(t){const e=Ge(t);return e.setDate(1),e.setHours(0,0,0,0),e}function FM(t){const e=Ge(t),r=kn(t,0);return r.setFullYear(e.getFullYear(),0,1),r.setHours(0,0,0,0),r}function Z1(t,e){var l,c,u,d;const r=_u(),n=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,s=Ge(t),i=s.getDay(),o=(i<n?-7:0)+6-(i-n);return s.setDate(s.getDate()+o),s.setHours(23,59,59,999),s}function $M(t){return Z1(t,{weekStartsOn:1})}const Kte={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Yte=(t,e,r)=>{let n;const s=Kte[t];return typeof s=="string"?n=s:e===1?n=s.one:n=s.other.replace("{{count}}",e.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function xx(t){return(e={})=>{const r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const Qte={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Xte={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Jte={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Zte={date:xx({formats:Qte,defaultWidth:"full"}),time:xx({formats:Xte,defaultWidth:"full"}),dateTime:xx({formats:Jte,defaultWidth:"full"})},ere={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},tre=(t,e,r,n)=>ere[t];function ed(t){return(e,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let s;if(n==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,l=r!=null&&r.width?String(r.width):o;s=t.formattingValues[l]||t.formattingValues[o]}else{const o=t.defaultWidth,l=r!=null&&r.width?String(r.width):t.defaultWidth;s=t.values[l]||t.values[o]}const i=t.argumentCallback?t.argumentCallback(e):e;return s[i]}}const rre={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},nre={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},sre={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},are={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},ire={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},ore={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},lre=(t,e)=>{const r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},cre={ordinalNumber:lre,era:ed({values:rre,defaultWidth:"wide"}),quarter:ed({values:nre,defaultWidth:"wide",argumentCallback:t=>t-1}),month:ed({values:sre,defaultWidth:"wide"}),day:ed({values:are,defaultWidth:"wide"}),dayPeriod:ed({values:ire,defaultWidth:"wide",formattingValues:ore,defaultFormattingWidth:"wide"})};function td(t){return(e,r={})=>{const n=r.width,s=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],i=e.match(s);if(!i)return null;const o=i[0],l=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(l)?dre(l,h=>h.test(o)):ure(l,h=>h.test(o));let u;u=t.valueCallback?t.valueCallback(c):c,u=r.valueCallback?r.valueCallback(u):u;const d=e.slice(o.length);return{value:u,rest:d}}}function ure(t,e){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return r}function dre(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return r}function hre(t){return(e,r={})=>{const n=e.match(t.matchPattern);if(!n)return null;const s=n[0],i=e.match(t.parsePattern);if(!i)return null;let o=t.valueCallback?t.valueCallback(i[0]):i[0];o=r.valueCallback?r.valueCallback(o):o;const l=e.slice(s.length);return{value:o,rest:l}}}const fre=/^(\d+)(th|st|nd|rd)?/i,mre=/\d+/i,pre={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},gre={any:[/^b/i,/^(a|c)/i]},yre={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},vre={any:[/1/i,/2/i,/3/i,/4/i]},xre={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},bre={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},wre={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},jre={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Nre={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},_re={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Sre={ordinalNumber:hre({matchPattern:fre,parsePattern:mre,valueCallback:t=>parseInt(t,10)}),era:td({matchPatterns:pre,defaultMatchWidth:"wide",parsePatterns:gre,defaultParseWidth:"any"}),quarter:td({matchPatterns:yre,defaultMatchWidth:"wide",parsePatterns:vre,defaultParseWidth:"any",valueCallback:t=>t+1}),month:td({matchPatterns:xre,defaultMatchWidth:"wide",parsePatterns:bre,defaultParseWidth:"any"}),day:td({matchPatterns:wre,defaultMatchWidth:"wide",parsePatterns:jre,defaultParseWidth:"any"}),dayPeriod:td({matchPatterns:Nre,defaultMatchWidth:"any",parsePatterns:_re,defaultParseWidth:"any"})},ej={code:"en-US",formatDistance:Yte,formatLong:Zte,formatRelative:tre,localize:cre,match:Sre,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Are(t){const e=Ge(t);return ca(e,FM(e))+1}function UM(t){const e=Ge(t),r=+Tl(e)-+Dte(e);return Math.round(r/X1)+1}function BM(t,e){var d,h,f,m;const r=Ge(t),n=r.getFullYear(),s=_u(),i=(e==null?void 0:e.firstWeekContainsDate)??((h=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??s.firstWeekContainsDate??((m=(f=s.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??1,o=kn(t,0);o.setFullYear(n+1,0,i),o.setHours(0,0,0,0);const l=ja(o,e),c=kn(t,0);c.setFullYear(n,0,i),c.setHours(0,0,0,0);const u=ja(c,e);return r.getTime()>=l.getTime()?n+1:r.getTime()>=u.getTime()?n:n-1}function Ere(t,e){var l,c,u,d;const r=_u(),n=(e==null?void 0:e.firstWeekContainsDate)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,s=BM(t,e),i=kn(t,0);return i.setFullYear(s,0,n),i.setHours(0,0,0,0),ja(i,e)}function VM(t,e){const r=Ge(t),n=+ja(r,e)-+Ere(r,e);return Math.round(n/X1)+1}function _t(t,e){const r=t<0?"-":"",n=Math.abs(t).toString().padStart(e,"0");return r+n}const Ci={y(t,e){const r=t.getFullYear(),n=r>0?r:1-r;return _t(e==="yy"?n%100:n,e.length)},M(t,e){const r=t.getMonth();return e==="M"?String(r+1):_t(r+1,2)},d(t,e){return _t(t.getDate(),e.length)},a(t,e){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,e){return _t(t.getHours()%12||12,e.length)},H(t,e){return _t(t.getHours(),e.length)},m(t,e){return _t(t.getMinutes(),e.length)},s(t,e){return _t(t.getSeconds(),e.length)},S(t,e){const r=e.length,n=t.getMilliseconds(),s=Math.trunc(n*Math.pow(10,r-3));return _t(s,e.length)}},oc={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},hP={G:function(t,e,r){const n=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(t,e,r){if(e==="yo"){const n=t.getFullYear(),s=n>0?n:1-n;return r.ordinalNumber(s,{unit:"year"})}return Ci.y(t,e)},Y:function(t,e,r,n){const s=BM(t,n),i=s>0?s:1-s;if(e==="YY"){const o=i%100;return _t(o,2)}return e==="Yo"?r.ordinalNumber(i,{unit:"year"}):_t(i,e.length)},R:function(t,e){const r=LM(t);return _t(r,e.length)},u:function(t,e){const r=t.getFullYear();return _t(r,e.length)},Q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return _t(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return _t(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,e,r){const n=t.getMonth();switch(e){case"M":case"MM":return Ci.M(t,e);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(t,e,r){const n=t.getMonth();switch(e){case"L":return String(n+1);case"LL":return _t(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(t,e,r,n){const s=VM(t,n);return e==="wo"?r.ordinalNumber(s,{unit:"week"}):_t(s,e.length)},I:function(t,e,r){const n=UM(t);return e==="Io"?r.ordinalNumber(n,{unit:"week"}):_t(n,e.length)},d:function(t,e,r){return e==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):Ci.d(t,e)},D:function(t,e,r){const n=Are(t);return e==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):_t(n,e.length)},E:function(t,e,r){const n=t.getDay();switch(e){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(t,e,r,n){const s=t.getDay(),i=(s-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return _t(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(s,{width:"short",context:"formatting"});case"eeee":default:return r.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,r,n){const s=t.getDay(),i=(s-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return _t(i,e.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(s,{width:"narrow",context:"standalone"});case"cccccc":return r.day(s,{width:"short",context:"standalone"});case"cccc":default:return r.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,r){const n=t.getDay(),s=n===0?7:n;switch(e){case"i":return String(s);case"ii":return _t(s,e.length);case"io":return r.ordinalNumber(s,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(t,e,r){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,r){const n=t.getHours();let s;switch(n===12?s=oc.noon:n===0?s=oc.midnight:s=n/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,r){const n=t.getHours();let s;switch(n>=17?s=oc.evening:n>=12?s=oc.afternoon:n>=4?s=oc.morning:s=oc.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,r){if(e==="ho"){let n=t.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return Ci.h(t,e)},H:function(t,e,r){return e==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):Ci.H(t,e)},K:function(t,e,r){const n=t.getHours()%12;return e==="Ko"?r.ordinalNumber(n,{unit:"hour"}):_t(n,e.length)},k:function(t,e,r){let n=t.getHours();return n===0&&(n=24),e==="ko"?r.ordinalNumber(n,{unit:"hour"}):_t(n,e.length)},m:function(t,e,r){return e==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):Ci.m(t,e)},s:function(t,e,r){return e==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):Ci.s(t,e)},S:function(t,e){return Ci.S(t,e)},X:function(t,e,r){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return mP(n);case"XXXX":case"XX":return Ko(n);case"XXXXX":case"XXX":default:return Ko(n,":")}},x:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"x":return mP(n);case"xxxx":case"xx":return Ko(n);case"xxxxx":case"xxx":default:return Ko(n,":")}},O:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+fP(n,":");case"OOOO":default:return"GMT"+Ko(n,":")}},z:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+fP(n,":");case"zzzz":default:return"GMT"+Ko(n,":")}},t:function(t,e,r){const n=Math.trunc(t.getTime()/1e3);return _t(n,e.length)},T:function(t,e,r){const n=t.getTime();return _t(n,e.length)}};function fP(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),s=Math.trunc(n/60),i=n%60;return i===0?r+String(s):r+String(s)+e+_t(i,2)}function mP(t,e){return t%60===0?(t>0?"-":"+")+_t(Math.abs(t)/60,2):Ko(t,e)}function Ko(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),s=_t(Math.trunc(n/60),2),i=_t(n%60,2);return r+s+e+i}const pP=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},zM=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Pre=(t,e)=>{const r=t.match(/(P+)(p+)?/)||[],n=r[1],s=r[2];if(!s)return pP(t,e);let i;switch(n){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",pP(n,e)).replace("{{time}}",zM(s,e))},Tre={p:zM,P:Pre},Cre=/^D+$/,kre=/^Y+$/,Ire=["D","DD","YY","YYYY"];function Rre(t){return Cre.test(t)}function Ore(t){return kre.test(t)}function Dre(t,e,r){const n=Mre(t,e,r);if(console.warn(n),Ire.includes(t))throw new RangeError(n)}function Mre(t,e,r){const n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Lre=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Fre=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,$re=/^'([^]*?)'?$/,Ure=/''/g,Bre=/[a-zA-Z]/;function fr(t,e,r){var d,h,f,m,v,y,x,b;const n=_u(),s=(r==null?void 0:r.locale)??n.locale??ej,i=(r==null?void 0:r.firstWeekContainsDate)??((h=(d=r==null?void 0:r.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??n.firstWeekContainsDate??((m=(f=n.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??1,o=(r==null?void 0:r.weekStartsOn)??((y=(v=r==null?void 0:r.locale)==null?void 0:v.options)==null?void 0:y.weekStartsOn)??n.weekStartsOn??((b=(x=n.locale)==null?void 0:x.options)==null?void 0:b.weekStartsOn)??0,l=Ge(t);if(!Ute(l))throw new RangeError("Invalid time value");let c=e.match(Fre).map(w=>{const j=w[0];if(j==="p"||j==="P"){const E=Tre[j];return E(w,s.formatLong)}return w}).join("").match(Lre).map(w=>{if(w==="''")return{isToken:!1,value:"'"};const j=w[0];if(j==="'")return{isToken:!1,value:Vre(w)};if(hP[j])return{isToken:!0,value:w};if(j.match(Bre))throw new RangeError("Format string contains an unescaped latin alphabet character `"+j+"`");return{isToken:!1,value:w}});s.localize.preprocessor&&(c=s.localize.preprocessor(l,c));const u={firstWeekContainsDate:i,weekStartsOn:o,locale:s};return c.map(w=>{if(!w.isToken)return w.value;const j=w.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&Ore(j)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&Rre(j))&&Dre(j,e,String(t));const E=hP[j[0]];return E(l,j,s.localize,u)}).join("")}function Vre(t){const e=t.match($re);return e?e[1].replace(Ure,"'"):t}function zre(t,e,r){const n=_u(),s=(r==null?void 0:r.locale)??n.locale??ej,i=2520,o=Mm(t,e);if(isNaN(o))throw new RangeError("Invalid time value");const l=Object.assign({},r,{addSuffix:r==null?void 0:r.addSuffix,comparison:o});let c,u;o>0?(c=Ge(e),u=Ge(t)):(c=Ge(t),u=Ge(e));const d=Hte(u,c),h=(Yc(u)-Yc(c))/1e3,f=Math.round((d-h)/60);let m;if(f<2)return r!=null&&r.includeSeconds?d<5?s.formatDistance("lessThanXSeconds",5,l):d<10?s.formatDistance("lessThanXSeconds",10,l):d<20?s.formatDistance("lessThanXSeconds",20,l):d<40?s.formatDistance("halfAMinute",0,l):d<60?s.formatDistance("lessThanXMinutes",1,l):s.formatDistance("xMinutes",1,l):f===0?s.formatDistance("lessThanXMinutes",1,l):s.formatDistance("xMinutes",f,l);if(f<45)return s.formatDistance("xMinutes",f,l);if(f<90)return s.formatDistance("aboutXHours",1,l);if(f<dP){const v=Math.round(f/60);return s.formatDistance("aboutXHours",v,l)}else{if(f<i)return s.formatDistance("xDays",1,l);if(f<Jf){const v=Math.round(f/dP);return s.formatDistance("xDays",v,l)}else if(f<Jf*2)return m=Math.round(f/Jf),s.formatDistance("aboutXMonths",m,l)}if(m=qte(u,c),m<12){const v=Math.round(f/Jf);return s.formatDistance("xMonths",v,l)}else{const v=m%12,y=Math.trunc(m/12);return v<3?s.formatDistance("aboutXYears",y,l):v<9?s.formatDistance("overXYears",y,l):s.formatDistance("almostXYears",y+1,l)}}function Gre(t,e){return zre(t,$te(t),e)}function Wre(t){const e=Ge(t),r=e.getFullYear(),n=e.getMonth(),s=kn(t,0);return s.setFullYear(r,n+1,0),s.setHours(0,0,0,0),s.getDate()}function qre(t){return Math.trunc(+Ge(t)/1e3)}function Hre(t){const e=Ge(t),r=e.getMonth();return e.setFullYear(e.getFullYear(),r+1,0),e.setHours(0,0,0,0),e}function Kre(t,e){return Bte(Hre(t),Tn(t),e)+1}function n0(t,e){const r=Ge(t),n=Ge(e);return r.getTime()>n.getTime()}function GM(t,e){const r=Ge(t),n=Ge(e);return+r<+n}function tj(t,e){const r=Ge(t),n=Ge(e);return r.getFullYear()===n.getFullYear()&&r.getMonth()===n.getMonth()}function Yre(t,e){const r=Ge(t),n=Ge(e);return r.getFullYear()===n.getFullYear()}function bx(t,e){return hn(t,-e)}function wx(t,e){const r=Ge(t),n=r.getFullYear(),s=r.getDate(),i=kn(t,0);i.setFullYear(n,e,15),i.setHours(0,0,0,0);const o=Wre(i);return r.setMonth(e,Math.min(s,o)),r}function gP(t,e){const r=Ge(t);return isNaN(+r)?kn(t,NaN):(r.setFullYear(e),r)}const Qre=t=>{switch(t){case"review":return ri;case"post":return bl;case"reply":return i9;case"system":default:return mc}},Xre=t=>{switch(t){case"review":return"text-blue-600";case"post":return"text-green-600";case"reply":return"text-purple-600";case"system":default:return"text-gray-600"}},yP=()=>{const{notifications:t,unreadCount:e,markAsRead:r,markAllAsRead:n,clearNotification:s,clearAllNotifications:i}=gy(),o=c=>{c.read||r(c.id),c.actionUrl&&(window.location.href=c.actionUrl)},l=c=>{try{return Gre(new Date(c),{addSuffix:!0})}catch{return"just now"}};return a.jsxs(hy,{children:[a.jsx(fy,{asChild:!0,children:a.jsxs(K,{variant:"ghost",size:"sm",className:"relative h-9 w-9 p-0",children:[a.jsx(Um,{className:"h-4 w-4"}),e>0&&a.jsx(Se,{variant:"destructive",className:"absolute -top-1 -right-1 h-4 w-4 p-0 flex items-center justify-center text-xs",children:e>99?"99+":e})]})}),a.jsxs(Lh,{className:"w-80",align:"end",forceMount:!0,children:[a.jsxs(W1,{className:"flex items-center justify-between",children:[a.jsx("span",{children:"Notifications"}),a.jsxs("div",{className:"flex items-center gap-1",children:[e>0&&a.jsxs(K,{variant:"ghost",size:"sm",onClick:n,className:"h-6 px-2 text-xs",children:[a.jsx(FV,{className:"h-3 w-3 mr-1"}),"Mark all read"]}),t.length>0&&a.jsx(K,{variant:"ghost",size:"sm",onClick:i,className:"h-6 px-2 text-xs text-red-600 hover:text-red-700",children:a.jsx(Hm,{className:"h-3 w-3"})})]})]}),a.jsx(Nc,{}),a.jsx(OM,{className:"h-96",children:t.length===0?a.jsxs("div",{className:"p-4 text-center text-sm text-muted-foreground",children:[a.jsx(Um,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),"No notifications yet"]}):a.jsx("div",{className:"space-y-1",children:t.map(c=>{const u=Qre(c.type),d=Xre(c.type);return a.jsx(An,{className:ye("p-0 cursor-pointer",!c.read&&"bg-blue-50/50"),onClick:()=>o(c),children:a.jsx(H,{className:ye("w-full shadow-none border-none",!c.read&&"bg-blue-50/50"),children:a.jsx(Y,{className:"p-3",children:a.jsxs("div",{className:"flex gap-3",children:[a.jsx("div",{className:ye("mt-0.5",d),children:a.jsx(u,{className:"h-4 w-4"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:ye("text-sm font-medium leading-none mb-1",!c.read&&"font-semibold"),children:c.title}),a.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:c.message})]}),a.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[!c.read&&a.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full"}),a.jsx(K,{variant:"ghost",size:"sm",onClick:h=>{h.stopPropagation(),s(c.id)},className:"h-5 w-5 p-0 text-gray-400 hover:text-red-600",children:a.jsx(Hm,{className:"h-3 w-3"})})]})]}),a.jsxs("div",{className:"flex items-center justify-between mt-2",children:[a.jsx("span",{className:"text-xs text-muted-foreground",children:l(c.timestamp)}),c.actionUrl&&a.jsx(mw,{className:"h-3 w-3 text-muted-foreground"})]})]})]})})})},c.id)})})}),t.length>10&&a.jsxs(a.Fragment,{children:[a.jsx(Nc,{}),a.jsxs(An,{className:"text-center text-sm text-muted-foreground",children:["Showing latest ",Math.min(t.length,50)," notifications"]})]})]})]})},Jre=({onMenuClick:t})=>{const{currentUser:e,logout:r}=Er(),n=cr(),s=async()=>{try{await r(),n("/login")}catch(o){console.error("Logout error:",o)}},i=()=>e!=null&&e.displayName?e.displayName.split(" ").map(o=>o.charAt(0)).join("").toUpperCase().slice(0,2):e!=null&&e.email?e.email.charAt(0).toUpperCase():"U";return a.jsxs("header",{className:"sticky top-0 z-[60] h-16 glass-card border-b border-border/50 flex items-center justify-between px-4 sm:px-6",children:[a.jsx("div",{className:"flex items-center gap-4",children:a.jsx(K,{variant:"ghost",size:"sm",onClick:t,className:"lg:hidden h-9 w-9 p-0",children:a.jsx(Wm,{className:"h-5 w-5"})})}),a.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[a.jsx("div",{className:"hidden sm:block",children:a.jsx(yP,{})}),a.jsxs(hy,{children:[a.jsx(fy,{asChild:!0,children:a.jsx(K,{variant:"ghost",className:"relative h-8 w-8 sm:h-9 sm:w-9 rounded-full",children:a.jsx(Fh,{className:"h-8 w-8 sm:h-9 sm:w-9",children:a.jsx($h,{className:"bg-primary text-primary-foreground text-sm",children:i()})})})}),a.jsxs(Lh,{className:"w-56 z-[100]",align:"end",forceMount:!0,children:[a.jsx(W1,{className:"font-normal",children:a.jsxs("div",{className:"flex flex-col space-y-1",children:[a.jsx("p",{className:"text-sm font-medium leading-none truncate",children:(e==null?void 0:e.displayName)||"User"}),a.jsx("p",{className:"text-xs leading-none text-muted-foreground truncate",children:e==null?void 0:e.email})]})}),a.jsx(Nc,{}),a.jsx("div",{className:"sm:hidden",children:a.jsx(An,{className:"p-0",children:a.jsx("div",{className:"w-full p-2",children:a.jsx(yP,{})})})}),a.jsx(Nc,{}),a.jsxs(An,{children:[a.jsx(Km,{className:"mr-2 h-4 w-4"}),a.jsx("span",{children:"Profile"})]}),a.jsxs(An,{children:[a.jsx(mc,{className:"mr-2 h-4 w-4"}),a.jsx("span",{children:"Settings"})]}),a.jsx(Nc,{}),a.jsxs(An,{onClick:s,children:[a.jsx(gw,{className:"mr-2 h-4 w-4"}),a.jsx("span",{children:"Log out"})]})]})]})]})]})},pi=()=>{const[t,e]=p.useState(!1),[r,n]=p.useState(!0),[s,i]=p.useState([]),[o,l]=p.useState(null),[c,u]=p.useState(null),[d,h]=p.useState(null),{toast:f}=Rn(),{currentUser:m}=Er(),v=cr(),y=p.useRef(!1),x=p.useRef(!1),b=p.useRef(null),w=p.useCallback(async _=>{if(m!=null&&m.uid)try{await fetch("http://localhost:5000/api/payment/user/gbp-association",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:m.uid,gbpAccountId:_})}),console.log("GBP association saved:",{userId:m.uid,gbpAccountId:_})}catch(P){console.error("Failed to save GBP association:",P)}},[m]),j=p.useCallback(async()=>{try{n(!0);const _=await xt.getBusinessAccounts();i(_);for(const P of _)P.accountId&&await w(P.accountId);_.length===1&&(l(_[0]),_[0].locations.length===1&&u(_[0].locations[0])),h(null)}catch(_){console.error("Error loading business accounts:",_),h("Failed to load business accounts"),f({title:"Error loading accounts",description:"Failed to load your Google Business Profile accounts. Please try reconnecting.",variant:"destructive"})}finally{n(!1)}},[f,w]);p.useEffect(()=>{if(!t)return;let _,P=0;const R=5,C=async()=>{try{console.log("⏰ Proactive token check..."),xt.isTokenExpired()?(console.log("🔄 Token expiring soon, refreshing proactively..."),await xt.refreshAccessToken(),P=0,console.log("✅ Token refreshed successfully - connection remains permanent")):console.log("✅ Token still valid - no refresh needed")}catch(G){if(console.error("Failed to refresh token:",G),P++,P<R)console.log(`🔄 Retrying token refresh (attempt ${P}/${R})...`),setTimeout(()=>C(),Math.pow(2,P)*1e3);else{console.error("❌ Max retries exceeded, attempting recovery...");try{if(await xt.recoverConnection()){console.log("✅ Connection recovered via stored tokens"),P=0;return}}catch(U){console.error("❌ Recovery failed:",U)}e(!1),h("Connection requires re-authentication"),f({title:"Connection expired",description:"Please reconnect your Google Business Profile from Settings.",variant:"destructive"})}}};return _=setInterval(C,10*60*1e3),(async()=>{try{console.log("🔍 Initial connection check on mount..."),xt.isTokenExpired()&&(console.log("🔄 Token expiring, refreshing immediately..."),await xt.refreshAccessToken()),console.log("✅ Connection verified - permanent connection active")}catch(G){console.error("Initial check failed:",G),await C()}})(),()=>{_&&clearInterval(_)}},[t,f]),p.useEffect(()=>{const _=(m==null?void 0:m.uid)||null,P=sessionStorage.getItem("post_payment_reload")==="true";if(y.current||x.current&&b.current===_&&!P){console.log("🔍 DEBUGGING: Skipping initialization (already initialized or in progress)");return}const R=async()=>{if(y.current){console.log("🔍 DEBUGGING: Initialization already in progress, skipping...");return}y.current=!0,n(!0),console.log("🔍 DEBUGGING: Initializing Google Business Profile connection..."),console.log("🔍 DEBUGGING: Firebase user:",_);try{xt.setCurrentUserId(_),sessionStorage.getItem("post_payment_reload")==="true"&&(console.log("🔍 DEBUGGING: Just reloaded after payment, waiting before loading profiles..."),sessionStorage.removeItem("post_payment_reload"),await new Promise(U=>setTimeout(U,2e3)));const G=await xt.loadStoredTokens(_);if(console.log("🔍 DEBUGGING: Has valid tokens?",G),console.log("🔍 DEBUGGING: Service isConnected?",xt.isConnected()),e(G),G){console.log("🔍 DEBUGGING: Loading business accounts...");try{await j()}catch(U){console.error("❌ DEBUGGING: Failed to load business accounts:",U),U instanceof Error&&U.message.includes("Authentication")&&(console.log("⚠️ Authentication issue detected, may need to reconnect"),h("Authentication expired. Please reconnect your Google Business Profile."),e(!1))}}else console.log("🔍 DEBUGGING: No valid tokens, skipping account load");x.current=!0,b.current=_}catch(B){console.error("❌ DEBUGGING: Error initializing Google Business Profile connection:",B),h("Failed to initialize connection")}finally{n(!1),y.current=!1,console.log("🔍 DEBUGGING: Initialization complete")}},C=async B=>{console.log("Google Business Profile connection event received:",B.detail),e(!0),await j(),f({title:"Connection successful!",description:"Loading your business profiles..."}),console.log("🔄 Redirecting to dashboard after OAuth callback..."),v("/dashboard")};return window.addEventListener("googleBusinessProfileConnected",C),R(),()=>{window.removeEventListener("googleBusinessProfileConnected",C)}},[m==null?void 0:m.uid]);const E=p.useCallback(async()=>{try{n(!0),console.log("🔄 Starting Google Business Profile connection..."),console.log("🔍 DEBUGGING: Firebase user for connection:",m==null?void 0:m.uid),xt.setCurrentUserId((m==null?void 0:m.uid)||null),await xt.connectGoogleBusiness(),e(!0),console.log("✅ OAuth connection successful!"),console.log("📊 Loading business accounts..."),await j(),console.log("✅ Business accounts loaded successfully!"),f({title:"Connected successfully!",description:"Your Google Business Profile has been connected and data loaded."}),console.log("🔄 Redirecting to dashboard..."),v("/dashboard")}catch(_){console.error("❌ Error connecting to Google Business Profile:",_);const P=_ instanceof Error?_.message:"Unknown error";h(P);let R="Failed to connect to Google Business Profile. Please try again.";P.includes("cancelled")||P.includes("closed")?R="OAuth was cancelled. Please try again and complete the authentication process.":P.includes("timeout")?R="Connection timed out. Please try again.":P.includes("Popup blocked")&&(R="Popup was blocked. Please allow popups for this site and try again."),f({title:"Connection failed",description:R,variant:"destructive"})}finally{n(!1)}},[j,f,m,v]),I=p.useCallback(async()=>{try{n(!0),await xt.permanentDisconnect(),e(!1),i([]),l(null),u(null),h(null),f({title:"Disconnected",description:"Your Google Business Profile has been permanently disconnected."})}catch(_){console.error("Error disconnecting Google Business Profile:",_),f({title:"Disconnection failed",description:"Failed to disconnect. Please try again.",variant:"destructive"})}finally{n(!1)}},[f]),O=p.useCallback(_=>{l(_),u(null)},[]),T=p.useCallback(_=>{u(_)},[]),A=p.useCallback(async()=>{t&&await j()},[t,j]),S=p.useCallback(async _=>{console.log("OAuth callback received (not implemented in current frontend-only flow):",_)},[]);return{isConnected:t,isLoading:r,accounts:s,selectedAccount:o,selectedLocation:c,error:d,connectGoogleBusiness:E,disconnectGoogleBusiness:I,selectAccount:O,selectLocation:T,refreshAccounts:A,handleOAuthCallback:S}},Np=[{id:"pro_monthly",name:"1 Month Plan",amount:1099,currency:"INR",interval:"monthly",features:["Auto-Post Scheduling","Review Management & Auto-Reply","Performance Analytics","Advanced Analytics","API Access","Priority Support","Unlimited Google Business Profiles"],trialDays:15,popular:!1},{id:"pro_6months",name:"6 Months Plan",amount:5999,currency:"INR",interval:"yearly",features:["Auto-Post Scheduling","Review Management & Auto-Reply","Performance Analytics","Advanced Analytics","API Access","Priority Support","Unlimited Google Business Profiles","Save ₹600 compared to monthly"],trialDays:15,popular:!0},{id:"pro_yearly",name:"1 Year Plan",amount:9999,currency:"INR",interval:"yearly",features:["Auto-Post Scheduling","Review Management & Auto-Reply","Performance Analytics","Advanced Analytics","API Access","Priority Support","Unlimited Google Business Profiles","Best Value - Save ₹3189 per year"],trialDays:15,popular:!1}];class _c{static calculateTotalPrice(e){return e*this.BASE_PRICE_PER_PROFILE}static formatPriceDisplay(e){return`$${(this.calculateTotalPrice(e)/100).toFixed(0)}`}static getPricingBreakdown(e){const r=this.calculateTotalPrice(e);return{profileCount:e,pricePerProfile:this.BASE_PRICE_PER_PROFILE,totalPrice:r,displayPrice:this.formatPriceDisplay(e)}}static async createTrialSubscription(e,r,n){const s=await this.getSubscriptionByGBPAccount(r);if(s)return console.log("Subscription already exists for GBP account:",r),s;const i=bt.now(),o=new Date;o.setDate(o.getDate()+this.TRIAL_DAYS);const l={userId:e,gbpAccountId:r,email:n,status:"trial",trialStartDate:i,trialEndDate:bt.fromDate(o),createdAt:i,updatedAt:i,paymentHistory:[]},c=zf(Vf(rc,this.COLLECTION_NAME));return await zE(c,l),{...l,id:c.id}}static async getSubscriptionByGBPAccount(e){const r=FE(Vf(rc,this.COLLECTION_NAME),$E("gbpAccountId","==",e)),n=await VE(r);if(n.empty)return null;const s=n.docs[0];return{id:s.id,...s.data()}}static async getSubscriptionByUserId(e){const r=FE(Vf(rc,this.COLLECTION_NAME),$E("userId","==",e)),n=await VE(r);if(n.empty)return null;const s=n.docs[0];return{id:s.id,...s.data()}}static async updateSubscription(e,r){const n=zf(rc,this.COLLECTION_NAME,e);await GE(n,{...r,updatedAt:WE()})}static async checkSubscriptionStatus(e){const r=await this.getSubscriptionByGBPAccount(e);if(!r)return{isValid:!1,status:"none"};const n=new Date;if(r.status==="trial"){const s=r.trialEndDate.toDate(),i=Math.ceil((s.getTime()-n.getTime())/(1e3*60*60*24));return i>0?{isValid:!0,status:"trial",daysRemaining:i,subscription:r}:(await this.updateSubscription(r.id,{status:"expired"}),{isValid:!1,status:"expired",daysRemaining:0,subscription:{...r,status:"expired"}})}if(r.status==="active"){if(r.subscriptionEndDate){const s=r.subscriptionEndDate.toDate(),i=Math.ceil((s.getTime()-n.getTime())/(1e3*60*60*24));return i>0?{isValid:!0,status:"active",daysRemaining:i,subscription:r}:(await this.updateSubscription(r.id,{status:"expired"}),{isValid:!1,status:"expired",daysRemaining:0,subscription:{...r,status:"expired"}})}return{isValid:!0,status:"active",subscription:r}}return{isValid:!1,status:r.status,subscription:r}}static async addPaymentRecord(e,r){const n=zf(rc,this.COLLECTION_NAME,e),s=await cX(n);if(!s.exists())throw new Error("Subscription not found");const o=s.data().paymentHistory||[];o.push(r),await GE(n,{paymentHistory:o,updatedAt:WE()})}static async createTrialWithPaymentMethod(e,r,n,s,i,o){const l=bt.now(),c=new Date;c.setDate(c.getDate()+this.TRIAL_DAYS);const u={userId:e,gbpAccountId:r,email:n,status:"trial",trialStartDate:l,trialEndDate:bt.fromDate(c),profileCount:s,pricePerProfile:this.BASE_PRICE_PER_PROFILE,amount:this.calculateTotalPrice(s),currency:"USD",razorpayCustomerId:i,createdAt:l,updatedAt:l,paymentHistory:[]},d=zf(Vf(rc,this.COLLECTION_NAME));return await zE(d,u),{...u,id:d.id}}static async activateSubscription(e,r,n,s,i){const o=Np.find(d=>d.id===r);if(!o)throw new Error("Invalid plan ID");const l=new Date,c=new Date;o.interval==="monthly"?c.setMonth(c.getMonth()+1):c.setFullYear(c.getFullYear()+1);const u=r==="per_profile_yearly"?this.calculateTotalPrice(n):o.amount;await this.updateSubscription(e,{status:"active",planId:r,planName:o.name,amount:u,currency:o.currency,profileCount:r==="per_profile_yearly"?n:void 0,pricePerProfile:r==="per_profile_yearly"?this.BASE_PRICE_PER_PROFILE:void 0,razorpaySubscriptionId:s,razorpayCustomerId:i,subscriptionStartDate:bt.fromDate(l),subscriptionEndDate:bt.fromDate(c)})}static calculateTrialDaysRemaining(e){const r=new Date,n=e.toDate(),s=Math.ceil((n.getTime()-r.getTime())/(1e3*60*60*24));return Math.max(0,s)}}Je(_c,"COLLECTION_NAME","subscriptions"),Je(_c,"TRIAL_DAYS",15),Je(_c,"BASE_PRICE_PER_PROFILE",9900);const WM=p.createContext(void 0),ln=()=>{const t=p.useContext(WM);if(t===void 0)throw new Error("useSubscription must be used within a SubscriptionProvider");return t},Zre=({children:t})=>{var $;const[e,r]=p.useState(null),[n,s]=p.useState(!0),[i,o]=p.useState("none"),[l,c]=p.useState(null),[u,d]=p.useState(!1),[h,f]=p.useState(!0),[m,v]=p.useState(!1),[y,x]=p.useState(!1),[b,w]=p.useState(null),[j,E]=p.useState(!1),[I,O]=p.useState(!1),[T,A]=p.useState(!1),{currentUser:S}=Er(),{accounts:_}=pi(),{toast:P}=Rn(),R="http://localhost:5000",C=_&&_.length>0&&(($=_[0].name)==null?void 0:$.split("/")[1])||null;console.log("SubscriptionContext - GBP Account ID:",C),console.log("SubscriptionContext - Accounts:",_);const B=async()=>{if(T){console.log("Subscription check already in progress, skipping...");return}A(!0),console.log("Checking subscription status for GBP:",C,"User:",S==null?void 0:S.uid);try{if(S!=null&&S.uid&&!C){console.log("No GBP connected, checking by user ID:",S.uid);try{const ne=await fetch(`${R}/api/payment/subscription/status?userId=${S.uid}`,{headers:{"Content-Type":"application/json"}});if(ne.ok){const te=await ne.json();if(console.log("Subscription found by user ID:",te),te.status!=="none"){o(te.status),c(te.daysRemaining||null),r(te.subscription),f(te.canUsePlatform!==!1),v(te.requiresPayment===!0),x(te.billingOnly===!0),w(te.message||"Please reconnect your Google Business Profile to access all features."),d(te.status==="expired"||te.billingOnly===!0),s(!1),A(!1);return}}}catch(ne){console.log("User ID lookup failed, will check GBP when available:",ne)}}if(!C&&!(S!=null&&S.uid)){console.log("No GBP account ID or user ID, setting status to none"),o("none"),c(null),d(!1),s(!1),A(!1);return}try{s(!0);const ne=new URLSearchParams;C&&ne.append("gbpAccountId",C),S!=null&&S.uid&&ne.append("userId",S.uid);const te=await fetch(`${R}/api/payment/subscription/status?${ne.toString()}`,{headers:{"Content-Type":"application/json"}});if(te.ok){const z=await te.json();if(console.log("Subscription status from backend:",z),z.status==="none"&&C&&(S!=null&&S.uid)&&!I){console.log("🎉 No subscription found - auto-creating 15-day free trial..."),O(!0);try{const de=await fetch(`${R}/api/payment/subscription/trial`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:S.uid,gbpAccountId:C,email:S.email})});if(de.ok){const Z=await de.json();r(Z.subscription),o("trial"),c(15),d(!1),f(!0),v(!1),x(!1),w(null),P({title:"Trial Started!",description:"Your 15-day free trial has begun. Enjoy all features!"})}else{const Z=await de.json().catch(()=>({error:"Unknown error"}));console.error("❌ Trial creation failed:",Z),P({title:"Setup Error",description:Z.hint||Z.details||"Unable to create trial. Please contact support.",variant:"destructive"}),o("none"),d(!1),f(!0),v(!1),x(!1),w("Trial setup failed. Please contact support.")}}catch(de){console.error("❌ Error creating trial:",de),P({title:"Setup Error",description:"Unable to create trial. Please contact support.",variant:"destructive"}),o("none"),d(!1),f(!0),v(!1),x(!1),w("Trial setup failed. Please contact support.")}finally{O(!1),s(!1),A(!1)}return}o(z.status),c(z.daysRemaining||null),r(z.subscription),f(z.canUsePlatform!==!1),v(z.requiresPayment===!0),x(z.billingOnly===!0),w(z.message||null),d(z.status==="expired"||z.billingOnly===!0),z.status==="trial"&&z.daysRemaining&&z.daysRemaining<=3&&P({title:"Trial Ending Soon",description:`Your trial ends in ${z.daysRemaining} day(s). Upgrade now to continue using all features.`,variant:"default"}),z.status==="expired"&&z.billingOnly&&P({title:"Trial Expired",description:"Your 15-day trial has expired. Please upgrade to continue using all features.",variant:"destructive"})}else{const z=await _c.checkSubscriptionStatus(C);o(z.status),c(z.daysRemaining||null),r(z.subscription||null),d(!z.isValid)}}catch(ne){console.error("Error checking subscription status:",ne);try{const te=await _c.checkSubscriptionStatus(C);o(te.status),c(te.daysRemaining||null),r(te.subscription||null),d(!te.isValid)}catch(te){console.error("Firebase subscription check also failed:",te),o("none"),d(!0)}}finally{s(!1),A(!1)}}catch(ne){console.error("Outer error in checkSubscriptionStatus:",ne),s(!1),A(!1)}},G=async()=>{if(console.log("Creating trial subscription - User:",S==null?void 0:S.uid,"GBP:",C),!S||!C){console.error("Cannot create trial - missing user or GBP account"),P({title:"Error",description:"Please connect your Google Business Profile first",variant:"destructive"});return}if(I){console.log("Trial creation already in progress, skipping...");return}try{O(!0),s(!0);const ne=await fetch(`${R}/api/payment/subscription/trial`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:S.uid,gbpAccountId:C,email:S.email})});if(ne.ok){const te=await ne.json();r(te.subscription),o("trial"),c(15),d(!1),P({title:"Trial Started!",description:"Your 15-day free trial has begun. Enjoy all features!"})}else{const te=await _c.createTrialSubscription(S.uid,C,S.email);r(te),o("trial"),c(15),d(!1),P({title:"Trial Started!",description:"Your 15-day free trial has begun. Enjoy all features!"})}await B()}catch(ne){console.error("Error creating trial subscription:",ne),P({title:"Error",description:"Failed to start trial. Please try again.",variant:"destructive"})}finally{s(!1),O(!1)}},U=async ne=>{console.log("Upgrading to plan:",ne)},F=async()=>{if(!(!e||!C))try{if(s(!0),(await fetch(`${R}/api/payment/subscription/cancel`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({subscriptionId:e.id,gbpAccountId:C})})).ok)P({title:"Subscription Cancelled",description:"Your subscription has been cancelled."}),await B();else throw new Error("Failed to cancel subscription")}catch(ne){console.error("Error cancelling subscription:",ne),P({title:"Error",description:"Failed to cancel subscription. Please try again.",variant:"destructive"})}finally{s(!1)}};p.useEffect(()=>{if(I){console.log("Skipping subscription check - trial creation in progress");return}console.log("SubscriptionContext useEffect - gbpAccountId changed:",C);const te=sessionStorage.getItem("post_payment_reload")==="true"?3e3:0,z=setTimeout(()=>{C&&S?B():!C&&S?(console.log("No GBP account yet, checking subscription by user ID"),B()):!C&&!S&&(console.log("No GBP account or user, resetting subscription state"),o("none"),c(null),r(null),d(!1),s(!1))},te);return()=>clearTimeout(z)},[C,S==null?void 0:S.uid,I]),p.useEffect(()=>{if(!C)return;const ne=setInterval(()=>{B()},30*60*1e3);return()=>clearInterval(ne)},[C]);const M={subscription:e,isLoading:n,status:i,daysRemaining:l,plans:Np,checkSubscriptionStatus:B,createTrialSubscription:G,upgradeToPaid:U,cancelSubscription:F,isFeatureBlocked:u,canUsePlatform:h,requiresPayment:m,billingOnly:y,message:b,showTrialSetup:j,setShowTrialSetup:E};return a.jsx(WM.Provider,{value:M,children:t})},ene=fh("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),ml=p.forwardRef(({className:t,variant:e,...r},n)=>a.jsx("div",{ref:n,role:"alert",className:ye(ene({variant:e}),t),...r}));ml.displayName="Alert";const tne=p.forwardRef(({className:t,...e},r)=>a.jsx("h5",{ref:r,className:ye("mb-1 font-medium leading-none tracking-tight",t),...e}));tne.displayName="AlertTitle";const pl=p.forwardRef(({className:t,...e},r)=>a.jsx("div",{ref:r,className:ye("text-sm [&_p]:leading-relaxed",t),...e}));pl.displayName="AlertDescription";var rj={},nj={};Object.defineProperty(nj,"__esModule",{value:!0});class rne{constructor(e){this.instance=void 0,this.options=e,typeof window<"u"&&(this.instance=new window.Razorpay(this.options))}on(e,r){if(!this.instance)throw new Error("Razorpay Instance in not ready");this.instance.on(e,r)}open(){if(!this.instance)throw new Error("Razorpay Instance in not ready");this.instance.open()}}nj.default=rne;var nne=io&&io.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),sne=io&&io.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),ane=io&&io.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&nne(e,t,r);return sne(e,t),e},ine=io&&io.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(rj,"__esModule",{value:!0});var vy=rj.useRazorpay=void 0;const jx=ane(p),one=ine(nj),lne=()=>{const[t,e]=jx.useState(!1),[r,n]=jx.useState(),s=typeof window<"u",i=()=>!(!s||!("Razorpay"in window));function o(l){return new Promise((c,u)=>{const d=window.document.createElement("script");d.src=l,d.onload=function(){c()},d.onerror=function(h){u(h.toString())},document.body.appendChild(d)})}return jx.useEffect(()=>{s&&(e(!0),i()||o("https://checkout.razorpay.com/v1/checkout.js").then(()=>{n(void 0)}).catch(l=>{l instanceof Error?n(l.message):n("Unknown Error")}).finally(()=>e(!1)))},[]),{error:r,isLoading:t,Razorpay:one.default}};vy=rj.useRazorpay=lne;var xy="Dialog",[qM,HM]=Dr(xy),[cne,Ks]=qM(xy),KM=t=>{const{__scopeDialog:e,children:r,open:n,defaultOpen:s,onOpenChange:i,modal:o=!0}=t,l=p.useRef(null),c=p.useRef(null),[u,d]=Bs({prop:n,defaultProp:s??!1,onChange:i,caller:xy});return a.jsx(cne,{scope:e,triggerRef:l,contentRef:c,contentId:ys(),titleId:ys(),descriptionId:ys(),open:u,onOpenChange:d,onOpenToggle:p.useCallback(()=>d(h=>!h),[d]),modal:o,children:r})};KM.displayName=xy;var YM="DialogTrigger",QM=p.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=Ks(YM,r),i=We(e,s.triggerRef);return a.jsx(Re.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":ij(s.open),...n,ref:i,onClick:ve(t.onClick,s.onOpenToggle)})});QM.displayName=YM;var sj="DialogPortal",[une,XM]=qM(sj,{forceMount:void 0}),JM=t=>{const{__scopeDialog:e,forceMount:r,children:n,container:s}=t,i=Ks(sj,e);return a.jsx(une,{scope:e,forceMount:r,children:p.Children.map(n,o=>a.jsx(Mr,{present:r||i.open,children:a.jsx(du,{asChild:!0,container:s,children:o})}))})};JM.displayName=sj;var _p="DialogOverlay",ZM=p.forwardRef((t,e)=>{const r=XM(_p,t.__scopeDialog),{forceMount:n=r.forceMount,...s}=t,i=Ks(_p,t.__scopeDialog);return i.modal?a.jsx(Mr,{present:n||i.open,children:a.jsx(hne,{...s,ref:e})}):null});ZM.displayName=_p;var dne=oo("DialogOverlay.RemoveScroll"),hne=p.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=Ks(_p,r);return a.jsx(Oh,{as:dne,allowPinchZoom:!0,shards:[s.contentRef],children:a.jsx(Re.div,{"data-state":ij(s.open),...n,ref:e,style:{pointerEvents:"auto",...n.style}})})}),Cl="DialogContent",e4=p.forwardRef((t,e)=>{const r=XM(Cl,t.__scopeDialog),{forceMount:n=r.forceMount,...s}=t,i=Ks(Cl,t.__scopeDialog);return a.jsx(Mr,{present:n||i.open,children:i.modal?a.jsx(fne,{...s,ref:e}):a.jsx(mne,{...s,ref:e})})});e4.displayName=Cl;var fne=p.forwardRef((t,e)=>{const r=Ks(Cl,t.__scopeDialog),n=p.useRef(null),s=We(e,r.contentRef,n);return p.useEffect(()=>{const i=n.current;if(i)return oy(i)},[]),a.jsx(t4,{...t,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ve(t.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=r.triggerRef.current)==null||o.focus()}),onPointerDownOutside:ve(t.onPointerDownOutside,i=>{const o=i.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&i.preventDefault()}),onFocusOutside:ve(t.onFocusOutside,i=>i.preventDefault())})}),mne=p.forwardRef((t,e)=>{const r=Ks(Cl,t.__scopeDialog),n=p.useRef(!1),s=p.useRef(!1);return a.jsx(t4,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=t.onCloseAutoFocus)==null||o.call(t,i),i.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),i.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:i=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((u=r.triggerRef.current)==null?void 0:u.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),t4=p.forwardRef((t,e)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=t,l=Ks(Cl,r),c=p.useRef(null),u=We(e,c);return iy(),a.jsxs(a.Fragment,{children:[a.jsx(Ih,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:i,children:a.jsx(Vl,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":ij(l.open),...o,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),a.jsxs(a.Fragment,{children:[a.jsx(gne,{titleId:l.titleId}),a.jsx(vne,{contentRef:c,descriptionId:l.descriptionId})]})]})}),aj="DialogTitle",r4=p.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=Ks(aj,r);return a.jsx(Re.h2,{id:s.titleId,...n,ref:e})});r4.displayName=aj;var n4="DialogDescription",s4=p.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=Ks(n4,r);return a.jsx(Re.p,{id:s.descriptionId,...n,ref:e})});s4.displayName=n4;var a4="DialogClose",i4=p.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=Ks(a4,r);return a.jsx(Re.button,{type:"button",...n,ref:e,onClick:ve(t.onClick,()=>s.onOpenChange(!1))})});i4.displayName=a4;function ij(t){return t?"open":"closed"}var o4="DialogTitleWarning",[pne,l4]=zB(o4,{contentName:Cl,titleName:aj,docsSlug:"dialog"}),gne=({titleId:t})=>{const e=l4(o4),r=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return p.useEffect(()=>{t&&(document.getElementById(t)||console.error(r))},[r,t]),null},yne="DialogDescriptionWarning",vne=({contentRef:t,descriptionId:e})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${l4(yne).contentName}}.`;return p.useEffect(()=>{var i;const s=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(n))},[n,t,e]),null},c4=KM,u4=QM,d4=JM,oj=ZM,lj=e4,cj=r4,uj=s4,dj=i4;const bs=c4,xne=u4,bne=d4,h4=p.forwardRef(({className:t,...e},r)=>a.jsx(oj,{ref:r,className:ye("fixed inset-0 z-[100] bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));h4.displayName=oj.displayName;const Qn=p.forwardRef(({className:t,children:e,...r},n)=>a.jsxs(bne,{children:[a.jsx(h4,{}),a.jsxs(lj,{ref:n,className:ye("fixed left-[50%] top-[50%] z-[110] grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...r,children:[e,a.jsxs(dj,{className:"absolute right-4 top-4 z-[120] rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[a.jsx(Hs,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Qn.displayName=lj.displayName;const Xn=({className:t,...e})=>a.jsx("div",{className:ye("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});Xn.displayName="DialogHeader";const kl=({className:t,...e})=>a.jsx("div",{className:ye("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});kl.displayName="DialogFooter";const Jn=p.forwardRef(({className:t,...e},r)=>a.jsx(cj,{ref:r,className:ye("text-lg font-semibold leading-none tracking-tight",t),...e}));Jn.displayName=cj.displayName;const Zn=p.forwardRef(({className:t,...e},r)=>a.jsx(uj,{ref:r,className:ye("text-sm text-muted-foreground",t),...e}));Zn.displayName=uj.displayName;function hj(t){const e=p.useRef({value:t,previous:t});return p.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var fj="Radio",[wne,f4]=Dr(fj),[jne,Nne]=wne(fj),m4=p.forwardRef((t,e)=>{const{__scopeRadio:r,name:n,checked:s=!1,required:i,disabled:o,value:l="on",onCheck:c,form:u,...d}=t,[h,f]=p.useState(null),m=We(e,x=>f(x)),v=p.useRef(!1),y=h?u||!!h.closest("form"):!0;return a.jsxs(jne,{scope:r,checked:s,disabled:o,children:[a.jsx(Re.button,{type:"button",role:"radio","aria-checked":s,"data-state":v4(s),"data-disabled":o?"":void 0,disabled:o,value:l,...d,ref:m,onClick:ve(t.onClick,x=>{s||c==null||c(),y&&(v.current=x.isPropagationStopped(),v.current||x.stopPropagation())})}),y&&a.jsx(y4,{control:h,bubbles:!v.current,name:n,value:l,checked:s,required:i,disabled:o,form:u,style:{transform:"translateX(-100%)"}})]})});m4.displayName=fj;var p4="RadioIndicator",g4=p.forwardRef((t,e)=>{const{__scopeRadio:r,forceMount:n,...s}=t,i=Nne(p4,r);return a.jsx(Mr,{present:n||i.checked,children:a.jsx(Re.span,{"data-state":v4(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:e})})});g4.displayName=p4;var _ne="RadioBubbleInput",y4=p.forwardRef(({__scopeRadio:t,control:e,checked:r,bubbles:n=!0,...s},i)=>{const o=p.useRef(null),l=We(o,i),c=hj(r),u=Aw(e);return p.useEffect(()=>{const d=o.current;if(!d)return;const h=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(h,"checked").set;if(c!==r&&m){const v=new Event("click",{bubbles:n});m.call(d,r),d.dispatchEvent(v)}},[c,r,n]),a.jsx(Re.input,{type:"radio","aria-hidden":!0,defaultChecked:r,...s,tabIndex:-1,ref:l,style:{...s.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});y4.displayName=_ne;function v4(t){return t?"checked":"unchecked"}var Sne=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],by="RadioGroup",[Ane,QNe]=Dr(by,[Nu,f4]),x4=Nu(),b4=f4(),[Ene,Pne]=Ane(by),w4=p.forwardRef((t,e)=>{const{__scopeRadioGroup:r,name:n,defaultValue:s,value:i,required:o=!1,disabled:l=!1,orientation:c,dir:u,loop:d=!0,onValueChange:h,...f}=t,m=x4(r),v=ju(u),[y,x]=Bs({prop:i,defaultProp:s??null,onChange:h,caller:by});return a.jsx(Ene,{scope:r,name:n,required:o,disabled:l,value:y,onValueChange:x,children:a.jsx(M1,{asChild:!0,...m,orientation:c,dir:v,loop:d,children:a.jsx(Re.div,{role:"radiogroup","aria-required":o,"aria-orientation":c,"data-disabled":l?"":void 0,dir:v,...f,ref:e})})})});w4.displayName=by;var j4="RadioGroupItem",N4=p.forwardRef((t,e)=>{const{__scopeRadioGroup:r,disabled:n,...s}=t,i=Pne(j4,r),o=i.disabled||n,l=x4(r),c=b4(r),u=p.useRef(null),d=We(e,u),h=i.value===s.value,f=p.useRef(!1);return p.useEffect(()=>{const m=y=>{Sne.includes(y.key)&&(f.current=!0)},v=()=>f.current=!1;return document.addEventListener("keydown",m),document.addEventListener("keyup",v),()=>{document.removeEventListener("keydown",m),document.removeEventListener("keyup",v)}},[]),a.jsx(L1,{asChild:!0,...l,focusable:!o,active:h,children:a.jsx(m4,{disabled:o,required:i.required,checked:h,...c,...s,name:i.name,ref:d,onCheck:()=>i.onValueChange(s.value),onKeyDown:ve(m=>{m.key==="Enter"&&m.preventDefault()}),onFocus:ve(s.onFocus,()=>{var m;f.current&&((m=u.current)==null||m.click())})})})});N4.displayName=j4;var Tne="RadioGroupIndicator",_4=p.forwardRef((t,e)=>{const{__scopeRadioGroup:r,...n}=t,s=b4(r);return a.jsx(g4,{...s,...n,ref:e})});_4.displayName=Tne;var S4=w4,A4=N4,Cne=_4;const E4=p.forwardRef(({className:t,...e},r)=>a.jsx(S4,{className:ye("grid gap-2",t),...e,ref:r}));E4.displayName=S4.displayName;const P4=p.forwardRef(({className:t,...e},r)=>a.jsx(A4,{ref:r,className:ye("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...e,children:a.jsx(Cne,{className:"flex items-center justify-center",children:a.jsx(dI,{className:"h-2.5 w-2.5 fill-current text-current"})})}));P4.displayName=A4.displayName;const T4=p.createContext(void 0),kne=({children:t})=>{const e=pi();return a.jsx(T4.Provider,{value:e,children:t})},Su=()=>{const t=p.useContext(T4);if(t===void 0)throw new Error("useGoogleBusinessProfileContext must be used within a GoogleBusinessProfileProvider");return t},mj=({isOpen:t,onClose:e,defaultPlanId:r="pro_6months"})=>{const[n,s]=p.useState(r),[i,o]=p.useState(1),[l,c]=p.useState(!1),[u,d]=p.useState(""),[h,f]=p.useState(null),[m,v]=p.useState(!1),[y,x]=p.useState(88.718),{Razorpay:b}=vy(),{currentUser:w}=Er(),{subscription:j,checkSubscriptionStatus:E}=ln(),{accounts:I,locations:O}=Su(),{toast:T}=Rn(),A=cr(),S="http://localhost:5000",_="rzp_live_RWwON57KV1LaJn",P=Np.find(U=>U.id===n),R=(I==null?void 0:I.reduce((U,F)=>{var M;return U+(((M=F.locations)==null?void 0:M.length)||0)},0))||0;p.useEffect(()=>{n==="per_profile_yearly"&&R>0&&o(Math.max(1,R))},[n,R]),p.useEffect(()=>{t&&(async()=>{try{console.log("[PaymentModal] 🔄 Fetching live exchange rate...");const F=await fetch(`${S}/api/payment/detect-currency`);if(F.ok){const $=(await F.json()).exchangeRate||88.718;x($),console.log(`[PaymentModal] ✅ Live exchange rate: 1 USD = ${$} INR`)}else console.warn("[PaymentModal] ⚠️ Using fallback rate: 88.718 INR")}catch(F){console.error("[PaymentModal] ❌ Error fetching exchange rate:",F),console.warn("[PaymentModal] ⚠️ Using fallback rate: 88.718 INR")}})()},[t,S]);const C=async()=>{if(!(!u||!P)){v(!0);try{const F=await(await fetch(`${S}/api/payment/coupon/validate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:u,amount:P.amount,userId:w==null?void 0:w.uid})})).json();F.success?(f(F),T({title:"Coupon Applied!",description:`${F.description} - You save $${(F.discountAmount/100).toFixed(2)}`})):(f(null),T({title:"Invalid Coupon",description:F.error,variant:"destructive"}))}catch(U){console.error("Error validating coupon:",U),T({title:"Error",description:"Failed to validate coupon",variant:"destructive"})}finally{v(!1)}}},B=()=>{const U=(P==null?void 0:P.amount)||0;return h&&h.success?h.finalAmount:U},G=async()=>{if(!w||!P){T({title:"Error",description:"Please select a plan and ensure you're logged in",variant:"destructive"});return}if(!b){T({title:"Error",description:"Payment system is not loaded. Please refresh the page and try again.",variant:"destructive"});return}c(!0);try{T({title:"Initializing Payment",description:"Please wait while we set up your payment..."});const U=P.amount,F="INR";console.log(`[Payment] 💰 Processing payment: ₹${U/100} (${F})`);let M,$=0;const ne=3;for(;$<ne;)try{if(M=await fetch(`${S}/api/payment/order`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:U,currency:F,couponCode:h!=null&&h.success?u:void 0,notes:{planId:P.id,userId:w.uid,email:w.email,gbpAccountId:j==null?void 0:j.gbpAccountId}})}),M.ok)break;throw new Error(`HTTP ${M.status}: ${M.statusText}`)}catch(Z){if($++,console.warn(`Order creation attempt ${$} failed:`,Z),$>=ne)throw new Error(`Failed to create order after ${ne} attempts: ${Z.message}`);await new Promise(re=>setTimeout(re,1e3*$))}if(!M.ok){const Z=await M.text();throw new Error(`Failed to create order: ${Z}`)}const{order:te,finalAmount:z}=await M.json();if(!te||!te.id||!te.amount)throw new Error("Invalid order data received from server");const de={key:_,amount:te.amount,currency:te.currency,name:"Google Ranker",description:P.name,order_id:te.id,timeout:300,retry:{enabled:!0,max_count:3},handler:async Z=>{try{if((await fetch(`${S}/api/payment/verify`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({razorpay_order_id:Z.razorpay_order_id,razorpay_payment_id:Z.razorpay_payment_id,razorpay_signature:Z.razorpay_signature,subscriptionId:j==null?void 0:j.id,gbpAccountId:j==null?void 0:j.gbpAccountId,planId:P.id})})).ok)e(),sessionStorage.setItem("post_payment_reload","true"),setTimeout(async()=>{try{await E(),window.location.reload()}catch(_e){console.error("Failed to refresh subscription status:",_e),window.location.reload()}},2e3),A("/payment-success");else throw new Error("Payment verification failed")}catch(re){console.error("Payment handler error:",re),T({title:"Payment Error",description:"There was an issue processing your payment. Please try again.",variant:"destructive"}),c(!1)}},prefill:{name:w.displayName||"",email:w.email||"",contact:""},notes:{address:"Google Ranker Corporate Office"},theme:{color:"#1E2DCD",backdrop_color:"rgba(0, 0, 0, 0.5)"},config:{display:{blocks:{card:{name:"Credit/Debit Cards",instruments:[{method:"card",types:["credit","debit"],issuers:["VISA","MC","AMEX","RUPAY","MAES","BAJAJ"],flows:["3ds","ivr","otp","pin"]}]},paypal:{name:"PayPal",instruments:[{method:"paypal"}]},intl_bank_transfer:{name:"International Bank Transfer",instruments:[{method:"bank_transfer"}]},utib:{name:"UPI (India)",instruments:[{method:"upi"}]},banks:{name:"Net Banking (India)",instruments:[{method:"netbanking",banks:["HDFC","ICIC","SBIN","AXIS","YESB","KKBK","PUNB_R"]}]},wallet:{name:"Digital Wallets",instruments:[{method:"wallet",wallets:["paytm","mobikwik","phonepe","amazonpay","freecharge","jiomoney","paypal","airtelmoney","jiomoney"]}]},international:{name:"International Methods",instruments:[{method:"app",apps:["gpay_int","paypal","phonepe_switch"]}]}},sequence:["block.card","block.paypal","block.international","block.intl_bank_transfer","block.utib","block.banks","block.wallet"],preferences:{show_default_blocks:!0}}},modal:{ondismiss:()=>{c(!1),T({title:"Payment Cancelled",description:"Your payment was cancelled. You can try again when ready.",variant:"default"})},escape:!0,backdropclose:!1,handleback:!0,confirm_close:!0,animation:!0}};try{const Z=new b(de);Z.on("payment.failed",function(re){console.error("Payment failed:",re.error),c(!1),T({title:"Payment Failed",description:re.error.description||"Your payment could not be processed. Please try again.",variant:"destructive"})}),e(),setTimeout(()=>{Z.open(),T({title:"Payment Gateway Loaded",description:"Choose your preferred payment method to continue."})},100)}catch(Z){throw console.error("Failed to initialize Razorpay:",Z),new Error("Failed to initialize payment gateway. Please refresh and try again.")}}catch(U){console.error("Payment error:",U);let F="There was an error processing your payment. Please try again.";U.message.includes("network")||U.message.includes("fetch")?F="Network error. Please check your internet connection and try again.":U.message.includes("order")?F="Failed to create payment order. Please try again.":U.message.includes("Razorpay")&&(F="Payment gateway error. Please refresh the page and try again."),T({title:"Payment Failed",description:F,variant:"destructive"})}finally{c(!1)}};return a.jsx(bs,{open:t,onOpenChange:e,children:a.jsxs(Qn,{className:"max-w-3xl h-[90vh] p-0 flex flex-col",children:[a.jsxs(Xn,{className:"flex-shrink-0 bg-background z-20 px-6 pt-6 pb-4 border-b",children:[a.jsx(Jn,{children:"Upgrade to Premium"}),a.jsx(Zn,{children:"Choose your subscription plan and unlock unlimited Google Business Profiles with premium features."})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto px-6 py-4",style:{minHeight:0},children:[a.jsx(E4,{value:n,onValueChange:s,className:"space-y-4",children:Np.map(U=>a.jsxs(H,{className:`cursor-pointer transition-all relative ${n===U.id?"border-primary ring-2 ring-primary ring-opacity-20":U.popular?"border-primary/50 hover:border-primary":"border-gray-200 hover:border-gray-300"}`,onClick:()=>s(U.id),children:[U.popular&&a.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2 z-10",children:a.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-blue-600 text-white px-3 py-1 rounded-full text-xs font-bold shadow-lg",children:"MOST POPULAR"})}),a.jsx(me,{className:"pb-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(P4,{value:U.id}),a.jsxs("div",{children:[a.jsx(ge,{className:"text-lg",children:U.name}),a.jsxs(Qe,{className:"mt-1",children:["₹",U.amount]})]})]}),U.id==="pro_yearly"&&a.jsx("div",{className:"bg-green-100 text-green-800 px-2 py-1 rounded-md text-sm font-medium",children:"Best Value"})]})}),a.jsx(Y,{children:a.jsx("ul",{className:"space-y-2",children:U.features.map((F,M)=>a.jsxs("li",{className:"flex items-start space-x-2",children:[a.jsx(Zi,{className:"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0"}),a.jsx("span",{className:"text-sm text-gray-600",children:F})]},M))})})]},U.id))}),a.jsxs("div",{className:"mt-6 space-y-4",children:[a.jsx("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(f9,{className:"h-5 w-5 text-purple-600"}),a.jsx("p",{className:"text-sm font-medium text-purple-900",children:"Have a coupon code?"})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx(Ze,{placeholder:"Enter coupon code",value:u,onChange:U=>d(U.target.value.toUpperCase()),className:"flex-1",disabled:m}),a.jsx(K,{onClick:C,disabled:!u||m||!P,variant:"outline",size:"sm",children:m?"Validating...":"Apply"})]}),h&&h.success&&a.jsx("div",{className:"bg-green-100 rounded-md p-2",children:a.jsxs("p",{className:"text-sm text-green-800",children:["✓ ",h.description," - You save $",(h.discountAmount/100).toFixed(2),"!"]})})]})}),a.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx($s,{className:"h-5 w-5 text-blue-600 mt-0.5"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium text-blue-900 mb-2",children:"💳 Multiple Payment Options Available"}),a.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs text-blue-700",children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("span",{children:"🏦"}),a.jsx("span",{children:"Net Banking"})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("span",{children:"📱"}),a.jsx("span",{children:"UPI (GPay, PhonePe, Paytm)"})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("span",{children:"💳"}),a.jsx("span",{children:"Credit/Debit Cards"})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("span",{children:"👝"}),a.jsx("span",{children:"Digital Wallets"})]})]}),a.jsx("p",{className:"text-sm text-blue-700 mt-2",children:"Your payment information is encrypted and secure. We support Cards, PayPal, UPI, Net Banking, and international payment methods via Razorpay."}),a.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"💡 All payments are processed securely in INR (Indian Rupees)"})]})]})}),a.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx(Sg,{className:"h-5 w-5 text-green-600 mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-green-900",children:"Instant Activation"}),a.jsx("p",{className:"text-sm text-green-700 mt-1",children:"Your subscription will be activated immediately after payment confirmation."})]})]})})]})]}),a.jsx("div",{className:"flex-shrink-0 bg-background border-t px-6 py-4",children:a.jsxs("div",{className:"flex items-center justify-between gap-4",children:[a.jsxs("div",{children:[h&&h.success?a.jsxs("div",{children:[a.jsxs("p",{className:"text-sm text-gray-500 line-through",children:["₹",P==null?void 0:P.amount]}),a.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["₹",B()]})]}):a.jsxs("div",{children:[a.jsxs("p",{className:"text-2xl font-bold",children:["₹",B()]}),a.jsx("p",{className:"text-sm text-gray-600",children:P==null?void 0:P.name})]}),a.jsx("p",{className:"text-sm text-gray-500",children:"Plus applicable taxes"})]}),a.jsxs("div",{className:"flex gap-3 flex-shrink-0",children:[a.jsx(K,{variant:"outline",onClick:e,disabled:l,className:"min-w-[100px]",children:"Cancel"}),a.jsx(K,{onClick:G,disabled:l,className:"min-w-[160px] bg-primary hover:bg-primary/90",children:l?a.jsx(a.Fragment,{children:"Processing..."}):a.jsxs(a.Fragment,{children:[a.jsx(Sr,{className:"mr-2 h-4 w-4"}),"Proceed to Payment"]})})]})]})})]})})},Ine=({message:t="Your 2-minute trial has expired",daysRemaining:e=0,isExpired:r=!0})=>{const n=cr(),[s,i]=p.useState(!1);return a.jsxs("div",{className:"fixed inset-0 bg-background/95 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:[a.jsxs(H,{className:"max-w-2xl w-full",children:[a.jsxs(me,{className:"text-center pb-2",children:[a.jsx("div",{className:"mx-auto mb-4 h-12 w-12 rounded-full bg-red-100 flex items-center justify-center",children:r?a.jsx(Ri,{className:"h-6 w-6 text-red-600"}):a.jsx(Yn,{className:"h-6 w-6 text-orange-600"})}),a.jsx(ge,{className:"text-2xl",children:r?"Trial Period Expired":"Trial Ending Soon"}),a.jsx(Qe,{className:"mt-2 text-base",children:t})]}),a.jsxs(Y,{className:"space-y-6",children:[a.jsxs(ml,{className:r?"border-red-200 bg-red-50":"border-orange-200 bg-orange-50",children:[a.jsx(m9,{className:`h-4 w-4 ${r?"text-red-600":"text-orange-600"}`}),a.jsx(pl,{className:r?"text-red-800":"text-orange-800",children:r?"Your access to all features has been restricted. Only the billing page is accessible until you upgrade.":`You have ${e} days remaining in your trial. Upgrade now to ensure uninterrupted access.`})]}),a.jsxs("div",{className:"rounded-lg border p-4 bg-muted/30",children:[a.jsx("h3",{className:"font-semibold mb-3",children:"Features Currently Locked:"}),a.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[a.jsxs("li",{className:"flex items-center",children:[a.jsx(Ri,{className:"h-4 w-4 mr-2 text-red-500"}),"Auto-posting to Google Business Profile"]}),a.jsxs("li",{className:"flex items-center",children:[a.jsx(Ri,{className:"h-4 w-4 mr-2 text-red-500"}),"Automated review replies"]}),a.jsxs("li",{className:"flex items-center",children:[a.jsx(Ri,{className:"h-4 w-4 mr-2 text-red-500"}),"Performance analytics and insights"]}),a.jsxs("li",{className:"flex items-center",children:[a.jsx(Ri,{className:"h-4 w-4 mr-2 text-red-500"}),"Multiple location management"]}),a.jsxs("li",{className:"flex items-center",children:[a.jsx(Ri,{className:"h-4 w-4 mr-2 text-red-500"}),"Smart content generation"]})]})]}),a.jsx("div",{className:"rounded-lg border border-green-200 bg-green-50 p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-green-900",children:"Unlock All Features"}),a.jsx("p",{className:"text-sm text-green-700 mt-1",children:"Just $99 per profile/year"})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-xs text-green-600",children:"Limited Time Offer"}),a.jsx("p",{className:"text-lg font-bold text-green-900",children:"Save 80%"}),a.jsx("p",{className:"text-xs text-green-600",children:"Regular price $499"})]})]})}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-2",children:[a.jsxs(K,{onClick:()=>i(!0),className:"flex-1",size:"lg",children:[a.jsx(Sr,{className:"mr-2 h-4 w-4"}),"Upgrade Now"]}),!r&&a.jsx(K,{onClick:()=>n("/dashboard/billing"),variant:"outline",className:"flex-1",size:"lg",children:"View Billing Details"})]}),a.jsxs("div",{className:"text-center text-sm text-muted-foreground pt-2 border-t",children:["Need help? Contact support at"," ",a.jsx("a",{href:"mailto:support@googleranker.com",className:"text-primary hover:underline",children:"support@googleranker.com"})]})]})]}),a.jsx(mj,{isOpen:s,onClose:()=>i(!1),defaultPlanId:"monthly_basic"})]})},Rne=({children:t})=>{const e=Bl();cr();const{isLoading:r,status:n,billingOnly:s,requiresPayment:i,canUsePlatform:o,daysRemaining:l,message:c}=ln(),u=e.pathname.includes("/billing")||e.pathname.includes("/upgrade");return r?a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:a.jsx(Gm,{className:"h-8 w-8 animate-spin text-primary"})}):u?a.jsx(a.Fragment,{children:t}):n==="expired"&&i||s===!0&&n!=="active"||o===!1&&n!=="active"?a.jsx(Ine,{message:c||"Your trial has expired. Upgrade now to continue using all features.",daysRemaining:l||0,isExpired:!0}):a.jsx(a.Fragment,{children:t})},One=({children:t})=>{const e=Bl();return["/dashboard/billing","/dashboard/upgrade","/billing","/upgrade"].some(s=>e.pathname.includes(s))?a.jsx(a.Fragment,{children:t}):a.jsx(Rne,{children:t})},C4=({isOpen:t,onClose:e,onSuccess:r})=>{const[n,s]=p.useState(!1),[i,o]=p.useState(null),[l,c]=p.useState(!1),{Razorpay:u}=vy(),{currentUser:d}=Er(),{subscription:h}=ln(),{toast:f}=Rn(),m="http://localhost:5000",v="rzp_live_RWwON57KV1LaJn";p.useEffect(()=>{t&&(h!=null&&h.gbpAccountId||d!=null&&d.uid)&&y()},[t,h==null?void 0:h.gbpAccountId,d==null?void 0:d.uid]);const y=async()=>{if(!d)return;const b=(h==null?void 0:h.gbpAccountId)||d.uid;try{console.log("[MandateSetup] Checking mandate status for:",b);const w=await fetch(`${m}/api/payment/mandate/status/${b}`);if(w.ok){const j=await w.json();console.log("[MandateSetup] Mandate status:",j),c(j.mandateAuthorized||!1),o(j.razorpayCustomerId||null)}}catch(w){console.error("[MandateSetup] Error checking mandate status:",w)}},x=async()=>{if(console.log("[MandateSetup] Starting mandate setup...",{hasCurrentUser:!!d,hasSubscription:!!h,gbpAccountId:h==null?void 0:h.gbpAccountId}),!d){f({title:"Error",description:"Please log in first",variant:"destructive"});return}const b=(h==null?void 0:h.gbpAccountId)||d.uid;if(!u){f({title:"Error",description:"Payment system is not loaded. Please refresh the page.",variant:"destructive"});return}s(!0);try{let w=i;if(!w){f({title:"Setting up auto-payments",description:"Creating your payment profile..."}),console.log("[MandateSetup] Creating customer with data:",{userId:d.uid,email:d.email,gbpAccountId:b});const T=await fetch(`${m}/api/payment/mandate/setup`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:d.uid,email:d.email,name:d.displayName||d.email,contact:d.phoneNumber||"",gbpAccountId:b})});if(!T.ok){const S=await T.json().catch(()=>({}));throw console.error("[MandateSetup] Setup failed:",S),new Error(S.details||S.error||"Failed to setup mandate")}const A=await T.json();if(console.log("[MandateSetup] Customer created:",A),A.alreadyAuthorized){console.log("[MandateSetup] ✅ Mandate already authorized, no action needed"),f({title:"Already Set Up",description:"Your payment method is already authorized. No action needed."}),s(!1),r();return}w=A.customerId,o(w)}f({title:"Payment Authorization",description:"Creating authorization request..."});const j=await fetch(`${m}/api/payment/mandate/create-auth-order`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customerId:w,amount:200,currency:"INR",userId:d.uid,gbpAccountId:b})});if(!j.ok){const T=await j.json().catch(()=>({}));throw console.error("[MandateSetup] Order creation failed:",T),new Error(T.details||T.error||"Failed to create authorization order")}const{order:E}=await j.json();console.log("[MandateSetup] Authorization order created:",E.id);const I={key:v,amount:E.amount,currency:E.currency,name:"Google Ranker",description:"Auto-payment setup - You will be charged ₹2 for authorization",order_id:E.id,recurring:"1",handler:async T=>{try{if(console.log("[MandateSetup] Payment successful, verifying..."),(await fetch(`${m}/api/payment/mandate/verify`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({razorpay_order_id:T.razorpay_order_id,razorpay_payment_id:T.razorpay_payment_id,razorpay_signature:T.razorpay_signature,customerId:w,gbpAccountId:b})})).ok)c(!0),f({title:"Success!",description:"Auto-payment has been set up successfully"}),r&&r(),setTimeout(()=>e(),2e3);else throw new Error("Mandate verification failed")}catch(A){console.error("Mandate verification error:",A),f({title:"Verification Error",description:"Failed to verify mandate authorization. Please try again.",variant:"destructive"})}finally{s(!1)}},prefill:{name:d.displayName||"",email:d.email||"",contact:d.phoneNumber||""},notes:{purpose:"mandate_authorization"},theme:{color:"#1E2DCD"},modal:{ondismiss:()=>{s(!1),f({title:"Authorization Cancelled",description:"You can set up auto-payment later from billing settings."})}}},O=new u(I);O.on("payment.failed",T=>{console.error("Payment failed:",T.error),s(!1),f({title:"Authorization Failed",description:T.error.description||"Unable to authorize payment method",variant:"destructive"})}),O.open()}catch(w){console.error("Mandate setup error:",w),f({title:"Setup Error",description:"Failed to set up auto-payment. Please try again.",variant:"destructive"}),s(!1)}};return l?a.jsx(bs,{open:t,onOpenChange:e,children:a.jsxs(Qn,{className:"sm:max-w-md",children:[a.jsxs(Xn,{children:[a.jsx("div",{className:"mx-auto mb-4 h-12 w-12 rounded-full bg-green-100 flex items-center justify-center",children:a.jsx(Yt,{className:"h-6 w-6 text-green-600"})}),a.jsx(Jn,{className:"text-center",children:"Auto-Payment Active"}),a.jsx(Zn,{className:"text-center",children:"Your auto-payment is already set up and active"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs(ml,{className:"bg-green-50 border-green-200",children:[a.jsx(eo,{className:"h-4 w-4 text-green-600"}),a.jsx(pl,{className:"text-green-800",children:"We'll automatically charge your payment method when your subscription renews."})]}),a.jsx(K,{onClick:e,className:"w-full",children:"Close"})]})]})}):a.jsx(bs,{open:t,onOpenChange:()=>{},children:a.jsxs(Qn,{className:"sm:max-w-md",onPointerDownOutside:b=>b.preventDefault(),onEscapeKeyDown:b=>b.preventDefault(),children:[a.jsxs(Xn,{children:[a.jsx("div",{className:"mx-auto mb-4 h-12 w-12 rounded-full bg-blue-100 flex items-center justify-center",children:a.jsx($s,{className:"h-6 w-6 text-blue-600"})}),a.jsx(Jn,{className:"text-center",children:"Authorize Payment to Start Trial"}),a.jsx(Zn,{className:"text-center",children:"Set up payment method to activate your free trial. You won't be charged until the trial ends."})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs(H,{children:[a.jsx(me,{children:a.jsx(ge,{className:"text-sm",children:"What Happens Next?"})}),a.jsxs(Y,{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx(Yt,{className:"h-4 w-4 text-green-500 mt-0.5"}),a.jsxs("span",{children:[a.jsx("strong",{children:"Step 1:"})," Authorize payment method (₹2 charge, refunded in 5-7 days)"]})]}),a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx(Yt,{className:"h-4 w-4 text-green-500 mt-0.5"}),a.jsxs("span",{children:[a.jsx("strong",{children:"Step 2:"})," Free trial starts immediately"]})]}),a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx(Yt,{className:"h-4 w-4 text-green-500 mt-0.5"}),a.jsxs("span",{children:[a.jsx("strong",{children:"Step 3:"})," Access all premium features during trial"]})]}),a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx(Yt,{className:"h-4 w-4 text-green-500 mt-0.5"}),a.jsxs("span",{children:[a.jsx("strong",{children:"Step 4:"})," Automatic billing after trial ends (cancel anytime)"]})]})]})]}),a.jsxs(ml,{className:"bg-blue-50 border-blue-200",children:[a.jsx(eo,{className:"h-4 w-4 text-blue-600"}),a.jsx(pl,{className:"text-blue-800 text-sm",children:"You'll be charged ₹2 to authorize your payment method. This amount will be refunded within 5-7 business days."})]}),a.jsxs("div",{className:"flex items-center justify-center space-x-2 text-xs text-muted-foreground",children:[a.jsx($s,{className:"h-4 w-4"}),a.jsx("span",{children:"Secured by Razorpay | PCI DSS Compliant"})]}),a.jsx("div",{className:"flex flex-col space-y-2",children:a.jsx(K,{onClick:x,disabled:n,className:"w-full",children:n?a.jsxs(a.Fragment,{children:[a.jsx(Gm,{className:"mr-2 h-4 w-4 animate-spin"}),"Setting up..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Sr,{className:"mr-2 h-4 w-4"}),"Authorize Payment Method & Start Trial"]})})}),a.jsxs(ml,{className:"bg-amber-50 border-amber-200",children:[a.jsx(eo,{className:"h-4 w-4 text-amber-600"}),a.jsxs(pl,{className:"text-amber-800 text-xs",children:[a.jsx("strong",{children:"Payment authorization is required"})," to start your free trial. You won't be charged until the trial ends."]})]})]})]})})},Dne=()=>{const[t,e]=p.useState(!1),[r,n]=p.useState(!1),[s,i]=p.useState(!1);return ln(),Bl(),p.useEffect(()=>{console.log("[Mandate Check] Skipping mandatory mandate - will be triggered after trial ends"),i(!0)},[]),a.jsxs("div",{className:"min-h-screen bg-background",children:[a.jsxs("div",{className:"flex",children:[a.jsx(OJ,{isOpen:t,onClose:()=>e(!1)}),t&&a.jsx("div",{className:"fixed inset-0 bg-black/50 z-30 lg:hidden",onClick:()=>e(!1)}),a.jsxs("div",{className:"flex-1 flex flex-col ml-0 lg:ml-64",children:[a.jsx(Jre,{onMenuClick:()=>e(!0)}),a.jsx("main",{className:"flex-1 p-1 sm:p-4 md:p-6 bg-muted/30",children:a.jsx("div",{className:"animate-fade-in",children:a.jsx(One,{children:a.jsx(kk,{})})})})]})]}),a.jsx(C4,{isOpen:r,onClose:()=>n(!1),onSuccess:()=>{n(!1)}})]})},Au=()=>{const{subscription:t,status:e}=ln();Su();const r=(t==null?void 0:t.planId)==="per_profile_yearly",n=(t==null?void 0:t.planId)==="yearly_pro",s=(t==null?void 0:t.status)==="trial",i=r&&(t==null?void 0:t.profileCount)||1,o=i>1,l=p.useCallback(v=>i>=v.length?v:v.slice(0,i),[i]),c=p.useCallback(v=>v<i,[i]),u=p.useCallback(v=>i>=v.length?v:v.slice(0,i),[i]),d=p.useCallback(v=>v<i,[i]),h=p.useCallback(v=>v<=i?"":s?`You have ${v} Google Business accounts. Your Free Trial allows access to 1 account only. Upgrade to access more profiles.`:r?`You have ${v} accounts but your plan covers ${i} profile${i>1?"s":""}. Upgrade your plan to access more profiles at $99/profile/year.`:n?`You have ${v} Google Business accounts. Your current plan allows access to 1 account only. Upgrade to access more profiles.`:`Your current plan allows access to ${i} account${i>1?"s":""} only.`,[i,s,r,n]),f=p.useCallback(v=>v<=i?"":s?`This account has ${v} locations. Your Free Trial allows access to 1 location only. Upgrade to access more profiles.`:r?`You have ${v} locations but your plan covers ${i} profile${i>1?"s":""}. Upgrade your plan to access more profiles at $99/profile/year.`:n?`This account has ${v} locations. Your current plan allows access to 1 location only. Upgrade to access more profiles.`:`Your current plan allows access to ${i} location${i>1?"s":""} only.`,[i,s,r,n]),m=p.useCallback((v="Support Request")=>{const y=encodeURIComponent(`Support Request - ${v}`),x=encodeURIComponent(`Hi,

I need assistance with my GMB Profile Pulse account.

Current plan: ${(t==null?void 0:t.planName)||"Free Trial"}
Current profile count: ${(t==null?void 0:t.profileCount)||1}
Context: ${v}

Please contact me to discuss.

Best regards,`);window.open(`mailto:support@gmbprofilepulse.com?subject=${y}&body=${x}`,"_blank")},[t==null?void 0:t.planName,t==null?void 0:t.profileCount]);return{canAccessMultipleProfiles:o,isProPlan:n,isPerProfilePlan:r,maxAllowedProfiles:i,getAccessibleAccounts:l,isAccountAccessible:c,getAccessibleLocations:u,isLocationAccessible:d,getAccountLockMessage:h,getLocationLockMessage:f,handleContactSupport:m}},Uh=xe.forwardRef(({className:t,size:e="md",variant:r="default",...n},s)=>{const i={sm:"h-4 w-4 border-2",md:"h-6 w-6 border-2",lg:"h-8 w-8 border-2",xl:"h-12 w-12 border-3"},o={default:"border-muted-foreground border-t-transparent",primary:"border-primary border-t-transparent",secondary:"border-secondary border-t-transparent"};return a.jsx("div",{ref:s,className:ye("animate-spin rounded-full",i[e],o[r],t),...n})});Uh.displayName="LoadingSpinner";var pj="Progress",gj=100,[Mne,XNe]=Dr(pj),[Lne,Fne]=Mne(pj),k4=p.forwardRef((t,e)=>{const{__scopeProgress:r,value:n=null,max:s,getValueLabel:i=$ne,...o}=t;(s||s===0)&&!vP(s)&&console.error(Une(`${s}`,"Progress"));const l=vP(s)?s:gj;n!==null&&!xP(n,l)&&console.error(Bne(`${n}`,"Progress"));const c=xP(n,l)?n:null,u=Sp(c)?i(c,l):void 0;return a.jsx(Lne,{scope:r,value:c,max:l,children:a.jsx(Re.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":Sp(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":O4(c,l),"data-value":c??void 0,"data-max":l,...o,ref:e})})});k4.displayName=pj;var I4="ProgressIndicator",R4=p.forwardRef((t,e)=>{const{__scopeProgress:r,...n}=t,s=Fne(I4,r);return a.jsx(Re.div,{"data-state":O4(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...n,ref:e})});R4.displayName=I4;function $ne(t,e){return`${Math.round(t/e*100)}%`}function O4(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function Sp(t){return typeof t=="number"}function vP(t){return Sp(t)&&!isNaN(t)&&t>0}function xP(t,e){return Sp(t)&&!isNaN(t)&&t<=e&&t>=0}function Une(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${gj}\`.`}function Bne(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${gj} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var D4=k4,Vne=R4;const Ap=p.forwardRef(({className:t,value:e,...r},n)=>a.jsx(D4,{ref:n,className:ye("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...r,children:a.jsx(Vne,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));Ap.displayName=D4.displayName;const zne=()=>{const{status:t,daysRemaining:e,isLoading:r}=ln(),[n,s]=p.useState(!1),i=cr();if(r||n||t!=="trial"&&t!=="expired")return null;const o=e?(15-e)/15*100:100,c=t==="expired"?{bgColor:"bg-red-950/40 border-red-500/30",textColor:"text-red-200",iconColor:"text-red-400",progressColor:"bg-red-500",buttonVariant:"destructive"}:e&&e<=3?{bgColor:"bg-orange-950/40 border-orange-500/30",textColor:"text-orange-200",iconColor:"text-orange-400",progressColor:"bg-orange-500",buttonVariant:"default"}:{bgColor:"bg-blue-950/40 border-blue-500/30",textColor:"text-blue-200",iconColor:"text-blue-400",progressColor:"bg-blue-500",buttonVariant:"default"};return a.jsx("div",{className:`relative border-2 ${c.bgColor} p-4 z-[70] rounded-lg shadow-md backdrop-blur-sm`,children:a.jsx("div",{className:"max-w-7xl mx-auto",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4 flex-1",children:[t==="expired"?a.jsx(qr,{className:`h-5 w-5 ${c.iconColor}`}):a.jsx(Yn,{className:`h-5 w-5 ${c.iconColor}`}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:`font-semibold ${c.textColor}`,children:t==="expired"?"Trial Expired":`Free Trial: ${e} days remaining`}),t==="trial"&&e&&a.jsxs("span",{className:`text-sm ${c.textColor} opacity-75`,children:["(",Math.round(o),"% complete)"]})]}),t==="trial"&&a.jsx("div",{className:"mt-2 max-w-md",children:a.jsx(Ap,{value:o,className:"h-1.5",style:{backgroundColor:"rgba(0,0,0,0.1)"}})}),a.jsx("p",{className:`text-sm mt-1 ${c.textColor} opacity-90`,children:t==="expired"?"Upgrade now to continue using all features without interruption.":e&&e<=3?"Your trial is ending soon. Upgrade now to avoid service interruption.":"Enjoy unlimited access to all features during your trial period."})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs(K,{variant:c.buttonVariant,size:"sm",onClick:()=>i("/dashboard/billing"),className:"flex items-center space-x-1",children:[a.jsx(Sr,{className:"h-4 w-4"}),a.jsx("span",{children:"Upgrade Now"})]}),t==="trial"&&a.jsx(K,{variant:"ghost",size:"sm",onClick:()=>s(!0),className:"p-1",children:a.jsx(Hs,{className:"h-4 w-4"})})]})]})})})},Gne=()=>{var m,v;const t=cr(),{isConnected:e,accounts:r,isLoading:n}=pi(),s=ln(),{getAccessibleAccounts:i}=Au(),[o,l]=p.useState(!1),c=(s==null?void 0:s.status)||"none",u=(s==null?void 0:s.daysRemaining)||null,d=(s==null?void 0:s.isFeatureBlocked)||!1;if(console.log("Dashboard: isConnected =",e),console.log("Dashboard: profiles =",r),console.log("Dashboard: isLoading =",n),console.log("Dashboard: subscriptionStatus =",c),console.log("Dashboard: daysRemaining =",u),n)return a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"flex items-center justify-center px-4",children:a.jsx("img",{src:"/Upgrade plan banner 11.svg",alt:"Upgrade Plan Banner",className:"w-full max-w-4xl h-auto"})}),a.jsxs("div",{className:"flex flex-col items-center justify-center py-16 space-y-4",children:[a.jsx(Uh,{size:"xl",variant:"primary"}),a.jsxs("div",{className:"text-center space-y-2",children:[a.jsx("h3",{className:"font-medium text-xl",children:"Loading Business Profiles..."}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Connecting to Google Business Profile and fetching your locations"})]})]}),a.jsx("div",{className:"grid gap-3 sm:gap-4 grid-cols-2 lg:grid-cols-4",children:[1,2,3,4].map(y=>a.jsxs(H,{children:[a.jsxs(me,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx("div",{className:"h-4 bg-muted rounded animate-pulse w-20"}),a.jsx("div",{className:"h-4 w-4 bg-muted rounded animate-pulse"})]}),a.jsxs(Y,{children:[a.jsx("div",{className:"h-8 bg-muted rounded animate-pulse w-16 mb-2"}),a.jsx("div",{className:"h-3 bg-muted rounded animate-pulse w-24"})]})]},y))})]});if(!e)return a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"flex items-center justify-center px-4",children:a.jsx("img",{src:"/Upgrade plan banner 11.svg",alt:"Upgrade Plan Banner",className:"w-full max-w-4xl h-auto"})}),a.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] text-center",children:[a.jsx(Ji,{className:"h-16 w-16 text-muted-foreground mb-4"}),a.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No Business Profiles Connected"}),a.jsx("p",{className:"text-muted-foreground mb-6 max-w-md",children:"Connect your Google Business Profile to start managing your business listings, posts, and reviews."}),a.jsx(yt,{to:"/dashboard/settings",children:a.jsxs(K,{children:[a.jsx(mc,{className:"mr-2 h-4 w-4"}),"Connect Google Business Profile"]})})]})]});const h=(r==null?void 0:r.length)||0,f=h;return a.jsxs(a.Fragment,{children:[(c==="trial"||c==="expired")&&a.jsx("div",{className:"-mx-6 mb-6",children:a.jsx(zne,{})}),a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"flex items-center justify-center px-4",children:a.jsx("img",{src:"/Upgrade plan banner 11.svg",alt:"Upgrade Plan Banner",className:"w-full max-w-4xl h-auto"})}),a.jsxs("div",{className:"flex justify-between items-center gap-2",children:[a.jsx("div",{className:"flex justify-start",children:a.jsx("h2",{className:"text-base sm:text-lg font-semibold truncate",style:{fontFamily:"Onest"},children:"Manage Profiles"})}),a.jsx("div",{className:"flex justify-end flex-shrink-0",children:a.jsx(yt,{to:"/dashboard/posts",children:a.jsxs(K,{size:"sm",className:"text-xs sm:text-sm px-2 sm:px-4",children:[a.jsx(lo,{className:"mr-1 sm:mr-2 h-3 w-3 sm:h-4 sm:w-4"}),a.jsx("span",{className:"hidden sm:inline",children:"Create Post"}),a.jsx("span",{className:"sm:hidden",children:"Post"})]})})})]}),d||c==="none"?a.jsx("div",{className:"flex flex-col items-center justify-center min-h-[500px] text-center space-y-6",children:a.jsxs("div",{className:"bg-red-950/30 border-2 border-red-500/50 rounded-2xl p-8 max-w-2xl w-full backdrop-blur-sm",children:[a.jsx(qr,{className:"h-16 w-16 text-red-500 mx-auto mb-4"}),a.jsx("h3",{className:"text-2xl font-bold text-red-400 mb-3",children:c==="none"?"No Subscription - Upgrade Required":"Trial Expired - Upgrade Required"}),a.jsx("p",{className:"text-red-300/90 mb-6 text-lg",children:c==="none"?"You need an active subscription to access this feature. Start your 15-day free trial or upgrade now to manage your Google Business Profiles.":"Your 15-day trial has expired. Upgrade now to continue managing your Google Business Profiles and access all premium features."}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs(K,{onClick:()=>l(!0),className:"bg-red-600 hover:bg-red-700 text-white px-8 py-6 text-lg w-full",size:"lg",children:[a.jsx(Sr,{className:"mr-2 h-5 w-5"}),c==="none"?"Start Free Trial":"Upgrade Now"]}),a.jsx("p",{className:"text-sm text-red-400/80",children:"Starting from ₹1,099/month • Unlimited Profiles • All Features"})]})]})}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid gap-3 sm:gap-4 grid-cols-2 lg:grid-cols-4",children:[a.jsxs(H,{className:"border-2 border-border/60 shadow-sm",children:[a.jsxs(me,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(ge,{className:"text-sm font-medium",children:"Total Profiles"}),a.jsx(gs,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(Y,{children:[a.jsx("div",{className:"text-2xl font-bold",children:h}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Connected business accounts"})]})]}),a.jsxs(H,{className:"border-2 border-border/60 shadow-sm",children:[a.jsxs(me,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(ge,{className:"text-sm font-medium",children:"Locations"}),a.jsx(Wn,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(Y,{children:[a.jsx("div",{className:"text-2xl font-bold",children:f}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Business locations"})]})]}),a.jsxs(H,{className:"border-2 border-border/60 shadow-sm",children:[a.jsxs(me,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(ge,{className:"text-sm font-medium",children:"Avg Rating"}),a.jsx(ms,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(Y,{children:[a.jsx("div",{className:"text-2xl font-bold",children:"4.8"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Across all locations"})]})]}),a.jsxs(H,{className:"border-2 border-border/60 shadow-sm",children:[a.jsxs(me,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(ge,{className:"text-sm font-medium",children:"Last Sync"}),a.jsx(Kn,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(Y,{children:[a.jsx("div",{className:"text-2xl font-bold",children:"Now"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Real-time updates"})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("h2",{className:"text-lg sm:text-xl font-semibold truncate",children:"Your Business Profiles"}),a.jsx(yt,{to:"/dashboard/settings",className:"flex-shrink-0",children:a.jsxs(K,{variant:"outline",size:"sm",className:"text-xs sm:text-sm px-2 sm:px-3",children:[a.jsx(mc,{className:"mr-1 sm:mr-2 h-3 w-3 sm:h-4 sm:w-4"}),a.jsx("span",{className:"hidden sm:inline",children:"Manage Connections"}),a.jsx("span",{className:"sm:hidden",children:"Manage"})]})})]}),r&&r.length>0?a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"grid gap-3 sm:gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:i(r).map((y,x)=>{var j,E,I;const b=y.locations[0],w=b.locationId||((j=b.name)==null?void 0:j.split("/").pop())||x;return a.jsxs("div",{className:"glass-card rounded-lg p-3 sm:p-4 cursor-pointer transition-all duration-300 flex flex-col h-full border-2 border-primary/30 hover:border-primary/60 hover:shadow-glow glow-hover shadow-sm",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("h3",{className:"text-sm sm:text-base font-semibold text-foreground truncate flex-1 mr-2",style:{fontSize:"clamp(14px, 2.5vw, 16px)",fontFamily:"Onest"},title:y.accountName,children:y.accountName}),y.state==="VERIFIED"&&a.jsx("div",{className:"w-4 h-4 flex items-center justify-center flex-shrink-0",children:a.jsx("img",{src:"/Vector.svg",alt:"Verified",className:"w-4 h-4"})})]}),a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx(Wn,{className:"h-4 w-4 text-muted-foreground mr-2"}),a.jsxs("span",{className:"text-xs sm:text-sm text-foreground truncate",style:{fontSize:"clamp(12px, 2vw, 14px)",fontFamily:"Onest"},children:[((E=b.address)==null?void 0:E.locality)||"Location"," ",((I=b.address)==null?void 0:I.administrativeArea)&&`, ${b.address.administrativeArea}`]})]}),b.categories&&b.categories.length>0&&a.jsxs("div",{className:"flex flex-wrap gap-1 mb-4",children:[b.categories.slice(0,2).map((O,T)=>a.jsx("span",{className:"px-2 py-1 bg-blue-50 text-blue-700 rounded-full text-xs border border-blue-100",style:{fontFamily:"Onest"},children:O.name},T)),b.categories.length>2&&a.jsxs("span",{className:"px-2 py-1 bg-blue-50 text-blue-700 rounded-full text-xs border border-blue-100",style:{fontFamily:"Onest"},children:["+",b.categories.length-2," more"]})]})]}),a.jsx("div",{className:"mt-4",children:a.jsx(yt,{to:`/dashboard/profiles/${w}`,className:"block",children:a.jsx("button",{className:"w-full py-2 px-3 sm:px-4 rounded-lg text-white font-medium transition-all hover:opacity-90 bg-primary hover:bg-primary-hover",style:{fontSize:"clamp(12px, 2vw, 14px)",fontFamily:"Onest"},children:"Manage Profile"})})})]},x)})}),r&&r.length>1&&i(r).length<r.length&&a.jsx(H,{className:"border-orange-200 bg-orange-50",children:a.jsx(Y,{className:"p-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"h-10 w-10 bg-orange-100 rounded-lg flex items-center justify-center",children:a.jsx(Ji,{className:"h-5 w-5 text-orange-600"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-medium text-orange-900 mb-1",children:"Additional Profiles Available"}),a.jsxs("p",{className:"text-sm text-orange-800 mb-3",children:["You have ",r.length," Google Business accounts, but can only access ",i(r).length," with your current plan."]}),a.jsxs(K,{size:"sm",variant:"outline",onClick:()=>t("/dashboard/billing"),className:"border-orange-300 text-orange-700 hover:bg-orange-100",children:[a.jsx(Sr,{className:"h-4 w-4 mr-2"}),"Upgrade to Access All Profiles"]})]})]})})}),((v=(m=r[0])==null?void 0:m.name)==null?void 0:v.includes("demo"))&&a.jsx(H,{className:"border-blue-200 bg-blue-50",children:a.jsx(Y,{className:"p-4",children:a.jsxs("div",{className:"flex items-center space-x-2 text-blue-800",children:[a.jsx(qr,{className:"h-4 w-4"}),a.jsxs("p",{className:"text-sm",children:[a.jsx("strong",{children:"Demo Mode:"})," Showing sample data because Google API calls are CORS-blocked in frontend-only mode. A backend would be needed for real Google Business Profile data."]})]})})})]}):a.jsx(H,{children:a.jsxs(Y,{className:"flex flex-col items-center justify-center py-12",children:[a.jsx(Ji,{className:"h-12 w-12 text-muted-foreground mb-4"}),a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No profiles loaded"}),a.jsx("p",{className:"text-muted-foreground text-center mb-4",children:"Your Google Business Profiles will appear here once loaded."}),a.jsx(yt,{to:"/dashboard/settings",children:a.jsxs(K,{children:[a.jsx(mc,{className:"mr-2 h-4 w-4"}),"Check Connection"]})})]})})]})]})]}),a.jsx(mj,{isOpen:o,onClose:()=>l(!1)})]})};var wy="Tabs",[Wne,JNe]=Dr(wy,[Nu]),M4=Nu(),[qne,yj]=Wne(wy),L4=p.forwardRef((t,e)=>{const{__scopeTabs:r,value:n,onValueChange:s,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:c="automatic",...u}=t,d=ju(l),[h,f]=Bs({prop:n,onChange:s,defaultProp:i??"",caller:wy});return a.jsx(qne,{scope:r,baseId:ys(),value:h,onValueChange:f,orientation:o,dir:d,activationMode:c,children:a.jsx(Re.div,{dir:d,"data-orientation":o,...u,ref:e})})});L4.displayName=wy;var F4="TabsList",$4=p.forwardRef((t,e)=>{const{__scopeTabs:r,loop:n=!0,...s}=t,i=yj(F4,r),o=M4(r);return a.jsx(M1,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:n,children:a.jsx(Re.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:e})})});$4.displayName=F4;var U4="TabsTrigger",B4=p.forwardRef((t,e)=>{const{__scopeTabs:r,value:n,disabled:s=!1,...i}=t,o=yj(U4,r),l=M4(r),c=G4(o.baseId,n),u=W4(o.baseId,n),d=n===o.value;return a.jsx(L1,{asChild:!0,...l,focusable:!s,active:d,children:a.jsx(Re.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...i,ref:e,onMouseDown:ve(t.onMouseDown,h=>{!s&&h.button===0&&h.ctrlKey===!1?o.onValueChange(n):h.preventDefault()}),onKeyDown:ve(t.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(n)}),onFocus:ve(t.onFocus,()=>{const h=o.activationMode!=="manual";!d&&!s&&h&&o.onValueChange(n)})})})});B4.displayName=U4;var V4="TabsContent",z4=p.forwardRef((t,e)=>{const{__scopeTabs:r,value:n,forceMount:s,children:i,...o}=t,l=yj(V4,r),c=G4(l.baseId,n),u=W4(l.baseId,n),d=n===l.value,h=p.useRef(d);return p.useEffect(()=>{const f=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(f)},[]),a.jsx(Mr,{present:s||d,children:({present:f})=>a.jsx(Re.div,{"data-state":d?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!f,id:u,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:h.current?"0s":void 0},children:f&&i})})});z4.displayName=V4;function G4(t,e){return`${t}-trigger-${e}`}function W4(t,e){return`${t}-content-${e}`}var Hne=L4,q4=$4,H4=B4,K4=z4;const Kl=Hne,ko=p.forwardRef(({className:t,...e},r)=>a.jsx(q4,{ref:r,className:ye("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));ko.displayName=q4.displayName;const Zt=p.forwardRef(({className:t,...e},r)=>a.jsx(H4,{ref:r,className:ye("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));Zt.displayName=H4.displayName;const er=p.forwardRef(({className:t,...e},r)=>a.jsx(K4,{ref:r,className:ye("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));er.displayName=K4.displayName;var jy="Switch",[Kne,ZNe]=Dr(jy),[Yne,Qne]=Kne(jy),Y4=p.forwardRef((t,e)=>{const{__scopeSwitch:r,name:n,checked:s,defaultChecked:i,required:o,disabled:l,value:c="on",onCheckedChange:u,form:d,...h}=t,[f,m]=p.useState(null),v=We(e,j=>m(j)),y=p.useRef(!1),x=f?d||!!f.closest("form"):!0,[b,w]=Bs({prop:s,defaultProp:i??!1,onChange:u,caller:jy});return a.jsxs(Yne,{scope:r,checked:b,disabled:l,children:[a.jsx(Re.button,{type:"button",role:"switch","aria-checked":b,"aria-required":o,"data-state":Z4(b),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:v,onClick:ve(t.onClick,j=>{w(E=>!E),x&&(y.current=j.isPropagationStopped(),y.current||j.stopPropagation())})}),x&&a.jsx(J4,{control:f,bubbles:!y.current,name:n,value:c,checked:b,required:o,disabled:l,form:d,style:{transform:"translateX(-100%)"}})]})});Y4.displayName=jy;var Q4="SwitchThumb",X4=p.forwardRef((t,e)=>{const{__scopeSwitch:r,...n}=t,s=Qne(Q4,r);return a.jsx(Re.span,{"data-state":Z4(s.checked),"data-disabled":s.disabled?"":void 0,...n,ref:e})});X4.displayName=Q4;var Xne="SwitchBubbleInput",J4=p.forwardRef(({__scopeSwitch:t,control:e,checked:r,bubbles:n=!0,...s},i)=>{const o=p.useRef(null),l=We(o,i),c=hj(r),u=Aw(e);return p.useEffect(()=>{const d=o.current;if(!d)return;const h=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(h,"checked").set;if(c!==r&&m){const v=new Event("click",{bubbles:n});m.call(d,r),d.dispatchEvent(v)}},[c,r,n]),a.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...s,tabIndex:-1,ref:l,style:{...s.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});J4.displayName=Xne;function Z4(t){return t?"checked":"unchecked"}var eL=Y4,Jne=X4;const Ln=p.forwardRef(({className:t,...e},r)=>a.jsx(eL,{className:ye("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...e,ref:r,children:a.jsx(Jne,{className:ye("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Ln.displayName=eL.displayName;var Zne=[" ","Enter","ArrowUp","ArrowDown"],ese=[" ","Enter"],Il="Select",[Ny,_y,tse]=bg(Il),[Eu,e_e]=Dr(Il,[tse,So]),Sy=So(),[rse,Io]=Eu(Il),[nse,sse]=Eu(Il),tL=t=>{const{__scopeSelect:e,children:r,open:n,defaultOpen:s,onOpenChange:i,value:o,defaultValue:l,onValueChange:c,dir:u,name:d,autoComplete:h,disabled:f,required:m,form:v}=t,y=Sy(e),[x,b]=p.useState(null),[w,j]=p.useState(null),[E,I]=p.useState(!1),O=ju(u),[T,A]=Bs({prop:n,defaultProp:s??!1,onChange:i,caller:Il}),[S,_]=Bs({prop:o,defaultProp:l,onChange:c,caller:Il}),P=p.useRef(null),R=x?v||!!x.closest("form"):!0,[C,B]=p.useState(new Set),G=Array.from(C).map(U=>U.props.value).join(";");return a.jsx(Tg,{...y,children:a.jsxs(rse,{required:m,scope:e,trigger:x,onTriggerChange:b,valueNode:w,onValueNodeChange:j,valueNodeHasChildren:E,onValueNodeHasChildrenChange:I,contentId:ys(),value:S,onValueChange:_,open:T,onOpenChange:A,dir:O,triggerPointerDownPosRef:P,disabled:f,children:[a.jsx(Ny.Provider,{scope:e,children:a.jsx(nse,{scope:t.__scopeSelect,onNativeOptionAdd:p.useCallback(U=>{B(F=>new Set(F).add(U))},[]),onNativeOptionRemove:p.useCallback(U=>{B(F=>{const M=new Set(F);return M.delete(U),M})},[]),children:r})}),R?a.jsxs(AL,{"aria-hidden":!0,required:m,tabIndex:-1,name:d,autoComplete:h,value:S,onChange:U=>_(U.target.value),disabled:f,form:v,children:[S===void 0?a.jsx("option",{value:""}):null,Array.from(C)]},G):null]})})};tL.displayName=Il;var rL="SelectTrigger",nL=p.forwardRef((t,e)=>{const{__scopeSelect:r,disabled:n=!1,...s}=t,i=Sy(r),o=Io(rL,r),l=o.disabled||n,c=We(e,o.onTriggerChange),u=_y(r),d=p.useRef("touch"),[h,f,m]=PL(y=>{const x=u().filter(j=>!j.disabled),b=x.find(j=>j.value===o.value),w=TL(x,y,b);w!==void 0&&o.onValueChange(w.value)}),v=y=>{l||(o.onOpenChange(!0),m()),y&&(o.triggerPointerDownPosRef.current={x:Math.round(y.pageX),y:Math.round(y.pageY)})};return a.jsx(gh,{asChild:!0,...i,children:a.jsx(Re.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":EL(o.value)?"":void 0,...s,ref:c,onClick:ve(s.onClick,y=>{y.currentTarget.focus(),d.current!=="mouse"&&v(y)}),onPointerDown:ve(s.onPointerDown,y=>{d.current=y.pointerType;const x=y.target;x.hasPointerCapture(y.pointerId)&&x.releasePointerCapture(y.pointerId),y.button===0&&y.ctrlKey===!1&&y.pointerType==="mouse"&&(v(y),y.preventDefault())}),onKeyDown:ve(s.onKeyDown,y=>{const x=h.current!=="";!(y.ctrlKey||y.altKey||y.metaKey)&&y.key.length===1&&f(y.key),!(x&&y.key===" ")&&Zne.includes(y.key)&&(v(),y.preventDefault())})})})});nL.displayName=rL;var sL="SelectValue",aL=p.forwardRef((t,e)=>{const{__scopeSelect:r,className:n,style:s,children:i,placeholder:o="",...l}=t,c=Io(sL,r),{onValueNodeHasChildrenChange:u}=c,d=i!==void 0,h=We(e,c.onValueNodeChange);return pr(()=>{u(d)},[u,d]),a.jsx(Re.span,{...l,ref:h,style:{pointerEvents:"none"},children:EL(c.value)?a.jsx(a.Fragment,{children:o}):i})});aL.displayName=sL;var ase="SelectIcon",iL=p.forwardRef((t,e)=>{const{__scopeSelect:r,children:n,...s}=t;return a.jsx(Re.span,{"aria-hidden":!0,...s,ref:e,children:n||"▼"})});iL.displayName=ase;var ise="SelectPortal",oL=t=>a.jsx(du,{asChild:!0,...t});oL.displayName=ise;var Rl="SelectContent",lL=p.forwardRef((t,e)=>{const r=Io(Rl,t.__scopeSelect),[n,s]=p.useState();if(pr(()=>{s(new DocumentFragment)},[]),!r.open){const i=n;return i?No.createPortal(a.jsx(cL,{scope:t.__scopeSelect,children:a.jsx(Ny.Slot,{scope:t.__scopeSelect,children:a.jsx("div",{children:t.children})})}),i):null}return a.jsx(uL,{...t,ref:e})});lL.displayName=Rl;var Ts=10,[cL,Ro]=Eu(Rl),ose="SelectContentImpl",lse=oo("SelectContent.RemoveScroll"),uL=p.forwardRef((t,e)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:f,collisionPadding:m,sticky:v,hideWhenDetached:y,avoidCollisions:x,...b}=t,w=Io(Rl,r),[j,E]=p.useState(null),[I,O]=p.useState(null),T=We(e,se=>E(se)),[A,S]=p.useState(null),[_,P]=p.useState(null),R=_y(r),[C,B]=p.useState(!1),G=p.useRef(!1);p.useEffect(()=>{if(j)return oy(j)},[j]),iy();const U=p.useCallback(se=>{const[Fe,...oe]=R().map(L=>L.ref.current),[V]=oe.slice(-1),W=document.activeElement;for(const L of se)if(L===W||(L==null||L.scrollIntoView({block:"nearest"}),L===Fe&&I&&(I.scrollTop=0),L===V&&I&&(I.scrollTop=I.scrollHeight),L==null||L.focus(),document.activeElement!==W))return},[R,I]),F=p.useCallback(()=>U([A,j]),[U,A,j]);p.useEffect(()=>{C&&F()},[C,F]);const{onOpenChange:M,triggerPointerDownPosRef:$}=w;p.useEffect(()=>{if(j){let se={x:0,y:0};const Fe=V=>{var W,L;se={x:Math.abs(Math.round(V.pageX)-(((W=$.current)==null?void 0:W.x)??0)),y:Math.abs(Math.round(V.pageY)-(((L=$.current)==null?void 0:L.y)??0))}},oe=V=>{se.x<=10&&se.y<=10?V.preventDefault():j.contains(V.target)||M(!1),document.removeEventListener("pointermove",Fe),$.current=null};return $.current!==null&&(document.addEventListener("pointermove",Fe),document.addEventListener("pointerup",oe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Fe),document.removeEventListener("pointerup",oe,{capture:!0})}}},[j,M,$]),p.useEffect(()=>{const se=()=>M(!1);return window.addEventListener("blur",se),window.addEventListener("resize",se),()=>{window.removeEventListener("blur",se),window.removeEventListener("resize",se)}},[M]);const[ne,te]=PL(se=>{const Fe=R().filter(W=>!W.disabled),oe=Fe.find(W=>W.ref.current===document.activeElement),V=TL(Fe,se,oe);V&&setTimeout(()=>V.ref.current.focus())}),z=p.useCallback((se,Fe,oe)=>{const V=!G.current&&!oe;(w.value!==void 0&&w.value===Fe||V)&&(S(se),V&&(G.current=!0))},[w.value]),de=p.useCallback(()=>j==null?void 0:j.focus(),[j]),Z=p.useCallback((se,Fe,oe)=>{const V=!G.current&&!oe;(w.value!==void 0&&w.value===Fe||V)&&P(se)},[w.value]),re=n==="popper"?s0:dL,_e=re===s0?{side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:f,collisionPadding:m,sticky:v,hideWhenDetached:y,avoidCollisions:x}:{};return a.jsx(cL,{scope:r,content:j,viewport:I,onViewportChange:O,itemRefCallback:z,selectedItem:A,onItemLeave:de,itemTextRefCallback:Z,focusSelectedItem:F,selectedItemText:_,position:n,isPositioned:C,searchRef:ne,children:a.jsx(Oh,{as:lse,allowPinchZoom:!0,children:a.jsx(Ih,{asChild:!0,trapped:w.open,onMountAutoFocus:se=>{se.preventDefault()},onUnmountAutoFocus:ve(s,se=>{var Fe;(Fe=w.trigger)==null||Fe.focus({preventScroll:!0}),se.preventDefault()}),children:a.jsx(Vl,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:se=>se.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:a.jsx(re,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:se=>se.preventDefault(),...b,..._e,onPlaced:()=>B(!0),ref:T,style:{display:"flex",flexDirection:"column",outline:"none",...b.style},onKeyDown:ve(b.onKeyDown,se=>{const Fe=se.ctrlKey||se.altKey||se.metaKey;if(se.key==="Tab"&&se.preventDefault(),!Fe&&se.key.length===1&&te(se.key),["ArrowUp","ArrowDown","Home","End"].includes(se.key)){let V=R().filter(W=>!W.disabled).map(W=>W.ref.current);if(["ArrowUp","End"].includes(se.key)&&(V=V.slice().reverse()),["ArrowUp","ArrowDown"].includes(se.key)){const W=se.target,L=V.indexOf(W);V=V.slice(L+1)}setTimeout(()=>U(V)),se.preventDefault()}})})})})})})});uL.displayName=ose;var cse="SelectItemAlignedPosition",dL=p.forwardRef((t,e)=>{const{__scopeSelect:r,onPlaced:n,...s}=t,i=Io(Rl,r),o=Ro(Rl,r),[l,c]=p.useState(null),[u,d]=p.useState(null),h=We(e,T=>d(T)),f=_y(r),m=p.useRef(!1),v=p.useRef(!0),{viewport:y,selectedItem:x,selectedItemText:b,focusSelectedItem:w}=o,j=p.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&u&&y&&x&&b){const T=i.trigger.getBoundingClientRect(),A=u.getBoundingClientRect(),S=i.valueNode.getBoundingClientRect(),_=b.getBoundingClientRect();if(i.dir!=="rtl"){const W=_.left-A.left,L=S.left-W,J=T.left-L,le=T.width+J,pe=Math.max(le,A.width),ke=window.innerWidth-Ts,De=t0(L,[Ts,Math.max(Ts,ke-pe)]);l.style.minWidth=le+"px",l.style.left=De+"px"}else{const W=A.right-_.right,L=window.innerWidth-S.right-W,J=window.innerWidth-T.right-L,le=T.width+J,pe=Math.max(le,A.width),ke=window.innerWidth-Ts,De=t0(L,[Ts,Math.max(Ts,ke-pe)]);l.style.minWidth=le+"px",l.style.right=De+"px"}const P=f(),R=window.innerHeight-Ts*2,C=y.scrollHeight,B=window.getComputedStyle(u),G=parseInt(B.borderTopWidth,10),U=parseInt(B.paddingTop,10),F=parseInt(B.borderBottomWidth,10),M=parseInt(B.paddingBottom,10),$=G+U+C+M+F,ne=Math.min(x.offsetHeight*5,$),te=window.getComputedStyle(y),z=parseInt(te.paddingTop,10),de=parseInt(te.paddingBottom,10),Z=T.top+T.height/2-Ts,re=R-Z,_e=x.offsetHeight/2,se=x.offsetTop+_e,Fe=G+U+se,oe=$-Fe;if(Fe<=Z){const W=P.length>0&&x===P[P.length-1].ref.current;l.style.bottom="0px";const L=u.clientHeight-y.offsetTop-y.offsetHeight,J=Math.max(re,_e+(W?de:0)+L+F),le=Fe+J;l.style.height=le+"px"}else{const W=P.length>0&&x===P[0].ref.current;l.style.top="0px";const J=Math.max(Z,G+y.offsetTop+(W?z:0)+_e)+oe;l.style.height=J+"px",y.scrollTop=Fe-Z+y.offsetTop}l.style.margin=`${Ts}px 0`,l.style.minHeight=ne+"px",l.style.maxHeight=R+"px",n==null||n(),requestAnimationFrame(()=>m.current=!0)}},[f,i.trigger,i.valueNode,l,u,y,x,b,i.dir,n]);pr(()=>j(),[j]);const[E,I]=p.useState();pr(()=>{u&&I(window.getComputedStyle(u).zIndex)},[u]);const O=p.useCallback(T=>{T&&v.current===!0&&(j(),w==null||w(),v.current=!1)},[j,w]);return a.jsx(dse,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:m,onScrollButtonChange:O,children:a.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:E},children:a.jsx(Re.div,{...s,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});dL.displayName=cse;var use="SelectPopperPosition",s0=p.forwardRef((t,e)=>{const{__scopeSelect:r,align:n="start",collisionPadding:s=Ts,...i}=t,o=Sy(r);return a.jsx(Cg,{...o,...i,ref:e,align:n,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});s0.displayName=use;var[dse,vj]=Eu(Rl,{}),a0="SelectViewport",hL=p.forwardRef((t,e)=>{const{__scopeSelect:r,nonce:n,...s}=t,i=Ro(a0,r),o=vj(a0,r),l=We(e,i.onViewportChange),c=p.useRef(0);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),a.jsx(Ny.Slot,{scope:r,children:a.jsx(Re.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:ve(s.onScroll,u=>{const d=u.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:f}=o;if(f!=null&&f.current&&h){const m=Math.abs(c.current-d.scrollTop);if(m>0){const v=window.innerHeight-Ts*2,y=parseFloat(h.style.minHeight),x=parseFloat(h.style.height),b=Math.max(y,x);if(b<v){const w=b+m,j=Math.min(v,w),E=w-j;h.style.height=j+"px",h.style.bottom==="0px"&&(d.scrollTop=E>0?E:0,h.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});hL.displayName=a0;var fL="SelectGroup",[hse,fse]=Eu(fL),mL=p.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,s=ys();return a.jsx(hse,{scope:r,id:s,children:a.jsx(Re.div,{role:"group","aria-labelledby":s,...n,ref:e})})});mL.displayName=fL;var pL="SelectLabel",gL=p.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,s=fse(pL,r);return a.jsx(Re.div,{id:s.id,...n,ref:e})});gL.displayName=pL;var Ep="SelectItem",[mse,yL]=Eu(Ep),vL=p.forwardRef((t,e)=>{const{__scopeSelect:r,value:n,disabled:s=!1,textValue:i,...o}=t,l=Io(Ep,r),c=Ro(Ep,r),u=l.value===n,[d,h]=p.useState(i??""),[f,m]=p.useState(!1),v=We(e,w=>{var j;return(j=c.itemRefCallback)==null?void 0:j.call(c,w,n,s)}),y=ys(),x=p.useRef("touch"),b=()=>{s||(l.onValueChange(n),l.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return a.jsx(mse,{scope:r,value:n,disabled:s,textId:y,isSelected:u,onItemTextChange:p.useCallback(w=>{h(j=>j||((w==null?void 0:w.textContent)??"").trim())},[]),children:a.jsx(Ny.ItemSlot,{scope:r,value:n,disabled:s,textValue:d,children:a.jsx(Re.div,{role:"option","aria-labelledby":y,"data-highlighted":f?"":void 0,"aria-selected":u&&f,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:v,onFocus:ve(o.onFocus,()=>m(!0)),onBlur:ve(o.onBlur,()=>m(!1)),onClick:ve(o.onClick,()=>{x.current!=="mouse"&&b()}),onPointerUp:ve(o.onPointerUp,()=>{x.current==="mouse"&&b()}),onPointerDown:ve(o.onPointerDown,w=>{x.current=w.pointerType}),onPointerMove:ve(o.onPointerMove,w=>{var j;x.current=w.pointerType,s?(j=c.onItemLeave)==null||j.call(c):x.current==="mouse"&&w.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ve(o.onPointerLeave,w=>{var j;w.currentTarget===document.activeElement&&((j=c.onItemLeave)==null||j.call(c))}),onKeyDown:ve(o.onKeyDown,w=>{var E;((E=c.searchRef)==null?void 0:E.current)!==""&&w.key===" "||(ese.includes(w.key)&&b(),w.key===" "&&w.preventDefault())})})})})});vL.displayName=Ep;var xd="SelectItemText",xL=p.forwardRef((t,e)=>{const{__scopeSelect:r,className:n,style:s,...i}=t,o=Io(xd,r),l=Ro(xd,r),c=yL(xd,r),u=sse(xd,r),[d,h]=p.useState(null),f=We(e,b=>h(b),c.onItemTextChange,b=>{var w;return(w=l.itemTextRefCallback)==null?void 0:w.call(l,b,c.value,c.disabled)}),m=d==null?void 0:d.textContent,v=p.useMemo(()=>a.jsx("option",{value:c.value,disabled:c.disabled,children:m},c.value),[c.disabled,c.value,m]),{onNativeOptionAdd:y,onNativeOptionRemove:x}=u;return pr(()=>(y(v),()=>x(v)),[y,x,v]),a.jsxs(a.Fragment,{children:[a.jsx(Re.span,{id:c.textId,...i,ref:f}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?No.createPortal(i.children,o.valueNode):null]})});xL.displayName=xd;var bL="SelectItemIndicator",wL=p.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t;return yL(bL,r).isSelected?a.jsx(Re.span,{"aria-hidden":!0,...n,ref:e}):null});wL.displayName=bL;var i0="SelectScrollUpButton",jL=p.forwardRef((t,e)=>{const r=Ro(i0,t.__scopeSelect),n=vj(i0,t.__scopeSelect),[s,i]=p.useState(!1),o=We(e,n.onScrollButtonChange);return pr(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollTop>0;i(u)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),s?a.jsx(_L,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});jL.displayName=i0;var o0="SelectScrollDownButton",NL=p.forwardRef((t,e)=>{const r=Ro(o0,t.__scopeSelect),n=vj(o0,t.__scopeSelect),[s,i]=p.useState(!1),o=We(e,n.onScrollButtonChange);return pr(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;i(d)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),s?a.jsx(_L,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});NL.displayName=o0;var _L=p.forwardRef((t,e)=>{const{__scopeSelect:r,onAutoScroll:n,...s}=t,i=Ro("SelectScrollButton",r),o=p.useRef(null),l=_y(r),c=p.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return p.useEffect(()=>()=>c(),[c]),pr(()=>{var d;const u=l().find(h=>h.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[l]),a.jsx(Re.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:ve(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(n,50))}),onPointerMove:ve(s.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),o.current===null&&(o.current=window.setInterval(n,50))}),onPointerLeave:ve(s.onPointerLeave,()=>{c()})})}),pse="SelectSeparator",SL=p.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t;return a.jsx(Re.div,{"aria-hidden":!0,...n,ref:e})});SL.displayName=pse;var l0="SelectArrow",gse=p.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,s=Sy(r),i=Io(l0,r),o=Ro(l0,r);return i.open&&o.position==="popper"?a.jsx(kg,{...s,...n,ref:e}):null});gse.displayName=l0;var yse="SelectBubbleInput",AL=p.forwardRef(({__scopeSelect:t,value:e,...r},n)=>{const s=p.useRef(null),i=We(n,s),o=hj(e);return p.useEffect(()=>{const l=s.current;if(!l)return;const c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==e&&d){const h=new Event("change",{bubbles:!0});d.call(l,e),l.dispatchEvent(h)}},[o,e]),a.jsx(Re.select,{...r,style:{...Bk,...r.style},ref:i,defaultValue:e})});AL.displayName=yse;function EL(t){return t===""||t===void 0}function PL(t){const e=ar(t),r=p.useRef(""),n=p.useRef(0),s=p.useCallback(o=>{const l=r.current+o;e(l),function c(u){r.current=u,window.clearTimeout(n.current),u!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(l)},[e]),i=p.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return p.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,s,i]}function TL(t,e,r){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,i=r?t.indexOf(r):-1;let o=vse(t,Math.max(i,0));s.length===1&&(o=o.filter(u=>u!==r));const c=o.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==r?c:void 0}function vse(t,e){return t.map((r,n)=>t[(e+n)%t.length])}var xse=tL,CL=nL,bse=aL,wse=iL,jse=oL,kL=lL,Nse=hL,_se=mL,IL=gL,RL=vL,Sse=xL,Ase=wL,OL=jL,DL=NL,ML=SL;const Ht=xse,bP=_se,Kt=bse,Bt=p.forwardRef(({className:t,children:e,...r},n)=>a.jsxs(CL,{ref:n,className:ye("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...r,children:[e,a.jsx(wse,{asChild:!0,children:a.jsx(cI,{className:"h-4 w-4 opacity-50"})})]}));Bt.displayName=CL.displayName;const LL=p.forwardRef(({className:t,...e},r)=>a.jsx(OL,{ref:r,className:ye("flex cursor-default items-center justify-center py-1",t),...e,children:a.jsx(UV,{className:"h-4 w-4"})}));LL.displayName=OL.displayName;const FL=p.forwardRef(({className:t,...e},r)=>a.jsx(DL,{ref:r,className:ye("flex cursor-default items-center justify-center py-1",t),...e,children:a.jsx(cI,{className:"h-4 w-4"})}));FL.displayName=DL.displayName;const Vt=p.forwardRef(({className:t,children:e,position:r="popper",...n},s)=>a.jsx(jse,{children:a.jsxs(kL,{ref:s,className:ye("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...n,children:[a.jsx(LL,{}),a.jsx(Nse,{className:ye("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),a.jsx(FL,{})]})}));Vt.displayName=kL.displayName;const c0=p.forwardRef(({className:t,...e},r)=>a.jsx(IL,{ref:r,className:ye("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));c0.displayName=IL.displayName;const fe=p.forwardRef(({className:t,children:e,...r},n)=>a.jsxs(RL,{ref:n,className:ye("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(Ase,{children:a.jsx(Zi,{className:"h-4 w-4"})})}),a.jsx(Sse,{children:e})]}));fe.displayName=RL.displayName;const $L=p.forwardRef(({className:t,...e},r)=>a.jsx(ML,{ref:r,className:ye("-mx-1 my-1 h-px bg-muted",t),...e}));$L.displayName=ML.displayName;class Ese{constructor(){Je(this,"STORAGE_KEY","googleranker_auto_posting_configs");Je(this,"GLOBAL_STATS_KEY","googleranker_auto_posting_global_stats")}getAllConfigurations(){try{const e=localStorage.getItem(this.STORAGE_KEY);return e?JSON.parse(e):[]}catch(e){return console.error("Failed to load auto-posting configurations:",e),[]}}getConfiguration(e){return this.getAllConfigurations().find(n=>n.locationId===e)||null}saveConfiguration(e){try{const r=this.getAllConfigurations(),n=r.findIndex(s=>s.locationId===e.locationId);n>=0?r[n]=e:r.push(e),localStorage.setItem(this.STORAGE_KEY,JSON.stringify(r)),window.dispatchEvent(new CustomEvent("autoPostingConfigChanged",{detail:{locationId:e.locationId,config:e}}))}catch(r){throw console.error("Failed to save auto-posting configuration:",r),r}}deleteConfiguration(e){try{const n=this.getAllConfigurations().filter(s=>s.locationId!==e);localStorage.setItem(this.STORAGE_KEY,JSON.stringify(n)),window.dispatchEvent(new CustomEvent("autoPostingConfigDeleted",{detail:{locationId:e}}))}catch(r){throw console.error("Failed to delete auto-posting configuration:",r),r}}getEnabledConfigurations(){return this.getAllConfigurations().filter(e=>e.enabled)}updatePostStatus(e,r,n){const s=this.getConfiguration(e);if(!s)return;const i=n||new Date().toISOString();s.lastPost=i,s.stats.totalPosts++,r?(s.stats.successfulPosts++,s.stats.lastPostStatus="success"):(s.stats.failedPosts++,s.stats.lastPostStatus="failed"),this.saveConfiguration(s)}calculateNextPostTime(e){const r=new Date,[n,s]=e.schedule.time.split(":").map(Number);let i=new Date;switch(i.setHours(n,s,0,0),e.schedule.frequency){case"test30s":i=new Date(r.getTime()+30*1e3);break;case"daily":i<=r&&i.setDate(i.getDate()+1);break;case"alternative":i<=r?i.setDate(i.getDate()+2):i.setDate(i.getDate()+1);break;case"weekly":i<=r&&i.setDate(i.getDate()+7);break;case"custom":if(e.schedule.customTimes&&e.schedule.customTimes.length>0){const o=e.schedule.customTimes.map(c=>{const[u,d]=c.split(":").map(Number),h=new Date;return h.setHours(u,d,0,0),h}).sort((c,u)=>c.getTime()-u.getTime()),l=o.find(c=>c>r);l?i=l:(i=o[0],i.setDate(i.getDate()+1))}break}return i.toISOString()}updateNextPostTime(e,r){const n=this.getConfiguration(e);n&&(r&&["daily","alternative","weekly","custom","test30s"].includes(r)&&(n.schedule.frequency=r),n.nextPost=this.calculateNextPostTime(n),this.saveConfiguration(n))}getGlobalStats(){try{const e=this.getAllConfigurations(),r=new Date().toDateString();let n=0,s=0,i=0;const o=localStorage.getItem(this.GLOBAL_STATS_KEY);if(o){const l=JSON.parse(o);l.date===r&&(n=l.totalPostsToday||0,s=l.successfulPostsToday||0,i=l.failedPostsToday||0)}return{totalConfigurations:e.length,activeConfigurations:e.filter(l=>l.enabled).length,totalPostsToday:n,successfulPostsToday:s,failedPostsToday:i}}catch(e){return console.error("Failed to load global stats:",e),{totalConfigurations:0,activeConfigurations:0,totalPostsToday:0,successfulPostsToday:0,failedPostsToday:0}}}updateGlobalStats(e){try{const r=new Date().toDateString(),n=localStorage.getItem(this.GLOBAL_STATS_KEY);let s={date:r,totalPostsToday:0,successfulPostsToday:0,failedPostsToday:0};if(n){const i=JSON.parse(n);i.date===r&&(s=i)}s.totalPostsToday++,e?s.successfulPostsToday++:s.failedPostsToday++,localStorage.setItem(this.GLOBAL_STATS_KEY,JSON.stringify(s)),window.dispatchEvent(new CustomEvent("globalStatsUpdated",{detail:s}))}catch(r){console.error("Failed to update global stats:",r)}}createDefaultConfiguration(e,r){const n={locationId:e,businessName:r,categories:[],keywords:[],enabled:!1,schedule:{frequency:"alternative",time:"09:00"},button:{enabled:!0,type:"auto"},stats:{totalPosts:0,successfulPosts:0,failedPosts:0}};return n.nextPost=this.calculateNextPostTime(n),n}onConfigurationChange(e){const r=n=>{e(n.detail.locationId,n.detail.config)};return window.addEventListener("autoPostingConfigChanged",r),()=>{window.removeEventListener("autoPostingConfigChanged",r)}}onConfigurationDeleted(e){const r=n=>{e(n.detail.locationId)};return window.addEventListener("autoPostingConfigDeleted",r),()=>{window.removeEventListener("autoPostingConfigDeleted",r)}}onGlobalStatsUpdated(e){const r=n=>{e(n.detail)};return window.addEventListener("globalStatsUpdated",r),()=>{window.removeEventListener("globalStatsUpdated",r)}}}const $t=new Ese;class Pse{constructor(){Je(this,"intervalId",null);Je(this,"isRunning",!1);Je(this,"checkInterval",15e3);this.start()}start(){this.isRunning||(console.log("🚀 Starting automation service..."),this.isRunning=!0,this.checkAndProcessPosts(),this.intervalId=setInterval(()=>{this.checkAndProcessPosts()},this.checkInterval))}stop(){this.isRunning&&(console.log("⏹️ Stopping automation service..."),this.isRunning=!1,this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null))}async checkAndProcessPosts(){try{const e=$t.getEnabledConfigurations(),r=new Date;console.log(`🔍 Checking ${e.length} enabled configurations at ${r.toLocaleString()}`);for(const n of e)await this.processConfigurationIfReady(n,r)}catch(e){console.error("🚨 Error in automation service check:",e)}}async processConfigurationIfReady(e,r){try{if(e.schedule.frequency==="test30s"){if(e.lastPost){const s=new Date(e.lastPost).getTime(),i=r.getTime()-s;if(i>=3e4)console.log(`🧪 TEST MODE: 30 seconds passed for ${e.businessName} - posting now!`),await this.executePost(e);else{const o=Math.ceil((3e4-i)/1e3);console.log(`🧪 TEST MODE: ${o}s remaining for ${e.businessName}`)}}else console.log(`🧪 TEST MODE: First post for ${e.businessName} - posting now!`),await this.executePost(e);return}if(!e.nextPost){console.log(`⚠️ No nextPost time for ${e.businessName}, calculating...`),$t.updateNextPostTime(e.locationId);return}const n=new Date(e.nextPost);if(r>=n)console.log(`⏰ Time to post for ${e.businessName}! Scheduled: ${n.toLocaleString()}, Current: ${r.toLocaleString()}`),await this.executePost(e);else{const s=Math.ceil((n.getTime()-r.getTime())/6e4);s<=5&&console.log(`⏱️ ${e.businessName}: ${s} minutes until next post`)}}catch(n){console.error(`🚨 Error processing configuration for ${e.businessName}:`,n)}}async executePost(e){console.log(`📝 Executing post for ${e.businessName}...`);try{const r=await this.generatePostContent(e),n=await this.postToGoogleBusinessProfile(e,r);if(n.success)console.log(`✅ Successfully posted for ${e.businessName}`),$t.updatePostStatus(e.locationId,!0),$t.updateGlobalStats(!0),e.schedule.frequency!=="test30s"&&$t.updateNextPostTime(e.locationId),be({title:"Post Published! 🎉",description:`Successfully posted for ${e.businessName}`,duration:4e3}),window.dispatchEvent(new CustomEvent("autoPostSuccess",{detail:{locationId:e.locationId,businessName:e.businessName,content:r.content}}));else throw new Error(n.error||"Unknown error occurred")}catch(r){console.error(`❌ Failed to post for ${e.businessName}:`,r),$t.updatePostStatus(e.locationId,!1),$t.updateGlobalStats(!1),e.schedule.frequency!=="test30s"&&$t.updateNextPostTime(e.locationId),be({title:"Post Failed ❌",description:`Failed to post for ${e.businessName}: ${r instanceof Error?r.message:"Unknown error"}`,variant:"destructive",duration:6e3}),window.dispatchEvent(new CustomEvent("autoPostError",{detail:{locationId:e.locationId,businessName:e.businessName,error:r instanceof Error?r.message:"Unknown error"}}))}}async generatePostContent(e){const r=e.categories.length>0?e.categories[0]:"business";console.log(`🤖 Generating content for ${e.businessName} (${r}) with keywords:`,e.keywords);try{return await Qi.generatePostContent(e.businessName,r,e.keywords,e.locationName,e.websiteUrl)}catch(n){throw console.error("🚨 OpenAI content generation failed:",n),n}}generateCallToAction(e){var o,l;if(!((o=e.button)!=null&&o.enabled)||((l=e.button)==null?void 0:l.type)==="none")return null;const r=e.button.type||"auto";if(r==="call_now")return e.button.phoneNumber?{actionType:"CALL",phoneNumber:e.button.phoneNumber}:(console.warn("Call Now button selected but no phone number provided"),null);const n=e.button.customUrl||e.websiteUrl;return n?{actionType:{auto:this.getAutoActionType(e),book:"BOOK",order:"ORDER_ONLINE",buy:"BUY",learn_more:"LEARN_MORE",sign_up:"SIGN_UP"}[r]||"LEARN_MORE",url:n}:(console.warn("Button enabled but no URL available"),null)}getAutoActionType(e){const r=e.categories.length>0?e.categories[0].toLowerCase():"";return r.includes("restaurant")||r.includes("food")?"ORDER_ONLINE":r.includes("salon")||r.includes("spa")||r.includes("health")?"BOOK":r.includes("retail")||r.includes("store")||r.includes("shop")?"BUY":r.includes("education")||r.includes("school")||r.includes("course")?"SIGN_UP":"LEARN_MORE"}async postToGoogleBusinessProfile(e,r){try{console.log(`📤 Posting to Google Business Profile for ${e.businessName}...`);const n=xt.getAccessToken();if(console.log("🔍 DEBUGGING: Access token check:",{hasToken:!!n,tokenLength:n==null?void 0:n.length,tokenStart:(n==null?void 0:n.substring(0,20))+"..."}),!n)throw console.error("❌ DEBUGGING: No access token available!"),console.error("🔍 DEBUGGING: Google service connection status:",xt.isConnected()),console.error("🔍 DEBUGGING: localStorage tokens:",localStorage.getItem("google_business_tokens")),new Error("No access token available. Please connect to Google Business Profile first.");const s="http://localhost:5000";console.log("🔍 DEBUGGING: Backend URL being used:",s),console.log("🔍 DEBUGGING: VITE_BACKEND_URL env var:","http://localhost:5000");const i=this.generateCallToAction(e),o={languageCode:"en-US",topicType:"STANDARD",summary:r.content,media:[],callToAction:i},l=await fetch(`${s}/api/locations/${e.locationId}/posts`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify(o)});if(!l.ok){const d=await l.text();throw console.error("❌ DEBUGGING: Backend API error response:",d),new Error(`Backend API error: ${l.status} - ${d}`)}const c=l.headers.get("Content-Type");console.log("🔍 DEBUGGING: Response content-type:",c);let u;try{const d=await l.text();if(console.log("🔍 DEBUGGING: Raw response text:",d.substring(0,200)+"..."),d.trim().startsWith("<!DOCTYPE")||d.trim().startsWith("<html"))throw console.error("❌ DEBUGGING: Backend returned HTML instead of JSON"),new Error("Backend API error: Server returned HTML error page instead of JSON. This usually indicates a server configuration issue or API endpoint problem.");u=JSON.parse(d)}catch(d){throw console.error("❌ DEBUGGING: JSON parse error:",d),console.error("❌ DEBUGGING: Response was not valid JSON"),new Error(`Backend API returned invalid JSON: ${d.message}`)}if(u&&(u.post||u.success))return console.log("✅ Post created successfully via backend API"),console.log("🔍 DEBUGGING: Backend result:",u),{success:!0,postContent:r.content};throw console.error("❌ DEBUGGING: Unexpected backend response format:",u),new Error("No result returned from backend API")}catch(n){return console.error("🚨 Backend API error:",n),{success:!1,error:n instanceof Error?n.message:"Unknown error"}}}async executeManualPost(e){const r=$t.getConfiguration(e);if(!r)throw new Error("Configuration not found for location");if(!r.enabled)throw new Error("Auto-posting is disabled for this location");console.log(`🔧 Manual post execution for ${r.businessName}...`);try{const n=await this.generatePostContent(r),s=await this.postToGoogleBusinessProfile(r,n);return s.success?($t.updatePostStatus(r.locationId,!0),$t.updateGlobalStats(!0),be({title:"Manual Post Published! 🚀",description:`Successfully posted for ${r.businessName}`,duration:4e3})):($t.updatePostStatus(r.locationId,!1),$t.updateGlobalStats(!1),be({title:"Manual Post Failed ❌",description:`Failed to post: ${s.error}`,variant:"destructive",duration:6e3})),s}catch(n){const s=n instanceof Error?n.message:"Unknown error";return $t.updatePostStatus(r.locationId,!1),$t.updateGlobalStats(!1),be({title:"Manual Post Failed ❌",description:`Failed to post: ${s}`,variant:"destructive",duration:6e3}),{success:!1,error:s}}}isServiceRunning(){return this.isRunning}getNextCheckTime(){return new Date(Date.now()+this.checkInterval)}onAutoPostSuccess(e){const r=n=>e(n.detail);return window.addEventListener("autoPostSuccess",r),()=>window.removeEventListener("autoPostSuccess",r)}onAutoPostError(e){const r=n=>e(n.detail);return window.addEventListener("autoPostError",r),()=>window.removeEventListener("autoPostError",r)}}const wP=new Pse;class Tse{constructor(){Je(this,"backendUrl");this.backendUrl="http://localhost:5000"}async saveAutomationSettings(e,r){try{console.log(`📤 Saving automation settings to server for location ${e}:`,r);const n=await fetch(`${this.backendUrl}/api/automation/settings/${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!n.ok)throw new Error(`Failed to save automation settings: ${n.statusText}`);const s=await n.json();return console.log("✅ Automation settings saved to server:",s),be({title:"Automation Settings Saved",description:"Your automation settings have been saved and will run on the server even when you're offline."}),!0}catch(n){return console.error("❌ Error saving automation settings to server:",n),be({title:"Error Saving Settings",description:"Failed to save automation settings to server. Please try again.",variant:"destructive"}),!1}}async getAutomationStatus(e){try{const r=await fetch(`${this.backendUrl}/api/automation/status/${e}`);if(!r.ok)throw new Error(`Failed to get automation status: ${r.statusText}`);const n=await r.json();return console.log(`📊 Automation status for location ${e}:`,n),n}catch(r){return console.error("❌ Error getting automation status:",r),null}}async stopAutomations(e){try{console.log(`🛑 Stopping all automations for location ${e}`);const r=await fetch(`${this.backendUrl}/api/automation/stop/${e}`,{method:"POST"});if(!r.ok)throw new Error(`Failed to stop automations: ${r.statusText}`);return be({title:"Automations Stopped",description:"All automations have been stopped for this location."}),!0}catch(r){return console.error("❌ Error stopping automations:",r),be({title:"Error",description:"Failed to stop automations. Please try again.",variant:"destructive"}),!1}}async triggerPost(e,r){try{console.log(`🚀 Manually triggering post for location ${e}`);const n=await fetch(`${this.backendUrl}/api/automation/trigger-post/${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!n.ok)throw new Error(`Failed to trigger post: ${n.statusText}`);return be({title:"Post Triggered",description:"Post has been triggered successfully."}),!0}catch(n){return console.error("❌ Error triggering post:",n),be({title:"Error",description:"Failed to trigger post. Please try again.",variant:"destructive"}),!1}}async checkReviews(e,r){try{console.log(`🔍 Manually checking reviews for location ${e}`);const n=await fetch(`${this.backendUrl}/api/automation/check-reviews/${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!n.ok)throw new Error(`Failed to check reviews: ${n.statusText}`);return be({title:"Reviews Checked",description:"Review check completed successfully."}),!0}catch(n){return console.error("❌ Error checking reviews:",n),be({title:"Error",description:"Failed to check reviews. Please try again.",variant:"destructive"}),!1}}async getAutomationLogs(){try{const e=await fetch(`${this.backendUrl}/api/automation/logs`);if(!e.ok)throw new Error(`Failed to get automation logs: ${e.statusText}`);return(await e.json()).activities||[]}catch(e){return console.error("❌ Error getting automation logs:",e),[]}}async enableAutoPosting(e,r,n,s,i,o,l,c,u,d,h,f){const m={autoPosting:{enabled:!0,schedule:n,frequency:s,businessName:r,category:i,keywords:o,websiteUrl:l,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,...d,phoneNumber:h,button:f},userId:c,accountId:u};return this.saveAutomationSettings(e,m)}async disableAutoPosting(e){const r={autoPosting:{enabled:!1}};return this.saveAutomationSettings(e,r)}async enableAutoReply(e,r,n=!0,s,i,o,l){const c={autoReply:{enabled:!0,replyToAll:n,replyToPositive:!0,replyToNegative:!0,replyToNeutral:!0,businessName:r},userId:s,accountId:i};return o&&(c.autoReply.keywords=o),l&&(c.autoReply.category=l),this.saveAutomationSettings(e,c)}async disableAutoReply(e){const r={autoReply:{enabled:!1}};return this.saveAutomationSettings(e,r)}}const Ui=new Tse;typeof window<"u"&&(window.serverAutomationService=Ui,console.log("🤖 Server Automation Service initialized"),console.log("   Use window.serverAutomationService to access the service"));function Cse({location:t}){var $,ne,te,z,de,Z,re,_e,se,Fe,oe,V,W;const{currentUser:e}=Er(),{isConnected:r}=Su(),[n,s]=p.useState(null),[i,o]=p.useState(!0),[l,c]=p.useState(!1),[u,d]=p.useState(["09:00"]),[h,f]=p.useState(""),[m,v]=p.useState([]),[y,x]=p.useState(!1),b=()=>["quality service","customer satisfaction","professional","reliable","trusted","excellent experience","local business","community","best service","development","quality","customer","service","professional","reliable","trusted","excellent","experience","local","business","community","best","good","great","amazing","awesome","top","leading","premier","expert","specialists","solutions","services","company","corporation","inc","llc","ltd","limited","pvt","private","consultant","consulting"],w=()=>{const L=[],J=b();return t.name&&(L.push(t.name),t.name.toLowerCase().split(/[\s.,\-_]+/).forEach(pe=>{pe.length>2&&!J.includes(pe.toLowerCase())&&L.push(pe)})),t.address&&t.address.locality&&(L.push(t.address.locality),t.name&&L.push(`${t.name} ${t.address.locality}`)),[...new Set(L.filter(le=>!J.includes(le.toLowerCase().trim())))]};p.useEffect(()=>{j();const L=$t.onConfigurationChange((pe,ke)=>{pe===t.id&&s(ke)}),J=wP.onAutoPostSuccess(pe=>{pe.locationId===t.id&&j()}),le=wP.onAutoPostError(pe=>{pe.locationId===t.id&&j()});return()=>{L(),J(),le()}},[t.id]);const j=()=>{let L=$t.getConfiguration(t.id);L?(typeof L.keywords=="string"&&(L.keywords=L.keywords?L.keywords.split(",").map(J=>J.trim()).filter(J=>J.length>0):w(),$t.saveConfiguration(L)),Array.isArray(L.keywords)&&L.keywords.length===0&&(L.keywords=w(),$t.saveConfiguration(L)),L.button||(L.button={enabled:!0,type:"auto"},$t.saveConfiguration(L))):(L=$t.createDefaultConfiguration(t.id,t.name),L.categories=t.categories||[],L.locationName=t.name,L.websiteUrl=t.websiteUri,L.keywords=w(),$t.saveConfiguration(L)),s(L),L.keywords&&Array.isArray(L.keywords)&&v(L.keywords),L.schedule.frequency==="custom"&&L.schedule.customTimes&&d(L.schedule.customTimes),o(!1)},E=L=>{if(!n)return;const J={...n,...L};s(J),$t.saveConfiguration(J)},I=async L=>{var J,le;E({enabled:L}),x(!0);try{if(L){const pe=localStorage.getItem("google_business_account_id"),ke=t.address?{fullAddress:((J=t.address.addressLines)==null?void 0:J.join(", "))||"",city:t.address.locality||"",region:t.address.administrativeArea||"",country:t.address.countryCode||"",postalCode:t.address.postalCode||""}:{};await Ui.enableAutoPosting(t.id,t.name,(n==null?void 0:n.schedule.time)||"09:00",(n==null?void 0:n.schedule.frequency)||"daily",(le=t.categories)==null?void 0:le[0],m.join(", "),t.websiteUri,e==null?void 0:e.uid,pe||void 0,ke,t.phoneNumber,n==null?void 0:n.button),be({title:"Auto-posting enabled! 🚀",description:`Posts will be automatically generated for ${t.name} even when you're offline`,duration:4e3})}else await Ui.disableAutoPosting(t.id),be({title:"Auto-posting disabled",description:`Automatic posting stopped for ${t.name}`,duration:3e3})}catch(pe){console.error("Failed to save to server:",pe),be({title:"Server sync failed",description:"Settings saved locally but server sync failed. Automation may not work when offline.",variant:"destructive",duration:5e3})}finally{x(!1)}},O=async L=>{var pe,ke;const J={...n};J.schedule.frequency=L;const le=T(L,J.schedule.time);if(J.nextPost=le,E(J),n!=null&&n.enabled)try{const De=localStorage.getItem("google_business_account_id"),qe=t.address?{fullAddress:((pe=t.address.addressLines)==null?void 0:pe.join(", "))||"",city:t.address.locality||"",region:t.address.administrativeArea||"",country:t.address.countryCode||"",postalCode:t.address.postalCode||""}:{};await Ui.saveAutomationSettings(t.id,{autoPosting:{enabled:!0,schedule:J.schedule.time,frequency:L,businessName:t.name,category:(ke=t.categories)==null?void 0:ke[0],categories:t.categories,keywords:m.join(", "),websiteUrl:t.websiteUri,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,...qe,phoneNumber:t.phoneNumber,button:n==null?void 0:n.button},userId:e==null?void 0:e.uid,accountId:De||void 0})}catch(De){console.error("Failed to update server:",De)}L==="test30s"&&be({title:"Test mode enabled! 🧪",description:"Posts will be generated every 30 seconds for testing",duration:4e3})},T=(L,J)=>{const le=new Date,[pe,ke]=J.split(":").map(Number);let De=new Date;switch(De.setHours(pe,ke,0,0),L){case"test30s":De=new Date(le.getTime()+30*1e3);break;case"daily":De<=le&&De.setDate(De.getDate()+1);break;case"alternative":De<=le?De.setDate(De.getDate()+2):De.setDate(De.getDate()+1);break;case"weekly":De<=le&&De.setDate(De.getDate()+7);break;case"custom":if(u.length>0){const qe=u.map(jt=>{const[Nt,Q]=jt.split(":").map(Number),ue=new Date;return ue.setHours(Nt,Q,0,0),ue}).sort((jt,Nt)=>jt.getTime()-Nt.getTime()),mt=qe.find(jt=>jt>le);De=mt||qe[0],mt||De.setDate(De.getDate()+1)}break}return De.toISOString()},A=async L=>{var le,pe;const J={...n};if(J.schedule.time=L,J.nextPost=T(J.schedule.frequency,L),E(J),n!=null&&n.enabled)try{const ke=localStorage.getItem("google_business_account_id"),De=t.address?{fullAddress:((le=t.address.addressLines)==null?void 0:le.join(", "))||"",city:t.address.locality||"",region:t.address.administrativeArea||"",country:t.address.countryCode||"",postalCode:t.address.postalCode||""}:{};await Ui.saveAutomationSettings(t.id,{autoPosting:{enabled:!0,schedule:L,frequency:J.schedule.frequency,businessName:t.name,category:(pe=t.categories)==null?void 0:pe[0],categories:t.categories,keywords:m.join(", "),websiteUrl:t.websiteUri,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,...De,phoneNumber:t.phoneNumber,button:n==null?void 0:n.button},userId:e==null?void 0:e.uid,accountId:ke||void 0})}catch(ke){console.error("Failed to update server:",ke)}},S=L=>{d(L);const J={...n};J.schedule.customTimes=L,J.nextPost=T(J.schedule.frequency,J.schedule.time),E(J)},_=()=>{const L=[...u,"09:00"];S(L)},P=L=>{const J=u.filter((le,pe)=>pe!==L);S(J)},R=()=>{const L=h.trim(),J=b();if(!L)return;if(J.includes(L.toLowerCase())){be({title:"Generic Keyword Avoided",description:`"${L}" is too generic. Try using your business name or location instead.`,variant:"destructive",duration:4e3});return}if(m.includes(L)){be({title:"Keyword Already Exists",description:`"${L}" is already in your keywords.`,variant:"destructive",duration:3e3});return}const le=[...m,L];v(le),B(le),f(""),be({title:"Keyword Added! ✅",description:`Added "${L}" to your keywords`,duration:2e3})},C=L=>{const J=m.filter(le=>le!==L);v(J),B(J),be({title:"Keyword Removed",description:`Removed "${L}" from your keywords`,duration:2e3})},B=async L=>{var J,le;if(E({keywords:L}),n!=null&&n.enabled)try{const pe=localStorage.getItem("google_business_account_id"),ke=t.address?{fullAddress:((J=t.address.addressLines)==null?void 0:J.join(", "))||"",city:t.address.locality||"",region:t.address.administrativeArea||"",country:t.address.countryCode||"",postalCode:t.address.postalCode||""}:{};await Ui.saveAutomationSettings(t.id,{autoPosting:{enabled:!0,schedule:(n==null?void 0:n.schedule.time)||"09:00",frequency:(n==null?void 0:n.schedule.frequency)||"daily",businessName:t.name,category:(le=t.categories)==null?void 0:le[0],categories:t.categories,keywords:L.join(", "),websiteUrl:t.websiteUri,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,...ke,phoneNumber:t.phoneNumber,button:n==null?void 0:n.button},userId:e==null?void 0:e.uid,accountId:pe||void 0}),console.log("Keywords synced to server for automation")}catch(pe){console.error("Failed to sync keywords to server:",pe)}},G=()=>{const L=w();v(L),B(L),be({title:"Keywords Generated! 🎯",description:"Smart keywords generated focusing on your business name and location.",duration:3e3})},U=()=>{const L=b(),J=m.filter(pe=>!L.includes(pe.toLowerCase().trim())),le=m.length-J.length;le>0?(v(J),B(J),be({title:"Keywords Cleaned! 🧹",description:`Removed ${le} generic keyword${le>1?"s":""}.`,duration:3e3})):be({title:"All Good! ✅",description:"No generic keywords found to remove.",duration:2e3})},F=async()=>{var L,J,le,pe,ke,De,qe;if(n){c(!0);try{if(!e)throw new Error("You must be logged in to test auto-posting");console.log("[AutoPostingTab] Checking backend token status for user:",e.uid);const mt="http://localhost:5000",jt=await fetch(`${mt}/auth/google/token-status/${e.uid}`);if(!jt.ok)throw new Error("Failed to check token status");const Nt=await jt.json();if(console.log("[AutoPostingTab] Token status:",Nt),!Nt.hasAccessToken&&!Nt.hasRefreshToken){be({title:"Connection Required",description:"Your Google Business Profile isn't connected. Go to Settings > Connections to connect.",variant:"destructive",duration:5e3}),c(!1);return}console.log("[AutoPostingTab] ✅ Backend has valid tokens, proceeding with test post...");const Q=xt.getAccessToken();console.log("[AutoPostingTab] 🔑 Access token from service:",Q?"Available":"Not available"),console.log("[AutoPostingTab] 🔑 Token length:",(Q==null?void 0:Q.length)||0);const ue=await fetch(`${mt}/api/automation/test-post-now/${t.id}`,{method:"POST",headers:{"Content-Type":"application/json","X-User-ID":e.uid,...Q?{Authorization:`Bearer ${Q}`}:{}},body:JSON.stringify({businessName:t.name,category:((L=t.categories)==null?void 0:L[0])||"business",keywords:m.length>0?m.join(", "):"quality service, customer satisfaction",websiteUrl:t.websiteUri||"",locationName:((J=t.address)==null?void 0:J.locality)||"",city:((le=t.address)==null?void 0:le.locality)||"",region:((pe=t.address)==null?void 0:pe.administrativeArea)||"",country:((ke=t.address)==null?void 0:ke.countryCode)||"",fullAddress:((qe=(De=t.address)==null?void 0:De.addressLines)==null?void 0:qe.join(", "))||"",phoneNumber:t.phoneNumber||"",userId:e.uid,accessToken:Q||void 0,button:n.button})}),we=ue.headers.get("content-type");let Me;if(we&&we.includes("application/json"))Me=await ue.json();else{const Ne=await ue.text();throw console.error("[AutoPostingTab] Received HTML response instead of JSON:",Ne.substring(0,200)),new Error(`Backend returned HTML error page. Status: ${ue.status}`)}ue.ok&&Me.success?be({title:"Test post successful! ✅",description:Me.message||"Your post has been published to Google Business Profile",duration:5e3}):be({title:"Test post failed ❌",description:Me.error||Me.details||"Failed to publish post",variant:"destructive",duration:6e3})}catch(mt){be({title:"Test post failed ❌",description:mt instanceof Error?mt.message:"Unknown error occurred",variant:"destructive",duration:6e3})}finally{c(!1)}}},M=()=>{if(!(n!=null&&n.nextPost))return"Not scheduled";if(n.schedule.frequency==="test30s")if(n.lastPost){const le=new Date(n.lastPost),pe=new Date(le.getTime()+30*1e3),ke=new Date;return pe<=ke?"Ready to post":`${Math.ceil((pe.getTime()-ke.getTime())/1e3)}s remaining`}else return"Ready to post";const L=new Date(n.nextPost);return L<=new Date?"Ready to post":L.toLocaleString()};return xe.useMemo(()=>{const L=w();return m.filter(J=>!L.includes(J))},[m,t.name,t.categories]),i?a.jsxs("div",{className:"flex flex-col items-center justify-center py-16 space-y-4",children:[a.jsx(Uh,{size:"lg",variant:"primary"}),a.jsxs("div",{className:"text-center space-y-2",children:[a.jsx("h3",{className:"font-medium text-lg",children:"Loading Automation Settings..."}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Setting up your auto-posting configuration"})]}),a.jsx("div",{className:"w-full max-w-4xl mt-8 space-y-6",children:Array.from({length:3}).map((L,J)=>a.jsxs(H,{children:[a.jsxs(me,{children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"h-5 w-5 bg-muted rounded animate-pulse"}),a.jsx("div",{className:"h-5 bg-muted rounded w-48 animate-pulse"})]}),a.jsx("div",{className:"h-6 w-16 bg-muted rounded-full animate-pulse"})]}),a.jsx("div",{className:"h-3 bg-muted rounded w-64 animate-pulse mt-2"})]}),a.jsxs(Y,{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx("div",{className:"h-10 bg-muted rounded animate-pulse"}),a.jsx("div",{className:"h-10 bg-muted rounded animate-pulse"})]}),a.jsx("div",{className:"h-24 bg-muted rounded animate-pulse"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx("div",{className:"h-10 bg-muted rounded animate-pulse"}),a.jsx("div",{className:"h-10 bg-muted rounded animate-pulse"})]})]})]},J))})]}):n?a.jsxs("div",{className:"space-y-3 sm:space-y-4 md:space-y-6 min-w-0 w-full px-2 sm:px-4 md:px-0",children:[a.jsxs(H,{className:"shadow-sm overflow-hidden",children:[a.jsxs(me,{className:"p-3 sm:p-4 md:p-6",children:[a.jsxs(ge,{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-2 sm:gap-3 max-w-full",children:[a.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 min-w-0 flex-1",children:[a.jsx(Sg,{className:"h-4 w-4 sm:h-5 sm:w-5 flex-shrink-0"}),a.jsx("span",{className:"text-sm sm:text-base md:text-lg break-words",children:"Auto Posting Configuration"})]}),a.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[a.jsx(Ln,{checked:n.enabled,onCheckedChange:I,disabled:y}),a.jsx("span",{className:"text-xs sm:text-sm font-medium whitespace-nowrap",children:y?a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx("div",{className:"animate-spin h-3 w-3 border-2 border-current border-t-transparent rounded-full"}),a.jsx("span",{className:"hidden xs:inline",children:"Saving..."})]}):a.jsx("span",{children:n.enabled?"Enabled":"Disabled"})})]})]}),a.jsxs(Qe,{className:"text-xs sm:text-sm break-words mt-1",children:["Automatically generate and publish posts for ",t.name]})]}),a.jsxs(Y,{className:"space-y-3 sm:space-y-4 p-3 sm:p-4 md:p-6",children:[a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3 sm:gap-4",children:[a.jsxs("div",{className:"min-w-0",children:[a.jsx(Ie,{className:"text-xs sm:text-sm md:text-base",children:"Business Name"}),a.jsx(Ze,{value:n.businessName,disabled:!0,className:"text-xs sm:text-sm mt-1"})]}),a.jsxs("div",{className:"min-w-0",children:[a.jsx(Ie,{className:"text-xs sm:text-sm md:text-base",children:"Categories"}),a.jsxs("div",{className:"flex flex-wrap gap-1 sm:gap-1.5 mt-1",children:[n.categories.map((L,J)=>a.jsx(Se,{variant:"secondary",className:"text-xs px-2 py-0.5",children:L},J)),n.categories.length===0&&a.jsx(Se,{variant:"outline",className:"text-xs",children:"No categories"})]})]})]}),a.jsxs("div",{className:"min-w-0",children:[a.jsxs(Ie,{className:"flex items-center gap-1.5 sm:gap-2 text-xs sm:text-sm md:text-base",children:[a.jsx(FS,{className:"h-3 w-3 sm:h-4 sm:w-4 flex-shrink-0"}),a.jsx("span",{children:"Keywords for Content Generation"})]}),a.jsxs("div",{className:"space-y-2 sm:space-y-3 mt-2",children:[a.jsxs("div",{className:"flex flex-wrap gap-1 sm:gap-1.5 md:gap-2 p-2 sm:p-3 bg-gray-50 rounded-lg border min-h-[80px] sm:min-h-[100px] md:min-h-[120px] overflow-hidden",children:[m.map((L,J)=>{const pe=w().includes(L);return a.jsx("div",{className:"flex items-center",children:a.jsxs(Se,{variant:pe?"default":"outline",className:"flex items-center gap-0.5 sm:gap-1 text-[10px] sm:text-xs px-1.5 sm:px-2 py-0.5 max-w-full",children:[pe&&a.jsx(FS,{className:"h-2.5 w-2.5 sm:h-3 sm:w-3 flex-shrink-0"}),a.jsx("span",{className:"break-all truncate max-w-[120px] sm:max-w-[200px]",title:L,children:L}),a.jsx("button",{type:"button",onClick:()=>C(L),disabled:!n.enabled,className:"ml-0.5 sm:ml-1 hover:bg-red-500 hover:text-white rounded-full p-0.5 transition-colors flex-shrink-0",children:a.jsx(Hs,{className:"h-2.5 w-2.5 sm:h-3 sm:w-3"})})]})},J)}),m.length===0&&a.jsx("p",{className:"text-muted-foreground text-[10px] sm:text-xs md:text-sm px-1",children:'No keywords added yet. Click "Generate Keywords" to auto-populate based on your business profile.'})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[a.jsx(Ze,{placeholder:"Enter custom keyword...",value:h,onChange:L=>f(L.target.value),onKeyPress:L=>{L.key==="Enter"&&(L.preventDefault(),R())},disabled:!n.enabled,className:"text-xs sm:text-sm flex-1"}),a.jsxs(K,{type:"button",onClick:R,size:"sm",disabled:!n.enabled||!h.trim(),className:"w-full sm:w-auto whitespace-nowrap text-xs sm:text-sm",children:[a.jsx(lo,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1"}),a.jsx("span",{children:"Add"})]})]}),a.jsxs("div",{className:"flex flex-col xs:flex-row gap-2",children:[a.jsxs(K,{type:"button",variant:"outline",size:"sm",onClick:G,disabled:!n.enabled,className:"w-full xs:w-auto text-xs sm:text-sm flex-1 xs:flex-initial",children:[a.jsx(ir,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 flex-shrink-0"}),a.jsx("span",{className:"truncate",children:"Generate"})]}),a.jsxs(K,{type:"button",variant:"outline",size:"sm",onClick:U,disabled:!n.enabled,className:"w-full xs:w-auto text-xs sm:text-sm flex-1 xs:flex-initial",children:[a.jsx(co,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 flex-shrink-0"}),a.jsx("span",{className:"truncate",children:"Clean"})]}),a.jsxs(K,{type:"button",variant:"outline",size:"sm",onClick:()=>v([]),disabled:!n.enabled,className:"w-full xs:w-auto text-xs sm:text-sm flex-1 xs:flex-initial",children:[a.jsx(Hm,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 flex-shrink-0"}),a.jsx("span",{className:"truncate",children:"Clear"})]})]}),a.jsxs("p",{className:"text-[10px] sm:text-xs md:text-sm text-muted-foreground break-words",children:["Smart keyword generation focuses on your business name (",t.name,"), location (",($=t.address)==null?void 0:$.locality,", ",(ne=t.address)==null?void 0:ne.administrativeArea,"), and specific categories while filtering out generic terms."]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 pt-3 sm:pt-4 border-t",children:[a.jsxs("div",{className:"min-w-0",children:[a.jsx(Ie,{className:"text-xs sm:text-sm",children:"Next Post"}),a.jsx("div",{className:"mt-1 p-2 sm:p-2.5 bg-muted rounded text-xs sm:text-sm break-words",children:M()})]}),a.jsxs("div",{className:"min-w-0",children:[a.jsx(Ie,{className:"text-xs sm:text-sm",children:"Current Status"}),a.jsx("div",{className:"mt-1 flex items-center gap-1.5 sm:gap-2",children:n.enabled?a.jsxs(a.Fragment,{children:[a.jsx(s9,{className:"h-3 w-3 sm:h-4 sm:w-4 text-green-600 flex-shrink-0"}),a.jsx("span",{className:"text-xs sm:text-sm text-green-600 break-words",children:"Active (Server-side)"})]}):a.jsxs(a.Fragment,{children:[a.jsx(t9,{className:"h-3 w-3 sm:h-4 sm:w-4 text-gray-600 flex-shrink-0"}),a.jsx("span",{className:"text-xs sm:text-sm text-gray-600",children:"Paused"})]})}),n.enabled&&a.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground mt-1 break-words",children:"Running on server - continues even when offline"})]})]}),a.jsx("div",{className:"flex flex-col sm:flex-row gap-2 pt-2",children:a.jsx(K,{onClick:F,disabled:!n.enabled||l||!r,variant:"outline",className:"flex items-center justify-center gap-2 w-full sm:w-auto text-xs sm:text-sm",title:r?"":"Connect your Google Business Profile in Settings > Connections first",children:l?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin h-3 w-3 sm:h-4 sm:w-4 border-2 border-current border-t-transparent rounded-full"}),a.jsx("span",{children:"Testing..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(BS,{className:"h-3 w-3 sm:h-4 sm:w-4 flex-shrink-0"}),a.jsx("span",{children:"Test & Post Now"}),!r&&a.jsx("span",{className:"ml-1 text-[10px] sm:text-xs",children:"(Connect GBP)"})]})})})]})]}),a.jsxs(H,{className:"shadow-sm overflow-hidden",children:[a.jsxs(me,{className:"p-3 sm:p-4 md:p-6",children:[a.jsxs(ge,{className:"flex items-center gap-1.5 sm:gap-2 text-sm sm:text-base md:text-lg",children:[a.jsx(co,{className:"h-4 w-4 sm:h-5 sm:w-5 flex-shrink-0"}),a.jsx("span",{children:"Post Button Settings"})]}),a.jsx(Qe,{className:"text-xs sm:text-sm break-words mt-1",children:"Configure call-to-action buttons for your posts"})]}),a.jsxs(Y,{className:"space-y-3 sm:space-y-4 p-3 sm:p-4 md:p-6",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Ln,{checked:((te=n.button)==null?void 0:te.enabled)??!0,onCheckedChange:L=>{var J,le,pe;return E({button:{enabled:L,type:((J=n.button)==null?void 0:J.type)||"auto",phoneNumber:((le=n.button)==null?void 0:le.phoneNumber)||t.phoneNumber,customUrl:(pe=n.button)==null?void 0:pe.customUrl}})},disabled:!n.enabled}),a.jsx("span",{className:"text-xs sm:text-sm font-medium",children:"Add buttons to posts"})]}),((z=n.button)==null?void 0:z.enabled)&&a.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[a.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[a.jsx(Ie,{className:"text-xs sm:text-sm font-medium",children:"Call-to-Action Button Type"}),a.jsxs(Ht,{value:((de=n.button)==null?void 0:de.type)||"auto",onValueChange:L=>{var J;return E({button:{...n.button,enabled:!0,type:L,phoneNumber:((J=n.button)==null?void 0:J.phoneNumber)||t.phoneNumber}})},children:[a.jsx(Bt,{children:a.jsx(Kt,{placeholder:"Select button type"})}),a.jsxs(Vt,{children:[a.jsx(fe,{value:"auto",children:"🎯 Smart Selection (Auto)"}),a.jsx(fe,{value:"none",children:"🚫 No Button"}),a.jsx(fe,{value:"book",children:"📅 Book Appointment"}),a.jsx(fe,{value:"order",children:"🛒 Order Online"}),a.jsx(fe,{value:"buy",children:"💳 Buy Now"}),a.jsx(fe,{value:"learn_more",children:"📚 Learn More"}),a.jsx(fe,{value:"sign_up",children:"✍️ Sign Up"}),a.jsx(fe,{value:"call_now",children:"📞 Call Now"})]})]})]}),((Z=n.button)==null?void 0:Z.type)==="auto"&&a.jsx("div",{className:"text-[10px] sm:text-xs text-muted-foreground bg-blue-50 p-2 sm:p-3 rounded-lg",children:a.jsxs("div",{children:[a.jsx("strong",{children:"🎯 Smart Selection:"})," Automatically chooses the best button based on your business category:",a.jsxs("ul",{className:"mt-1 ml-3 sm:ml-4 list-disc space-y-0.5",children:[a.jsx("li",{children:"Restaurants → Order Online"}),a.jsx("li",{children:"Salons/Health → Book Appointment"}),a.jsx("li",{children:"Retail → Shop Now"}),a.jsx("li",{children:"Education → Sign Up"}),a.jsx("li",{children:"Others → Learn More"})]}),a.jsxs("p",{className:"mt-2 break-words",children:["All buttons will redirect to your website URL: ",n.websiteUrl||"Not set"]})]})}),((re=n.button)==null?void 0:re.type)==="call_now"&&a.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[a.jsx(Ie,{htmlFor:"phone-number",className:"text-xs sm:text-sm font-medium",children:"Phone Number"}),a.jsx(Ze,{id:"phone-number",type:"tel",placeholder:t.phoneNumber?`Business phone: ${t.phoneNumber}`:"e.g., +1 (555) 123-4567",value:((_e=n.button)==null?void 0:_e.phoneNumber)||t.phoneNumber||"",onChange:L=>{var J;return E({button:{...n.button,enabled:!0,type:((J=n.button)==null?void 0:J.type)||"call_now",phoneNumber:L.target.value}})},disabled:!n.enabled,className:"text-xs sm:text-sm"}),a.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground break-words",children:t.phoneNumber?(se=n.button)!=null&&se.phoneNumber?a.jsxs("span",{children:["Using custom phone number. Clear to use business profile number: ",t.phoneNumber]}):a.jsxs("span",{className:"text-green-600",children:["✓ Auto-filled from your Google Business Profile: ",t.phoneNumber]}):a.jsx("span",{className:"text-amber-600",children:"⚠ No phone number found in your Google Business Profile. Please add one."})})]}),((Fe=n.button)==null?void 0:Fe.type)&&!["auto","none","call_now"].includes(n.button.type)&&a.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[a.jsxs(Ie,{htmlFor:"button-url",className:"text-xs sm:text-sm font-medium",children:[n.button.type==="book"&&"Booking URL",n.button.type==="order"&&"Order Online URL",n.button.type==="buy"&&"Purchase URL",n.button.type==="learn_more"&&"Learn More URL",n.button.type==="sign_up"&&"Sign Up URL"]}),a.jsx(Ze,{id:"button-url",type:"url",placeholder:n.button.type==="book"?"https://your-booking-system.com":n.button.type==="order"?"https://your-online-ordering.com":n.button.type==="buy"?"https://your-shop.com":n.button.type==="learn_more"?"https://your-website.com/about":n.button.type==="sign_up"?"https://your-website.com/signup":"https://your-website.com",value:((oe=n.button)==null?void 0:oe.customUrl)||n.websiteUrl||"",onChange:L=>{var J;return E({button:{...n.button,enabled:!0,type:((J=n.button)==null?void 0:J.type)||"learn_more",customUrl:L.target.value}})},className:"text-xs sm:text-sm"}),a.jsxs("p",{className:"text-[10px] sm:text-xs text-muted-foreground break-words",children:["Enter the URL where customers should be directed when they click the button.",!((V=n.button)!=null&&V.customUrl)&&n.websiteUrl&&a.jsx("span",{className:"text-blue-600",children:" Currently using your default website URL."})]})]}),((W=n.button)==null?void 0:W.type)==="none"&&a.jsx("div",{className:"text-[10px] sm:text-xs text-muted-foreground bg-gray-50 p-2 sm:p-3 rounded-lg",children:a.jsx("p",{children:"Posts will be created without any call-to-action buttons."})})]})]})]}),a.jsxs(H,{className:"shadow-sm overflow-hidden",children:[a.jsxs(me,{className:"p-3 sm:p-4 md:p-6",children:[a.jsxs(ge,{className:"flex items-center gap-1.5 sm:gap-2 text-sm sm:text-base md:text-lg",children:[a.jsx(Kn,{className:"h-4 w-4 sm:h-5 sm:w-5 flex-shrink-0"}),a.jsx("span",{children:"Posting Schedule"})]}),a.jsx(Qe,{className:"text-xs sm:text-sm break-words mt-1",children:"Set when and how often to publish posts"})]}),a.jsxs(Y,{className:"space-y-3 sm:space-y-4 p-3 sm:p-4 md:p-6",children:[a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3 sm:gap-4",children:[a.jsxs("div",{className:"min-w-0",children:[a.jsx(Ie,{htmlFor:"frequency",className:"text-xs sm:text-sm",children:"Frequency"}),a.jsxs(Ht,{value:n.schedule.frequency,onValueChange:O,disabled:!n.enabled,children:[a.jsx(Bt,{children:a.jsx(Kt,{})}),a.jsxs(Vt,{children:[a.jsx(fe,{value:"daily",children:"Daily"}),a.jsx(fe,{value:"alternative",children:"Alternative Days"}),a.jsx(fe,{value:"weekly",children:"Weekly"}),a.jsx(fe,{value:"custom",children:"Custom Schedule"}),a.jsx(fe,{value:"test30s",children:"🧪 Test (30 seconds)"})]})]})]}),n.schedule.frequency!=="custom"&&n.schedule.frequency!=="test30s"&&a.jsxs("div",{className:"min-w-0",children:[a.jsxs(Ie,{htmlFor:"time",className:"text-xs sm:text-sm",children:[a.jsx(Yn,{className:"h-3 w-3 sm:h-4 sm:w-4 inline mr-1"}),a.jsx("span",{children:"Post Time"})]}),a.jsx(Ze,{id:"time",type:"time",value:n.schedule.time,onChange:L=>A(L.target.value),disabled:!n.enabled,className:"text-xs sm:text-sm"})]})]}),n.schedule.frequency==="custom"&&a.jsxs("div",{className:"min-w-0",children:[a.jsx(Ie,{className:"text-xs sm:text-sm",children:"Custom Post Times"}),a.jsxs("div",{className:"space-y-2 mt-2",children:[u.map((L,J)=>a.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2",children:[a.jsx(Ze,{type:"time",value:L,onChange:le=>{const pe=[...u];pe[J]=le.target.value,S(pe)},disabled:!n.enabled,className:"text-xs sm:text-sm flex-1"}),a.jsx(K,{type:"button",variant:"outline",size:"sm",onClick:()=>P(J),disabled:!n.enabled||u.length<=1,className:"w-full sm:w-auto text-xs sm:text-sm",children:"Remove"})]},J)),a.jsx(K,{type:"button",variant:"outline",size:"sm",onClick:_,disabled:!n.enabled,className:"w-full sm:w-auto text-xs sm:text-sm",children:"Add Time"})]})]}),n.schedule.frequency==="test30s"&&a.jsxs("div",{className:"p-2 sm:p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 text-yellow-800",children:[a.jsx(BS,{className:"h-3 w-3 sm:h-4 sm:w-4 flex-shrink-0"}),a.jsx("strong",{className:"text-xs sm:text-sm",children:"Test Mode Active"})]}),a.jsx("p",{className:"text-[10px] sm:text-xs md:text-sm text-yellow-700 mt-1 break-words",children:"Posts will be generated every 30 seconds. Remember to switch back to a normal schedule after testing!"})]})]})]})]}):a.jsx("div",{className:"text-center py-8",children:a.jsx("p",{className:"text-muted-foreground",children:"Failed to load configuration"})})}var UL="AlertDialog",[kse,t_e]=Dr(UL,[HM]),gi=HM(),BL=t=>{const{__scopeAlertDialog:e,...r}=t,n=gi(e);return a.jsx(c4,{...n,...r,modal:!0})};BL.displayName=UL;var Ise="AlertDialogTrigger",Rse=p.forwardRef((t,e)=>{const{__scopeAlertDialog:r,...n}=t,s=gi(r);return a.jsx(u4,{...s,...n,ref:e})});Rse.displayName=Ise;var Ose="AlertDialogPortal",VL=t=>{const{__scopeAlertDialog:e,...r}=t,n=gi(e);return a.jsx(d4,{...n,...r})};VL.displayName=Ose;var Dse="AlertDialogOverlay",zL=p.forwardRef((t,e)=>{const{__scopeAlertDialog:r,...n}=t,s=gi(r);return a.jsx(oj,{...s,...n,ref:e})});zL.displayName=Dse;var Sc="AlertDialogContent",[Mse,Lse]=kse(Sc),Fse=Lk("AlertDialogContent"),GL=p.forwardRef((t,e)=>{const{__scopeAlertDialog:r,children:n,...s}=t,i=gi(r),o=p.useRef(null),l=We(e,o),c=p.useRef(null);return a.jsx(pne,{contentName:Sc,titleName:WL,docsSlug:"alert-dialog",children:a.jsx(Mse,{scope:r,cancelRef:c,children:a.jsxs(lj,{role:"alertdialog",...i,...s,ref:l,onOpenAutoFocus:ve(s.onOpenAutoFocus,u=>{var d;u.preventDefault(),(d=c.current)==null||d.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[a.jsx(Fse,{children:n}),a.jsx(Use,{contentRef:o})]})})})});GL.displayName=Sc;var WL="AlertDialogTitle",qL=p.forwardRef((t,e)=>{const{__scopeAlertDialog:r,...n}=t,s=gi(r);return a.jsx(cj,{...s,...n,ref:e})});qL.displayName=WL;var HL="AlertDialogDescription",KL=p.forwardRef((t,e)=>{const{__scopeAlertDialog:r,...n}=t,s=gi(r);return a.jsx(uj,{...s,...n,ref:e})});KL.displayName=HL;var $se="AlertDialogAction",YL=p.forwardRef((t,e)=>{const{__scopeAlertDialog:r,...n}=t,s=gi(r);return a.jsx(dj,{...s,...n,ref:e})});YL.displayName=$se;var QL="AlertDialogCancel",XL=p.forwardRef((t,e)=>{const{__scopeAlertDialog:r,...n}=t,{cancelRef:s}=Lse(QL,r),i=gi(r),o=We(e,s);return a.jsx(dj,{...i,...n,ref:o})});XL.displayName=QL;var Use=({contentRef:t})=>{const e=`\`${Sc}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Sc}\` by passing a \`${HL}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Sc}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return p.useEffect(()=>{var n;document.getElementById((n=t.current)==null?void 0:n.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},Bse=BL,Vse=VL,JL=zL,ZL=GL,e3=YL,t3=XL,r3=qL,n3=KL;const zse=Bse,Gse=Vse,s3=p.forwardRef(({className:t,...e},r)=>a.jsx(JL,{className:ye("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:r}));s3.displayName=JL.displayName;const a3=p.forwardRef(({className:t,...e},r)=>a.jsxs(Gse,{children:[a.jsx(s3,{}),a.jsx(ZL,{ref:r,className:ye("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...e})]}));a3.displayName=ZL.displayName;const i3=({className:t,...e})=>a.jsx("div",{className:ye("flex flex-col space-y-2 text-center sm:text-left",t),...e});i3.displayName="AlertDialogHeader";const o3=({className:t,...e})=>a.jsx("div",{className:ye("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});o3.displayName="AlertDialogFooter";const l3=p.forwardRef(({className:t,...e},r)=>a.jsx(r3,{ref:r,className:ye("text-lg font-semibold",t),...e}));l3.displayName=r3.displayName;const c3=p.forwardRef(({className:t,...e},r)=>a.jsx(n3,{ref:r,className:ye("text-sm text-muted-foreground",t),...e}));c3.displayName=n3.displayName;const u3=p.forwardRef(({className:t,...e},r)=>a.jsx(e3,{ref:r,className:ye($d(),t),...e}));u3.displayName=e3.displayName;const d3=p.forwardRef(({className:t,...e},r)=>a.jsx(t3,{ref:r,className:ye($d({variant:"outline"}),"mt-2 sm:mt-0",t),...e}));d3.displayName=t3.displayName;var Ve=function(){return Ve=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Ve.apply(this,arguments)};function Wse(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function h3(t,e,r){for(var n=0,s=e.length,i;n<s;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))}function Bh(t){return t.mode==="multiple"}function Vh(t){return t.mode==="range"}function Ay(t){return t.mode==="single"}var qse={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function Hse(t,e){return fr(t,"LLLL y",e)}function Kse(t,e){return fr(t,"d",e)}function Yse(t,e){return fr(t,"LLLL",e)}function Qse(t){return"".concat(t)}function Xse(t,e){return fr(t,"cccccc",e)}function Jse(t,e){return fr(t,"yyyy",e)}var Zse=Object.freeze({__proto__:null,formatCaption:Hse,formatDay:Kse,formatMonthCaption:Yse,formatWeekNumber:Qse,formatWeekdayName:Xse,formatYearCaption:Jse}),eae=function(t,e,r){return fr(t,"do MMMM (EEEE)",r)},tae=function(){return"Month: "},rae=function(){return"Go to next month"},nae=function(){return"Go to previous month"},sae=function(t,e){return fr(t,"cccc",e)},aae=function(t){return"Week n. ".concat(t)},iae=function(){return"Year: "},oae=Object.freeze({__proto__:null,labelDay:eae,labelMonthDropdown:tae,labelNext:rae,labelPrevious:nae,labelWeekNumber:aae,labelWeekday:sae,labelYearDropdown:iae});function lae(){var t="buttons",e=qse,r=ej,n={},s={},i=1,o={},l=new Date;return{captionLayout:t,classNames:e,formatters:Zse,labels:oae,locale:r,modifiersClassNames:n,modifiers:s,numberOfMonths:i,styles:o,today:l,mode:"default"}}function cae(t){var e=t.fromYear,r=t.toYear,n=t.fromMonth,s=t.toMonth,i=t.fromDate,o=t.toDate;return n?i=Tn(n):e&&(i=new Date(e,0,1)),s?o=yy(s):r&&(o=new Date(r,11,31)),{fromDate:i?Kc(i):void 0,toDate:o?Kc(o):void 0}}var f3=p.createContext(void 0);function uae(t){var e,r=t.initialProps,n=lae(),s=cae(r),i=s.fromDate,o=s.toDate,l=(e=r.captionLayout)!==null&&e!==void 0?e:n.captionLayout;l!=="buttons"&&(!i||!o)&&(l="buttons");var c;(Ay(r)||Bh(r)||Vh(r))&&(c=r.onSelect);var u=Ve(Ve(Ve({},n),r),{captionLayout:l,classNames:Ve(Ve({},n.classNames),r.classNames),components:Ve({},r.components),formatters:Ve(Ve({},n.formatters),r.formatters),fromDate:i,labels:Ve(Ve({},n.labels),r.labels),mode:r.mode||n.mode,modifiers:Ve(Ve({},n.modifiers),r.modifiers),modifiersClassNames:Ve(Ve({},n.modifiersClassNames),r.modifiersClassNames),onSelect:c,styles:Ve(Ve({},n.styles),r.styles),toDate:o});return a.jsx(f3.Provider,{value:u,children:t.children})}function Mt(){var t=p.useContext(f3);if(!t)throw new Error("useDayPicker must be used within a DayPickerProvider.");return t}function m3(t){var e=Mt(),r=e.locale,n=e.classNames,s=e.styles,i=e.formatters.formatCaption;return a.jsx("div",{className:n.caption_label,style:s.caption_label,"aria-live":"polite",role:"presentation",id:t.id,children:i(t.displayMonth,{locale:r})})}function dae(t){return a.jsx("svg",Ve({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},t,{children:a.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function p3(t){var e,r,n=t.onChange,s=t.value,i=t.children,o=t.caption,l=t.className,c=t.style,u=Mt(),d=(r=(e=u.components)===null||e===void 0?void 0:e.IconDropdown)!==null&&r!==void 0?r:dae;return a.jsxs("div",{className:l,style:c,children:[a.jsx("span",{className:u.classNames.vhidden,children:t["aria-label"]}),a.jsx("select",{name:t.name,"aria-label":t["aria-label"],className:u.classNames.dropdown,style:u.styles.dropdown,value:s,onChange:n,children:i}),a.jsxs("div",{className:u.classNames.caption_label,style:u.styles.caption_label,"aria-hidden":"true",children:[o,a.jsx(d,{className:u.classNames.dropdown_icon,style:u.styles.dropdown_icon})]})]})}function hae(t){var e,r=Mt(),n=r.fromDate,s=r.toDate,i=r.styles,o=r.locale,l=r.formatters.formatMonthCaption,c=r.classNames,u=r.components,d=r.labels.labelMonthDropdown;if(!n)return a.jsx(a.Fragment,{});if(!s)return a.jsx(a.Fragment,{});var h=[];if(Yre(n,s))for(var f=Tn(n),m=n.getMonth();m<=s.getMonth();m++)h.push(wx(f,m));else for(var f=Tn(new Date),m=0;m<=11;m++)h.push(wx(f,m));var v=function(x){var b=Number(x.target.value),w=wx(Tn(t.displayMonth),b);t.onChange(w)},y=(e=u==null?void 0:u.Dropdown)!==null&&e!==void 0?e:p3;return a.jsx(y,{name:"months","aria-label":d(),className:c.dropdown_month,style:i.dropdown_month,onChange:v,value:t.displayMonth.getMonth(),caption:l(t.displayMonth,{locale:o}),children:h.map(function(x){return a.jsx("option",{value:x.getMonth(),children:l(x,{locale:o})},x.getMonth())})})}function fae(t){var e,r=t.displayMonth,n=Mt(),s=n.fromDate,i=n.toDate,o=n.locale,l=n.styles,c=n.classNames,u=n.components,d=n.formatters.formatYearCaption,h=n.labels.labelYearDropdown,f=[];if(!s)return a.jsx(a.Fragment,{});if(!i)return a.jsx(a.Fragment,{});for(var m=s.getFullYear(),v=i.getFullYear(),y=m;y<=v;y++)f.push(gP(FM(new Date),y));var x=function(w){var j=gP(Tn(r),Number(w.target.value));t.onChange(j)},b=(e=u==null?void 0:u.Dropdown)!==null&&e!==void 0?e:p3;return a.jsx(b,{name:"years","aria-label":h(),className:c.dropdown_year,style:l.dropdown_year,onChange:x,value:r.getFullYear(),caption:d(r,{locale:o}),children:f.map(function(w){return a.jsx("option",{value:w.getFullYear(),children:d(w,{locale:o})},w.getFullYear())})})}function mae(t,e){var r=p.useState(t),n=r[0],s=r[1],i=e===void 0?n:e;return[i,s]}function pae(t){var e=t.month,r=t.defaultMonth,n=t.today,s=e||r||n||new Date,i=t.toDate,o=t.fromDate,l=t.numberOfMonths,c=l===void 0?1:l;if(i&&Qc(i,s)<0){var u=-1*(c-1);s=Ws(i,u)}return o&&Qc(s,o)<0&&(s=o),Tn(s)}function gae(){var t=Mt(),e=pae(t),r=mae(e,t.month),n=r[0],s=r[1],i=function(o){var l;if(!t.disableNavigation){var c=Tn(o);s(c),(l=t.onMonthChange)===null||l===void 0||l.call(t,c)}};return[n,i]}function yae(t,e){for(var r=e.reverseMonths,n=e.numberOfMonths,s=Tn(t),i=Tn(Ws(s,n)),o=Qc(i,s),l=[],c=0;c<o;c++){var u=Ws(s,c);l.push(u)}return r&&(l=l.reverse()),l}function vae(t,e){if(!e.disableNavigation){var r=e.toDate,n=e.pagedNavigation,s=e.numberOfMonths,i=s===void 0?1:s,o=n?i:1,l=Tn(t);if(!r)return Ws(l,o);var c=Qc(r,t);if(!(c<i))return Ws(l,o)}}function xae(t,e){if(!e.disableNavigation){var r=e.fromDate,n=e.pagedNavigation,s=e.numberOfMonths,i=s===void 0?1:s,o=n?i:1,l=Tn(t);if(!r)return Ws(l,-o);var c=Qc(l,r);if(!(c<=0))return Ws(l,-o)}}var g3=p.createContext(void 0);function bae(t){var e=Mt(),r=gae(),n=r[0],s=r[1],i=yae(n,e),o=vae(n,e),l=xae(n,e),c=function(h){return i.some(function(f){return tj(h,f)})},u=function(h,f){c(h)||(f&&GM(h,f)?s(Ws(h,1+e.numberOfMonths*-1)):s(h))},d={currentMonth:n,displayMonths:i,goToMonth:s,goToDate:u,previousMonth:l,nextMonth:o,isDateDisplayed:c};return a.jsx(g3.Provider,{value:d,children:t.children})}function zh(){var t=p.useContext(g3);if(!t)throw new Error("useNavigation must be used within a NavigationProvider");return t}function jP(t){var e,r=Mt(),n=r.classNames,s=r.styles,i=r.components,o=zh().goToMonth,l=function(d){o(Ws(d,t.displayIndex?-t.displayIndex:0))},c=(e=i==null?void 0:i.CaptionLabel)!==null&&e!==void 0?e:m3,u=a.jsx(c,{id:t.id,displayMonth:t.displayMonth});return a.jsxs("div",{className:n.caption_dropdowns,style:s.caption_dropdowns,children:[a.jsx("div",{className:n.vhidden,children:u}),a.jsx(hae,{onChange:l,displayMonth:t.displayMonth}),a.jsx(fae,{onChange:l,displayMonth:t.displayMonth})]})}function wae(t){return a.jsx("svg",Ve({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:a.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function jae(t){return a.jsx("svg",Ve({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:a.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var Pp=p.forwardRef(function(t,e){var r=Mt(),n=r.classNames,s=r.styles,i=[n.button_reset,n.button];t.className&&i.push(t.className);var o=i.join(" "),l=Ve(Ve({},s.button_reset),s.button);return t.style&&Object.assign(l,t.style),a.jsx("button",Ve({},t,{ref:e,type:"button",className:o,style:l}))});function Nae(t){var e,r,n=Mt(),s=n.dir,i=n.locale,o=n.classNames,l=n.styles,c=n.labels,u=c.labelPrevious,d=c.labelNext,h=n.components;if(!t.nextMonth&&!t.previousMonth)return a.jsx(a.Fragment,{});var f=u(t.previousMonth,{locale:i}),m=[o.nav_button,o.nav_button_previous].join(" "),v=d(t.nextMonth,{locale:i}),y=[o.nav_button,o.nav_button_next].join(" "),x=(e=h==null?void 0:h.IconRight)!==null&&e!==void 0?e:jae,b=(r=h==null?void 0:h.IconLeft)!==null&&r!==void 0?r:wae;return a.jsxs("div",{className:o.nav,style:l.nav,children:[!t.hidePrevious&&a.jsx(Pp,{name:"previous-month","aria-label":f,className:m,style:l.nav_button_previous,disabled:!t.previousMonth,onClick:t.onPreviousClick,children:s==="rtl"?a.jsx(x,{className:o.nav_icon,style:l.nav_icon}):a.jsx(b,{className:o.nav_icon,style:l.nav_icon})}),!t.hideNext&&a.jsx(Pp,{name:"next-month","aria-label":v,className:y,style:l.nav_button_next,disabled:!t.nextMonth,onClick:t.onNextClick,children:s==="rtl"?a.jsx(b,{className:o.nav_icon,style:l.nav_icon}):a.jsx(x,{className:o.nav_icon,style:l.nav_icon})})]})}function NP(t){var e=Mt().numberOfMonths,r=zh(),n=r.previousMonth,s=r.nextMonth,i=r.goToMonth,o=r.displayMonths,l=o.findIndex(function(v){return tj(t.displayMonth,v)}),c=l===0,u=l===o.length-1,d=e>1&&(c||!u),h=e>1&&(u||!c),f=function(){n&&i(n)},m=function(){s&&i(s)};return a.jsx(Nae,{displayMonth:t.displayMonth,hideNext:d,hidePrevious:h,nextMonth:s,previousMonth:n,onPreviousClick:f,onNextClick:m})}function _ae(t){var e,r=Mt(),n=r.classNames,s=r.disableNavigation,i=r.styles,o=r.captionLayout,l=r.components,c=(e=l==null?void 0:l.CaptionLabel)!==null&&e!==void 0?e:m3,u;return s?u=a.jsx(c,{id:t.id,displayMonth:t.displayMonth}):o==="dropdown"?u=a.jsx(jP,{displayMonth:t.displayMonth,id:t.id}):o==="dropdown-buttons"?u=a.jsxs(a.Fragment,{children:[a.jsx(jP,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id}),a.jsx(NP,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id})]}):u=a.jsxs(a.Fragment,{children:[a.jsx(c,{id:t.id,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),a.jsx(NP,{displayMonth:t.displayMonth,id:t.id})]}),a.jsx("div",{className:n.caption,style:i.caption,children:u})}function Sae(t){var e=Mt(),r=e.footer,n=e.styles,s=e.classNames.tfoot;return r?a.jsx("tfoot",{className:s,style:n.tfoot,children:a.jsx("tr",{children:a.jsx("td",{colSpan:8,children:r})})}):a.jsx(a.Fragment,{})}function Aae(t,e,r){for(var n=r?Tl(new Date):ja(new Date,{locale:t,weekStartsOn:e}),s=[],i=0;i<7;i++){var o=hn(n,i);s.push(o)}return s}function Eae(){var t=Mt(),e=t.classNames,r=t.styles,n=t.showWeekNumber,s=t.locale,i=t.weekStartsOn,o=t.ISOWeek,l=t.formatters.formatWeekdayName,c=t.labels.labelWeekday,u=Aae(s,i,o);return a.jsxs("tr",{style:r.head_row,className:e.head_row,children:[n&&a.jsx("td",{style:r.head_cell,className:e.head_cell}),u.map(function(d,h){return a.jsx("th",{scope:"col",className:e.head_cell,style:r.head_cell,"aria-label":c(d,{locale:s}),children:l(d,{locale:s})},h)})]})}function Pae(){var t,e=Mt(),r=e.classNames,n=e.styles,s=e.components,i=(t=s==null?void 0:s.HeadRow)!==null&&t!==void 0?t:Eae;return a.jsx("thead",{style:n.head,className:r.head,children:a.jsx(i,{})})}function Tae(t){var e=Mt(),r=e.locale,n=e.formatters.formatDay;return a.jsx(a.Fragment,{children:n(t.date,{locale:r})})}var xj=p.createContext(void 0);function Cae(t){if(!Bh(t.initialProps)){var e={selected:void 0,modifiers:{disabled:[]}};return a.jsx(xj.Provider,{value:e,children:t.children})}return a.jsx(kae,{initialProps:t.initialProps,children:t.children})}function kae(t){var e=t.initialProps,r=t.children,n=e.selected,s=e.min,i=e.max,o=function(u,d,h){var f,m;(f=e.onDayClick)===null||f===void 0||f.call(e,u,d,h);var v=!!(d.selected&&s&&(n==null?void 0:n.length)===s);if(!v){var y=!!(!d.selected&&i&&(n==null?void 0:n.length)===i);if(!y){var x=n?h3([],n):[];if(d.selected){var b=x.findIndex(function(w){return En(u,w)});x.splice(b,1)}else x.push(u);(m=e.onSelect)===null||m===void 0||m.call(e,x,u,d,h)}}},l={disabled:[]};n&&l.disabled.push(function(u){var d=i&&n.length>i-1,h=n.some(function(f){return En(f,u)});return!!(d&&!h)});var c={selected:n,onDayClick:o,modifiers:l};return a.jsx(xj.Provider,{value:c,children:r})}function bj(){var t=p.useContext(xj);if(!t)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return t}function Iae(t,e){var r=e||{},n=r.from,s=r.to;return n&&s?En(s,t)&&En(n,t)?void 0:En(s,t)?{from:s,to:void 0}:En(n,t)?void 0:n0(n,t)?{from:t,to:s}:{from:n,to:t}:s?n0(t,s)?{from:s,to:t}:{from:t,to:s}:n?GM(t,n)?{from:t,to:n}:{from:n,to:t}:{from:t,to:void 0}}var wj=p.createContext(void 0);function Rae(t){if(!Vh(t.initialProps)){var e={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return a.jsx(wj.Provider,{value:e,children:t.children})}return a.jsx(Oae,{initialProps:t.initialProps,children:t.children})}function Oae(t){var e=t.initialProps,r=t.children,n=e.selected,s=n||{},i=s.from,o=s.to,l=e.min,c=e.max,u=function(m,v,y){var x,b;(x=e.onDayClick)===null||x===void 0||x.call(e,m,v,y);var w=Iae(m,n);(b=e.onSelect)===null||b===void 0||b.call(e,w,m,v,y)},d={range_start:[],range_end:[],range_middle:[],disabled:[]};if(i?(d.range_start=[i],o?(d.range_end=[o],En(i,o)||(d.range_middle=[{after:i,before:o}])):d.range_end=[i]):o&&(d.range_start=[o],d.range_end=[o]),l&&(i&&!o&&d.disabled.push({after:bx(i,l-1),before:hn(i,l-1)}),i&&o&&d.disabled.push({after:i,before:hn(i,l-1)}),!i&&o&&d.disabled.push({after:bx(o,l-1),before:hn(o,l-1)})),c){if(i&&!o&&(d.disabled.push({before:hn(i,-c+1)}),d.disabled.push({after:hn(i,c-1)})),i&&o){var h=ca(o,i)+1,f=c-h;d.disabled.push({before:bx(i,f)}),d.disabled.push({after:hn(o,f)})}!i&&o&&(d.disabled.push({before:hn(o,-c+1)}),d.disabled.push({after:hn(o,c-1)}))}return a.jsx(wj.Provider,{value:{selected:n,onDayClick:u,modifiers:d},children:r})}function jj(){var t=p.useContext(wj);if(!t)throw new Error("useSelectRange must be used within a SelectRangeProvider");return t}function Lm(t){return Array.isArray(t)?h3([],t):t!==void 0?[t]:[]}function Dae(t){var e={};return Object.entries(t).forEach(function(r){var n=r[0],s=r[1];e[n]=Lm(s)}),e}var qs;(function(t){t.Outside="outside",t.Disabled="disabled",t.Selected="selected",t.Hidden="hidden",t.Today="today",t.RangeStart="range_start",t.RangeEnd="range_end",t.RangeMiddle="range_middle"})(qs||(qs={}));var Mae=qs.Selected,La=qs.Disabled,Lae=qs.Hidden,Fae=qs.Today,Nx=qs.RangeEnd,_x=qs.RangeMiddle,Sx=qs.RangeStart,$ae=qs.Outside;function Uae(t,e,r){var n,s=(n={},n[Mae]=Lm(t.selected),n[La]=Lm(t.disabled),n[Lae]=Lm(t.hidden),n[Fae]=[t.today],n[Nx]=[],n[_x]=[],n[Sx]=[],n[$ae]=[],n);return t.fromDate&&s[La].push({before:t.fromDate}),t.toDate&&s[La].push({after:t.toDate}),Bh(t)?s[La]=s[La].concat(e.modifiers[La]):Vh(t)&&(s[La]=s[La].concat(r.modifiers[La]),s[Sx]=r.modifiers[Sx],s[_x]=r.modifiers[_x],s[Nx]=r.modifiers[Nx]),s}var y3=p.createContext(void 0);function Bae(t){var e=Mt(),r=bj(),n=jj(),s=Uae(e,r,n),i=Dae(e.modifiers),o=Ve(Ve({},s),i);return a.jsx(y3.Provider,{value:o,children:t.children})}function v3(){var t=p.useContext(y3);if(!t)throw new Error("useModifiers must be used within a ModifiersProvider");return t}function Vae(t){return!!(t&&typeof t=="object"&&"before"in t&&"after"in t)}function zae(t){return!!(t&&typeof t=="object"&&"from"in t)}function Gae(t){return!!(t&&typeof t=="object"&&"after"in t)}function Wae(t){return!!(t&&typeof t=="object"&&"before"in t)}function qae(t){return!!(t&&typeof t=="object"&&"dayOfWeek"in t)}function Hae(t,e){var r,n=e.from,s=e.to;if(n&&s){var i=ca(s,n)<0;i&&(r=[s,n],n=r[0],s=r[1]);var o=ca(t,n)>=0&&ca(s,t)>=0;return o}return s?En(s,t):n?En(n,t):!1}function Kae(t){return J1(t)}function Yae(t){return Array.isArray(t)&&t.every(J1)}function Qae(t,e){return e.some(function(r){if(typeof r=="boolean")return r;if(Kae(r))return En(t,r);if(Yae(r))return r.includes(t);if(zae(r))return Hae(t,r);if(qae(r))return r.dayOfWeek.includes(t.getDay());if(Vae(r)){var n=ca(r.before,t),s=ca(r.after,t),i=n>0,o=s<0,l=n0(r.before,r.after);return l?o&&i:i||o}return Gae(r)?ca(t,r.after)>0:Wae(r)?ca(r.before,t)>0:typeof r=="function"?r(t):!1})}function Nj(t,e,r){var n=Object.keys(e).reduce(function(i,o){var l=e[o];return Qae(t,l)&&i.push(o),i},[]),s={};return n.forEach(function(i){return s[i]=!0}),r&&!tj(t,r)&&(s.outside=!0),s}function Xae(t,e){for(var r=Tn(t[0]),n=yy(t[t.length-1]),s,i,o=r;o<=n;){var l=Nj(o,e),c=!l.disabled&&!l.hidden;if(!c){o=hn(o,1);continue}if(l.selected)return o;l.today&&!i&&(i=o),s||(s=o),o=hn(o,1)}return i||s}var Jae=365;function x3(t,e){var r=e.moveBy,n=e.direction,s=e.context,i=e.modifiers,o=e.retry,l=o===void 0?{count:0,lastFocused:t}:o,c=s.weekStartsOn,u=s.fromDate,d=s.toDate,h=s.locale,f={day:hn,week:r0,month:Ws,year:Mte,startOfWeek:function(x){return s.ISOWeek?Tl(x):ja(x,{locale:h,weekStartsOn:c})},endOfWeek:function(x){return s.ISOWeek?$M(x):Z1(x,{locale:h,weekStartsOn:c})}},m=f[r](t,n==="after"?1:-1);n==="before"&&u?m=Lte([u,m]):n==="after"&&d&&(m=Fte([d,m]));var v=!0;if(i){var y=Nj(m,i);v=!y.disabled&&!y.hidden}return v?m:l.count>Jae?l.lastFocused:x3(m,{moveBy:r,direction:n,context:s,modifiers:i,retry:Ve(Ve({},l),{count:l.count+1})})}var b3=p.createContext(void 0);function Zae(t){var e=zh(),r=v3(),n=p.useState(),s=n[0],i=n[1],o=p.useState(),l=o[0],c=o[1],u=Xae(e.displayMonths,r),d=s??(l&&e.isDateDisplayed(l))?l:u,h=function(){c(s),i(void 0)},f=function(x){i(x)},m=Mt(),v=function(x,b){if(s){var w=x3(s,{moveBy:x,direction:b,context:m,modifiers:r});En(s,w)||(e.goToDate(w,s),f(w))}},y={focusedDay:s,focusTarget:d,blur:h,focus:f,focusDayAfter:function(){return v("day","after")},focusDayBefore:function(){return v("day","before")},focusWeekAfter:function(){return v("week","after")},focusWeekBefore:function(){return v("week","before")},focusMonthBefore:function(){return v("month","before")},focusMonthAfter:function(){return v("month","after")},focusYearBefore:function(){return v("year","before")},focusYearAfter:function(){return v("year","after")},focusStartOfWeek:function(){return v("startOfWeek","before")},focusEndOfWeek:function(){return v("endOfWeek","after")}};return a.jsx(b3.Provider,{value:y,children:t.children})}function _j(){var t=p.useContext(b3);if(!t)throw new Error("useFocusContext must be used within a FocusProvider");return t}function eie(t,e){var r=v3(),n=Nj(t,r,e);return n}var Sj=p.createContext(void 0);function tie(t){if(!Ay(t.initialProps)){var e={selected:void 0};return a.jsx(Sj.Provider,{value:e,children:t.children})}return a.jsx(rie,{initialProps:t.initialProps,children:t.children})}function rie(t){var e=t.initialProps,r=t.children,n=function(i,o,l){var c,u,d;if((c=e.onDayClick)===null||c===void 0||c.call(e,i,o,l),o.selected&&!e.required){(u=e.onSelect)===null||u===void 0||u.call(e,void 0,i,o,l);return}(d=e.onSelect)===null||d===void 0||d.call(e,i,i,o,l)},s={selected:e.selected,onDayClick:n};return a.jsx(Sj.Provider,{value:s,children:r})}function w3(){var t=p.useContext(Sj);if(!t)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return t}function nie(t,e){var r=Mt(),n=w3(),s=bj(),i=jj(),o=_j(),l=o.focusDayAfter,c=o.focusDayBefore,u=o.focusWeekAfter,d=o.focusWeekBefore,h=o.blur,f=o.focus,m=o.focusMonthBefore,v=o.focusMonthAfter,y=o.focusYearBefore,x=o.focusYearAfter,b=o.focusStartOfWeek,w=o.focusEndOfWeek,j=function(F){var M,$,ne,te;Ay(r)?(M=n.onDayClick)===null||M===void 0||M.call(n,t,e,F):Bh(r)?($=s.onDayClick)===null||$===void 0||$.call(s,t,e,F):Vh(r)?(ne=i.onDayClick)===null||ne===void 0||ne.call(i,t,e,F):(te=r.onDayClick)===null||te===void 0||te.call(r,t,e,F)},E=function(F){var M;f(t),(M=r.onDayFocus)===null||M===void 0||M.call(r,t,e,F)},I=function(F){var M;h(),(M=r.onDayBlur)===null||M===void 0||M.call(r,t,e,F)},O=function(F){var M;(M=r.onDayMouseEnter)===null||M===void 0||M.call(r,t,e,F)},T=function(F){var M;(M=r.onDayMouseLeave)===null||M===void 0||M.call(r,t,e,F)},A=function(F){var M;(M=r.onDayPointerEnter)===null||M===void 0||M.call(r,t,e,F)},S=function(F){var M;(M=r.onDayPointerLeave)===null||M===void 0||M.call(r,t,e,F)},_=function(F){var M;(M=r.onDayTouchCancel)===null||M===void 0||M.call(r,t,e,F)},P=function(F){var M;(M=r.onDayTouchEnd)===null||M===void 0||M.call(r,t,e,F)},R=function(F){var M;(M=r.onDayTouchMove)===null||M===void 0||M.call(r,t,e,F)},C=function(F){var M;(M=r.onDayTouchStart)===null||M===void 0||M.call(r,t,e,F)},B=function(F){var M;(M=r.onDayKeyUp)===null||M===void 0||M.call(r,t,e,F)},G=function(F){var M;switch(F.key){case"ArrowLeft":F.preventDefault(),F.stopPropagation(),r.dir==="rtl"?l():c();break;case"ArrowRight":F.preventDefault(),F.stopPropagation(),r.dir==="rtl"?c():l();break;case"ArrowDown":F.preventDefault(),F.stopPropagation(),u();break;case"ArrowUp":F.preventDefault(),F.stopPropagation(),d();break;case"PageUp":F.preventDefault(),F.stopPropagation(),F.shiftKey?y():m();break;case"PageDown":F.preventDefault(),F.stopPropagation(),F.shiftKey?x():v();break;case"Home":F.preventDefault(),F.stopPropagation(),b();break;case"End":F.preventDefault(),F.stopPropagation(),w();break}(M=r.onDayKeyDown)===null||M===void 0||M.call(r,t,e,F)},U={onClick:j,onFocus:E,onBlur:I,onKeyDown:G,onKeyUp:B,onMouseEnter:O,onMouseLeave:T,onPointerEnter:A,onPointerLeave:S,onTouchCancel:_,onTouchEnd:P,onTouchMove:R,onTouchStart:C};return U}function sie(){var t=Mt(),e=w3(),r=bj(),n=jj(),s=Ay(t)?e.selected:Bh(t)?r.selected:Vh(t)?n.selected:void 0;return s}function aie(t){return Object.values(qs).includes(t)}function iie(t,e){var r=[t.classNames.day];return Object.keys(e).forEach(function(n){var s=t.modifiersClassNames[n];if(s)r.push(s);else if(aie(n)){var i=t.classNames["day_".concat(n)];i&&r.push(i)}}),r}function oie(t,e){var r=Ve({},t.styles.day);return Object.keys(e).forEach(function(n){var s;r=Ve(Ve({},r),(s=t.modifiersStyles)===null||s===void 0?void 0:s[n])}),r}function lie(t,e,r){var n,s,i,o=Mt(),l=_j(),c=eie(t,e),u=nie(t,c),d=sie(),h=!!(o.onDayClick||o.mode!=="default");p.useEffect(function(){var O;c.outside||l.focusedDay&&h&&En(l.focusedDay,t)&&((O=r.current)===null||O===void 0||O.focus())},[l.focusedDay,t,r,h,c.outside]);var f=iie(o,c).join(" "),m=oie(o,c),v=!!(c.outside&&!o.showOutsideDays||c.hidden),y=(i=(s=o.components)===null||s===void 0?void 0:s.DayContent)!==null&&i!==void 0?i:Tae,x=a.jsx(y,{date:t,displayMonth:e,activeModifiers:c}),b={style:m,className:f,children:x,role:"gridcell"},w=l.focusTarget&&En(l.focusTarget,t)&&!c.outside,j=l.focusedDay&&En(l.focusedDay,t),E=Ve(Ve(Ve({},b),(n={disabled:c.disabled,role:"gridcell"},n["aria-selected"]=c.selected,n.tabIndex=j||w?0:-1,n)),u),I={isButton:h,isHidden:v,activeModifiers:c,selectedDays:d,buttonProps:E,divProps:b};return I}function cie(t){var e=p.useRef(null),r=lie(t.date,t.displayMonth,e);return r.isHidden?a.jsx("div",{role:"gridcell"}):r.isButton?a.jsx(Pp,Ve({name:"day",ref:e},r.buttonProps)):a.jsx("div",Ve({},r.divProps))}function uie(t){var e=t.number,r=t.dates,n=Mt(),s=n.onWeekNumberClick,i=n.styles,o=n.classNames,l=n.locale,c=n.labels.labelWeekNumber,u=n.formatters.formatWeekNumber,d=u(Number(e),{locale:l});if(!s)return a.jsx("span",{className:o.weeknumber,style:i.weeknumber,children:d});var h=c(Number(e),{locale:l}),f=function(m){s(e,r,m)};return a.jsx(Pp,{name:"week-number","aria-label":h,className:o.weeknumber,style:i.weeknumber,onClick:f,children:d})}function die(t){var e,r,n=Mt(),s=n.styles,i=n.classNames,o=n.showWeekNumber,l=n.components,c=(e=l==null?void 0:l.Day)!==null&&e!==void 0?e:cie,u=(r=l==null?void 0:l.WeekNumber)!==null&&r!==void 0?r:uie,d;return o&&(d=a.jsx("td",{className:i.cell,style:s.cell,children:a.jsx(u,{number:t.weekNumber,dates:t.dates})})),a.jsxs("tr",{className:i.row,style:s.row,children:[d,t.dates.map(function(h){return a.jsx("td",{className:i.cell,style:s.cell,role:"presentation",children:a.jsx(c,{displayMonth:t.displayMonth,date:h})},qre(h))})]})}function _P(t,e,r){for(var n=r!=null&&r.ISOWeek?$M(e):Z1(e,r),s=r!=null&&r.ISOWeek?Tl(t):ja(t,r),i=ca(n,s),o=[],l=0;l<=i;l++)o.push(hn(s,l));var c=o.reduce(function(u,d){var h=r!=null&&r.ISOWeek?UM(d):VM(d,r),f=u.find(function(m){return m.weekNumber===h});return f?(f.dates.push(d),u):(u.push({weekNumber:h,dates:[d]}),u)},[]);return c}function hie(t,e){var r=_P(Tn(t),yy(t),e);if(e!=null&&e.useFixedWeeks){var n=Kre(t,e);if(n<6){var s=r[r.length-1],i=s.dates[s.dates.length-1],o=r0(i,6-n),l=_P(r0(i,1),o,e);r.push.apply(r,l)}}return r}function fie(t){var e,r,n,s=Mt(),i=s.locale,o=s.classNames,l=s.styles,c=s.hideHead,u=s.fixedWeeks,d=s.components,h=s.weekStartsOn,f=s.firstWeekContainsDate,m=s.ISOWeek,v=hie(t.displayMonth,{useFixedWeeks:!!u,ISOWeek:m,locale:i,weekStartsOn:h,firstWeekContainsDate:f}),y=(e=d==null?void 0:d.Head)!==null&&e!==void 0?e:Pae,x=(r=d==null?void 0:d.Row)!==null&&r!==void 0?r:die,b=(n=d==null?void 0:d.Footer)!==null&&n!==void 0?n:Sae;return a.jsxs("table",{id:t.id,className:o.table,style:l.table,role:"grid","aria-labelledby":t["aria-labelledby"],children:[!c&&a.jsx(y,{}),a.jsx("tbody",{className:o.tbody,style:l.tbody,children:v.map(function(w){return a.jsx(x,{displayMonth:t.displayMonth,dates:w.dates,weekNumber:w.weekNumber},w.weekNumber)})}),a.jsx(b,{displayMonth:t.displayMonth})]})}function mie(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var pie=mie()?p.useLayoutEffect:p.useEffect,Ax=!1,gie=0;function SP(){return"react-day-picker-".concat(++gie)}function yie(t){var e,r=t??(Ax?SP():null),n=p.useState(r),s=n[0],i=n[1];return pie(function(){s===null&&i(SP())},[]),p.useEffect(function(){Ax===!1&&(Ax=!0)},[]),(e=t??s)!==null&&e!==void 0?e:void 0}function vie(t){var e,r,n=Mt(),s=n.dir,i=n.classNames,o=n.styles,l=n.components,c=zh().displayMonths,u=yie(n.id?"".concat(n.id,"-").concat(t.displayIndex):void 0),d=n.id?"".concat(n.id,"-grid-").concat(t.displayIndex):void 0,h=[i.month],f=o.month,m=t.displayIndex===0,v=t.displayIndex===c.length-1,y=!m&&!v;s==="rtl"&&(e=[m,v],v=e[0],m=e[1]),m&&(h.push(i.caption_start),f=Ve(Ve({},f),o.caption_start)),v&&(h.push(i.caption_end),f=Ve(Ve({},f),o.caption_end)),y&&(h.push(i.caption_between),f=Ve(Ve({},f),o.caption_between));var x=(r=l==null?void 0:l.Caption)!==null&&r!==void 0?r:_ae;return a.jsxs("div",{className:h.join(" "),style:f,children:[a.jsx(x,{id:u,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),a.jsx(fie,{id:d,"aria-labelledby":u,displayMonth:t.displayMonth})]},t.displayIndex)}function xie(t){var e=Mt(),r=e.classNames,n=e.styles;return a.jsx("div",{className:r.months,style:n.months,children:t.children})}function bie(t){var e,r,n=t.initialProps,s=Mt(),i=_j(),o=zh(),l=p.useState(!1),c=l[0],u=l[1];p.useEffect(function(){s.initialFocus&&i.focusTarget&&(c||(i.focus(i.focusTarget),u(!0)))},[s.initialFocus,c,i.focus,i.focusTarget,i]);var d=[s.classNames.root,s.className];s.numberOfMonths>1&&d.push(s.classNames.multiple_months),s.showWeekNumber&&d.push(s.classNames.with_weeknumber);var h=Ve(Ve({},s.styles.root),s.style),f=Object.keys(n).filter(function(v){return v.startsWith("data-")}).reduce(function(v,y){var x;return Ve(Ve({},v),(x={},x[y]=n[y],x))},{}),m=(r=(e=n.components)===null||e===void 0?void 0:e.Months)!==null&&r!==void 0?r:xie;return a.jsx("div",Ve({className:d.join(" "),style:h,dir:s.dir,id:s.id,nonce:n.nonce,title:n.title,lang:n.lang},f,{children:a.jsx(m,{children:o.displayMonths.map(function(v,y){return a.jsx(vie,{displayIndex:y,displayMonth:v},y)})})}))}function wie(t){var e=t.children,r=Wse(t,["children"]);return a.jsx(uae,{initialProps:r,children:a.jsx(bae,{children:a.jsx(tie,{initialProps:r,children:a.jsx(Cae,{initialProps:r,children:a.jsx(Rae,{initialProps:r,children:a.jsx(Bae,{children:a.jsx(Zae,{children:e})})})})})})})}function jie(t){return a.jsx(wie,Ve({},t,{children:a.jsx(bie,{initialProps:t})}))}function j3({className:t,classNames:e,showOutsideDays:r=!0,...n}){return a.jsx(jie,{showOutsideDays:r,className:ye("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:ye($d({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:ye($d({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...e},components:{IconLeft:({...s})=>a.jsx($V,{className:"h-4 w-4"}),IconRight:({...s})=>a.jsx(Bm,{className:"h-4 w-4"})},...n})}j3.displayName="Calendar";var Ey="Popover",[N3,r_e]=Dr(Ey,[So]),Gh=So(),[Nie,Oo]=N3(Ey),_3=t=>{const{__scopePopover:e,children:r,open:n,defaultOpen:s,onOpenChange:i,modal:o=!1}=t,l=Gh(e),c=p.useRef(null),[u,d]=p.useState(!1),[h,f]=Bs({prop:n,defaultProp:s??!1,onChange:i,caller:Ey});return a.jsx(Tg,{...l,children:a.jsx(Nie,{scope:e,contentId:ys(),triggerRef:c,open:h,onOpenChange:f,onOpenToggle:p.useCallback(()=>f(m=>!m),[f]),hasCustomAnchor:u,onCustomAnchorAdd:p.useCallback(()=>d(!0),[]),onCustomAnchorRemove:p.useCallback(()=>d(!1),[]),modal:o,children:r})})};_3.displayName=Ey;var S3="PopoverAnchor",_ie=p.forwardRef((t,e)=>{const{__scopePopover:r,...n}=t,s=Oo(S3,r),i=Gh(r),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=s;return p.useEffect(()=>(o(),()=>l()),[o,l]),a.jsx(gh,{...i,...n,ref:e})});_ie.displayName=S3;var A3="PopoverTrigger",E3=p.forwardRef((t,e)=>{const{__scopePopover:r,...n}=t,s=Oo(A3,r),i=Gh(r),o=We(e,s.triggerRef),l=a.jsx(Re.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":I3(s.open),...n,ref:o,onClick:ve(t.onClick,s.onOpenToggle)});return s.hasCustomAnchor?l:a.jsx(gh,{asChild:!0,...i,children:l})});E3.displayName=A3;var Aj="PopoverPortal",[Sie,Aie]=N3(Aj,{forceMount:void 0}),P3=t=>{const{__scopePopover:e,forceMount:r,children:n,container:s}=t,i=Oo(Aj,e);return a.jsx(Sie,{scope:e,forceMount:r,children:a.jsx(Mr,{present:r||i.open,children:a.jsx(du,{asChild:!0,container:s,children:n})})})};P3.displayName=Aj;var Xc="PopoverContent",T3=p.forwardRef((t,e)=>{const r=Aie(Xc,t.__scopePopover),{forceMount:n=r.forceMount,...s}=t,i=Oo(Xc,t.__scopePopover);return a.jsx(Mr,{present:n||i.open,children:i.modal?a.jsx(Pie,{...s,ref:e}):a.jsx(Tie,{...s,ref:e})})});T3.displayName=Xc;var Eie=oo("PopoverContent.RemoveScroll"),Pie=p.forwardRef((t,e)=>{const r=Oo(Xc,t.__scopePopover),n=p.useRef(null),s=We(e,n),i=p.useRef(!1);return p.useEffect(()=>{const o=n.current;if(o)return oy(o)},[]),a.jsx(Oh,{as:Eie,allowPinchZoom:!0,children:a.jsx(C3,{...t,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ve(t.onCloseAutoFocus,o=>{var l;o.preventDefault(),i.current||(l=r.triggerRef.current)==null||l.focus()}),onPointerDownOutside:ve(t.onPointerDownOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;i.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:ve(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),Tie=p.forwardRef((t,e)=>{const r=Oo(Xc,t.__scopePopover),n=p.useRef(!1),s=p.useRef(!1);return a.jsx(C3,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=t.onCloseAutoFocus)==null||o.call(t,i),i.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),i.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:i=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((u=r.triggerRef.current)==null?void 0:u.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),C3=p.forwardRef((t,e)=>{const{__scopePopover:r,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:d,...h}=t,f=Oo(Xc,r),m=Gh(r);return iy(),a.jsx(Ih,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:i,children:a.jsx(Vl,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:d,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>f.onOpenChange(!1),children:a.jsx(Cg,{"data-state":I3(f.open),role:"dialog",id:f.contentId,...m,...h,ref:e,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),k3="PopoverClose",Cie=p.forwardRef((t,e)=>{const{__scopePopover:r,...n}=t,s=Oo(k3,r);return a.jsx(Re.button,{type:"button",...n,ref:e,onClick:ve(t.onClick,()=>s.onOpenChange(!1))})});Cie.displayName=k3;var kie="PopoverArrow",Iie=p.forwardRef((t,e)=>{const{__scopePopover:r,...n}=t,s=Gh(r);return a.jsx(kg,{...s,...n,ref:e})});Iie.displayName=kie;function I3(t){return t?"open":"closed"}var Rie=_3,Oie=E3,Die=P3,R3=T3;const Mie=Rie,Lie=Oie,O3=p.forwardRef(({className:t,align:e="center",sideOffset:r=4,...n},s)=>a.jsx(Die,{children:a.jsx(R3,{ref:s,align:e,sideOffset:r,className:ye("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));O3.displayName=R3.displayName;const D3=({open:t,onOpenChange:e,onSubmit:r,profileId:n,availableProfiles:s=[]})=>{const[i,o]=p.useState(""),[l,c]=p.useState(n),[u,d]=p.useState("now"),[h,f]=p.useState(),[m,v]=p.useState(""),[y,x]=p.useState(null),[b,w]=p.useState(""),[j,E]=p.useState(!1),[I,O]=p.useState("none"),[T,A]=p.useState("");p.useEffect(()=>{n?(c(n),console.log("[CreatePostModal] Selected profile from prop:",n)):s.length>0&&(c(s[0].id),console.log("[CreatePostModal] Auto-selected first profile:",s[0].name,s[0].id))},[n,s,t]),p.useEffect(()=>{t&&console.log("[CreatePostModal] Modal opened with:",{availableProfiles:s.length,selectedProfileId:l,profiles:s.map(C=>({id:C.id,name:C.name}))})},[t]);const S=C=>{var G;const B=(G=C.target.files)==null?void 0:G[0];if(B){x(B);const U=new FileReader;U.onload=F=>{var M;w((M=F.target)==null?void 0:M.result)},U.readAsDataURL(B)}},_=()=>{x(null),w("")},P=()=>{const C=new Date;switch(u){case"1hr":return new Date(C.getTime()+60*60*1e3);case"2hr":return new Date(C.getTime()+2*60*60*1e3);case"3hr":return new Date(C.getTime()+3*60*60*1e3);case"custom":if(h&&m){const[B,G]=m.split(":").map(Number),U=new Date(h);return U.setHours(B,G),U}return null;default:return null}},R=async C=>{if(C.preventDefault(),!(!i.trim()||!l)){E(!0);try{const B=P(),G={profileId:l,content:i.trim(),scheduledAt:B==null?void 0:B.toISOString(),image:y,status:u==="now"?"published":"scheduled",button:I!=="none"?{type:I,url:T}:null};await r(G),o(""),c(n),d("now"),f(void 0),v(""),x(null),w(""),O("none"),A("")}catch(B){console.error("Error creating post:",B)}finally{E(!1)}}};return a.jsx(bs,{open:t,onOpenChange:e,children:a.jsxs(Qn,{className:"w-[95vw] max-w-[525px] max-h-[90vh] overflow-y-auto",onOpenAutoFocus:C=>C.preventDefault(),children:[a.jsxs(Xn,{children:[a.jsx(Jn,{children:"Create New Post"}),a.jsx(Zn,{children:"Create and schedule a post for your business profile"})]}),a.jsxs("form",{onSubmit:R,className:"space-y-3 sm:space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ie,{htmlFor:"profile",children:"Business Profile"}),s.length===0?a.jsx("div",{className:"text-sm text-muted-foreground p-3 border border-dashed rounded-md",children:"No business profiles available. Please connect your Google Business Profile first."}):a.jsxs(Ht,{value:l||"",onValueChange:C=>{console.log("[CreatePostModal] Profile selected:",C),c(C)},children:[a.jsxs(Bt,{className:"w-full",children:[a.jsx(Ji,{className:"mr-2 h-4 w-4 flex-shrink-0"}),a.jsx(Kt,{placeholder:"Select a business profile"})]}),a.jsx(Vt,{className:"z-[9999]",position:"popper",sideOffset:5,align:"start",children:s.map(C=>a.jsx(fe,{value:C.id,children:a.jsxs("div",{className:"flex flex-col py-1",children:[a.jsx("span",{className:"font-medium text-sm",children:C.name}),a.jsx("span",{className:"text-xs text-muted-foreground",children:C.accountName})]})},C.id))})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ie,{htmlFor:"content",children:"Post Content"}),a.jsx(pu,{id:"content",placeholder:"What would you like to share with your customers?",value:i,onChange:C=>o(C.target.value),className:"min-h-[80px] sm:min-h-[100px] text-sm",required:!0}),a.jsxs("div",{className:"text-xs text-muted-foreground text-right",children:[i.length,"/500 characters"]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ie,{children:"Image (Optional)"}),b?a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:b,alt:"Preview",className:"w-full h-24 sm:h-32 object-cover rounded-lg"}),a.jsx(K,{type:"button",variant:"destructive",size:"sm",className:"absolute top-2 right-2 h-6 w-6 p-0",onClick:_,children:a.jsx(Hs,{className:"h-3 w-3"})})]}):a.jsxs("div",{className:"border-2 border-dashed border-border rounded-lg p-4 text-center",children:[a.jsx("input",{type:"file",accept:"image/*",onChange:S,className:"hidden",id:"image-upload"}),a.jsxs("label",{htmlFor:"image-upload",className:"cursor-pointer flex flex-col items-center gap-2",children:[a.jsx(wm,{className:"h-8 w-8 text-muted-foreground"}),a.jsx("span",{className:"text-sm text-muted-foreground",children:"Click to upload an image"})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs(Ie,{className:"flex items-center gap-2",children:[a.jsx(yw,{className:"h-4 w-4"}),"Add Button (Optional)"]}),a.jsxs(Ht,{value:I,onValueChange:O,children:[a.jsx(Bt,{className:"w-full",children:a.jsx(Kt,{placeholder:"Select button type"})}),a.jsxs(Vt,{className:"z-[9999]",position:"popper",sideOffset:5,align:"start",children:[a.jsx(fe,{value:"none",children:"No Button"}),a.jsx(fe,{value:"book",children:"Book"}),a.jsx(fe,{value:"order",children:"Order Online"}),a.jsx(fe,{value:"buy",children:"Buy"}),a.jsx(fe,{value:"learn_more",children:"Learn More"}),a.jsx(fe,{value:"sign_up",children:"Sign Up"}),a.jsx(fe,{value:"call",children:"Call Now"})]})]})]}),I!=="none"&&a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ie,{htmlFor:"buttonUrl",children:"Button URL"}),a.jsx(Ze,{id:"buttonUrl",type:"url",placeholder:"https://example.com",value:T,onChange:C=>A(C.target.value),required:I!=="none"}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Where should the button redirect when clicked?"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ie,{children:"Schedule"}),a.jsxs(Ht,{value:u,onValueChange:C=>d(C),children:[a.jsx(Bt,{className:"w-full",children:a.jsx(Kt,{placeholder:"When to publish"})}),a.jsxs(Vt,{className:"z-[9999]",position:"popper",sideOffset:5,align:"start",children:[a.jsx(fe,{value:"now",children:"Post Now"}),a.jsx(fe,{value:"1hr",children:"In 1 Hour"}),a.jsx(fe,{value:"2hr",children:"In 2 Hours"}),a.jsx(fe,{value:"3hr",children:"In 3 Hours"}),a.jsx(fe,{value:"custom",children:"Custom Date & Time"})]})]})]}),u==="custom"&&a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ie,{children:"Date"}),a.jsxs(Mie,{children:[a.jsx(Lie,{asChild:!0,children:a.jsxs(K,{variant:"outline",className:ye("w-full justify-start text-left font-normal",!h&&"text-muted-foreground"),children:[a.jsx(Kn,{className:"mr-2 h-4 w-4"}),h?fr(h,"PPP"):"Pick a date"]})}),a.jsx(O3,{className:"w-auto p-0",children:a.jsx(j3,{mode:"single",selected:h,onSelect:f,disabled:C=>C<new Date,initialFocus:!0})})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ie,{htmlFor:"time",children:"Time"}),a.jsx(Ze,{id:"time",type:"time",value:m,onChange:C=>v(C.target.value),required:u==="custom"})]})]}),a.jsxs(kl,{className:"flex-col sm:flex-row gap-2 sm:gap-0",children:[a.jsx(K,{type:"button",variant:"outline",onClick:()=>e(!1),className:"w-full sm:w-auto order-2 sm:order-1",children:"Cancel"}),a.jsx(K,{type:"submit",disabled:j||!i.trim()||!l,className:"bg-primary hover:bg-primary-hover w-full sm:w-auto order-1 sm:order-2",children:j?"Creating...":u==="now"?"Post Now":"Schedule Post"})]})]})]})})},Fie=({profileId:t})=>{const[e,r]=p.useState([]),[n,s]=p.useState(!0),[i,o]=p.useState(!1),[l,c]=p.useState(null),[u,d]=p.useState(!1),[h,f]=p.useState(null),[m,v]=p.useState(!1),{addNotification:y}=gy();p.useEffect(()=>{(async()=>{if(!t){s(!1);return}s(!0);try{console.log("PostsTab: Fetching posts for profileId:",t);const _=(await xt.getLocationPosts(t)).map(P=>({id:P.id,content:P.summary||"",status:"published",postedAt:P.createTime}));console.log("PostsTab: Loaded",_.length,"posts"),r(_),s(!1)}catch(S){console.error("Error fetching posts:",S),r([]),s(!1)}})()},[t]);const x=A=>new Date(A).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}),b=A=>{switch(A){case"published":return a.jsx(Se,{variant:"default",className:"bg-success text-success-foreground",children:"Published"});case"scheduled":return a.jsx(Se,{variant:"secondary",className:"bg-warning/10 text-warning border-warning/20",children:"Scheduled"});case"draft":return a.jsx(Se,{variant:"outline",children:"Draft"});default:return a.jsx(Se,{variant:"outline",children:A})}},w=async()=>{if(t)try{const S=(await xt.getLocationPosts(t)).map(_=>({id:_.id,content:_.summary||"",status:"published",postedAt:_.createTime}));r(S)}catch(A){console.error("Error refreshing posts:",A)}},j=async A=>{try{console.log("Creating post:",A);const S=`Profile ${t}`;A.scheduledAt?y({type:"post",title:"Post Scheduled",message:`Post scheduled for ${S} at ${new Date(A.scheduledAt).toLocaleDateString()}.`,actionUrl:"/posts"}):y({type:"post",title:"Post Created",message:`Post created for ${S} and sent to Google Business Profile.`,actionUrl:"/posts"}),o(!1),c(null),await w(),be({title:"Post Created",description:"Your post has been successfully created and published."})}catch(S){console.error("Error creating post:",S),be({title:"Error",description:"Failed to create post. Please try again.",variant:"destructive"})}},E=A=>{c(A),o(!0)},I=async A=>{try{const S={content:A.content,profileId:t};await j(S),be({title:"Post Duplicated",description:"Post has been successfully duplicated."})}catch(S){console.error("Error duplicating post:",S),be({title:"Error",description:"Failed to duplicate post. Please try again.",variant:"destructive"})}},O=async()=>{if(h){v(!0);try{r(A=>A.filter(S=>S.id!==h.id)),y({type:"post",title:"Post Deleted",message:"Post has been successfully deleted.",actionUrl:"/posts"}),be({title:"Post Deleted",description:"Your post has been successfully deleted."}),d(!1),f(null)}catch(A){console.error("Error deleting post:",A),be({title:"Error",description:"Failed to delete post. Please try again.",variant:"destructive"})}finally{v(!1)}}},T=A=>{f(A),d(!0)};return a.jsxs(a.Fragment,{children:[a.jsxs(H,{className:"shadow-card border-0",children:[a.jsx(me,{children:a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx(ge,{className:"text-lg sm:text-xl",children:"Posts & Updates"}),a.jsxs(K,{onClick:()=>o(!0),className:"bg-primary hover:bg-primary-hover text-xs sm:text-sm px-2 sm:px-4",size:"sm",children:[a.jsx(lo,{className:"mr-1 sm:mr-2 h-3 w-3 sm:h-4 sm:w-4"}),a.jsx("span",{className:"hidden sm:inline",children:"Create Post"}),a.jsx("span",{className:"sm:hidden",children:"Create"})]})]})}),a.jsx(Y,{children:n?a.jsxs("div",{className:"flex flex-col items-center justify-center py-16 space-y-4",children:[a.jsx(Uh,{size:"lg",variant:"primary"}),a.jsxs("div",{className:"text-center space-y-2",children:[a.jsx("h3",{className:"font-medium text-lg",children:"Loading Posts..."}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Fetching your latest posts from Google Business Profile"})]}),a.jsx("div",{className:"w-full max-w-2xl mt-8 space-y-4",children:Array.from({length:3}).map((A,S)=>a.jsxs("div",{className:"border rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"h-6 w-16 bg-muted rounded-full animate-pulse"}),a.jsx("div",{className:"h-4 w-20 bg-muted rounded animate-pulse"})]}),a.jsx("div",{className:"h-4 w-4 bg-muted rounded animate-pulse"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{className:"h-4 bg-muted rounded w-full animate-pulse"}),a.jsx("div",{className:"h-4 bg-muted rounded w-3/4 animate-pulse"}),a.jsx("div",{className:"h-4 bg-muted rounded w-1/2 animate-pulse"})]}),a.jsxs("div",{className:"flex items-center justify-between mt-4 pt-3 border-t",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"h-4 w-4 bg-muted rounded animate-pulse"}),a.jsx("div",{className:"h-3 w-24 bg-muted rounded animate-pulse"})]}),a.jsx("div",{className:"h-3 w-16 bg-muted rounded animate-pulse"})]})]},S))})]}):e.length===0?a.jsxs("div",{className:"text-center py-8 sm:py-12",children:[a.jsx(Kn,{className:"h-10 w-10 sm:h-12 sm:w-12 text-muted-foreground mx-auto mb-3 sm:mb-4"}),a.jsx("h3",{className:"text-base sm:text-lg font-medium mb-2",children:"No posts yet"}),a.jsx("p",{className:"text-sm text-muted-foreground mb-4 px-4",children:"Create your first post to start engaging with customers"}),a.jsxs(K,{onClick:()=>o(!0),variant:"outline",size:"sm",children:[a.jsx(lo,{className:"mr-2 h-4 w-4"}),a.jsx("span",{className:"hidden sm:inline",children:"Create First Post"}),a.jsx("span",{className:"sm:hidden",children:"Create Post"})]})]}):a.jsx("div",{className:"space-y-3 sm:space-y-4",children:e.map(A=>a.jsxs("div",{className:"border rounded-lg p-3 sm:p-4 hover:bg-muted/30 transition-colors",children:[a.jsxs("div",{className:"flex items-start justify-between mb-2 sm:mb-3",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-1 sm:gap-2",children:[b(A.status),A.scheduledAt&&a.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[a.jsx(Yn,{className:"h-3 w-3"}),a.jsx("span",{className:"hidden sm:inline",children:x(A.scheduledAt)}),a.jsx("span",{className:"sm:hidden",children:new Date(A.scheduledAt).toLocaleDateString()})]}),A.postedAt&&a.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[a.jsx(Kn,{className:"h-3 w-3"}),a.jsxs("span",{className:"hidden sm:inline",children:["Posted ",x(A.postedAt)]}),a.jsx("span",{className:"sm:hidden",children:new Date(A.postedAt).toLocaleDateString()})]})]}),a.jsxs(hy,{children:[a.jsx(fy,{asChild:!0,children:a.jsx(K,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:a.jsx(hI,{className:"h-4 w-4"})})}),a.jsxs(Lh,{align:"end",children:[a.jsxs(An,{onClick:()=>E(A),className:"cursor-pointer",children:[a.jsx(db,{className:"mr-2 h-4 w-4"}),"Edit Post"]}),a.jsxs(An,{onClick:()=>I(A),className:"cursor-pointer",children:[a.jsx(Ng,{className:"mr-2 h-4 w-4"}),"Duplicate"]}),a.jsxs(An,{onClick:()=>T(A),className:"text-destructive cursor-pointer focus:text-destructive",children:[a.jsx(Hm,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})]}),a.jsxs("div",{className:"flex gap-3 sm:gap-4",children:[A.imageUrl&&a.jsx("div",{className:"flex-shrink-0",children:a.jsx("img",{src:A.imageUrl,alt:"Post image",className:"w-12 h-12 sm:w-16 sm:h-16 object-cover rounded-md"})}),a.jsx("div",{className:"flex-1 min-w-0",children:a.jsx("p",{className:"text-sm leading-relaxed break-words",children:A.content})})]})]},A.id))})})]}),a.jsx(D3,{open:i,onOpenChange:A=>{o(A),A||c(null)},onSubmit:j,profileId:t,editingPost:l}),a.jsx(zse,{open:u,onOpenChange:d,children:a.jsxs(a3,{children:[a.jsxs(i3,{children:[a.jsx(l3,{children:"Delete Post"}),a.jsx(c3,{children:"Are you sure you want to delete this post? This action cannot be undone and the post will be permanently removed from your Google Business Profile."})]}),a.jsxs(o3,{children:[a.jsx(d3,{children:"Cancel"}),a.jsx(u3,{onClick:O,disabled:m,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:m?"Deleting...":"Delete Post"})]})]})})]})},$ie=({profileId:t})=>{var A,S;const{currentUser:e}=Er(),[r,n]=p.useState([]),[s,i]=p.useState(!0),[o,l]=p.useState(!1),[c,u]=p.useState(!1),[d,h]=p.useState(0),[f,m]=p.useState(!1),{addNotification:v}=gy(),[y,x]=p.useState({enabled:!1,autoReplyEnabled:!1,replyTemplate:"",minRating:void 0,maxRating:void 0}),b=async(_=!1)=>{if(!t){i(!1);return}_?l(!0):i(!0);try{console.log("ReviewsTab: Fetching reviews for profileId:",t);const P=await xt.getLocationReviews(`locations/${t}`,_?{forceRefresh:!0}:{});console.log("ReviewsTab: Raw review data from API:",P);const R=P.map(C=>{var G,U,F;const B=C.name?C.name.split("/").pop():C.id;return console.log("ReviewsTab: Processing review:",{name:C.name,extractedId:B,id:C.id,author:C.reviewer.displayName,rating:C.starRating,hasReply:!!C.reply,replyContent:(G=C.reply)==null?void 0:G.comment}),{id:B,fullReviewName:C.name,author:C.reviewer.displayName,rating:C.starRating,content:C.comment||"",createdAt:C.createTime,replied:!!C.reply,replyContent:(U=C.reply)==null?void 0:U.comment,repliedAt:(F=C.reply)==null?void 0:F.updateTime}});if(console.log("ReviewsTab: Loaded",R.length,"reviews with replies:",R.filter(C=>C.replied).length),R.length>d&&d>0){const C=R.length-d;console.log(`🆕 Detected ${C} new reviews!`),v({type:"review",title:`${C} New Review${C>1?"s":""}!`,message:`You have received ${C} new customer review${C>1?"s":""}`,actionUrl:`/dashboard/profiles/${t}?tab=reviews`,metadata:{profileId:t,newReviewsCount:C}}),be({title:"New Review Received! 🌟",description:`You have ${C} new customer review${C>1?"s":""}`})}n(R),h(R.length),_&&!c&&be({title:"Reviews Refreshed",description:`Loaded ${R.length} reviews from Google Business Profile`})}catch(P){console.error("Error fetching reviews:",P),n([]),be({title:"Error Loading Reviews",description:"Failed to fetch reviews from Google Business Profile",variant:"destructive"})}finally{i(!1),l(!1)}};p.useEffect(()=>{w(),b();const _=setInterval(()=>{c&&(console.log("🔄 Auto-polling for new reviews..."),b(!0))},3e4);return u(!0),()=>{clearInterval(_)}},[t,c]);const w=()=>{const _=vd.getConfiguration(t);_&&x({enabled:_.enabled,autoReplyEnabled:_.autoReplyEnabled,replyTemplate:_.replyTemplate||"",minRating:_.minRating,maxRating:_.maxRating})},j=async _=>{var R;const P={...y,..._};if(x(P),vd.saveConfiguration({locationId:t,businessName:"Current Location",enabled:P.enabled,autoReplyEnabled:P.autoReplyEnabled,replyTemplate:P.replyTemplate,minRating:P.minRating,maxRating:P.maxRating}),P.autoReplyEnabled){m(!0);try{const C=localStorage.getItem("google_business_account_id"),B=localStorage.getItem("google_business_name")||"Current Location",G=$t.getConfiguration(t),U=G!=null&&G.keywords?Array.isArray(G.keywords)?G.keywords.join(", "):G.keywords:"",F=((R=G==null?void 0:G.categories)==null?void 0:R[0])||"";await Ui.enableAutoReply(t,B,!0,e==null?void 0:e.uid,C||void 0,U,F),be({title:"Review Settings Saved",description:"Auto-reply will continue running even when you're offline.",duration:4e3})}catch(C){console.error("Failed to save to server:",C),be({title:"Server sync failed",description:"Settings saved locally but server sync failed. Auto-reply may not work when offline.",variant:"destructive",duration:5e3})}finally{m(!1)}}else try{await Ui.disableAutoReply(t),be({title:"Review Settings Saved",description:"Auto-reply has been disabled."})}catch(C){console.error("Failed to disable on server:",C),be({title:"Review Settings Saved",description:"Your review automation settings have been updated."})}},E=async(_,P,R,C)=>{try{console.log("Auto-replying to review:",{reviewId:_,reviewContent:P,reviewerName:R,rating:C});const B=vd.getConfiguration(t);let G;B!=null&&B.replyTemplate&&B.replyTemplate.trim()?G=B.replyTemplate.replace(/\{businessName\}/g,"Our Business").replace(/\{reviewerName\}/g,R).replace(/\{rating\}/g,C.toString()).replace(/\{comment\}/g,P):G=await vd.generateAIReply({reviewText:P,reviewerName:R,rating:C,businessName:"Our Business",locationId:t}),console.log("Generated reply text:",G);const U=r.find(M=>M.id===_),F=U==null?void 0:U.fullReviewName;if(!F)throw new Error("Review name not available. Please refresh the reviews list.");console.log("ReviewsTab: Sending reply with full review name:",F),await xt.replyToReview(F,G),await b(!0),v({type:"reply",title:"AI Reply Posted",message:`Successfully replied to ${R}'s ${C}-star review with AI-generated response`,actionUrl:`/dashboard/profiles/${t}?tab=reviews`,metadata:{profileId:t,reviewId:_,reviewerName:R,rating:C,replyText:G.substring(0,100)}}),be({title:"AI Reply Sent Successfully",description:"Your personalized AI-generated reply has been posted"}),console.log("AI reply sent successfully!")}catch(B){console.error("Error replying to review:",B),be({title:"Failed to Send Reply",description:B instanceof Error?B.message:"Please try again",variant:"destructive"})}},I=_=>new Date(_).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),O=_=>Array.from({length:5}).map((P,R)=>a.jsx(ms,{className:ye("h-4 w-4",R<_?"fill-yellow-400 text-yellow-400":"text-muted-foreground")},R)),T=_=>_.split(" ").map(P=>P[0]).join("").toUpperCase();return a.jsxs(Kl,{defaultValue:"reviews",className:"w-full",children:[a.jsxs(ko,{className:"grid w-full grid-cols-2",children:[a.jsx(Zt,{value:"reviews",className:"text-xs sm:text-sm",children:"Customer Reviews"}),a.jsx(Zt,{value:"automation",className:"text-xs sm:text-sm",children:"Auto-Reply Settings"})]}),a.jsx(er,{value:"reviews",className:"space-y-4",children:a.jsxs(H,{className:"shadow-card border-0",children:[a.jsx(me,{children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:[a.jsx(ge,{className:"text-lg sm:text-xl",children:"Customer Reviews"}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[a.jsxs(K,{variant:"outline",size:"sm",onClick:()=>b(!0),disabled:o,className:"gap-1 sm:gap-2",children:[a.jsx(ir,{className:ye("h-3 w-3",o&&"animate-spin")}),a.jsx("span",{className:"text-xs sm:text-sm",children:"Refresh"})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("div",{className:ye("h-2 w-2 rounded-full",c?"bg-green-500 animate-pulse":"bg-gray-400")}),a.jsx("span",{className:"text-xs text-muted-foreground",children:c?"Live":"Offline"})]}),a.jsxs(Se,{variant:"secondary",className:"bg-primary/10 text-primary text-xs",children:[r.length," Total Reviews"]})]})]})}),a.jsx(Y,{children:s?a.jsxs("div",{className:"flex flex-col items-center justify-center py-16 space-y-4",children:[a.jsx(Uh,{size:"lg",variant:"primary"}),a.jsxs("div",{className:"text-center space-y-2",children:[a.jsx("h3",{className:"font-medium text-lg",children:"Loading Reviews..."}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Fetching your latest customer reviews from Google Business Profile"})]}),a.jsx("div",{className:"w-full max-w-2xl mt-8 space-y-4",children:Array.from({length:3}).map((_,P)=>a.jsx("div",{className:"border-b border-border pb-6",children:a.jsxs("div",{className:"flex gap-4",children:[a.jsx("div",{className:"h-10 w-10 bg-muted rounded-full animate-pulse"}),a.jsxs("div",{className:"flex-1 space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"h-4 bg-muted rounded w-24 animate-pulse"}),a.jsx("div",{className:"flex gap-1",children:Array.from({length:5}).map((R,C)=>a.jsx("div",{className:"h-4 w-4 bg-muted rounded animate-pulse"},C))})]}),a.jsx("div",{className:"h-3 bg-muted rounded w-full animate-pulse"}),a.jsx("div",{className:"h-3 bg-muted rounded w-3/4 animate-pulse"}),a.jsx("div",{className:"h-3 bg-muted rounded w-1/2 animate-pulse"})]})]})},P))})]}):r.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(ms,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium mb-2",children:"No reviews yet"}),a.jsx("p",{className:"text-muted-foreground",children:"Customer reviews will appear here once you receive them"})]}):a.jsx("div",{className:"space-y-4 sm:space-y-6",children:r.map((_,P)=>a.jsx("div",{className:ye("pb-4 sm:pb-6",P<r.length-1&&"border-b border-border"),children:a.jsxs("div",{className:"flex gap-3 sm:gap-4",children:[a.jsx(Fh,{className:"h-8 w-8 sm:h-10 sm:w-10 flex-shrink-0",children:a.jsx($h,{className:"bg-primary/10 text-primary text-xs sm:text-sm",children:T(_.author)})}),a.jsxs("div",{className:"flex-1 space-y-2 sm:space-y-3 min-w-0",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start justify-between gap-2",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-2 mb-1",children:[a.jsx("h4",{className:"font-medium text-sm sm:text-base truncate",children:_.author}),a.jsx("div",{className:"flex items-center gap-0.5 sm:gap-1",children:O(_.rating)})]}),a.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[a.jsx(Kn,{className:"h-3 w-3"}),I(_.createdAt)]})]}),!_.replied&&a.jsxs(K,{variant:"outline",size:"sm",onClick:()=>E(_.id,_.content,_.author,_.rating),className:"gap-1 sm:gap-2 w-full sm:w-auto text-xs sm:text-sm whitespace-nowrap",children:[a.jsx(ub,{className:"h-3 w-3"}),a.jsx("span",{className:"hidden sm:inline",children:"Reply with AI"}),a.jsx("span",{className:"sm:hidden",children:"AI Reply"})]})]}),a.jsx("p",{className:"text-xs sm:text-sm leading-relaxed break-words",children:_.content}),_.replied&&_.replyContent&&a.jsxs("div",{className:"bg-muted/50 rounded-lg p-2 sm:p-3 ml-0 sm:ml-4 border-l-2 border-primary/20",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-1 sm:gap-2 mb-2",children:[a.jsx(ri,{className:"h-3 w-3 text-primary"}),a.jsx("span",{className:"text-xs font-medium text-primary",children:"Your Reply"}),_.repliedAt&&a.jsxs("span",{className:"text-xs text-muted-foreground",children:["• ",I(_.repliedAt)]})]}),a.jsx("p",{className:"text-xs sm:text-sm break-words",children:_.replyContent})]})]})]})},_.id))})})]})}),a.jsx(er,{value:"automation",className:"space-y-4",children:a.jsxs(H,{children:[a.jsx(me,{children:a.jsxs(ge,{className:"flex items-center gap-2 text-lg sm:text-xl",children:[a.jsx(u9,{className:"h-4 w-4 sm:h-5 sm:w-5"}),a.jsx("span",{className:"text-base sm:text-lg",children:"Review Auto-Reply Settings"})]})}),a.jsxs(Y,{className:"space-y-4 sm:space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:[a.jsxs("div",{className:"space-y-0.5 flex-1",children:[a.jsx(Ie,{className:"text-sm sm:text-base",children:"Enable Review Automation"}),a.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Monitor and automatically reply to customer reviews"})]}),a.jsx(Ln,{checked:y.enabled,onCheckedChange:_=>j({enabled:_})})]}),y.enabled&&a.jsxs(a.Fragment,{children:[a.jsx(Ki,{}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx(Ie,{children:"Auto-Reply to Reviews"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Automatically generate and post replies using AI"})]}),a.jsx(Ln,{checked:y.autoReplyEnabled,onCheckedChange:_=>j({autoReplyEnabled:_})})]}),y.autoReplyEnabled&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ie,{children:"Reply to reviews with rating from:"}),a.jsxs(Ht,{value:((A=y.minRating)==null?void 0:A.toString())||"any",onValueChange:_=>j({minRating:_==="any"?void 0:parseInt(_)}),children:[a.jsx(Bt,{children:a.jsx(Kt,{placeholder:"Any rating"})}),a.jsxs(Vt,{children:[a.jsx(fe,{value:"any",children:"Any rating"}),a.jsx(fe,{value:"1",children:"1 star and above"}),a.jsx(fe,{value:"2",children:"2 stars and above"}),a.jsx(fe,{value:"3",children:"3 stars and above"}),a.jsx(fe,{value:"4",children:"4 stars and above"}),a.jsx(fe,{value:"5",children:"5 stars only"})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ie,{children:"To:"}),a.jsxs(Ht,{value:((S=y.maxRating)==null?void 0:S.toString())||"any",onValueChange:_=>j({maxRating:_==="any"?void 0:parseInt(_)}),children:[a.jsx(Bt,{children:a.jsx(Kt,{placeholder:"Any rating"})}),a.jsxs(Vt,{children:[a.jsx(fe,{value:"any",children:"Any rating"}),a.jsx(fe,{value:"1",children:"1 star only"}),a.jsx(fe,{value:"2",children:"2 stars and below"}),a.jsx(fe,{value:"3",children:"3 stars and below"}),a.jsx(fe,{value:"4",children:"4 stars and below"}),a.jsx(fe,{value:"5",children:"5 stars and below"})]})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ie,{children:"Custom Reply Template (Optional)"}),a.jsx(pu,{placeholder:"Leave blank to use AI-generated replies. Use {businessName}, {reviewerName}, {rating}, {comment} as placeholders.",value:y.replyTemplate,onChange:_=>x(P=>({...P,replyTemplate:_.target.value})),onBlur:()=>j({replyTemplate:y.replyTemplate}),rows:3}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:["If empty, AI will generate personalized replies. Use placeholders like ","{businessName}",", ","{reviewerName}",", ","{rating}",", ","{comment}","."]})]}),a.jsxs("div",{className:"bg-muted/50 p-4 rounded-lg",children:[a.jsxs("h4",{className:"font-medium mb-2 flex items-center gap-2",children:[a.jsx(ms,{className:"h-4 w-4"}),"How it works:"]}),a.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[a.jsx("li",{children:"• Reviews are checked every minute for new reviews"}),a.jsx("li",{children:"• Only reviews matching your criteria will get replies"}),a.jsx("li",{children:"• AI generates personalized, professional responses"}),a.jsx("li",{children:"• Reviews that already have replies are skipped"})]})]})]})]})]})]})})]})},Uie=({profileId:t})=>{const[e,r]=p.useState([]),[n,s]=p.useState(!0),[i,o]=p.useState(null);p.useState(!1),p.useState(""),p.useState([]),p.useState(!1),p.useRef(null),p.useEffect(()=>{l()},[t]);const l=async()=>{try{s(!0),o(null),console.log("📸 Loading photos for location:",t);const u=await xt.getLocationPhotos(t);console.log("📸 Received photos data:",u),r(u),u.length===0&&o("No photos found for this location. Photos can be added via Google Business Profile manager.")}catch(u){console.error("Failed to load photos:",u),o("Failed to load photos. Please check your connection and try again.")}finally{s(!1)}},c=()=>{l()};return a.jsx("div",{className:"space-y-6",children:a.jsxs(H,{children:[a.jsx(me,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs(ge,{className:"flex items-center gap-2",children:[a.jsx(LS,{className:"h-5 w-5"}),"Business Photos",e.length>0&&a.jsxs("span",{className:"text-sm font-normal text-muted-foreground",children:["(",e.length," real-time)"]})]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsxs(K,{variant:"outline",size:"sm",onClick:c,disabled:n,className:"flex items-center gap-2",children:[a.jsx(ir,{className:`h-4 w-4 ${n?"animate-spin":""}`}),"Refresh"]})})]})}),a.jsxs(Y,{children:[n&&a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[a.jsx(ir,{className:"h-5 w-5 animate-spin"}),"Loading photos from Google Business Profile..."]})}),i&&!n&&a.jsxs("div",{className:"flex items-center gap-2 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[a.jsx(qr,{className:"h-5 w-5 text-yellow-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-yellow-800 font-medium",children:"Photos not available"}),a.jsx("p",{className:"text-yellow-700 text-sm",children:i}),a.jsx(K,{variant:"outline",size:"sm",onClick:c,className:"mt-2",children:"Try Again"})]})]}),!n&&!i&&e.length>0&&a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:e.map(u=>a.jsxs(H,{className:"overflow-hidden group",children:[a.jsxs("div",{className:"relative aspect-square",children:[a.jsx("img",{src:u.thumbnailUrl||u.url,alt:`Business photo - ${u.category}`,className:"w-full h-full object-cover transition-transform group-hover:scale-105",onError:d=>{const h=d.target;h.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjMwMCIgdmlld0JveD0iMCAwIDMwMCAzMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjMwMCIgaGVpZ2h0PSIzMDAiIGZpbGw9IiNGM0Y0RjYiLz48cGF0aCBkPSJNMTUwIDEyMEMyNi4xNSAxMjAgMTA1IDEzOC44NSAxMDUgMTYyQzEwNSAxODUuMTUgMTI2LjE1IDIwNCAxNTAgMjA0QzE3My44NSAyMDQgMTk1IDE4NS4xNSAxOTUgMTYyQzE5NSAxMzguODUgMTczLjg1IDEyMCAxNTAgMTIwWiIgZmlsbD0iIzlDQTNBRiIvPjwvc3ZnPg=="}}),a.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/40 transition-colors flex items-center justify-center opacity-0 group-hover:opacity-100",children:a.jsx(K,{size:"sm",variant:"secondary",className:"mr-2",onClick:()=>window.open(u.url,"_blank"),children:a.jsx(QV,{className:"h-4 w-4"})})})]}),a.jsxs(Y,{className:"p-3",children:[a.jsx("p",{className:"text-sm font-medium truncate",children:u.category.replace("_"," ").toLowerCase().replace(/^\w/,d=>d.toUpperCase())}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:[u.mediaFormat," • ",new Date(u.createTime).toLocaleDateString()]}),u.dimensions.width>0&&a.jsxs("p",{className:"text-xs text-muted-foreground",children:[u.dimensions.width," × ",u.dimensions.height]})]})]},u.id))}),!n&&!i&&e.length===0&&a.jsxs("div",{className:"mt-6 p-6 border-2 border-dashed border-muted rounded-lg text-center",children:[a.jsx(LS,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Photos Found"}),a.jsx("p",{className:"text-muted-foreground mb-4",children:"This location doesn't have any photos yet. Add photos via Google Business Profile manager to see them here."}),a.jsxs(K,{onClick:c,children:[a.jsx(ir,{className:"h-4 w-4 mr-2"}),"Check Again"]})]})]})]})})},Bie=({profileId:t})=>{const[e,r]=p.useState(!1),[n,s]=p.useState(!1),[i,o]=p.useState(!0),[l,c]=p.useState(null),{accounts:u}=pi(),{toast:d}=Rn(),[h,f]=p.useState({businessName:"",description:"",phone:"",website:"",address:"",hours:{monday:"",tuesday:"",wednesday:"",thursday:"",friday:"",saturday:"",sunday:""}});p.useEffect(()=>{(()=>{var j;if(!t||!u.length){o(!1);return}let w=null;for(const E of u)if(w=E.locations.find(I=>I.locationId===t)||null,w)break;if(w){c(w);const E=[];(j=w.address.addressLines)!=null&&j.length&&E.push(...w.address.addressLines),w.address.locality&&E.push(w.address.locality),w.address.administrativeArea&&E.push(w.address.administrativeArea),w.address.postalCode&&E.push(w.address.postalCode),f({businessName:w.displayName||"",description:"",phone:w.phoneNumber||"",website:w.websiteUrl||"",address:E.join(", "),hours:{monday:"",tuesday:"",wednesday:"",thursday:"",friday:"",saturday:"",sunday:""}})}o(!1)})()},[t,u]);const m=(b,w)=>{f(j=>({...j,[b]:w}))},v=(b,w)=>{f(j=>({...j,hours:{...j.hours,[b]:w}}))},y=async()=>{if(!l){d({title:"Error",description:"No location data available",variant:"destructive"});return}s(!0);try{const b="http://localhost:5000",w={displayName:h.businessName,phoneNumber:h.phone,websiteUrl:h.website},j=await fetch(`${b}/api/locations/${t}/update`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(w)});if(j.ok){const E=await j.json();c(I=>I?{...I,displayName:h.businessName,phoneNumber:h.phone,websiteUrl:h.website}:null),r(!1),d({title:"Profile Updated",description:"Your business profile has been successfully updated."})}else{const E=await j.json();throw new Error(E.message||"Failed to update profile")}}catch(b){console.error("Error updating profile:",b),d({title:"Update Failed",description:b instanceof Error?b.message:"Failed to update profile. Please try again.",variant:"destructive"})}finally{s(!1)}},x=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"];return i?a.jsx("div",{className:"space-y-6",children:a.jsx(H,{children:a.jsx(Y,{className:"flex items-center justify-center py-8",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Gm,{className:"h-6 w-6 animate-spin"}),a.jsx("span",{children:"Loading profile data..."})]})})})}):l?a.jsxs("div",{className:"space-y-6",children:[a.jsxs(H,{children:[a.jsx(me,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs(ge,{className:"flex items-center gap-2",children:[a.jsx(db,{className:"h-5 w-5"}),"Edit Profile Information"]}),a.jsx(K,{onClick:()=>e?y():r(!0),disabled:n,className:"flex items-center gap-2",children:n?a.jsxs(a.Fragment,{children:[a.jsx(Gm,{className:"h-4 w-4 animate-spin"}),"Saving..."]}):e?a.jsxs(a.Fragment,{children:[a.jsx(o9,{className:"h-4 w-4"}),"Save Changes"]}):a.jsxs(a.Fragment,{children:[a.jsx(db,{className:"h-4 w-4"}),"Edit Profile"]})})]})}),a.jsx(Y,{className:"space-y-6",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx(Ie,{htmlFor:"businessName",children:"Business Name"}),a.jsx(Ze,{id:"businessName",value:h.businessName,onChange:b=>m("businessName",b.target.value),disabled:!e})]}),a.jsxs("div",{children:[a.jsx(Ie,{htmlFor:"phone",children:"Phone Number"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(mh,{className:"h-4 w-4 text-muted-foreground"}),a.jsx(Ze,{id:"phone",value:h.phone,onChange:b=>m("phone",b.target.value),disabled:!e})]})]}),a.jsxs("div",{children:[a.jsx(Ie,{htmlFor:"website",children:"Website"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(pw,{className:"h-4 w-4 text-muted-foreground"}),a.jsx(Ze,{id:"website",value:h.website,onChange:b=>m("website",b.target.value),disabled:!e})]})]}),a.jsxs("div",{children:[a.jsx(Ie,{htmlFor:"address",children:"Address"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Wn,{className:"h-4 w-4 text-muted-foreground"}),a.jsx(Ze,{id:"address",value:h.address,onChange:b=>m("address",b.target.value),disabled:!e})]})]})]}),a.jsxs("div",{children:[a.jsx(Ie,{htmlFor:"description",children:"Business Description"}),a.jsx(pu,{id:"description",value:h.description,onChange:b=>m("description",b.target.value),disabled:!e,rows:8,placeholder:"Describe your business, services, and what makes you unique..."})]})]})})]}),a.jsxs(H,{children:[a.jsx(me,{children:a.jsxs(ge,{className:"flex items-center gap-2",children:[a.jsx(Yn,{className:"h-5 w-5"}),"Business Hours"]})}),a.jsx(Y,{children:a.jsx("div",{className:"space-y-3",children:x.map(b=>a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(Ie,{className:"w-24 capitalize",children:b}),a.jsx(Ze,{value:h.hours[b],onChange:w=>v(b,w.target.value),disabled:!e,placeholder:"e.g., 9:00 AM - 6:00 PM or Closed",className:"flex-1"})]},b))})})]})]}):a.jsx("div",{className:"space-y-6",children:a.jsx(H,{children:a.jsx(Y,{className:"py-8 text-center",children:a.jsx("p",{className:"text-muted-foreground",children:"Profile not found or access denied."})})})})},Vie=()=>{const{profileId:t}=Ik(),e=cr(),[r,n]=p.useState(null),[s,i]=p.useState(!0),[o,l]=p.useState(null),[c,u]=p.useState(!1),{accounts:d,isLoading:h}=pi(),{getAccessibleAccounts:f}=Au(),m=v=>v.categoriesFormatted&&Array.isArray(v.categoriesFormatted)?v.categoriesFormatted:[];return p.useEffect(()=>{const v=()=>{if(console.log("ProfileDetails: Looking for profileId:",t),console.log("ProfileDetails: Available accounts:",d),!t||!d.length){i(!1);return}const x=f(d);let b=null,w=!1;for(const j of x){const E=j.locations.find(I=>I.locationId===t);if(E){b=E;break}}if(!b){for(const j of d)if(!x.includes(j)&&j.locations.find(I=>I.locationId===t)){w=!0;break}}console.log("ProfileDetails: Found location:",b),console.log("ProfileDetails: Found in inaccessible account:",w),n(b),u(w),i(!1)},y=()=>{const x=$t.getGlobalStats();l(x)};h||(v(),y())},[t,d,h]),s?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"h-10 w-10 bg-muted rounded animate-pulse"}),a.jsx("div",{className:"h-8 bg-muted rounded w-64 animate-pulse"})]}),a.jsx("div",{className:"h-48 bg-muted rounded animate-pulse"})]}):c?a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"flex items-center gap-4",children:a.jsx(yt,{to:"/dashboard",children:a.jsxs(K,{variant:"outline",size:"sm",children:[a.jsx(dl,{className:"mr-2 h-4 w-4"}),"Back to Dashboard"]})})}),a.jsx(H,{className:"border-orange-200 bg-orange-50",children:a.jsx(Y,{className:"p-6",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"h-12 w-12 bg-orange-100 rounded-lg flex items-center justify-center",children:a.jsx(Wn,{className:"h-6 w-6 text-orange-600"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h2",{className:"text-xl font-semibold text-orange-900 mb-2",children:"Profile Access Restricted"}),a.jsx("p",{className:"text-orange-800 mb-4",children:"This business profile requires an Enterprise plan to access. Your current plan allows access to 1 profile only."}),a.jsxs("div",{className:"flex gap-3",children:[a.jsxs(K,{onClick:()=>e("/dashboard/billing"),className:"bg-orange-600 hover:bg-orange-700",children:[a.jsx(ti,{className:"h-4 w-4 mr-2"}),"Upgrade to Access All Profiles"]}),a.jsx(yt,{to:"/dashboard",children:a.jsx(K,{variant:"outline",children:"View Available Profiles"})})]})]})]})})})]}):r?a.jsxs("div",{className:"space-y-3 sm:space-y-4 md:space-y-6 animate-fade-in min-w-0 w-full overflow-x-hidden",children:[a.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[a.jsx(yt,{to:"/dashboard",children:a.jsx(K,{variant:"ghost",size:"sm",className:"h-8 w-8 sm:h-10 sm:w-10 p-0 sm:p-2",children:a.jsx(dl,{className:"h-4 w-4"})})}),a.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold tracking-tight truncate",children:r.displayName})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3 sm:gap-4 md:gap-6",children:[a.jsxs(H,{className:"shadow-sm",children:[a.jsx(me,{children:a.jsx(ge,{className:"text-sm sm:text-base md:text-lg",children:"Profile Overview"})}),a.jsxs(Y,{className:"space-y-2 sm:space-y-3 md:space-y-4",children:[a.jsxs("div",{className:"flex items-start gap-1.5 sm:gap-2",children:[a.jsx(Wn,{className:"h-3 w-3 sm:h-4 sm:w-4 mt-0.5 text-muted-foreground flex-shrink-0"}),a.jsx("span",{className:"text-[11px] sm:text-xs md:text-sm break-words leading-snug flex-1",children:r.address.addressLines.length>0?`${r.address.addressLines.join(", ")}, ${r.address.locality}`:r.address.locality||"No address available"})]}),r.websiteUrl&&a.jsxs("div",{className:"flex items-start gap-1.5 sm:gap-2",children:[a.jsx(pw,{className:"h-3 w-3 sm:h-4 sm:w-4 mt-0.5 text-muted-foreground flex-shrink-0"}),a.jsxs("a",{href:r.websiteUrl,target:"_blank",rel:"noopener noreferrer",className:"text-[11px] sm:text-xs md:text-sm text-primary hover:text-primary-hover flex items-center gap-1 break-all flex-1 min-w-0",children:[a.jsx("span",{className:"truncate",children:r.websiteUrl}),a.jsx(mw,{className:"h-2.5 w-2.5 sm:h-3 sm:w-3 flex-shrink-0"})]})]}),a.jsx("div",{className:"flex flex-wrap gap-1 max-w-full",children:m(r).map(v=>a.jsx(Se,{variant:"secondary",className:"text-[10px] sm:text-xs px-1.5 sm:px-2 py-0.5 whitespace-nowrap leading-tight",children:v.name},v.name))})]})]}),o&&a.jsxs(H,{className:"shadow-sm",children:[a.jsx(me,{children:a.jsxs(ge,{className:"flex items-center gap-1.5 sm:gap-2 text-sm sm:text-base md:text-lg",children:[a.jsx(Ya,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4 md:h-5 md:w-5"}),a.jsx("span",{className:"text-xs sm:text-sm md:text-base",children:"Today's Statistics"})]})}),a.jsx(Y,{children:a.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:gap-3 md:gap-4",children:[a.jsx(H,{className:"border border-green-200 bg-green-50",children:a.jsxs(Y,{className:"p-2 sm:p-3 md:p-4 text-center",children:[a.jsx("div",{className:"text-lg sm:text-xl md:text-2xl font-bold text-green-600",children:o.successfulPostsToday}),a.jsx("div",{className:"text-[10px] sm:text-xs md:text-sm text-muted-foreground leading-tight",children:"Successful"})]})}),a.jsx(H,{className:"border border-red-200 bg-red-50",children:a.jsxs(Y,{className:"p-2 sm:p-3 md:p-4 text-center",children:[a.jsx("div",{className:"text-lg sm:text-xl md:text-2xl font-bold text-red-600",children:o.failedPostsToday}),a.jsx("div",{className:"text-[10px] sm:text-xs md:text-sm text-muted-foreground leading-tight",children:"Failed"})]})}),a.jsx(H,{className:"border border-blue-200 bg-blue-50",children:a.jsxs(Y,{className:"p-2 sm:p-3 md:p-4 text-center",children:[a.jsx("div",{className:"text-lg sm:text-xl md:text-2xl font-bold text-blue-600",children:o.activeConfigurations}),a.jsx("div",{className:"text-[10px] sm:text-xs md:text-sm text-muted-foreground leading-tight",children:"Active"})]})}),a.jsx(H,{className:"border border-gray-200 bg-gray-50",children:a.jsxs(Y,{className:"p-2 sm:p-3 md:p-4 text-center",children:[a.jsx("div",{className:"text-lg sm:text-xl md:text-2xl font-bold text-gray-700",children:o.totalPostsToday}),a.jsx("div",{className:"text-[10px] sm:text-xs md:text-sm text-muted-foreground leading-tight",children:"Total"})]})})]})})]})]}),a.jsxs(Kl,{defaultValue:"auto-posting",className:"space-y-3 sm:space-y-4 md:space-y-6",children:[a.jsxs(ko,{className:"grid w-full grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 h-auto gap-0.5 sm:gap-1 p-0.5 sm:p-1",children:[a.jsx(Zt,{value:"auto-posting",className:"text-[10px] sm:text-xs md:text-sm px-1 sm:px-2 md:px-3 py-1.5 sm:py-2 data-[state=active]:text-[10px] sm:data-[state=active]:text-xs md:data-[state=active]:text-sm",children:"Auto Posting"}),a.jsx(Zt,{value:"posts",className:"text-[10px] sm:text-xs md:text-sm px-1 sm:px-2 md:px-3 py-1.5 sm:py-2",children:"Posts"}),a.jsx(Zt,{value:"reviews",className:"text-[10px] sm:text-xs md:text-sm px-1 sm:px-2 md:px-3 py-1.5 sm:py-2",children:"Reviews"}),a.jsx(Zt,{value:"photos",className:"text-[10px] sm:text-xs md:text-sm px-1 sm:px-2 md:px-3 py-1.5 sm:py-2",children:"Photos"}),a.jsx(Zt,{value:"edit",className:"text-[10px] sm:text-xs md:text-sm px-1 sm:px-2 md:px-3 py-1.5 sm:py-2",children:"Edit Profile"})]}),a.jsx(er,{value:"auto-posting",children:a.jsx(Cse,{location:{id:r.locationId,name:r.displayName,categories:m(r).map(v=>v.name),websiteUri:r.websiteUrl,phoneNumber:r.phoneNumber,address:r.address}})}),a.jsx(er,{value:"posts",children:a.jsx(Fie,{profileId:r.locationId})}),a.jsx(er,{value:"reviews",children:a.jsx($ie,{profileId:r.locationId})}),a.jsx(er,{value:"photos",children:a.jsx(Uie,{profileId:r.locationId})}),a.jsx(er,{value:"edit",children:a.jsx(Bie,{profileId:r.locationId})})]})]}):a.jsx("div",{className:"flex items-center justify-center min-h-96",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"Location Not Found"}),a.jsx("p",{className:"text-muted-foreground mb-4",children:"The requested business location could not be found."}),a.jsx(yt,{to:"/dashboard",children:a.jsxs(K,{variant:"outline",children:[a.jsx(dl,{className:"mr-2 h-4 w-4"}),"Back to Dashboard"]})})]})})},zie=()=>{const[t,e]=p.useState([]),[r,n]=p.useState(!0),[s,i]=p.useState(!1),[o,l]=p.useState(""),[c,u]=p.useState("all"),[d,h]=p.useState("all"),{accounts:f,isConnected:m,isLoading:v}=pi(),{addNotification:y}=gy(),x=cr(),{isFeatureBlocked:b,status:w}=ln(),{getAccessibleAccounts:j,getAccountLockMessage:E,canAccessMultipleProfiles:I}=Au(),O=p.useMemo(()=>j(f),[f,j]),T=p.useMemo(()=>E(f.length),[f.length,E]),A=p.useMemo(()=>!I&&f.length>1,[I,f.length]);p.useEffect(()=>{const U=async()=>{if(v){n(!0);return}if(!m||!O.length){e([]),n(!1);return}n(!0);try{console.log("Posts: Fetching posts across all profiles (PARALLEL LOADING)");const F=O.flatMap(de=>de.locations.map(Z=>({account:de,location:Z,task:async()=>{try{console.log(`📍 Posts: Processing location - "${Z.displayName}"`);const re=new AbortController,_e=setTimeout(()=>re.abort(),6e3),se=await xt.getLocationPosts(Z.locationId);return clearTimeout(_e),console.log(`📍 Posts: Received ${se.length} posts for ${Z.displayName}`),se.map(oe=>({id:oe.id,profileId:Z.locationId,profileName:Z.displayName,content:oe.summary||"",status:"published",postedAt:oe.createTime}))}catch(re){return console.warn(`⚠️ Failed to fetch posts for ${Z.displayName}:`,re),[]}}})));console.log(`🚀 Starting parallel loading of posts for ${F.length} locations`);const M=Date.now(),$=F.map(({task:de})=>de()),ne=await Promise.allSettled($),te=[];ne.forEach((de,Z)=>{de.status==="fulfilled"?te.push(...de.value):console.warn(`Location ${Z} failed:`,de.reason)});const z=Date.now()-M;console.log(`✅ Parallel loading completed in ${z}ms: Loaded ${te.length} posts from ${F.length} locations`),e(te),n(!1)}catch(F){console.error("Error fetching posts:",F),e([]),n(!1)}};n(!0),U()},[O,m,v]);const S=U=>new Date(U).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}),_=U=>{switch(U){case"published":return a.jsx(Se,{variant:"default",className:"bg-success text-success-foreground",children:"Published"});case"scheduled":return a.jsx(Se,{variant:"secondary",className:"bg-warning/10 text-warning border-warning/20",children:"Scheduled"});case"draft":return a.jsx(Se,{variant:"outline",children:"Draft"});case"failed":return a.jsx(Se,{variant:"destructive",children:"Failed"});default:return a.jsx(Se,{variant:"outline",children:U})}},P=O.flatMap(U=>U.locations.map(F=>({id:F.locationId,name:F.displayName,accountName:U.accountName}))),R=t.filter(U=>{const F=U.content.toLowerCase().includes(o.toLowerCase())||U.profileName.toLowerCase().includes(o.toLowerCase()),M=c==="all"||U.status===c,$=d==="all"||U.profileId===d;return F&&M&&$}),C=async U=>{try{console.log("Creating post:",U);const F=O.flatMap(z=>z.locations).find(z=>z.locationId===U.profileId);if(!F)throw new Error("Selected location not found");const M=await xt.createLocationPost(F.locationId,{summary:U.content,topicType:"STANDARD",callToAction:U.callToAction});console.log("Post created successfully:",M);const $=M.status||M.state||"pending",ne=M.realTime||!1,te={id:M.id,profileId:F.locationId,profileName:F.displayName,content:M.summary||"",status:$==="PENDING"||$==="UNDER_REVIEW"?"scheduled":$==="LIVE"?"published":"draft",postedAt:M.createTime,scheduledAt:$==="PENDING"?M.createTime:void 0};e(z=>[te,...z]),i(!1),y(ne?$==="PENDING"||$==="UNDER_REVIEW"?{type:"post",title:"Post Sent for Review",message:`Post for "${F.displayName}" has been sent to Google Business Profile for review.`,actionUrl:"/posts"}:$==="LIVE"?{type:"post",title:"Post Published!",message:`Your post for "${F.displayName}" is now live on Google Business Profile.`,actionUrl:"/posts"}:{type:"post",title:"Post Created",message:`Post for "${F.displayName}" has been created successfully.`,actionUrl:"/posts"}:{type:"post",title:"Post Drafted",message:`Post for "${F.displayName}" has been drafted locally due to API restrictions.`,actionUrl:"/posts"}),alert(ne?$==="PENDING"||$==="UNDER_REVIEW"?`🎉 Post successfully submitted to Google Business Profile!

📋 Status: ${$}

⏳ Your post is now under Google's review and will appear on your Business Profile once approved. This usually takes a few minutes to a few hours.`:$==="LIVE"?`🎉 Post published successfully to Google Business Profile! 

✅ Your post is now LIVE and visible to customers on Google!`:`🎉 Post submitted to Google Business Profile!

📋 Status: ${$}

${M.message||"Your post has been processed by Google."}`:$==="SIMULATED"?`⚠️ Google Business Profile Posts API Restriction

🔒 Google has restricted access to the Posts API. Your post was saved locally but not submitted to Google Business Profile.

💡 To post to your Google Business Profile:
• Use Google Business Profile Manager directly
• Or contact Google for API access approval

📝 Post content: "${U.content}"`:`🎉 Post created successfully! 

⚠️ Note: This was processed locally due to API restrictions.

${M.warning||""}`)}catch(F){console.error("Error creating post:",F);let M="Failed to create post. Please try again.";F instanceof Error&&(F.message.includes("fetch")?M="Network error. Please check your connection and try again.":F.message.includes("Access token")?M="Authentication error. Please reconnect your Google Business Profile.":F.message.includes("API")?M=`API Error: ${F.message}`:M=`Error: ${F.message}`),alert(`❌ ${M}

💡 If this continues, try:
• Checking your internet connection
• Reconnecting your Google Business Profile
• Refreshing the page`)}},G={all:t.length,published:t.filter(U=>U.status==="published").length,scheduled:t.filter(U=>U.status==="scheduled").length,draft:t.filter(U=>U.status==="draft").length};return b||w==="none"?a.jsx("div",{className:"flex flex-col items-center justify-center min-h-[500px] text-center space-y-6",children:a.jsxs("div",{className:"bg-red-950/30 border-2 border-red-500/50 rounded-2xl p-8 max-w-2xl w-full backdrop-blur-sm",children:[a.jsx(qr,{className:"h-16 w-16 text-red-500 mx-auto mb-4"}),a.jsx("h3",{className:"text-2xl font-bold text-red-400 mb-3",children:w==="none"?"No Subscription - Upgrade Required":"Trial Expired - Upgrade Required"}),a.jsx("p",{className:"text-red-300/90 mb-6 text-lg",children:w==="none"?"You need an active subscription to access this feature. Start your 15-day free trial or upgrade now to create and manage posts.":"Your 15-day trial has expired. Upgrade now to create and manage posts for your Google Business Profiles."}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs(K,{onClick:()=>x("/dashboard/billing"),className:"bg-red-600 hover:bg-red-700 text-white px-8 py-6 text-lg w-full",size:"lg",children:[a.jsx(Sr,{className:"mr-2 h-5 w-5"}),w==="none"?"Start Free Trial":"Upgrade Now"]}),a.jsx("p",{className:"text-sm text-red-400/80",children:"Starting from ₹1,099/month • Unlimited Profiles • All Features"})]})]})}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold tracking-tight",children:"Posts"}),a.jsx("p",{className:"text-sm sm:text-base text-muted-foreground mt-1",children:"Manage posts across all your business profiles"})]}),a.jsxs(K,{onClick:()=>i(!0),className:"bg-primary hover:bg-primary-hover shadow-primary w-full sm:w-auto",size:"sm",disabled:b||w==="none",children:[a.jsx(lo,{className:"mr-1 sm:mr-2 h-3 w-3 sm:h-4 sm:w-4"}),a.jsx("span",{className:"text-sm sm:text-base",children:"Create Post"})]})]}),A&&a.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(eo,{className:"h-5 w-5 text-orange-600 mt-0.5"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"text-sm font-medium text-orange-800 mb-1",children:"Multiple Profiles Available"}),a.jsx("p",{className:"text-sm text-orange-700 mb-3",children:T}),a.jsx(K,{onClick:()=>x("/dashboard/billing"),size:"sm",className:"bg-orange-600 hover:bg-orange-700 text-white",children:"Upgrade to Access All Profiles"})]})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[a.jsx(H,{className:"shadow-card border-2 border-border/60",children:a.jsxs(Y,{className:"pt-6",children:[a.jsx("div",{className:"text-2xl font-bold",children:G.all}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Posts"})]})}),a.jsx(H,{className:"shadow-card border-2 border-border/60",children:a.jsxs(Y,{className:"pt-6",children:[a.jsx("div",{className:"text-2xl font-bold text-success",children:G.published}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Published"})]})}),a.jsx(H,{className:"shadow-card border-2 border-border/60",children:a.jsxs(Y,{className:"pt-6",children:[a.jsx("div",{className:"text-2xl font-bold text-warning",children:G.scheduled}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Scheduled"})]})}),a.jsx(H,{className:"shadow-card border-2 border-border/60",children:a.jsxs(Y,{className:"pt-6",children:[a.jsx("div",{className:"text-2xl font-bold text-muted-foreground",children:G.draft}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Drafts"})]})})]}),a.jsx(H,{className:"shadow-card border-2 border-border/60",children:a.jsx(Y,{className:"pt-6",children:a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(Fs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),a.jsx(Ze,{placeholder:"Search posts...",value:o,onChange:U=>l(U.target.value),className:"pl-10"})]}),a.jsxs(Ht,{value:d,onValueChange:h,children:[a.jsxs(Bt,{className:"w-full sm:w-64",children:[a.jsx(gs,{className:"mr-2 h-4 w-4"}),a.jsx(Kt,{placeholder:"Select business profile"})]}),a.jsxs(Vt,{children:[a.jsx(fe,{value:"all",children:"All Profiles"}),P.map(U=>a.jsx(fe,{value:U.id,children:a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"font-medium",children:U.name}),a.jsx("span",{className:"text-xs text-muted-foreground",children:U.accountName})]})},U.id))]})]}),a.jsxs(Ht,{value:c,onValueChange:u,children:[a.jsxs(Bt,{className:"w-full sm:w-48",children:[a.jsx(zm,{className:"mr-2 h-4 w-4"}),a.jsx(Kt,{placeholder:"Filter by status"})]}),a.jsxs(Vt,{children:[a.jsx(fe,{value:"all",children:"All Status"}),a.jsx(fe,{value:"published",children:"Published"}),a.jsx(fe,{value:"scheduled",children:"Scheduled"}),a.jsx(fe,{value:"draft",children:"Draft"}),a.jsx(fe,{value:"failed",children:"Failed"})]})]})]})})}),a.jsxs(H,{className:"shadow-card border-2 border-border/60",children:[a.jsx(me,{children:a.jsx(ge,{children:"All Posts"})}),a.jsx(Y,{children:r?a.jsx("div",{className:"space-y-4",children:Array.from({length:10}).map((U,F)=>a.jsxs("div",{className:"border-2 border-border/60 rounded-lg p-4 animate-pulse shadow-sm",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsx("div",{className:"h-4 bg-muted rounded w-1/4"}),a.jsx("div",{className:"h-6 bg-muted rounded w-20"})]}),a.jsx("div",{className:"h-3 bg-muted rounded w-full mb-1"}),a.jsx("div",{className:"h-3 bg-muted rounded w-3/4"})]},F))}):R.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Kn,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium mb-2",children:o||c!=="all"?"No posts found":"No posts yet"}),a.jsx("p",{className:"text-muted-foreground mb-4",children:o||c!=="all"?"Try adjusting your search or filters":"Create your first post to start engaging with customers"}),!o&&c==="all"&&a.jsxs(K,{onClick:()=>i(!0),variant:"outline",children:[a.jsx(lo,{className:"mr-2 h-4 w-4"}),"Create First Post"]})]}):a.jsx("div",{className:"space-y-4",children:R.map(U=>a.jsxs("div",{className:"border-2 border-border/60 rounded-lg p-4 hover:bg-muted/30 transition-colors shadow-sm",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-medium text-sm",children:U.profileName}),_(U.status),U.scheduledAt&&a.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[a.jsx(Yn,{className:"h-3 w-3"}),S(U.scheduledAt)]}),U.postedAt&&a.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[a.jsx(Kn,{className:"h-3 w-3"}),"Posted ",S(U.postedAt)]})]}),a.jsxs(hy,{children:[a.jsx(fy,{asChild:!0,children:a.jsx(K,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:a.jsx(hI,{className:"h-4 w-4"})})}),a.jsxs(Lh,{align:"end",children:[a.jsx(An,{children:"Edit Post"}),a.jsx(An,{children:"Duplicate"}),a.jsx(An,{children:"Reschedule"}),a.jsx(An,{className:"text-destructive",children:"Delete"})]})]})]}),a.jsxs("div",{className:"flex gap-4",children:[U.imageUrl&&a.jsx("div",{className:"flex-shrink-0",children:a.jsx("img",{src:U.imageUrl,alt:"Post image",className:"w-16 h-16 object-cover rounded-md"})}),a.jsx("div",{className:"flex-1",children:a.jsx("p",{className:"text-sm leading-relaxed",children:U.content})})]})]},U.id))})})]})]}),a.jsx(D3,{open:s,onOpenChange:i,onSubmit:C,profileId:d!=="all"?d:"",availableProfiles:P})]})},rd=[{id:"positive",name:"Positive Review",content:"Thank you so much for your wonderful review! We're thrilled to hear about your positive experience. Your feedback means the world to us and motivates our team to continue providing excellent service. We look forward to serving you again soon!"},{id:"negative",name:"Negative Review",content:"Thank you for taking the time to share your feedback. We sincerely apologize for not meeting your expectations. Your concerns are important to us, and we would appreciate the opportunity to discuss this further and make things right. Please contact us directly so we can address your concerns properly."},{id:"neutral",name:"Neutral Review",content:"Thank you for your review and feedback. We appreciate you taking the time to share your experience with us. We're always working to improve our services and your input helps us do that. We hope to have the opportunity to serve you again and provide an even better experience."},{id:"general",name:"General Response",content:"Thank you for your review! We appreciate your feedback and look forward to serving you better in the future."}],Gie=()=>{const[t,e]=p.useState([]),[r,n]=p.useState(!0),[s,i]=p.useState(!1),[o,l]=p.useState({search:"",rating:"all",reply:"all",location:"all",dateRange:"all",sentiment:"all"}),[c,u]=p.useState({field:"date",direction:"desc"}),[d,h]=p.useState(null),[f,m]=p.useState(!1),[v,y]=p.useState(""),[x,b]=p.useState("custom"),[w,j]=p.useState(!1),[E,I]=p.useState([]),[O,T]=p.useState(!1),[A,S]=p.useState(null),{accounts:_,isConnected:P,isLoading:R}=pi(),C=cr(),{isFeatureBlocked:B,status:G}=ln(),{getAccessibleAccounts:U,getAccountLockMessage:F,canAccessMultipleProfiles:M}=Au(),$=p.useMemo(()=>U(_),[_,U]),ne=p.useMemo(()=>F(_.length),[_.length,F]),te=p.useMemo(()=>!M&&_.length>1,[M,_.length]),z=(Q,ue)=>{if(Q>=4)return"positive";if(Q<=2)return"negative";const we=["bad","terrible","awful","horrible","worst","disappointing","poor"],Me=["good","great","excellent","amazing","wonderful","fantastic","perfect"],Ne=ue.toLowerCase(),Te=we.some(Ae=>Ne.includes(Ae)),rt=Me.some(Ae=>Ne.includes(Ae));return rt&&!Te?"positive":Te&&!rt?"negative":"neutral"},de=async(Q=!1)=>{if(R){n(!0);return}if(!P||!$.length){e([]),n(!1);return}Q?i(!0):n(!0);try{console.log("Reviews: Fetching reviews across all profiles (PARALLEL LOADING)");const ue=$.flatMap(Ae=>Ae.locations.map(st=>({account:Ae,location:st,task:async()=>{try{console.log(`📍 Frontend: Processing location - Name: "${st.displayName}", ID: "${st.locationId}"`);const It=new AbortController,et=setTimeout(()=>It.abort(),8e3),Jt=await xt.getLocationReviews(st.name,{forceRefresh:Q});return clearTimeout(et),console.log(`📍 Frontend: Received ${Jt.length} reviews for ${st.displayName}`),Jt.map(ut=>{var Uo,Yr;return{id:ut.id,profileId:st.locationId,profileName:st.displayName,fullReviewName:ut.name,author:ut.reviewer.displayName,rating:ut.starRating,content:ut.comment||"",createdAt:ut.createTime,replied:!!ut.reply,replyContent:(Uo=ut.reply)==null?void 0:Uo.comment,repliedAt:(Yr=ut.reply)==null?void 0:Yr.updateTime,sentiment:z(ut.starRating,ut.comment||"")}})}catch(It){return console.warn(`⚠️ Failed to fetch reviews for ${st.displayName}:`,It),[]}}})));console.log(`🚀 Starting parallel loading of reviews for ${ue.length} locations`);const we=Date.now(),Me=ue.map(({task:Ae})=>Ae()),Ne=await Promise.allSettled(Me),Te=[];Ne.forEach((Ae,st)=>{Ae.status==="fulfilled"?Te.push(...Ae.value):console.warn(`Location ${st} failed:`,Ae.reason)});const rt=Date.now()-we;console.log(`✅ Parallel loading completed in ${rt}ms: Loaded ${Te.length} reviews from ${ue.length} locations`),e(Te)}catch(ue){console.error("Error fetching reviews:",ue),e([])}finally{n(!1),i(!1)}};p.useEffect(()=>{n(!0),de()},[$,P,R]),p.useEffect(()=>{const Q=setInterval(()=>{P&&$.length&&de(!0)},3e5);return()=>clearInterval(Q)},[P,$]);const Z=async Q=>{const ue=t.find(Me=>Me.id===Q);if(!ue)return;const we=rd.find(Me=>Me.id===ue.sentiment)||rd.find(Me=>Me.id==="general");we&&(b(we.id),y(we.content)),h(ue),m(!0)},re=async()=>{if(!(!d||!v.trim())){j(!0);try{console.log("Sending reply to review:",d.id);const Q=d.fullReviewName;if(!Q)throw new Error("Review name not available. Please refresh the reviews list.");console.log("Reviews: Sending reply with full review name:",Q),await xt.replyToReview(Q,v),e(ue=>ue.map(we=>we.id===d.id?{...we,replied:!0,replyContent:v,repliedAt:new Date().toISOString()}:we)),m(!1),h(null),y(""),b(""),console.log("Reply sent successfully!")}catch(Q){console.error("Error replying to review:",Q),alert("Failed to send reply. Please try again.")}finally{j(!1)}}},_e=Q=>{b(Q);const ue=rd.find(we=>we.id===Q);ue&&Q!=="custom"&&y(ue.content)},se=Q=>{y(Q),!rd.some(we=>we.content===Q||Q==="")&&x!=="custom"&&b("custom")},Fe=async Q=>{if(Q){T(!0);try{let ue=[];try{const Me=await fetch("http://localhost:5000/api/ai-reviews/reply-suggestions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({businessName:Q.profileName,reviewContent:Q.content,reviewRating:Q.rating,reviewId:Q.id})});if(Me.ok){const Ne=await Me.json();Ne.success&&Ne.suggestions&&(ue=Ne.suggestions.map(Te=>Te.text||Te.reply||Te).slice(0,3),console.log("Using backend AI reply suggestions:",ue.length,"suggestions received"))}else throw new Error("Backend AI service unavailable")}catch(we){console.log("Backend AI service unavailable, using local suggestions:",we.message),ue=oe(Q)}ue.length===0&&(ue=oe(Q)),I(ue)}catch(ue){console.error("Error generating AI suggestions:",ue),I([])}finally{T(!1)}}},oe=Q=>{const ue=[],we=Q.profileName,Me=Q.rating,Ne=Q.content.toLowerCase(),Te=Date.now(),rt=Q.id,Ae=Ne.includes("service"),st=Ne.includes("staff")||Ne.includes("team");Ne.includes("quality"),Ne.includes("price")||Ne.includes("cost");const It=Ne.includes("wait")||Ne.includes("time");Ne.includes("clean"),Ne.includes("food")||Ne.includes("meal"),Ne.includes("atmosphere")||Ne.includes("ambiance");const Jt=(parseInt(rt.slice(-4),16)+Te)%3,yr=["Thank you so much for","We really appreciate","We're grateful for","Thank you for taking the time to share"],ut=[`We look forward to welcoming you back to ${we} soon!`,`We hope to see you again at ${we} in the near future!`,`We'd love to serve you again at ${we}!`,`Thank you for choosing ${we} and we hope to see you soon!`],vr=["We're always looking for ways to improve","We're committed to continuous improvement","We value your input as we work to enhance our service","Your feedback helps us grow and improve"];if(Me>=4){const Yr=yr[Jt%yr.length],ns=ut[Jt%ut.length];if(ue.push(`${Yr} your wonderful ${Me}-star review! We're thrilled to hear about your positive experience at ${we}. Your feedback means the world to us and motivates our team to continue providing excellent service.`),Ae){const yn=["We're so glad you were happy with our service! Our team works hard to ensure every customer has a great experience.","It's wonderful to hear that our service met your expectations! We pride ourselves on providing excellent customer care.","Your satisfaction with our service is exactly what we strive for! Thank you for recognizing our efforts."];ue.push(yn[Jt%yn.length])}if(st){const yn=["Our team will be delighted to hear your kind words! We'll make sure to share your feedback with them.","I'll be sure to pass along your compliments to our team - they'll be thrilled to hear this!","Your recognition of our staff means so much to us. They work hard to provide excellent service every day."];ue.push(yn[Jt%yn.length])}ue.push(ns)}else if(Me===3){const Yr=vr[Jt%vr.length];ue.push(`Thank you for your honest feedback about your experience at ${we}. We appreciate you taking the time to share your thoughts and ${Yr.toLowerCase()}.`);const ns=["We value your feedback and would love to discuss how we can enhance your experience.","Your input is valuable to us and we'd appreciate the opportunity to address any concerns.","We take all feedback seriously and would welcome the chance to improve your experience."];ue.push(ns[Jt%ns.length]),Ae&&ue.push(`We appreciate your feedback about our service. ${Yr} and your input helps us identify areas where we can do better.`)}else{const Yr=["We sincerely apologize that your experience","We're truly sorry that your visit","We deeply regret that your experience"],ns=Yr[Jt%Yr.length];ue.push(`${ns} at ${we} didn't meet your expectations. Your feedback is important to us, and we take all concerns seriously. We'd appreciate the opportunity to discuss this with you directly to make things right.`),It&&ue.push("We're sorry about the wait time you experienced. We're working on improving our efficiency to serve our customers better. Please give us another chance to provide you with the quality service you deserve."),Ae&&ue.push(`We apologize for falling short in our service. This is not the standard we strive for at ${we}. We would welcome the opportunity to speak with you about your experience and show you the level of service we're known for.`);const yn=["Thank you for bringing this to our attention. We're committed to making improvements","We appreciate you sharing your concerns with us. We're dedicated to doing better","Your feedback helps us grow and improve. We're working hard to address these issues"];ue.push(`${yn[Jt%yn.length]} and would like to invite you back to experience the better service we're working towards.`)}return[...new Set(ue)].slice(0,3)},V=async(Q,ue)=>{try{await navigator.clipboard.writeText(Q),S(ue),setTimeout(()=>S(null),2e3)}catch(we){console.error("Failed to copy suggestion:",we);const Me=document.createElement("textarea");Me.value=Q,document.body.appendChild(Me),Me.select(),document.execCommand("copy"),document.body.removeChild(Me),S(ue),setTimeout(()=>S(null),2e3)}},W=Q=>new Date(Q).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),L=Q=>Array.from({length:5}).map((ue,we)=>a.jsx(ms,{className:ye("h-4 w-4",we<Q?"fill-yellow-400 text-yellow-400":"text-muted-foreground")},we)),J=Q=>Q.split(" ").map(ue=>ue[0]).join("").toUpperCase(),le=p.useMemo(()=>{let Q=t.filter(ue=>{const we=ue.content.toLowerCase().includes(o.search.toLowerCase())||ue.author.toLowerCase().includes(o.search.toLowerCase())||ue.profileName.toLowerCase().includes(o.search.toLowerCase()),Me=o.rating==="all"||ue.rating.toString()===o.rating,Ne=o.reply==="all"||o.reply==="replied"&&ue.replied||o.reply==="not-replied"&&!ue.replied,Te=o.location==="all"||ue.profileName===o.location,rt=o.sentiment==="all"||ue.sentiment===o.sentiment;let Ae=!0;if(o.dateRange!=="all"){const st=new Date(ue.createdAt),et=(new Date().getTime()-st.getTime())/(1e3*3600*24);switch(o.dateRange){case"7d":Ae=et<=7;break;case"30d":Ae=et<=30;break;case"90d":Ae=et<=90;break;case"1y":Ae=et<=365;break}}return we&&Me&&Ne&&Te&&rt&&Ae});return Q.sort((ue,we)=>{const Me=c.direction==="asc"?1:-1;switch(c.field){case"date":return Me*(new Date(ue.createdAt).getTime()-new Date(we.createdAt).getTime());case"rating":return Me*(ue.rating-we.rating);case"author":return Me*ue.author.localeCompare(we.author);default:return 0}}),Q},[t,o,c]),pe=p.useMemo(()=>{const Q=t.length,ue=t.filter(Ae=>Ae.replied).length,we=Q-ue,Me={all:Q,5:t.filter(Ae=>Ae.rating===5).length,4:t.filter(Ae=>Ae.rating===4).length,3:t.filter(Ae=>Ae.rating===3).length,2:t.filter(Ae=>Ae.rating===2).length,1:t.filter(Ae=>Ae.rating===1).length},Ne=Q>0?t.reduce((Ae,st)=>Ae+st.rating,0)/Q:0,Te={positive:t.filter(Ae=>Ae.sentiment==="positive").length,neutral:t.filter(Ae=>Ae.sentiment==="neutral").length,negative:t.filter(Ae=>Ae.sentiment==="negative").length},rt=Array.from(new Set(t.map(Ae=>Ae.profileName)));return{total:Q,replied:ue,needReply:we,ratingCounts:Me,avgRating:Ne,sentimentCounts:Te,locations:rt}},[t]),ke=()=>{de(!0)},De=Q=>{u(ue=>({field:Q,direction:ue.field===Q&&ue.direction==="desc"?"asc":"desc"}))},qe=(Q,ue)=>{l(we=>({...we,[Q]:ue}))},mt=Q=>{switch(Q){case"positive":return a.jsx($S,{className:"h-3 w-3 text-green-500"});case"negative":return a.jsx(WV,{className:"h-3 w-3 text-red-500"});default:return a.jsx(ZV,{className:"h-3 w-3 text-yellow-500"})}},jt=Q=>{switch(Q){case"positive":return"text-green-600 bg-green-50 border-green-200";case"negative":return"text-red-600 bg-red-50 border-red-200";default:return"text-yellow-600 bg-yellow-50 border-yellow-200"}},Nt=Q=>{const ue=le.map(we=>({Author:we.author,Rating:we.rating,Review:we.content,Location:we.profileName,Date:W(we.createdAt),Replied:we.replied?"Yes":"No",Reply:we.replyContent||"",Sentiment:we.sentiment||"neutral"}));if(Q==="csv"){const we=Object.keys(ue[0]||{}),Me=[we.join(","),...ue.map(rt=>we.map(Ae=>`"${String(rt[Ae]).replace(/"/g,'""')}"`).join(","))].join(`
`),Ne=new Blob([Me],{type:"text/csv;charset=utf-8;"}),Te=document.createElement("a");Te.href=URL.createObjectURL(Ne),Te.download=`reviews_export_${new Date().toISOString().split("T")[0]}.csv`,Te.click()}else{const we=JSON.stringify(ue,null,2),Me=new Blob([we],{type:"application/json;charset=utf-8;"}),Ne=document.createElement("a");Ne.href=URL.createObjectURL(Me),Ne.download=`reviews_export_${new Date().toISOString().split("T")[0]}.json`,Ne.click()}};return B||G==="none"?a.jsx("div",{className:"flex flex-col items-center justify-center min-h-[500px] text-center space-y-6",children:a.jsxs("div",{className:"bg-red-950/30 border-2 border-red-500/50 rounded-2xl p-8 max-w-2xl w-full backdrop-blur-sm",children:[a.jsx(qr,{className:"h-16 w-16 text-red-500 mx-auto mb-4"}),a.jsx("h3",{className:"text-2xl font-bold text-red-400 mb-3",children:G==="none"?"No Subscription - Upgrade Required":"Trial Expired - Upgrade Required"}),a.jsx("p",{className:"text-red-300/90 mb-6 text-lg",children:G==="none"?"You need an active subscription to access this feature. Start your 15-day free trial or upgrade now to manage and respond to reviews.":"Your 15-day trial has expired. Upgrade now to manage and respond to reviews for your Google Business Profiles."}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs(K,{onClick:()=>C("/dashboard/billing"),className:"bg-red-600 hover:bg-red-700 text-white px-8 py-6 text-lg w-full",size:"lg",children:[a.jsx(Sr,{className:"mr-2 h-5 w-5"}),G==="none"?"Start Free Trial":"Upgrade Now"]}),a.jsx("p",{className:"text-sm text-red-400/80",children:"Starting from ₹1,099/month • Unlimited Profiles • All Features"})]})]})}):a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl sm:text-3xl font-bold tracking-tight",children:"Reviews"}),a.jsx("p",{className:"text-sm sm:text-base text-muted-foreground mt-1",children:"Manage customer reviews across all your business profiles"})]})}),te&&a.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(eo,{className:"h-5 w-5 text-orange-600 mt-0.5"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"text-sm font-medium text-orange-800 mb-1",children:"Multiple Profiles Available"}),a.jsx("p",{className:"text-sm text-orange-700 mb-3",children:ne}),a.jsx(K,{onClick:()=>C("/dashboard/billing"),size:"sm",className:"bg-orange-600 hover:bg-orange-700 text-white",children:"Upgrade to Access All Profiles"})]})]})}),a.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-3 sm:gap-4",children:[a.jsx(H,{className:"shadow-card border-2 border-border/60",children:a.jsxs(Y,{className:"pt-6",children:[a.jsx("div",{className:"text-2xl font-bold",children:pe.total}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Reviews"})]})}),a.jsx(H,{className:"shadow-card border-2 border-border/60",children:a.jsxs(Y,{className:"pt-6",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ms,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),a.jsx("div",{className:"text-2xl font-bold",children:pe.avgRating.toFixed(1)})]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Average Rating"})]})}),a.jsx(H,{className:"shadow-card border-2 border-border/60",children:a.jsxs(Y,{className:"pt-6",children:[a.jsx("div",{className:"text-2xl font-bold text-green-600",children:pe.replied}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Replied"})]})}),a.jsx(H,{className:"shadow-card border-2 border-border/60",children:a.jsxs(Y,{className:"pt-6",children:[a.jsx("div",{className:"text-2xl font-bold text-orange-600",children:pe.needReply}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Need Reply"})]})}),a.jsx(H,{className:"shadow-card border-2 border-border/60",children:a.jsxs(Y,{className:"pt-6",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[mt("positive"),a.jsx("div",{className:"text-2xl font-bold",children:pe.sentimentCounts.positive})]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Positive"})]})})]}),a.jsx(H,{className:"shadow-card border-2 border-border/60",children:a.jsx(Y,{className:"pt-6",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3 sm:gap-4",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(Fs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),a.jsx(Ze,{placeholder:"Search reviews...",value:o.search,onChange:Q=>qe("search",Q.target.value),className:"pl-10 text-sm"})]}),a.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[a.jsx(xb,{children:a.jsxs(nA,{children:[a.jsx(sA,{asChild:!0,children:a.jsx(K,{variant:"outline",size:"icon",onClick:ke,disabled:s,children:a.jsx(ir,{className:ye("h-4 w-4",s&&"animate-spin")})})}),a.jsx(bb,{children:"Refresh Reviews"})]})}),a.jsxs(Ht,{onValueChange:Q=>Q&&Nt(Q),children:[a.jsxs(Bt,{className:"w-32 sm:w-36",children:[a.jsx(fw,{className:"mr-1 sm:mr-2 h-4 w-4"}),a.jsx(Kt,{placeholder:"Export"})]}),a.jsxs(Vt,{children:[a.jsx(fe,{value:"csv",children:"Export CSV"}),a.jsx(fe,{value:"json",children:"Export JSON"})]})]})]})]}),a.jsxs("div",{className:"flex flex-wrap gap-2 sm:gap-3",children:[a.jsxs(Ht,{value:o.rating,onValueChange:Q=>qe("rating",Q),children:[a.jsxs(Bt,{className:"w-28 sm:w-36",children:[a.jsx(zm,{className:"mr-1 sm:mr-2 h-4 w-4"}),a.jsx(Kt,{placeholder:"Rating"})]}),a.jsxs(Vt,{children:[a.jsx(fe,{value:"all",children:"All Ratings"}),a.jsx(fe,{value:"5",children:"5 Stars"}),a.jsx(fe,{value:"4",children:"4 Stars"}),a.jsx(fe,{value:"3",children:"3 Stars"}),a.jsx(fe,{value:"2",children:"2 Stars"}),a.jsx(fe,{value:"1",children:"1 Star"})]})]}),a.jsxs(Ht,{value:o.reply,onValueChange:Q=>qe("reply",Q),children:[a.jsxs(Bt,{className:"w-32 sm:w-40",children:[a.jsx(ri,{className:"mr-1 sm:mr-2 h-4 w-4"}),a.jsx(Kt,{placeholder:"Reply"})]}),a.jsxs(Vt,{children:[a.jsx(fe,{value:"all",children:"All"}),a.jsx(fe,{value:"replied",children:"Replied"}),a.jsx(fe,{value:"not-replied",children:"Need Reply"})]})]}),a.jsxs(Ht,{value:o.location,onValueChange:Q=>qe("location",Q),children:[a.jsxs(Bt,{className:"w-36 sm:w-48",children:[a.jsx(zm,{className:"mr-1 sm:mr-2 h-4 w-4"}),a.jsx(Kt,{placeholder:"Location"})]}),a.jsxs(Vt,{children:[a.jsx(fe,{value:"all",children:"All Locations"}),pe.locations.map(Q=>a.jsx(fe,{value:Q,children:Q},Q))]})]}),a.jsxs(Ht,{value:o.sentiment,onValueChange:Q=>qe("sentiment",Q),children:[a.jsxs(Bt,{className:"w-32 sm:w-36",children:[a.jsx($S,{className:"mr-1 sm:mr-2 h-4 w-4"}),a.jsx(Kt,{placeholder:"Sentiment"})]}),a.jsxs(Vt,{children:[a.jsx(fe,{value:"all",children:"All"}),a.jsx(fe,{value:"positive",children:"Positive"}),a.jsx(fe,{value:"neutral",children:"Neutral"}),a.jsx(fe,{value:"negative",children:"Negative"})]})]}),a.jsxs(Ht,{value:o.dateRange,onValueChange:Q=>qe("dateRange",Q),children:[a.jsxs(Bt,{className:"w-28 sm:w-36",children:[a.jsx(Kn,{className:"mr-1 sm:mr-2 h-4 w-4"}),a.jsx(Kt,{placeholder:"Date"})]}),a.jsxs(Vt,{children:[a.jsx(fe,{value:"all",children:"All Time"}),a.jsx(fe,{value:"7d",children:"Last 7 days"}),a.jsx(fe,{value:"30d",children:"Last 30 days"}),a.jsx(fe,{value:"90d",children:"Last 3 months"}),a.jsx(fe,{value:"1y",children:"Last year"})]})]})]}),a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[a.jsx("span",{children:"Sort by:"}),a.jsxs(K,{variant:"ghost",size:"sm",className:ye("h-7",c.field==="date"&&"bg-muted"),onClick:()=>De("date"),children:["Date",c.field==="date"&&(c.direction==="desc"?a.jsx(bm,{className:"ml-1 h-3 w-3"}):a.jsx(Wv,{className:"ml-1 h-3 w-3"}))]}),a.jsxs(K,{variant:"ghost",size:"sm",className:ye("h-7",c.field==="rating"&&"bg-muted"),onClick:()=>De("rating"),children:["Rating",c.field==="rating"&&(c.direction==="desc"?a.jsx(bm,{className:"ml-1 h-3 w-3"}):a.jsx(Wv,{className:"ml-1 h-3 w-3"}))]}),a.jsxs(K,{variant:"ghost",size:"sm",className:ye("h-7",c.field==="author"&&"bg-muted"),onClick:()=>De("author"),children:["Author",c.field==="author"&&(c.direction==="desc"?a.jsx(bm,{className:"ml-1 h-3 w-3"}):a.jsx(Wv,{className:"ml-1 h-3 w-3"}))]})]})]})})}),a.jsxs(H,{className:"shadow-card border-2 border-border/60",children:[a.jsxs(me,{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 sm:gap-2",children:[a.jsxs(ge,{className:"text-lg sm:text-xl",children:["All Reviews (",le.length,")"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[s&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[a.jsx(ir,{className:"h-4 w-4 animate-spin"}),"Updating..."]}),le.length>0&&a.jsxs(Se,{variant:"outline",className:"text-xs",children:["Showing ",le.length," of ",pe.total," reviews"]})]})]}),a.jsx(Y,{children:r?a.jsx("div",{className:"space-y-6",children:Array.from({length:4}).map((Q,ue)=>a.jsx("div",{className:"border-2 border-border/60 rounded-lg p-4 shadow-sm animate-pulse",children:a.jsxs("div",{className:"flex gap-4",children:[a.jsx("div",{className:"h-10 w-10 bg-muted rounded-full"}),a.jsxs("div",{className:"flex-1 space-y-2",children:[a.jsx("div",{className:"h-4 bg-muted rounded w-1/4"}),a.jsx("div",{className:"h-3 bg-muted rounded w-full"}),a.jsx("div",{className:"h-3 bg-muted rounded w-3/4"})]})]})},ue))}):le.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(ms,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium mb-2",children:Object.values(o).some(Q=>Q!=="all"&&Q!=="")?"No reviews found":"No reviews yet"}),a.jsx("p",{className:"text-muted-foreground",children:Object.values(o).some(Q=>Q!=="all"&&Q!=="")?"Try adjusting your search or filters":"Customer reviews will appear here once you receive them"})]}):a.jsx("div",{className:"space-y-6",children:le.map((Q,ue)=>a.jsx("div",{className:"border-2 border-border/60 rounded-lg p-3 sm:p-4 shadow-sm hover:bg-muted/30 transition-colors",children:a.jsxs("div",{className:"flex gap-3 sm:gap-4",children:[a.jsx(Fh,{className:"h-8 w-8 sm:h-10 sm:w-10 flex-shrink-0",children:a.jsx($h,{className:"bg-primary/10 text-primary text-xs sm:text-sm",children:J(Q.author)})}),a.jsxs("div",{className:"flex-1 space-y-3 min-w-0",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-2",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 mb-1",children:[a.jsx("h4",{className:"font-medium text-sm sm:text-base truncate",children:Q.author}),a.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[a.jsx("div",{className:"flex items-center gap-1",children:L(Q.rating)}),a.jsx(Se,{variant:"outline",className:"text-xs truncate max-w-[120px]",children:Q.profileName}),Q.sentiment&&a.jsx(Se,{variant:"outline",className:ye("text-xs hidden sm:flex",jt(Q.sentiment)),children:a.jsxs("div",{className:"flex items-center gap-1",children:[mt(Q.sentiment),Q.sentiment]})})]})]}),a.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[a.jsx(Kn,{className:"h-3 w-3"}),W(Q.createdAt)]})]}),a.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[Q.replied&&a.jsx(xb,{children:a.jsxs(nA,{children:[a.jsx(sA,{asChild:!0,children:a.jsx(K,{variant:"ghost",size:"sm",onClick:()=>{h(Q),y(Q.replyContent||""),m(!0)},className:"h-8 w-8 p-0",children:a.jsx(r9,{className:"h-3 w-3"})})}),a.jsx(bb,{children:"Edit Reply"})]})}),!Q.replied&&a.jsxs(K,{variant:"outline",size:"sm",onClick:()=>Z(Q.id),className:"gap-1 px-2 sm:px-3 text-xs sm:text-sm",children:[a.jsx(ub,{className:"h-3 w-3"}),a.jsx("span",{className:"hidden sm:inline",children:"Reply"})]})]})]}),a.jsx("p",{className:"text-sm leading-relaxed break-words",children:Q.content}),Q.replied&&Q.replyContent&&a.jsxs("div",{className:"bg-muted/50 rounded-lg p-3 ml-2 sm:ml-4 border-l-2 border-primary/20",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-2 mb-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ri,{className:"h-3 w-3 text-primary"}),a.jsx("span",{className:"text-xs font-medium text-primary",children:"Your Reply"})]}),Q.repliedAt&&a.jsx("span",{className:"text-xs text-muted-foreground",children:W(Q.repliedAt)})]}),a.jsx("p",{className:"text-sm break-words",children:Q.replyContent})]})]})]})},Q.id))})})]}),a.jsx(bs,{open:f,onOpenChange:m,children:a.jsxs(Qn,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[a.jsxs(Xn,{children:[a.jsx(Jn,{className:"text-lg sm:text-xl",children:"Reply to Review"}),a.jsx(Zn,{children:d&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[a.jsx("span",{className:"font-medium text-sm sm:text-base",children:d.author}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"flex items-center gap-1",children:L(d.rating)}),a.jsx(Se,{variant:"outline",className:"text-xs",children:d.profileName})]})]}),a.jsxs("p",{className:"text-sm text-muted-foreground italic break-words",children:['"',d.content,'"']})]})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Reply Template (Optional)"}),a.jsxs(Ht,{value:x,onValueChange:_e,children:[a.jsx(Bt,{children:a.jsx(Kt,{placeholder:"Choose a template"})}),a.jsxs(Vt,{children:[a.jsx(fe,{value:"custom",children:"Custom Reply"}),rd.map(Q=>a.jsx(fe,{value:Q.id,children:Q.name},Q.id))]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium mb-2 block",children:"AI Suggestions"}),a.jsxs(K,{variant:"outline",onClick:()=>d&&Fe(d),disabled:O,className:"w-full justify-start text-xs sm:text-sm",children:[O?a.jsx(ir,{className:"mr-2 h-4 w-4 animate-spin"}):a.jsx(ub,{className:"mr-2 h-4 w-4"}),a.jsx("span",{className:"hidden sm:inline",children:"Generate Smart Replies"}),a.jsx("span",{className:"sm:hidden",children:"Generate Replies"})]})]})]}),E.length>0&&a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium mb-2 block",children:"AI-Generated Suggestions"}),a.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:E.map((Q,ue)=>a.jsx("div",{className:"p-3 border rounded-lg hover:bg-muted/50 transition-colors group",children:a.jsxs("div",{className:"flex gap-2",children:[a.jsx("p",{className:"text-sm flex-1 leading-relaxed",children:Q}),a.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[a.jsx(K,{variant:"ghost",size:"sm",onClick:()=>V(Q,ue),className:"h-8 w-8 p-0",title:"Copy to clipboard",children:A===ue?a.jsx(Zi,{className:"h-3 w-3 text-green-600"}):a.jsx(Ng,{className:"h-3 w-3"})}),a.jsx(K,{variant:"ghost",size:"sm",onClick:()=>y(Q),className:"h-8 w-8 p-0",title:"Use this suggestion",children:a.jsx(qm,{className:"h-3 w-3"})})]})]})},`suggestion-${ue}-${d==null?void 0:d.id}`))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Your Reply"}),a.jsx(pu,{placeholder:"Write your reply to this review or select an AI suggestion above...",value:v,onChange:Q=>se(Q.target.value),rows:4,className:"resize-none"}),a.jsxs("div",{className:"flex justify-between items-center mt-1",children:[a.jsxs("p",{className:"text-xs text-muted-foreground",children:[v.length,"/4000 characters"]}),v&&a.jsx(K,{variant:"ghost",size:"sm",onClick:()=>y(""),className:"text-xs h-6",children:"Clear"})]})]})]}),a.jsxs(kl,{children:[a.jsxs(K,{variant:"outline",onClick:()=>{m(!1),h(null),y(""),b(""),I([]),S(null)},children:[a.jsx(Hs,{className:"w-4 h-4 mr-2"}),"Cancel"]}),a.jsxs(K,{onClick:re,disabled:!v.trim()||w,className:"gap-2",children:[w?a.jsx(ir,{className:"w-4 h-4 animate-spin"}):a.jsx(qm,{className:"w-4 h-4"}),d!=null&&d.replied?"Update Reply":"Send Reply"]})]})]})})]})};var Wh={},Wie=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},M3={},ts={};let Ej;const qie=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];ts.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};ts.getSymbolTotalCodewords=function(e){return qie[e]};ts.getBCHDigit=function(t){let e=0;for(;t!==0;)e++,t>>>=1;return e};ts.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');Ej=e};ts.isKanjiModeEnabled=function(){return typeof Ej<"u"};ts.toSJIS=function(e){return Ej(e)};var Py={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+r)}}t.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},t.from=function(n,s){if(t.isValid(n))return n;try{return e(n)}catch{return s}}})(Py);function L3(){this.buffer=[],this.length=0}L3.prototype={get:function(t){const e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)===1},put:function(t,e){for(let r=0;r<e;r++)this.putBit((t>>>e-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var Hie=L3;function qh(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}qh.prototype.set=function(t,e,r,n){const s=t*this.size+e;this.data[s]=r,n&&(this.reservedBit[s]=!0)};qh.prototype.get=function(t,e){return this.data[t*this.size+e]};qh.prototype.xor=function(t,e,r){this.data[t*this.size+e]^=r};qh.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]};var Kie=qh,F3={};(function(t){const e=ts.getSymbolSize;t.getRowColCoords=function(n){if(n===1)return[];const s=Math.floor(n/7)+2,i=e(n),o=i===145?26:Math.ceil((i-13)/(2*s-2))*2,l=[i-7];for(let c=1;c<s-1;c++)l[c]=l[c-1]-o;return l.push(6),l.reverse()},t.getPositions=function(n){const s=[],i=t.getRowColCoords(n),o=i.length;for(let l=0;l<o;l++)for(let c=0;c<o;c++)l===0&&c===0||l===0&&c===o-1||l===o-1&&c===0||s.push([i[l],i[c]]);return s}})(F3);var $3={};const Yie=ts.getSymbolSize,AP=7;$3.getPositions=function(e){const r=Yie(e);return[[0,0],[r-AP,0],[0,r-AP]]};var U3={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(s){return s!=null&&s!==""&&!isNaN(s)&&s>=0&&s<=7},t.from=function(s){return t.isValid(s)?parseInt(s,10):void 0},t.getPenaltyN1=function(s){const i=s.size;let o=0,l=0,c=0,u=null,d=null;for(let h=0;h<i;h++){l=c=0,u=d=null;for(let f=0;f<i;f++){let m=s.get(h,f);m===u?l++:(l>=5&&(o+=e.N1+(l-5)),u=m,l=1),m=s.get(f,h),m===d?c++:(c>=5&&(o+=e.N1+(c-5)),d=m,c=1)}l>=5&&(o+=e.N1+(l-5)),c>=5&&(o+=e.N1+(c-5))}return o},t.getPenaltyN2=function(s){const i=s.size;let o=0;for(let l=0;l<i-1;l++)for(let c=0;c<i-1;c++){const u=s.get(l,c)+s.get(l,c+1)+s.get(l+1,c)+s.get(l+1,c+1);(u===4||u===0)&&o++}return o*e.N2},t.getPenaltyN3=function(s){const i=s.size;let o=0,l=0,c=0;for(let u=0;u<i;u++){l=c=0;for(let d=0;d<i;d++)l=l<<1&2047|s.get(u,d),d>=10&&(l===1488||l===93)&&o++,c=c<<1&2047|s.get(d,u),d>=10&&(c===1488||c===93)&&o++}return o*e.N3},t.getPenaltyN4=function(s){let i=0;const o=s.data.length;for(let c=0;c<o;c++)i+=s.data[c];return Math.abs(Math.ceil(i*100/o/5)-10)*e.N4};function r(n,s,i){switch(n){case t.Patterns.PATTERN000:return(s+i)%2===0;case t.Patterns.PATTERN001:return s%2===0;case t.Patterns.PATTERN010:return i%3===0;case t.Patterns.PATTERN011:return(s+i)%3===0;case t.Patterns.PATTERN100:return(Math.floor(s/2)+Math.floor(i/3))%2===0;case t.Patterns.PATTERN101:return s*i%2+s*i%3===0;case t.Patterns.PATTERN110:return(s*i%2+s*i%3)%2===0;case t.Patterns.PATTERN111:return(s*i%3+(s+i)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}t.applyMask=function(s,i){const o=i.size;for(let l=0;l<o;l++)for(let c=0;c<o;c++)i.isReserved(c,l)||i.xor(c,l,r(s,c,l))},t.getBestMask=function(s,i){const o=Object.keys(t.Patterns).length;let l=0,c=1/0;for(let u=0;u<o;u++){i(u),t.applyMask(u,s);const d=t.getPenaltyN1(s)+t.getPenaltyN2(s)+t.getPenaltyN3(s)+t.getPenaltyN4(s);t.applyMask(u,s),d<c&&(c=d,l=u)}return l}})(U3);var Ty={};const Xi=Py,Zf=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],em=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];Ty.getBlocksCount=function(e,r){switch(r){case Xi.L:return Zf[(e-1)*4+0];case Xi.M:return Zf[(e-1)*4+1];case Xi.Q:return Zf[(e-1)*4+2];case Xi.H:return Zf[(e-1)*4+3];default:return}};Ty.getTotalCodewordsCount=function(e,r){switch(r){case Xi.L:return em[(e-1)*4+0];case Xi.M:return em[(e-1)*4+1];case Xi.Q:return em[(e-1)*4+2];case Xi.H:return em[(e-1)*4+3];default:return}};var B3={},Cy={};const Cd=new Uint8Array(512),Tp=new Uint8Array(256);(function(){let e=1;for(let r=0;r<255;r++)Cd[r]=e,Tp[e]=r,e<<=1,e&256&&(e^=285);for(let r=255;r<512;r++)Cd[r]=Cd[r-255]})();Cy.log=function(e){if(e<1)throw new Error("log("+e+")");return Tp[e]};Cy.exp=function(e){return Cd[e]};Cy.mul=function(e,r){return e===0||r===0?0:Cd[Tp[e]+Tp[r]]};(function(t){const e=Cy;t.mul=function(n,s){const i=new Uint8Array(n.length+s.length-1);for(let o=0;o<n.length;o++)for(let l=0;l<s.length;l++)i[o+l]^=e.mul(n[o],s[l]);return i},t.mod=function(n,s){let i=new Uint8Array(n);for(;i.length-s.length>=0;){const o=i[0];for(let c=0;c<s.length;c++)i[c]^=e.mul(s[c],o);let l=0;for(;l<i.length&&i[l]===0;)l++;i=i.slice(l)}return i},t.generateECPolynomial=function(n){let s=new Uint8Array([1]);for(let i=0;i<n;i++)s=t.mul(s,new Uint8Array([1,e.exp(i)]));return s}})(B3);const V3=B3;function Pj(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}Pj.prototype.initialize=function(e){this.degree=e,this.genPoly=V3.generateECPolynomial(this.degree)};Pj.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const r=new Uint8Array(e.length+this.degree);r.set(e);const n=V3.mod(r,this.genPoly),s=this.degree-n.length;if(s>0){const i=new Uint8Array(this.degree);return i.set(n,s),i}return n};var Qie=Pj,z3={},Do={},Tj={};Tj.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var Ca={};const G3="[0-9]+",Xie="[A-Z $%*+\\-./:]+";let Xd="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";Xd=Xd.replace(/u/g,"\\u");const Jie="(?:(?![A-Z0-9 $%*+\\-./:]|"+Xd+`)(?:.|[\r
]))+`;Ca.KANJI=new RegExp(Xd,"g");Ca.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");Ca.BYTE=new RegExp(Jie,"g");Ca.NUMERIC=new RegExp(G3,"g");Ca.ALPHANUMERIC=new RegExp(Xie,"g");const Zie=new RegExp("^"+Xd+"$"),eoe=new RegExp("^"+G3+"$"),toe=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Ca.testKanji=function(e){return Zie.test(e)};Ca.testNumeric=function(e){return eoe.test(e)};Ca.testAlphanumeric=function(e){return toe.test(e)};(function(t){const e=Tj,r=Ca;t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(i,o){if(!i.ccBits)throw new Error("Invalid mode: "+i);if(!e.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?i.ccBits[0]:o<27?i.ccBits[1]:i.ccBits[2]},t.getBestModeForData=function(i){return r.testNumeric(i)?t.NUMERIC:r.testAlphanumeric(i)?t.ALPHANUMERIC:r.testKanji(i)?t.KANJI:t.BYTE},t.toString=function(i){if(i&&i.id)return i.id;throw new Error("Invalid mode")},t.isValid=function(i){return i&&i.bit&&i.ccBits};function n(s){if(typeof s!="string")throw new Error("Param is not a string");switch(s.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+s)}}t.from=function(i,o){if(t.isValid(i))return i;try{return n(i)}catch{return o}}})(Do);(function(t){const e=ts,r=Ty,n=Py,s=Do,i=Tj,o=7973,l=e.getBCHDigit(o);function c(f,m,v){for(let y=1;y<=40;y++)if(m<=t.getCapacity(y,v,f))return y}function u(f,m){return s.getCharCountIndicator(f,m)+4}function d(f,m){let v=0;return f.forEach(function(y){const x=u(y.mode,m);v+=x+y.getBitsLength()}),v}function h(f,m){for(let v=1;v<=40;v++)if(d(f,v)<=t.getCapacity(v,m,s.MIXED))return v}t.from=function(m,v){return i.isValid(m)?parseInt(m,10):v},t.getCapacity=function(m,v,y){if(!i.isValid(m))throw new Error("Invalid QR Code version");typeof y>"u"&&(y=s.BYTE);const x=e.getSymbolTotalCodewords(m),b=r.getTotalCodewordsCount(m,v),w=(x-b)*8;if(y===s.MIXED)return w;const j=w-u(y,m);switch(y){case s.NUMERIC:return Math.floor(j/10*3);case s.ALPHANUMERIC:return Math.floor(j/11*2);case s.KANJI:return Math.floor(j/13);case s.BYTE:default:return Math.floor(j/8)}},t.getBestVersionForData=function(m,v){let y;const x=n.from(v,n.M);if(Array.isArray(m)){if(m.length>1)return h(m,x);if(m.length===0)return 1;y=m[0]}else y=m;return c(y.mode,y.getLength(),x)},t.getEncodedBits=function(m){if(!i.isValid(m)||m<7)throw new Error("Invalid QR Code version");let v=m<<12;for(;e.getBCHDigit(v)-l>=0;)v^=o<<e.getBCHDigit(v)-l;return m<<12|v}})(z3);var W3={};const u0=ts,q3=1335,roe=21522,EP=u0.getBCHDigit(q3);W3.getEncodedBits=function(e,r){const n=e.bit<<3|r;let s=n<<10;for(;u0.getBCHDigit(s)-EP>=0;)s^=q3<<u0.getBCHDigit(s)-EP;return(n<<10|s)^roe};var H3={};const noe=Do;function Jc(t){this.mode=noe.NUMERIC,this.data=t.toString()}Jc.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};Jc.prototype.getLength=function(){return this.data.length};Jc.prototype.getBitsLength=function(){return Jc.getBitsLength(this.data.length)};Jc.prototype.write=function(e){let r,n,s;for(r=0;r+3<=this.data.length;r+=3)n=this.data.substr(r,3),s=parseInt(n,10),e.put(s,10);const i=this.data.length-r;i>0&&(n=this.data.substr(r),s=parseInt(n,10),e.put(s,i*3+1))};var soe=Jc;const aoe=Do,Ex=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Zc(t){this.mode=aoe.ALPHANUMERIC,this.data=t}Zc.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};Zc.prototype.getLength=function(){return this.data.length};Zc.prototype.getBitsLength=function(){return Zc.getBitsLength(this.data.length)};Zc.prototype.write=function(e){let r;for(r=0;r+2<=this.data.length;r+=2){let n=Ex.indexOf(this.data[r])*45;n+=Ex.indexOf(this.data[r+1]),e.put(n,11)}this.data.length%2&&e.put(Ex.indexOf(this.data[r]),6)};var ioe=Zc;const ooe=Do;function eu(t){this.mode=ooe.BYTE,typeof t=="string"?this.data=new TextEncoder().encode(t):this.data=new Uint8Array(t)}eu.getBitsLength=function(e){return e*8};eu.prototype.getLength=function(){return this.data.length};eu.prototype.getBitsLength=function(){return eu.getBitsLength(this.data.length)};eu.prototype.write=function(t){for(let e=0,r=this.data.length;e<r;e++)t.put(this.data[e],8)};var loe=eu;const coe=Do,uoe=ts;function tu(t){this.mode=coe.KANJI,this.data=t}tu.getBitsLength=function(e){return e*13};tu.prototype.getLength=function(){return this.data.length};tu.prototype.getBitsLength=function(){return tu.getBitsLength(this.data.length)};tu.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let r=uoe.toSJIS(this.data[e]);if(r>=33088&&r<=40956)r-=33088;else if(r>=57408&&r<=60351)r-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);r=(r>>>8&255)*192+(r&255),t.put(r,13)}};var doe=tu,K3={exports:{}};(function(t){var e={single_source_shortest_paths:function(r,n,s){var i={},o={};o[n]=0;var l=e.PriorityQueue.make();l.push(n,0);for(var c,u,d,h,f,m,v,y,x;!l.empty();){c=l.pop(),u=c.value,h=c.cost,f=r[u]||{};for(d in f)f.hasOwnProperty(d)&&(m=f[d],v=h+m,y=o[d],x=typeof o[d]>"u",(x||y>v)&&(o[d]=v,l.push(d,v),i[d]=u))}if(typeof s<"u"&&typeof o[s]>"u"){var b=["Could not find a path from ",n," to ",s,"."].join("");throw new Error(b)}return i},extract_shortest_path_from_predecessor_list:function(r,n){for(var s=[],i=n;i;)s.push(i),r[i],i=r[i];return s.reverse(),s},find_path:function(r,n,s){var i=e.single_source_shortest_paths(r,n,s);return e.extract_shortest_path_from_predecessor_list(i,s)},PriorityQueue:{make:function(r){var n=e.PriorityQueue,s={},i;r=r||{};for(i in n)n.hasOwnProperty(i)&&(s[i]=n[i]);return s.queue=[],s.sorter=r.sorter||n.default_sorter,s},default_sorter:function(r,n){return r.cost-n.cost},push:function(r,n){var s={value:r,cost:n};this.queue.push(s),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e})(K3);var hoe=K3.exports;(function(t){const e=Do,r=soe,n=ioe,s=loe,i=doe,o=Ca,l=ts,c=hoe;function u(b){return unescape(encodeURIComponent(b)).length}function d(b,w,j){const E=[];let I;for(;(I=b.exec(j))!==null;)E.push({data:I[0],index:I.index,mode:w,length:I[0].length});return E}function h(b){const w=d(o.NUMERIC,e.NUMERIC,b),j=d(o.ALPHANUMERIC,e.ALPHANUMERIC,b);let E,I;return l.isKanjiModeEnabled()?(E=d(o.BYTE,e.BYTE,b),I=d(o.KANJI,e.KANJI,b)):(E=d(o.BYTE_KANJI,e.BYTE,b),I=[]),w.concat(j,E,I).sort(function(T,A){return T.index-A.index}).map(function(T){return{data:T.data,mode:T.mode,length:T.length}})}function f(b,w){switch(w){case e.NUMERIC:return r.getBitsLength(b);case e.ALPHANUMERIC:return n.getBitsLength(b);case e.KANJI:return i.getBitsLength(b);case e.BYTE:return s.getBitsLength(b)}}function m(b){return b.reduce(function(w,j){const E=w.length-1>=0?w[w.length-1]:null;return E&&E.mode===j.mode?(w[w.length-1].data+=j.data,w):(w.push(j),w)},[])}function v(b){const w=[];for(let j=0;j<b.length;j++){const E=b[j];switch(E.mode){case e.NUMERIC:w.push([E,{data:E.data,mode:e.ALPHANUMERIC,length:E.length},{data:E.data,mode:e.BYTE,length:E.length}]);break;case e.ALPHANUMERIC:w.push([E,{data:E.data,mode:e.BYTE,length:E.length}]);break;case e.KANJI:w.push([E,{data:E.data,mode:e.BYTE,length:u(E.data)}]);break;case e.BYTE:w.push([{data:E.data,mode:e.BYTE,length:u(E.data)}])}}return w}function y(b,w){const j={},E={start:{}};let I=["start"];for(let O=0;O<b.length;O++){const T=b[O],A=[];for(let S=0;S<T.length;S++){const _=T[S],P=""+O+S;A.push(P),j[P]={node:_,lastCount:0},E[P]={};for(let R=0;R<I.length;R++){const C=I[R];j[C]&&j[C].node.mode===_.mode?(E[C][P]=f(j[C].lastCount+_.length,_.mode)-f(j[C].lastCount,_.mode),j[C].lastCount+=_.length):(j[C]&&(j[C].lastCount=_.length),E[C][P]=f(_.length,_.mode)+4+e.getCharCountIndicator(_.mode,w))}}I=A}for(let O=0;O<I.length;O++)E[I[O]].end=0;return{map:E,table:j}}function x(b,w){let j;const E=e.getBestModeForData(b);if(j=e.from(w,E),j!==e.BYTE&&j.bit<E.bit)throw new Error('"'+b+'" cannot be encoded with mode '+e.toString(j)+`.
 Suggested mode is: `+e.toString(E));switch(j===e.KANJI&&!l.isKanjiModeEnabled()&&(j=e.BYTE),j){case e.NUMERIC:return new r(b);case e.ALPHANUMERIC:return new n(b);case e.KANJI:return new i(b);case e.BYTE:return new s(b)}}t.fromArray=function(w){return w.reduce(function(j,E){return typeof E=="string"?j.push(x(E,null)):E.data&&j.push(x(E.data,E.mode)),j},[])},t.fromString=function(w,j){const E=h(w,l.isKanjiModeEnabled()),I=v(E),O=y(I,j),T=c.find_path(O.map,"start","end"),A=[];for(let S=1;S<T.length-1;S++)A.push(O.table[T[S]].node);return t.fromArray(m(A))},t.rawSplit=function(w){return t.fromArray(h(w,l.isKanjiModeEnabled()))}})(H3);const ky=ts,Px=Py,foe=Hie,moe=Kie,poe=F3,goe=$3,d0=U3,h0=Ty,yoe=Qie,Cp=z3,voe=W3,xoe=Do,Tx=H3;function boe(t,e){const r=t.size,n=goe.getPositions(e);for(let s=0;s<n.length;s++){const i=n[s][0],o=n[s][1];for(let l=-1;l<=7;l++)if(!(i+l<=-1||r<=i+l))for(let c=-1;c<=7;c++)o+c<=-1||r<=o+c||(l>=0&&l<=6&&(c===0||c===6)||c>=0&&c<=6&&(l===0||l===6)||l>=2&&l<=4&&c>=2&&c<=4?t.set(i+l,o+c,!0,!0):t.set(i+l,o+c,!1,!0))}}function woe(t){const e=t.size;for(let r=8;r<e-8;r++){const n=r%2===0;t.set(r,6,n,!0),t.set(6,r,n,!0)}}function joe(t,e){const r=poe.getPositions(e);for(let n=0;n<r.length;n++){const s=r[n][0],i=r[n][1];for(let o=-2;o<=2;o++)for(let l=-2;l<=2;l++)o===-2||o===2||l===-2||l===2||o===0&&l===0?t.set(s+o,i+l,!0,!0):t.set(s+o,i+l,!1,!0)}}function Noe(t,e){const r=t.size,n=Cp.getEncodedBits(e);let s,i,o;for(let l=0;l<18;l++)s=Math.floor(l/3),i=l%3+r-8-3,o=(n>>l&1)===1,t.set(s,i,o,!0),t.set(i,s,o,!0)}function Cx(t,e,r){const n=t.size,s=voe.getEncodedBits(e,r);let i,o;for(i=0;i<15;i++)o=(s>>i&1)===1,i<6?t.set(i,8,o,!0):i<8?t.set(i+1,8,o,!0):t.set(n-15+i,8,o,!0),i<8?t.set(8,n-i-1,o,!0):i<9?t.set(8,15-i-1+1,o,!0):t.set(8,15-i-1,o,!0);t.set(n-8,8,1,!0)}function _oe(t,e){const r=t.size;let n=-1,s=r-1,i=7,o=0;for(let l=r-1;l>0;l-=2)for(l===6&&l--;;){for(let c=0;c<2;c++)if(!t.isReserved(s,l-c)){let u=!1;o<e.length&&(u=(e[o]>>>i&1)===1),t.set(s,l-c,u),i--,i===-1&&(o++,i=7)}if(s+=n,s<0||r<=s){s-=n,n=-n;break}}}function Soe(t,e,r){const n=new foe;r.forEach(function(c){n.put(c.mode.bit,4),n.put(c.getLength(),xoe.getCharCountIndicator(c.mode,t)),c.write(n)});const s=ky.getSymbolTotalCodewords(t),i=h0.getTotalCodewordsCount(t,e),o=(s-i)*8;for(n.getLengthInBits()+4<=o&&n.put(0,4);n.getLengthInBits()%8!==0;)n.putBit(0);const l=(o-n.getLengthInBits())/8;for(let c=0;c<l;c++)n.put(c%2?17:236,8);return Aoe(n,t,e)}function Aoe(t,e,r){const n=ky.getSymbolTotalCodewords(e),s=h0.getTotalCodewordsCount(e,r),i=n-s,o=h0.getBlocksCount(e,r),l=n%o,c=o-l,u=Math.floor(n/o),d=Math.floor(i/o),h=d+1,f=u-d,m=new yoe(f);let v=0;const y=new Array(o),x=new Array(o);let b=0;const w=new Uint8Array(t.buffer);for(let T=0;T<o;T++){const A=T<c?d:h;y[T]=w.slice(v,v+A),x[T]=m.encode(y[T]),v+=A,b=Math.max(b,A)}const j=new Uint8Array(n);let E=0,I,O;for(I=0;I<b;I++)for(O=0;O<o;O++)I<y[O].length&&(j[E++]=y[O][I]);for(I=0;I<f;I++)for(O=0;O<o;O++)j[E++]=x[O][I];return j}function Eoe(t,e,r,n){let s;if(Array.isArray(t))s=Tx.fromArray(t);else if(typeof t=="string"){let u=e;if(!u){const d=Tx.rawSplit(t);u=Cp.getBestVersionForData(d,r)}s=Tx.fromString(t,u||40)}else throw new Error("Invalid data");const i=Cp.getBestVersionForData(s,r);if(!i)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=i;else if(e<i)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+i+`.
`);const o=Soe(e,r,s),l=ky.getSymbolSize(e),c=new moe(l);return boe(c,e),woe(c),joe(c,e),Cx(c,r,0),e>=7&&Noe(c,e),_oe(c,o),isNaN(n)&&(n=d0.getBestMask(c,Cx.bind(null,c,r))),d0.applyMask(n,c),Cx(c,r,n),{modules:c,version:e,errorCorrectionLevel:r,maskPattern:n,segments:s}}M3.create=function(e,r){if(typeof e>"u"||e==="")throw new Error("No input text");let n=Px.M,s,i;return typeof r<"u"&&(n=Px.from(r.errorCorrectionLevel,Px.M),s=Cp.from(r.version),i=d0.from(r.maskPattern),r.toSJISFunc&&ky.setToSJISFunction(r.toSJISFunc)),Eoe(e,s,n,i)};var Y3={},Cj={};(function(t){function e(r){if(typeof r=="number"&&(r=r.toString()),typeof r!="string")throw new Error("Color should be defined as hex string");let n=r.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+r);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(i){return[i,i]}))),n.length===6&&n.push("F","F");const s=parseInt(n.join(""),16);return{r:s>>24&255,g:s>>16&255,b:s>>8&255,a:s&255,hex:"#"+n.slice(0,6).join("")}}t.getOptions=function(n){n||(n={}),n.color||(n.color={});const s=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,i=n.width&&n.width>=21?n.width:void 0,o=n.scale||4;return{width:i,scale:i?4:o,margin:s,color:{dark:e(n.color.dark||"#000000ff"),light:e(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},t.getScale=function(n,s){return s.width&&s.width>=n+s.margin*2?s.width/(n+s.margin*2):s.scale},t.getImageWidth=function(n,s){const i=t.getScale(n,s);return Math.floor((n+s.margin*2)*i)},t.qrToImageData=function(n,s,i){const o=s.modules.size,l=s.modules.data,c=t.getScale(o,i),u=Math.floor((o+i.margin*2)*c),d=i.margin*c,h=[i.color.light,i.color.dark];for(let f=0;f<u;f++)for(let m=0;m<u;m++){let v=(f*u+m)*4,y=i.color.light;if(f>=d&&m>=d&&f<u-d&&m<u-d){const x=Math.floor((f-d)/c),b=Math.floor((m-d)/c);y=h[l[x*o+b]?1:0]}n[v++]=y.r,n[v++]=y.g,n[v++]=y.b,n[v]=y.a}}})(Cj);(function(t){const e=Cj;function r(s,i,o){s.clearRect(0,0,i.width,i.height),i.style||(i.style={}),i.height=o,i.width=o,i.style.height=o+"px",i.style.width=o+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(i,o,l){let c=l,u=o;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),o||(u=n()),c=e.getOptions(c);const d=e.getImageWidth(i.modules.size,c),h=u.getContext("2d"),f=h.createImageData(d,d);return e.qrToImageData(f.data,i,c),r(h,u,d),h.putImageData(f,0,0),u},t.renderToDataURL=function(i,o,l){let c=l;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),c||(c={});const u=t.render(i,o,c),d=c.type||"image/png",h=c.rendererOpts||{};return u.toDataURL(d,h.quality)}})(Y3);var Q3={};const Poe=Cj;function PP(t,e){const r=t.a/255,n=e+'="'+t.hex+'"';return r<1?n+" "+e+'-opacity="'+r.toFixed(2).slice(1)+'"':n}function kx(t,e,r){let n=t+e;return typeof r<"u"&&(n+=" "+r),n}function Toe(t,e,r){let n="",s=0,i=!1,o=0;for(let l=0;l<t.length;l++){const c=Math.floor(l%e),u=Math.floor(l/e);!c&&!i&&(i=!0),t[l]?(o++,l>0&&c>0&&t[l-1]||(n+=i?kx("M",c+r,.5+u+r):kx("m",s,0),s=0,i=!1),c+1<e&&t[l+1]||(n+=kx("h",o),o=0)):s++}return n}Q3.render=function(e,r,n){const s=Poe.getOptions(r),i=e.modules.size,o=e.modules.data,l=i+s.margin*2,c=s.color.light.a?"<path "+PP(s.color.light,"fill")+' d="M0 0h'+l+"v"+l+'H0z"/>':"",u="<path "+PP(s.color.dark,"stroke")+' d="'+Toe(o,i,s.margin)+'"/>',d='viewBox="0 0 '+l+" "+l+'"',f='<svg xmlns="http://www.w3.org/2000/svg" '+(s.width?'width="'+s.width+'" height="'+s.width+'" ':"")+d+' shape-rendering="crispEdges">'+c+u+`</svg>
`;return typeof n=="function"&&n(null,f),f};const Coe=Wie,f0=M3,X3=Y3,koe=Q3;function kj(t,e,r,n,s){const i=[].slice.call(arguments,1),o=i.length,l=typeof i[o-1]=="function";if(!l&&!Coe())throw new Error("Callback required as last argument");if(l){if(o<2)throw new Error("Too few arguments provided");o===2?(s=r,r=e,e=n=void 0):o===3&&(e.getContext&&typeof s>"u"?(s=n,n=void 0):(s=n,n=r,r=e,e=void 0))}else{if(o<1)throw new Error("Too few arguments provided");return o===1?(r=e,e=n=void 0):o===2&&!e.getContext&&(n=r,r=e,e=void 0),new Promise(function(c,u){try{const d=f0.create(r,n);c(t(d,e,n))}catch(d){u(d)}})}try{const c=f0.create(r,n);s(null,t(c,e,n))}catch(c){s(c)}}Wh.create=f0.create;Wh.toCanvas=kj.bind(null,X3.render);Wh.toDataURL=kj.bind(null,X3.renderToDataURL);Wh.toString=kj.bind(null,function(t,e,r){return koe.render(t,r)});const Ioe=()=>{const t=cr(),{accounts:e,isConnected:r,isLoading:n}=pi(),{toast:s}=Rn(),{getAccessibleAccounts:i,getAccountLockMessage:o,canAccessMultipleProfiles:l}=Au(),[c,u]=p.useState({isOpen:!1,locationName:"",locationId:"",address:""}),[d,h]=p.useState({isOpen:!1,location:null,googleReviewLink:""}),[f,m]=p.useState(null);p.useState(!1),p.useState(null);const[v,y]=p.useState(new Map),x="http://localhost:5000",b=p.useMemo(()=>i(e),[e,i]),w=p.useMemo(()=>o(e.length),[e.length,o]),j=p.useMemo(()=>!l&&e.length>1,[l,e.length]);p.useEffect(()=>{E()},[b]);const E=async()=>{try{const _=await fetch(`${x}/api/qr-codes`);if(_.ok){const{qrCodes:P}=await _.json(),R=new Map;P.forEach(C=>{R.set(C.locationId,C)}),y(R),console.log(`[AskForReviews] Loaded ${P.length} existing QR codes`)}}catch(_){console.error("Error loading existing QR codes:",_)}},I=_=>{console.log("Opening review link modal for location:",_),h({isOpen:!0,location:_,googleReviewLink:""})},O=_=>{const P=v.get(_.locationId);P&&u({isOpen:!0,locationName:P.locationName,locationId:_.locationId,address:P.address,placeId:P.placeId,qrCodeUrl:P.qrCodeUrl,reviewLink:P.publicReviewUrl,aiReviews:[]})},T=async()=>{var R,C,B,G,U,F;const{location:_,googleReviewLink:P}=d;if(!P){s({title:"Review Link Required",description:"Please enter your Google review link to continue.",variant:"destructive"});return}m(_.locationId),h({...d,isOpen:!1});try{console.log("🔍 Generating QR code for custom review suggestions page");const $=`https://app.googleranker.com/review/${_.locationId}?business=${encodeURIComponent(_.displayName)}&location=${encodeURIComponent(((R=_.address)==null?void 0:R.locality)||((C=_.address)==null?void 0:C.administrativeArea)||"Location")}&googleReviewLink=${encodeURIComponent(P)}`;console.log("🔍 Public review URL:",$);const ne=await Wh.toDataURL($,{errorCorrectionLevel:"M",type:"image/png",quality:.92,margin:2,color:{dark:"#000000",light:"#FFFFFF"},width:512});try{const te={locationId:_.locationId,locationName:_.displayName,address:((B=_.address)==null?void 0:B.locality)||((G=_.address)==null?void 0:G.administrativeArea)||"Location",googleReviewLink:P,publicReviewUrl:$,qrCodeUrl:ne,createdAt:new Date().toISOString()};await fetch(`${x}/api/qr-codes`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(te)}),await E()}catch(te){console.warn("Failed to save QR code data:",te)}console.log("✅ QR code generated successfully"),u({isOpen:!0,locationName:_.displayName,locationId:_.locationId,address:((U=_.address)==null?void 0:U.locality)||((F=_.address)==null?void 0:F.administrativeArea)||"Location",placeId:_.placeId||"",qrCodeUrl:ne,reviewLink:$,aiReviews:[]}),s({title:"QR Code Generated",description:"Your QR code will show customers AI-generated review suggestions with SEO keywords, then redirect them to your Google review page."})}catch(M){console.error("Error generating QR code:",M),s({title:"Error",description:"Failed to generate QR code. Please try again.",variant:"destructive"})}finally{m(null)}},A=()=>{if(!c.qrCodeUrl)return;const _=document.createElement("a");_.download=`${c.locationName.replace(/\s+/g,"_")}_QR_Code.png`,_.href=c.qrCodeUrl,_.click(),s({title:"QR Code Downloaded",description:"The QR code has been saved to your device."})},S=async()=>{if(!c.reviewLink){s({title:"Copy Error",description:"No preview link available. Please generate a QR code first.",variant:"destructive"});return}try{await navigator.clipboard.writeText(c.reviewLink),s({title:"Link Copied!",description:"Preview link has been copied to your clipboard."})}catch{s({title:"Copy Error",description:"Failed to copy link. Please try again.",variant:"destructive"})}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Ask for Reviews"}),a.jsx("p",{className:"text-muted-foreground mt-1",children:"Generate QR codes and AI-powered review suggestions for your business locations"})]}),j&&a.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(eo,{className:"h-5 w-5 text-orange-600 mt-0.5"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"text-sm font-medium text-orange-800 mb-1",children:"Multiple Profiles Available"}),a.jsx("p",{className:"text-sm text-orange-700 mb-3",children:w}),a.jsx(K,{onClick:()=>t("/dashboard/billing"),size:"sm",className:"bg-orange-600 hover:bg-orange-700 text-white",children:"Upgrade to Access All Profiles"})]})]})}),r&&!n&&b.length>0&&a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-xl font-semibold",children:"Your Business Locations"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:b.flatMap(_=>_.locations.map(P=>{var R,C,B,G;return a.jsxs(H,{className:"shadow-card border-[3px] hover:shadow-glow glow-hover transition-all duration-300",style:{borderColor:"#8B5CF6",borderStyle:"solid"},children:[a.jsx(me,{className:"pb-3",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx(ge,{className:"text-lg",children:P.displayName}),a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[a.jsx(Wn,{className:"h-4 w-4 text-muted-foreground"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:((R=P.storefrontAddress)==null?void 0:R.locality)||((C=P.storefrontAddress)==null?void 0:C.administrativeArea)||((G=(B=P.storefrontAddress)==null?void 0:B.addressLines)==null?void 0:G[0])||_.accountName})]})]}),a.jsx(Ji,{className:"h-5 w-5 text-primary"})]})}),a.jsx(Y,{children:v.has(P.locationId)?a.jsxs("div",{className:"space-y-2",children:[a.jsxs(K,{onClick:()=>O(P),className:"w-full bg-green-600 hover:bg-green-700 text-white",children:[a.jsx(If,{className:"mr-2 h-4 w-4"}),"View QR Code"]}),a.jsx(K,{onClick:()=>I(P),variant:"outline",className:"w-full",disabled:f===P.locationId,children:f===P.locationId?a.jsxs(a.Fragment,{children:[a.jsx(ir,{className:"mr-2 h-4 w-4 animate-spin"}),"Updating..."]}):a.jsxs(a.Fragment,{children:[a.jsx(eo,{className:"mr-2 h-4 w-4"}),"Update Link"]})})]}):a.jsx(K,{onClick:()=>I(P),disabled:f===P.locationId,className:"w-full bg-gradient-to-r from-primary to-blue-600 hover:from-primary/90 hover:to-blue-600/90",children:f===P.locationId?a.jsxs(a.Fragment,{children:[a.jsx(ir,{className:"mr-2 h-4 w-4 animate-spin"}),"Generating..."]}):a.jsxs(a.Fragment,{children:[a.jsx(If,{className:"mr-2 h-4 w-4"}),"Generate QR & Reviews"]})})})]},P.locationId)}))})]}),r&&!n&&b.length===0&&a.jsx(H,{className:"shadow-card",children:a.jsxs(Y,{className:"py-12 text-center",children:[a.jsx(mI,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Business Profiles Connected"}),a.jsx("p",{className:"text-muted-foreground mb-4",children:"Connect your Google Business Profile to generate QR codes and AI reviews."}),a.jsx(K,{variant:"outline",children:"Connect Business Profile"})]})}),n&&a.jsx("div",{className:"space-y-4",children:a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Array.from({length:3}).map((_,P)=>a.jsx(H,{className:"shadow-card",children:a.jsx(Y,{className:"p-6",children:a.jsxs("div",{className:"animate-pulse",children:[a.jsx("div",{className:"h-4 bg-muted rounded w-3/4 mb-3"}),a.jsx("div",{className:"h-3 bg-muted rounded w-1/2 mb-4"}),a.jsx("div",{className:"h-10 bg-muted rounded w-full"})]})})},P))})}),a.jsx(bs,{open:d.isOpen,onOpenChange:_=>!_&&h({...d,isOpen:!1}),children:a.jsxs(Qn,{className:"max-w-lg",children:[a.jsxs(Xn,{children:[a.jsxs(Jn,{className:"text-2xl flex items-center gap-2",children:[a.jsx(JV,{className:"h-6 w-6 text-primary"}),"Enter Google Review Link"]}),a.jsx(Zn,{children:"Please provide your Google review link to generate the QR code"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs(ml,{children:[a.jsx(eo,{className:"h-4 w-4"}),a.jsx(pl,{children:a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"font-semibold",children:"How to get your Google review link:"}),a.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-sm",children:[a.jsx("li",{children:"Open Google Business Profile Manager"}),a.jsx("li",{children:"Select your business location"}),a.jsx("li",{children:'Click on "Home" or "Get more reviews"'}),a.jsx("li",{children:"Copy the review link (looks like: g.page/r/...)"})]})]})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ie,{htmlFor:"review-link",children:"Google Review Link"}),a.jsx(Ze,{id:"review-link",type:"url",placeholder:"Enter your Google review link",value:d.googleReviewLink,onChange:_=>h({...d,googleReviewLink:_.target.value}),className:"font-mono text-sm"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Format: https://g.page/r/YOUR_PLACE_ID/review"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(K,{variant:"outline",onClick:()=>h({...d,isOpen:!1}),className:"flex-1",children:"Cancel"}),a.jsxs(K,{onClick:T,disabled:!d.googleReviewLink,className:"flex-1 bg-gradient-to-r from-primary to-blue-600 hover:from-primary/90 hover:to-blue-600/90",children:[a.jsx(If,{className:"mr-2 h-4 w-4"}),"Generate QR Code"]})]})]})]})}),a.jsx(bs,{open:c.isOpen,onOpenChange:_=>!_&&u({...c,isOpen:!1}),children:a.jsxs(Qn,{className:"max-w-lg",children:[a.jsxs(Xn,{children:[a.jsxs(Jn,{className:"text-2xl flex items-center gap-2",children:[a.jsx(If,{className:"h-6 w-6 text-primary"}),c.locationName]}),a.jsx(Zn,{children:"QR code for customer reviews - Scan to see AI-powered review suggestions"})]}),a.jsx(H,{children:a.jsx(Y,{className:"space-y-4 pt-6",children:c.qrCodeUrl&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"bg-white p-3 rounded-lg border-2 border-gray-200 flex justify-center max-w-xs mx-auto",children:a.jsx("img",{src:c.qrCodeUrl,alt:"QR Code",className:"w-48 h-48"})}),a.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[a.jsx("h4",{className:"font-semibold text-sm mb-2",children:"How it works:"}),a.jsxs("ol",{className:"text-sm space-y-1 text-muted-foreground",children:[a.jsx("li",{children:"1. Customer scans QR code"}),a.jsx("li",{children:"2. Sees AI-generated review suggestions with SEO keywords"}),a.jsx("li",{children:'3. Clicks "Write Review on Google" button'}),a.jsx("li",{children:"4. Gets redirected to your Google review page"})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Preview Link"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:c.reviewLink||"",readOnly:!0,className:"flex-1 px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-sm font-mono text-gray-600",placeholder:"No preview link available"}),a.jsx(K,{onClick:S,size:"sm",variant:"outline",disabled:!c.reviewLink,children:a.jsx(Ng,{className:"h-4 w-4"})})]})]}),a.jsxs(K,{onClick:A,className:"w-full",variant:"default",children:[a.jsx(fw,{className:"mr-2 h-4 w-4"}),"Download QR Code"]})]}),a.jsx("div",{className:"text-xs text-muted-foreground text-center",children:"Print this QR code and display it in your business location"})]})})})]})})]})},Roe=()=>{const t=cr(),{isFeatureBlocked:e,status:r}=ln(),{accounts:n,isConnected:s}=Su(),[i,o]=p.useState(""),[l,c]=p.useState(null),[u,d]=p.useState([]),[h,f]=p.useState(null),[m,v]=p.useState(!1),[y,x]=p.useState([]),[b,w]=p.useState(!1),j=p.useRef(null),E=(n||[]).flatMap(_=>(_.locations||[]).map(P=>({id:P.locationId,name:P.displayName,accountName:_.accountName,fullName:P.name})));xe.useEffect(()=>{E.length>0&&!i&&o(E[0].id)},[E,i]),E.find(_=>_.id===i);const I=_=>{var R;const P=(R=_.target.files)==null?void 0:R[0];P&&P.type==="text/csv"?(c(P),O(P)):be({title:"Invalid File",description:"Please upload a valid CSV file.",variant:"destructive"})},O=async _=>{v(!0);try{const R=(await _.text()).split(`
`),C=R[0].split(",").map(te=>te.trim().toLowerCase()),B=C.findIndex(te=>te.includes("name")),G=C.findIndex(te=>te.includes("email")),U=C.findIndex(te=>te.includes("phone"));if(B===-1||G===-1)throw new Error("CSV must contain at least Name and Email columns");const F=[];for(let te=1;te<R.length;te++){const z=R[te].split(",").map(de=>de.trim());if(z.length>=2&&z[B]&&z[G]){const de=Math.random()>.7,Z=de?new Date(Date.now()-Math.random()*90*24*60*60*1e3).toISOString():void 0,re=de?Math.floor(Math.random()*2)+4:void 0;F.push({id:`customer-${te}`,name:z[B],email:z[G],phone:U!==-1?z[U]:void 0,hasReviewed:de,reviewDate:Z,reviewRating:re,source:"csv"})}}d(F);const M=F.filter(te=>te.hasReviewed).length,$=F.filter(te=>te.reviewRating).reduce((te,z)=>te+(z.reviewRating||0),0)/M||0,ne={totalCustomers:F.length,reviewedCustomers:M,pendingReviews:F.length-M,averageRating:$,completionRate:M/F.length*100};f(ne),be({title:"Analysis Complete!",description:`Analyzed ${F.length} customers. ${F.length-M} need review requests.`})}catch(P){be({title:"Analysis Failed",description:P instanceof Error?P.message:"Failed to analyze CSV file.",variant:"destructive"})}finally{v(!1)}},T=async _=>{const P=y.length>0?u.filter(R=>y.includes(R.id)&&!R.hasReviewed):u.filter(R=>!R.hasReviewed);if(P.length===0){be({title:"No Customers Selected",description:"Please select customers who haven't reviewed yet.",variant:"destructive"});return}w(!0);try{for(let R=0;R<P.length;R++)await new Promise(C=>setTimeout(C,500));be({title:`${_.toUpperCase()} Requests Sent!`,description:`Review requests sent to ${P.length} customers via ${_}.`}),x([])}catch{be({title:"Failed to Send",description:"There was an error sending review requests. Please try again.",variant:"destructive"})}finally{w(!1)}},A=_=>{x(P=>P.includes(_)?P.filter(R=>R!==_):[...P,_])},S=()=>{const _=u.filter(P=>!P.hasReviewed).map(P=>P.id);x(_)};return s?e||r==="none"?a.jsx("div",{className:"flex flex-col items-center justify-center min-h-[500px] text-center space-y-6",children:a.jsxs("div",{className:"bg-red-950/30 border-2 border-red-500/50 rounded-2xl p-8 max-w-2xl w-full backdrop-blur-sm",children:[a.jsx(qr,{className:"h-16 w-16 text-red-500 mx-auto mb-4"}),a.jsx("h3",{className:"text-2xl font-bold text-red-400 mb-3",children:r==="none"?"No Subscription - Upgrade Required":"Trial Expired - Upgrade Required"}),a.jsx("p",{className:"text-red-300/90 mb-6 text-lg",children:r==="none"?"You need an active subscription to access this feature. Start your 15-day free trial or upgrade now to request reviews from your customers.":"Your 15-day trial has expired. Upgrade now to request reviews from your customers and manage review campaigns."}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs(K,{onClick:()=>t("/dashboard/billing"),className:"bg-red-600 hover:bg-red-700 text-white px-8 py-6 text-lg w-full",size:"lg",children:[a.jsx(Sr,{className:"mr-2 h-5 w-5"}),r==="none"?"Start Free Trial":"Upgrade Now"]}),a.jsx("p",{className:"text-sm text-red-400/80",children:"Starting from ₹1,099/month • Unlimited Profiles • All Features"})]})]})}):a.jsxs("div",{className:"relative p-3 sm:p-4 md:p-6 space-y-4 sm:space-y-6 min-h-[calc(100vh-4rem)]",children:[a.jsx("div",{className:"absolute inset-0 z-10 flex items-start justify-center backdrop-blur-sm bg-background/90 p-4 pt-8 sm:pt-12 overflow-y-auto",children:a.jsx(H,{className:"w-full max-w-xs sm:max-w-md md:max-w-lg mx-auto shadow-2xl border-2 animate-fade-in",children:a.jsxs(Y,{className:"pt-8 sm:pt-10 md:pt-12 pb-6 sm:pb-8 md:pb-10 px-4 sm:px-6 md:px-8 text-center",children:[a.jsxs("div",{className:"mb-4 sm:mb-6 flex items-center justify-center gap-2 sm:gap-3",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 animate-ping",children:a.jsx(co,{className:"h-8 w-8 sm:h-10 sm:w-10 md:h-12 md:w-12 text-primary/60"})}),a.jsx(co,{className:"h-8 w-8 sm:h-10 sm:w-10 md:h-12 md:w-12 text-primary relative"})]}),a.jsx(Yn,{className:"h-8 w-8 sm:h-10 sm:w-10 md:h-12 md:w-12 text-primary animate-pulse"})]}),a.jsx("h2",{className:"text-2xl sm:text-3xl md:text-4xl font-bold mb-3 sm:mb-4 bg-gradient-to-r from-primary to-purple-600 bg-clip-text text-transparent",children:"Coming Soon"}),a.jsx("p",{className:"text-sm sm:text-base md:text-lg text-muted-foreground mb-4 sm:mb-6 leading-relaxed px-2",children:"We're working hard to bring you an amazing review request feature. This powerful tool will help you collect more reviews effortlessly!"}),a.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs sm:text-sm text-muted-foreground mb-4 sm:mb-6",children:[a.jsx(Yn,{className:"h-3 w-3 sm:h-4 sm:w-4"}),a.jsx("span",{children:"Expected launch: Coming very soon"})]}),a.jsxs("div",{className:"mt-6 sm:mt-8 pt-4 sm:pt-6 border-t",children:[a.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground mb-3",children:"Get notified when this feature launches"}),a.jsxs(K,{className:"w-full h-10 sm:h-11 text-sm sm:text-base",children:[a.jsx(ti,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),a.jsx("span",{children:"Notify Me"})]})]})]})})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Request for Reviews"}),a.jsx("p",{className:"text-muted-foreground",children:"Upload customer data, analyze review status, and send automated review requests"})]}),a.jsxs(Kl,{defaultValue:"upload",className:"space-y-6",children:[a.jsxs(ko,{className:"grid w-full grid-cols-3",children:[a.jsx(Zt,{value:"upload",children:"Upload & Analyze"}),a.jsx(Zt,{value:"customers",children:"Customer List"}),a.jsx(Zt,{value:"send",children:"Send Requests"})]}),a.jsxs(er,{value:"upload",className:"space-y-6",children:[a.jsxs(H,{children:[a.jsx(me,{children:a.jsxs(ge,{className:"text-lg flex items-center gap-2",children:[a.jsx(gs,{className:"h-5 w-5"}),"Select Business Location"]})}),a.jsx(Y,{children:a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:E.map(_=>{const P=i===_.id;return a.jsx("div",{className:`relative rounded-lg border-2 transition-all duration-200 cursor-pointer ${P?"border-primary bg-primary/5 shadow-md":"border-border hover:border-primary/50"}`,onClick:()=>o(_.id),children:a.jsxs("div",{className:"p-4",children:[a.jsx("h3",{className:"font-medium text-sm leading-tight break-words",children:_.name}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1 break-words",children:_.accountName}),P&&a.jsx(Se,{className:"mt-2 text-xs",children:"Selected"})]})},_.id)})})})]}),a.jsxs(H,{children:[a.jsxs(me,{children:[a.jsxs(ge,{className:"text-lg flex items-center gap-2",children:[a.jsx(wm,{className:"h-5 w-5"}),"Upload Customer Data"]}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Upload a CSV file with customer information to analyze review status"})]}),a.jsxs(Y,{className:"space-y-4",children:[a.jsxs("div",{className:"border-2 border-dashed border-border rounded-lg p-8 text-center",children:[a.jsx(wm,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("h3",{className:"font-medium",children:"Upload CSV File"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"CSV should contain columns: Name, Email, Phone (optional)"})]}),a.jsx(K,{onClick:()=>{var _;return(_=j.current)==null?void 0:_.click()},disabled:m,className:"mt-4",children:m?a.jsxs(a.Fragment,{children:[a.jsx(Fs,{className:"h-4 w-4 mr-2 animate-spin"}),"Analyzing..."]}):a.jsxs(a.Fragment,{children:[a.jsx(bl,{className:"h-4 w-4 mr-2"}),"Choose CSV File"]})}),a.jsx("input",{ref:j,type:"file",accept:".csv",onChange:I,className:"hidden"})]}),l&&a.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(bl,{className:"h-4 w-4 text-primary"}),a.jsx("span",{className:"text-sm font-medium",children:l.name})]}),a.jsx(K,{variant:"ghost",size:"sm",onClick:()=>{c(null),d([]),f(null)},children:a.jsx(Hs,{className:"h-4 w-4"})})]}),m&&a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ap,{value:66,className:"w-full"}),a.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"Analyzing customer data and checking review status..."})]})]})]}),h&&a.jsxs(H,{children:[a.jsx(me,{children:a.jsxs(ge,{className:"text-lg flex items-center gap-2",children:[a.jsx(ps,{className:"h-5 w-5"}),"Analysis Results"]})}),a.jsxs(Y,{children:[a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600",children:h.totalCustomers}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Customers"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-green-600",children:h.reviewedCustomers}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Have Reviewed"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-orange-600",children:h.pendingReviews}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Need Reviews"})]}),a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[h.completionRate.toFixed(1),"%"]}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Review Rate"})]})]}),h.averageRating>0&&a.jsx("div",{className:"mt-4 p-3 bg-yellow-50 rounded-lg",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ms,{className:"h-4 w-4 text-yellow-500"}),a.jsxs("span",{className:"text-sm font-medium",children:["Average Rating: ",h.averageRating.toFixed(1)," / 5"]})]})})]})]})]}),a.jsx(er,{value:"customers",className:"space-y-6",children:a.jsxs(H,{children:[a.jsx(me,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs(ge,{className:"text-lg flex items-center gap-2",children:[a.jsx(gs,{className:"h-5 w-5"}),"Customer List (",u.length,")"]}),u.length>0&&a.jsx(K,{onClick:S,variant:"outline",size:"sm",children:"Select All Non-Reviewed"})]})}),a.jsx(Y,{children:u.length>0?a.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:u.map(_=>a.jsxs("div",{className:`flex items-center justify-between p-3 border rounded-lg cursor-pointer transition-all ${y.includes(_.id)?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,onClick:()=>A(_.id),children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("h4",{className:"font-medium",children:_.name}),_.hasReviewed?a.jsxs(Se,{variant:"default",children:[a.jsx(Yt,{className:"h-3 w-3 mr-1"}),"Reviewed"]}):a.jsxs(Se,{variant:"secondary",children:[a.jsx(qr,{className:"h-3 w-3 mr-1"}),"Pending"]})]}),a.jsx("p",{className:"text-sm text-muted-foreground",children:_.email}),_.phone&&a.jsx("p",{className:"text-xs text-muted-foreground",children:_.phone})]}),_.hasReviewed&&_.reviewRating&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(ms,{className:"h-4 w-4 text-yellow-500 fill-current"}),a.jsx("span",{className:"text-sm font-medium",children:_.reviewRating})]})]},_.id))}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx(gs,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),a.jsx("p",{className:"text-muted-foreground",children:"No customer data uploaded yet"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Upload a CSV file to see customer analysis"})]})})]})}),a.jsx(er,{value:"send",className:"space-y-6",children:a.jsxs(H,{children:[a.jsxs(me,{children:[a.jsxs(ge,{className:"text-lg flex items-center gap-2",children:[a.jsx(qm,{className:"h-5 w-5"}),"Send Review Requests"]}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Send review requests to customers who haven't reviewed yet"})]}),a.jsxs(Y,{className:"space-y-6",children:[a.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(qr,{className:"h-4 w-4 text-blue-600"}),a.jsx("span",{className:"font-medium text-blue-800",children:"Ready to Send"})]}),a.jsxs("p",{className:"text-sm text-blue-700",children:[y.length>0?`${y.filter(_=>{var P;return!((P=u.find(R=>R.id===_))!=null&&P.hasReviewed)}).length} selected customers`:`${u.filter(_=>!_.hasReviewed).length} customers without reviews`," will receive review requests."]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsx(H,{className:"cursor-pointer hover:shadow-md transition-shadow",children:a.jsxs(Y,{className:"p-4 text-center",children:[a.jsx(ti,{className:"h-8 w-8 mx-auto mb-2 text-blue-600"}),a.jsx("h3",{className:"font-medium mb-2",children:"Email"}),a.jsx("p",{className:"text-xs text-muted-foreground mb-4",children:"Send professional review request emails"}),a.jsx(K,{onClick:()=>T("email"),disabled:b||u.filter(_=>!_.hasReviewed).length===0,className:"w-full",size:"sm",children:b?"Sending...":"Send via Email"})]})}),a.jsx(H,{className:"cursor-pointer hover:shadow-md transition-shadow",children:a.jsxs(Y,{className:"p-4 text-center",children:[a.jsx(mh,{className:"h-8 w-8 mx-auto mb-2 text-green-600"}),a.jsx("h3",{className:"font-medium mb-2",children:"SMS"}),a.jsx("p",{className:"text-xs text-muted-foreground mb-4",children:"Send review requests via text message"}),a.jsx(K,{onClick:()=>T("sms"),disabled:b||u.filter(_=>!_.hasReviewed&&_.phone).length===0,className:"w-full",size:"sm",children:b?"Sending...":"Send via SMS"})]})}),a.jsx(H,{className:"cursor-pointer hover:shadow-md transition-shadow",children:a.jsxs(Y,{className:"p-4 text-center",children:[a.jsx(ri,{className:"h-8 w-8 mx-auto mb-2 text-green-500"}),a.jsx("h3",{className:"font-medium mb-2",children:"WhatsApp"}),a.jsx("p",{className:"text-xs text-muted-foreground mb-4",children:"Send requests via WhatsApp messaging"}),a.jsx(K,{onClick:()=>T("whatsapp"),disabled:b||u.filter(_=>!_.hasReviewed&&_.phone).length===0,className:"w-full",size:"sm",children:b?"Sending...":"Send via WhatsApp"})]})})]}),b&&a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ap,{value:75,className:"w-full"}),a.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"Sending review requests to customers..."})]})]})]})})]})]}):a.jsx("div",{className:"h-full flex items-center justify-center p-6",children:a.jsxs(H,{className:"max-w-md w-full",children:[a.jsxs(me,{className:"text-center",children:[a.jsx("div",{className:"mx-auto mb-4 h-16 w-16 rounded-full bg-primary/10 flex items-center justify-center",children:a.jsx(wm,{className:"h-8 w-8 text-primary"})}),a.jsx(ge,{className:"text-xl",children:"Connect Google Business Profile"})]}),a.jsxs(Y,{className:"text-center",children:[a.jsx("p",{className:"text-muted-foreground mb-4",children:"Connect your Google Business Profile to analyze customer reviews and send requests."}),a.jsx(K,{asChild:!0,children:a.jsx("a",{href:"/dashboard/settings",children:"Go to Settings"})})]})]})})},Ooe=()=>{const{isConnected:t,isLoading:e,accounts:r,selectedAccount:n,selectedLocation:s,error:i,connectGoogleBusiness:o,disconnectGoogleBusiness:l,selectAccount:c,selectLocation:u,refreshAccounts:d}=pi(),{canAccessMultipleProfiles:h,isAccountAccessible:f,isLocationAccessible:m,getAccountLockMessage:v,getLocationLockMessage:y,handleContactSupport:x}=Au();return e?a.jsx(H,{children:a.jsxs(Y,{className:"flex items-center justify-center py-8",children:[a.jsx(ir,{className:"h-6 w-6 animate-spin mr-2"}),a.jsx("span",{children:"Loading Google Business Profile..."})]})}):t?a.jsxs("div",{className:"space-y-6",children:[a.jsx(H,{children:a.jsxs(me,{children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("img",{src:"/ggg.png",alt:"Google Business Profile",className:"h-5 w-5"}),a.jsx(ge,{children:"Google Business Profile"}),a.jsxs(Se,{variant:"secondary",className:"bg-green-100 text-green-800",children:[a.jsx(Yt,{className:"h-3 w-3 mr-1"}),"Connected"]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(K,{variant:"outline",size:"sm",onClick:d,disabled:e,children:[a.jsx(ir,{className:`h-4 w-4 mr-2 ${e?"animate-spin":""}`}),"Refresh"]}),a.jsxs(K,{variant:"outline",size:"sm",onClick:l,disabled:e,children:[a.jsx(p9,{className:"h-4 w-4 mr-2"}),"Disconnect"]})]})]}),a.jsx(Qe,{children:"Your Google Business Profile is connected and syncing automatically."})]})}),t&&r.length===0&&!e&&a.jsx(H,{children:a.jsxs(Y,{className:"text-center py-8",children:[a.jsx(qr,{className:"h-12 w-12 text-yellow-500 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Business Profiles Found"}),a.jsx("p",{className:"text-muted-foreground mb-4",children:"We couldn't find any Google Business Profiles associated with your account."}),a.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200 text-left",children:[a.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"To get started:"}),a.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[a.jsxs("li",{children:["• Create a Google Business Profile at ",a.jsx("a",{href:"https://business.google.com",target:"_blank",rel:"noopener noreferrer",className:"underline",children:"business.google.com"})]}),a.jsx("li",{children:"• Verify your business location"}),a.jsx("li",{children:"• Make sure you're signed in with the correct Google account"}),a.jsx("li",{children:"• Ensure you have owner or manager permissions"})]})]}),a.jsxs(K,{onClick:d,className:"mt-4",disabled:e,children:[a.jsx(ir,{className:`h-4 w-4 mr-2 ${e?"animate-spin":""}`}),"Check Again"]})]})}),r.length>0&&a.jsxs(H,{children:[a.jsxs(me,{children:[a.jsx(ge,{children:"Choose Account"}),a.jsx(Qe,{children:h?"Select the Google Business account you want to manage.":"Select 1 Google Business account (upgrade to Enterprise for multiple accounts)."})]}),a.jsxs(Y,{className:"space-y-3",children:[r.map((b,w)=>{const j=!f(w);return a.jsxs("div",{className:`p-4 border rounded-lg transition-colors relative ${j?"border-gray-700 bg-gray-800/50 cursor-not-allowed opacity-70":(n==null?void 0:n.name)===b.name?"border-primary bg-primary/5 cursor-pointer":"border-border hover:border-primary/50 cursor-pointer"}`,onClick:()=>!j&&c(b),children:[j&&a.jsx("div",{className:"absolute top-2 right-2",children:a.jsx(Ri,{className:"h-4 w-4 text-gray-400"})}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`h-10 w-10 rounded-lg flex items-center justify-center ${j?"bg-gray-100":"bg-primary/10"}`,children:a.jsx(h9,{className:`h-5 w-5 ${j?"text-gray-400":"text-primary"}`})}),a.jsxs("div",{children:[a.jsxs("h4",{className:`font-medium ${j?"text-gray-400":""}`,children:[b.accountName,j&&a.jsx("span",{className:"ml-2 text-xs text-orange-600",children:"(Requires Enterprise)"})]}),a.jsxs("p",{className:`text-sm ${j?"text-gray-400":"text-muted-foreground"}`,children:[b.locations.length," location",b.locations.length!==1?"s":""]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Se,{variant:b.state==="VERIFIED"?"default":"secondary",children:b.role}),j&&a.jsxs(Se,{variant:"outline",className:"text-orange-600 border-orange-200",children:[a.jsx(Jo,{className:"h-3 w-3 mr-1"}),"Pro"]})]})]})]},b.name)}),!h&&r.length>1&&a.jsx(H,{className:"border-orange-200 bg-orange-50",children:a.jsx(Y,{className:"p-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(Jo,{className:"h-5 w-5 text-orange-600 mt-0.5"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-medium text-orange-900 mb-1",children:"Multiple Profiles Detected"}),a.jsx("p",{className:"text-sm text-orange-800 mb-3",children:v(r.length)}),a.jsxs(K,{size:"sm",variant:"outline",onClick:()=>x("Multiple Business Accounts"),className:"border-orange-300 text-orange-700 hover:bg-orange-100",children:[a.jsx(ti,{className:"h-4 w-4 mr-2"}),"Contact for Enterprise Plan"]})]})]})})})]})]}),n&&n.locations.length>0&&a.jsxs(H,{children:[a.jsxs(me,{children:[a.jsx(ge,{children:"Choose Location"}),a.jsx(Qe,{children:h?`Select the business location you want to manage from ${n.accountName}.`:`Select 1 business location from ${n.accountName} (upgrade to Enterprise for multiple locations).`})]}),a.jsxs(Y,{className:"space-y-3",children:[n.locations.map((b,w)=>{var E,I;const j=!m(w);return a.jsxs("div",{className:`p-4 border rounded-lg transition-colors relative ${j?"border-gray-700 bg-gray-800/50 cursor-not-allowed opacity-70":(s==null?void 0:s.name)===b.name?"border-primary bg-primary/5 cursor-pointer":"border-border hover:border-primary/50 cursor-pointer"}`,onClick:()=>!j&&u(b),children:[j&&a.jsx("div",{className:"absolute top-2 right-2",children:a.jsx(Ri,{className:"h-4 w-4 text-gray-400"})}),a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:`h-10 w-10 rounded-lg flex items-center justify-center ${j?"bg-gray-100":"bg-blue-100"}`,children:a.jsx(Wn,{className:`h-5 w-5 ${j?"text-gray-400":"text-blue-600"}`})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("h4",{className:`font-medium ${j?"text-gray-400":""}`,children:[b.displayName,j&&a.jsx("span",{className:"ml-2 text-xs text-orange-600",children:"(Requires Enterprise)"})]}),a.jsxs("div",{className:`flex items-center gap-1 text-sm mt-1 ${j?"text-gray-400":"text-muted-foreground"}`,children:[a.jsx(Wn,{className:"h-3 w-3"}),a.jsxs("span",{children:[b.address.addressLines.join(", "),", ",b.address.locality]})]}),b.phoneNumber&&a.jsxs("div",{className:`flex items-center gap-1 text-sm mt-1 ${j?"text-gray-400":"text-muted-foreground"}`,children:[a.jsx(mh,{className:"h-3 w-3"}),a.jsx("span",{children:b.phoneNumber})]}),b.websiteUrl&&a.jsxs("div",{className:`flex items-center gap-1 text-sm mt-1 ${j?"text-gray-400":"text-muted-foreground"}`,children:[a.jsx(pw,{className:"h-3 w-3"}),a.jsx("span",{className:"truncate max-w-xs",children:b.websiteUrl})]}),b.categories.length>0&&a.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[b.categories.slice(0,2).map((O,T)=>a.jsx(Se,{variant:"outline",className:"text-xs",children:O.name},T)),b.categories.length>2&&a.jsxs(Se,{variant:"outline",className:"text-xs",children:["+",b.categories.length-2," more"]})]})]})]}),a.jsxs("div",{className:"flex flex-col items-end gap-1",children:[((E=b.metadata)==null?void 0:E.suspended)&&a.jsx(Se,{variant:"destructive",className:"text-xs",children:"Suspended"}),((I=b.metadata)==null?void 0:I.duplicate)&&a.jsx(Se,{variant:"secondary",className:"text-xs",children:"Duplicate"})]})]})]},b.name)}),!h&&n&&n.locations.length>1&&a.jsx(H,{className:"border-orange-200 bg-orange-50",children:a.jsx(Y,{className:"p-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(Jo,{className:"h-5 w-5 text-orange-600 mt-0.5"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-medium text-orange-900 mb-1",children:"Multiple Locations Detected"}),a.jsx("p",{className:"text-sm text-orange-800 mb-3",children:y(n.locations.length)}),a.jsxs(K,{size:"sm",variant:"outline",onClick:()=>x("Multiple Business Locations"),className:"border-orange-300 text-orange-700 hover:bg-orange-100",children:[a.jsx(ti,{className:"h-4 w-4 mr-2"}),"Contact for Enterprise Plan"]})]})]})})})]})]}),s&&a.jsxs(H,{children:[a.jsxs(me,{children:[a.jsxs(ge,{className:"flex items-center gap-2",children:[a.jsx(Yt,{className:"h-5 w-5 text-green-600"}),"Location Selected"]}),a.jsxs(Qe,{children:["You're now managing ",s.displayName]})]}),a.jsx(Y,{children:a.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[a.jsxs("div",{className:"flex items-center gap-2 text-green-800 mb-2",children:[a.jsx(Yt,{className:"h-4 w-4"}),a.jsx("span",{className:"font-medium",children:"Ready to manage your business!"})]}),a.jsx("p",{className:"text-sm text-green-700",children:"Your Google Business Profile is now connected and ready for automated management. You can now create posts, monitor reviews, and track analytics."})]})})]})]}):a.jsxs(H,{children:[a.jsxs(me,{children:[a.jsxs(ge,{className:"flex items-center gap-2",children:[a.jsx("img",{src:"/ggg.png",alt:"Google Business Profile",className:"h-5 w-5"}),"Connect Google Business Profile"]}),a.jsx(Qe,{children:"Connect your Google Business Profile to manage your business listings, posts, and reviews automatically."})]}),a.jsxs(Y,{className:"space-y-4",children:[a.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[a.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"What you'll get:"}),a.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[a.jsx("li",{children:"• Automatic profile synchronization"}),a.jsx("li",{children:"• Real-time post management"}),a.jsx("li",{children:"• Review monitoring and responses"}),a.jsx("li",{children:"• Multi-location support"}),a.jsx("li",{children:"• Analytics and insights"})]})]}),i&&a.jsx("div",{className:"bg-red-50 p-4 rounded-lg border border-red-200",children:a.jsxs("div",{className:"flex items-center gap-2 text-red-800",children:[a.jsx(qr,{className:"h-4 w-4"}),a.jsx("span",{className:"text-sm",children:i})]})}),a.jsxs(K,{onClick:()=>{console.log("🔴 DEBUGGING: Connect button clicked!"),o()},className:"w-full",size:"lg",children:[a.jsx("img",{src:"/ggg.png",alt:"Google Business Profile",className:"mr-2 h-4 w-4"}),"Connect Google Business Profile"]})]})]})},Doe=()=>{const[t,e]=p.useState({newReviews:!0,scheduledPosts:!0,weeklyReports:!1,accountAlerts:!0}),[r,n]=p.useState({enabled:!1,positiveReviews:!0,neutralReviews:!0,negativeReviews:!1});Rn();const{currentUser:s,logout:i}=Er(),o=cr(),l=async()=>{try{await i(),o("/login")}catch(c){console.error("Logout error:",c)}};return a.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[a.jsxs("div",{className:"px-1",children:[a.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold tracking-tight",children:"Settings"}),a.jsx("p",{className:"text-sm sm:text-base text-muted-foreground mt-1",children:"Manage your account preferences and business profile settings"})]}),a.jsxs(Kl,{defaultValue:"connections",className:"space-y-4 sm:space-y-6",children:[a.jsxs(ko,{className:"grid w-full grid-cols-2 sm:grid-cols-3 h-auto",children:[a.jsxs(Zt,{value:"connections",className:"flex items-center gap-1 sm:gap-2 text-xs sm:text-sm px-2 sm:px-3 py-2",children:[a.jsx(gs,{className:"h-3 w-3 sm:h-4 sm:w-4"}),a.jsx("span",{className:"hidden sm:inline",children:"Connections"}),a.jsx("span",{className:"sm:hidden",children:"Connect"})]}),a.jsxs(Zt,{value:"notifications",className:"flex items-center gap-1 sm:gap-2 text-xs sm:text-sm px-2 sm:px-3 py-2",children:[a.jsx(Um,{className:"h-3 w-3 sm:h-4 sm:w-4"}),a.jsx("span",{className:"hidden sm:inline",children:"Notifications"}),a.jsx("span",{className:"sm:hidden",children:"Notify"})]}),a.jsxs(Zt,{value:"account",className:"flex items-center gap-1 sm:gap-2 text-xs sm:text-sm px-2 sm:px-3 py-2",children:[a.jsx(Km,{className:"h-3 w-3 sm:h-4 sm:w-4"}),"Account"]})]}),a.jsx(er,{value:"connections",className:"space-y-6",children:a.jsx(Ooe,{})}),a.jsxs(er,{value:"notifications",className:"space-y-6",children:[a.jsxs(H,{children:[a.jsxs(me,{children:[a.jsxs(ge,{className:"flex items-center gap-2",children:[a.jsx(Um,{className:"h-5 w-5"}),"Notification Preferences"]}),a.jsx(Qe,{children:"Choose what notifications you want to receive"})]}),a.jsx(Y,{className:"space-y-6",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:[a.jsxs("div",{className:"space-y-0.5 flex-1",children:[a.jsx(Ie,{htmlFor:"new-reviews",className:"text-sm sm:text-base",children:"New Reviews"}),a.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Get notified when you receive new customer reviews"})]}),a.jsx(Ln,{id:"new-reviews",checked:t.newReviews,onCheckedChange:c=>e(u=>({...u,newReviews:c}))})]}),a.jsx(Ki,{}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:[a.jsxs("div",{className:"space-y-0.5 flex-1",children:[a.jsx(Ie,{htmlFor:"scheduled-posts",className:"text-sm sm:text-base",children:"Scheduled Posts"}),a.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Receive confirmations when posts are published"})]}),a.jsx(Ln,{id:"scheduled-posts",checked:t.scheduledPosts,onCheckedChange:c=>e(u=>({...u,scheduledPosts:c}))})]}),a.jsx(Ki,{}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:[a.jsxs("div",{className:"space-y-0.5 flex-1",children:[a.jsx(Ie,{htmlFor:"weekly-reports",className:"text-sm sm:text-base",children:"Weekly Reports"}),a.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Get weekly performance summaries via email"})]}),a.jsx(Ln,{id:"weekly-reports",checked:t.weeklyReports,onCheckedChange:c=>e(u=>({...u,weeklyReports:c}))})]}),a.jsx(Ki,{}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:[a.jsxs("div",{className:"space-y-0.5 flex-1",children:[a.jsx(Ie,{htmlFor:"account-alerts",className:"text-sm sm:text-base",children:"Account Alerts"}),a.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Important account and billing notifications"})]}),a.jsx(Ln,{id:"account-alerts",checked:t.accountAlerts,onCheckedChange:c=>e(u=>({...u,accountAlerts:c}))})]})]})})]}),a.jsxs(H,{children:[a.jsxs(me,{children:[a.jsxs(ge,{className:"flex items-center gap-2",children:[a.jsx(ti,{className:"h-5 w-5"}),"Auto Reply Settings"]}),a.jsx(Qe,{children:"Configure automatic responses to customer reviews"})]}),a.jsxs(Y,{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:[a.jsxs("div",{className:"space-y-0.5 flex-1",children:[a.jsx(Ie,{htmlFor:"auto-reply",className:"text-sm sm:text-base",children:"Enable Auto Reply"}),a.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Automatically respond to reviews using AI-generated responses"})]}),a.jsx(Ln,{id:"auto-reply",checked:r.enabled,onCheckedChange:c=>n(u=>({...u,enabled:c}))})]}),r.enabled&&a.jsxs("div",{className:"space-y-4 border-l-2 border-primary/20 pl-4",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:[a.jsx(Ie,{htmlFor:"positive-reviews",className:"text-sm sm:text-base",children:"Positive Reviews (4-5 stars)"}),a.jsx(Ln,{id:"positive-reviews",checked:r.positiveReviews,onCheckedChange:c=>n(u=>({...u,positiveReviews:c}))})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:[a.jsx(Ie,{htmlFor:"neutral-reviews",className:"text-sm sm:text-base",children:"Neutral Reviews (3 stars)"}),a.jsx(Ln,{id:"neutral-reviews",checked:r.neutralReviews,onCheckedChange:c=>n(u=>({...u,neutralReviews:c}))})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:[a.jsx(Ie,{htmlFor:"negative-reviews",className:"text-sm sm:text-base",children:"Negative Reviews (1-2 stars)"}),a.jsx(Ln,{id:"negative-reviews",checked:r.negativeReviews,onCheckedChange:c=>n(u=>({...u,negativeReviews:c}))})]})]})]})]})]}),a.jsxs(er,{value:"account",className:"space-y-6",children:[a.jsxs(H,{children:[a.jsxs(me,{children:[a.jsxs(ge,{className:"flex items-center gap-2",children:[a.jsx(Km,{className:"h-5 w-5"}),"Account Information"]}),a.jsx(Qe,{children:"Manage your personal account details"})]}),a.jsxs(Y,{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ie,{htmlFor:"display-name",children:"Display Name"}),a.jsx(Ze,{id:"display-name",defaultValue:(s==null?void 0:s.displayName)||"",placeholder:"Your display name"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ie,{htmlFor:"email",children:"Email Address"}),a.jsx(Ze,{id:"email",type:"email",defaultValue:(s==null?void 0:s.email)||"",placeholder:"your@email.com",disabled:!0})]})]}),a.jsx(Ki,{}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-medium text-sm sm:text-base",children:"Account Status"}),a.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Your account is active and verified"})]}),a.jsx(Se,{variant:"secondary",className:"bg-green-100 text-green-800 shrink-0",children:"Active"})]})]})]}),a.jsxs(H,{children:[a.jsxs(me,{children:[a.jsxs(ge,{className:"flex items-center gap-2",children:[a.jsx($s,{className:"h-5 w-5"}),"Security"]}),a.jsx(Qe,{children:"Manage your account security settings"})]}),a.jsx(Y,{className:"space-y-4",children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-medium text-sm sm:text-base",children:"Sign Out"}),a.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Sign out of your account on this device"})]}),a.jsxs(K,{variant:"outline",onClick:l,className:"w-full sm:w-auto",children:[a.jsx(gw,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Sign Out"]})]})})]})]})]})]})};var Iy={},J3={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r==="__proto__"}t.isUnsafeProperty=e})(J3);var Ij={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}t.isDeepKey=e})(Ij);var Rj={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}t.toKey=e})(Rj);var Ry={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){const n=[],s=r.length;if(s===0)return n;let i=0,o="",l="",c=!1;for(r.charCodeAt(0)===46&&(n.push(""),i++);i<s;){const u=r[i];l?u==="\\"&&i+1<s?(i++,o+=r[i]):u===l?l="":o+=u:c?u==='"'||u==="'"?l=u:u==="]"?(c=!1,n.push(o),o=""):o+=u:u==="["?(c=!0,o&&(n.push(o),o="")):u==="."?o&&(n.push(o),o=""):o+=u,i++}return o&&n.push(o),n}t.toPath=e})(Ry);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=J3,r=Ij,n=Rj,s=Ry;function i(l,c,u){if(l==null)return u;switch(typeof c){case"string":{if(e.isUnsafeProperty(c))return u;const d=l[c];return d===void 0?r.isDeepKey(c)?i(l,s.toPath(c),u):u:d}case"number":case"symbol":{typeof c=="number"&&(c=n.toKey(c));const d=l[c];return d===void 0?u:d}default:{if(Array.isArray(c))return o(l,c,u);if(Object.is(c==null?void 0:c.valueOf(),-0)?c="-0":c=String(c),e.isUnsafeProperty(c))return u;const d=l[c];return d===void 0?u:d}}}function o(l,c,u){if(c.length===0)return u;let d=l;for(let h=0;h<c.length;h++){if(d==null||e.isUnsafeProperty(c[h]))return u;d=d[c[h]]}return d===void 0?u:d}t.get=i})(Iy);var Moe=Iy.get;const Ol=_o(Moe);var Z3={exports:{}},At={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oj=Symbol.for("react.element"),Dj=Symbol.for("react.portal"),Oy=Symbol.for("react.fragment"),Dy=Symbol.for("react.strict_mode"),My=Symbol.for("react.profiler"),Ly=Symbol.for("react.provider"),Fy=Symbol.for("react.context"),Loe=Symbol.for("react.server_context"),$y=Symbol.for("react.forward_ref"),Uy=Symbol.for("react.suspense"),By=Symbol.for("react.suspense_list"),Vy=Symbol.for("react.memo"),zy=Symbol.for("react.lazy"),Foe=Symbol.for("react.offscreen"),e5;e5=Symbol.for("react.module.reference");function _s(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case Oj:switch(t=t.type,t){case Oy:case My:case Dy:case Uy:case By:return t;default:switch(t=t&&t.$$typeof,t){case Loe:case Fy:case $y:case zy:case Vy:case Ly:return t;default:return e}}case Dj:return e}}}At.ContextConsumer=Fy;At.ContextProvider=Ly;At.Element=Oj;At.ForwardRef=$y;At.Fragment=Oy;At.Lazy=zy;At.Memo=Vy;At.Portal=Dj;At.Profiler=My;At.StrictMode=Dy;At.Suspense=Uy;At.SuspenseList=By;At.isAsyncMode=function(){return!1};At.isConcurrentMode=function(){return!1};At.isContextConsumer=function(t){return _s(t)===Fy};At.isContextProvider=function(t){return _s(t)===Ly};At.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===Oj};At.isForwardRef=function(t){return _s(t)===$y};At.isFragment=function(t){return _s(t)===Oy};At.isLazy=function(t){return _s(t)===zy};At.isMemo=function(t){return _s(t)===Vy};At.isPortal=function(t){return _s(t)===Dj};At.isProfiler=function(t){return _s(t)===My};At.isStrictMode=function(t){return _s(t)===Dy};At.isSuspense=function(t){return _s(t)===Uy};At.isSuspenseList=function(t){return _s(t)===By};At.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Oy||t===My||t===Dy||t===Uy||t===By||t===Foe||typeof t=="object"&&t!==null&&(t.$$typeof===zy||t.$$typeof===Vy||t.$$typeof===Ly||t.$$typeof===Fy||t.$$typeof===$y||t.$$typeof===e5||t.getModuleId!==void 0)};At.typeOf=_s;Z3.exports=At;var $oe=Z3.exports,Or=t=>t===0?0:t>0?1:-1,In=t=>typeof t=="number"&&t!=+t,tl=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,Le=t=>(typeof t=="number"||t instanceof Number)&&!In(t),Na=t=>Le(t)||typeof t=="string",Uoe=0,Jd=t=>{var e=++Uoe;return"".concat(t||"").concat(e)},an=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Le(e)&&typeof e!="string")return n;var i;if(tl(e)){if(r==null)return n;var o=e.indexOf("%");i=r*parseFloat(e.slice(0,o))/100}else i=+e;return In(i)&&(i=n),s&&r!=null&&i>r&&(i=r),i},t5=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,r={},n=0;n<e;n++)if(!r[t[n]])r[t[n]]=!0;else return!0;return!1};function Et(t,e,r){return Le(t)&&Le(e)?t+r*(e-t):e}function r5(t,e,r){if(!(!t||!t.length))return t.find(n=>n&&(typeof e=="function"?e(n):Ol(n,e))===r)}var zt=t=>t===null||typeof t>"u",Hh=t=>zt(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1)),Boe=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function Mj(t){if(typeof t!="string")return!1;var e=Boe;return e.includes(t)}var Voe=["viewBox","children"],TP=["points","pathLength"],Ix={svg:Voe,polygon:TP,polyline:TP},Lj=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var r=t;if(p.isValidElement(t)&&(r=t.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(s=>{Mj(s)&&(n[s]=i=>r[s](r,i))}),n},zoe=(t,e,r)=>n=>(t(e,r,n),null),Kh=(t,e,r)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var n=null;return Object.keys(t).forEach(s=>{var i=t[s];Mj(s)&&typeof i=="function"&&(n||(n={}),n[s]=zoe(i,e,r))}),n},Goe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function n5(t){if(typeof t!="string")return!1;var e=Goe;return e.includes(t)}function Ss(t){var e=Object.entries(t).filter(r=>{var[n]=r;return n5(n)});return Object.fromEntries(e)}var CP=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",kP=null,Rx=null,s5=t=>{if(t===kP&&Array.isArray(Rx))return Rx;var e=[];return p.Children.forEach(t,r=>{zt(r)||($oe.isFragment(r)?e=e.concat(s5(r.props.children)):e.push(r))}),Rx=e,kP=t,e};function Fj(t,e){var r=[],n=[];return Array.isArray(e)?n=e.map(s=>CP(s)):n=[CP(e)],s5(t).forEach(s=>{var i=Ol(s,"type.displayName")||Ol(s,"type.name");n.indexOf(i)!==-1&&r.push(s)}),r}var Gy=t=>t&&typeof t=="object"&&"clipDot"in t?!!t.clipDot:!0,Woe=(t,e,r,n)=>{var s;if(typeof e=="symbol"||typeof e=="number")return!0;var i=(s=n&&(Ix==null?void 0:Ix[n]))!==null&&s!==void 0?s:[],o=e.startsWith("data-"),l=typeof t!="function"&&(!!n&&i.includes(e)||n5(e)),c=!!r&&Mj(e);return o||l||c},Gt=(t,e,r)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(p.isValidElement(t)&&(n=t.props),typeof n!="object"&&typeof n!="function")return null;var s={};return Object.keys(n).forEach(i=>{var o;Woe((o=n)===null||o===void 0?void 0:o[i],i,e,r)&&(s[i]=n[i])}),s},qoe=["children","width","height","viewBox","className","style","title","desc"];function m0(){return m0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},m0.apply(null,arguments)}function Hoe(t,e){if(t==null)return{};var r,n,s=Koe(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(s[r]=t[r])}return s}function Koe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var $j=p.forwardRef((t,e)=>{var{children:r,width:n,height:s,viewBox:i,className:o,style:l,title:c,desc:u}=t,d=Hoe(t,qoe),h=i||{width:n,height:s,x:0,y:0},f=lt("recharts-surface",o);return p.createElement("svg",m0({},Gt(d,!0,"svg"),{className:f,width:n,height:s,style:l,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height),ref:e}),p.createElement("title",null,c),p.createElement("desc",null,u),r)}),Yoe=["children","className"];function p0(){return p0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},p0.apply(null,arguments)}function Qoe(t,e){if(t==null)return{};var r,n,s=Xoe(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(s[r]=t[r])}return s}function Xoe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var lr=p.forwardRef((t,e)=>{var{children:r,className:n}=t,s=Qoe(t,Yoe),i=lt("recharts-layer",n);return p.createElement("g",p0({className:i},Gt(s,!0),{ref:e}),r)}),a5=p.createContext(null),Joe=()=>p.useContext(a5);function Rt(t){return function(){return t}}const i5=Math.cos,kp=Math.sin,Ys=Math.sqrt,Ip=Math.PI,Wy=2*Ip,g0=Math.PI,y0=2*g0,Yo=1e-6,Zoe=y0-Yo;function o5(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function ele(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return o5;const r=10**e;return function(n){this._+=n[0];for(let s=1,i=n.length;s<i;++s)this._+=Math.round(arguments[s]*r)/r+n[s]}}class tle{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?o5:ele(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,s){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+s}`}bezierCurveTo(e,r,n,s,i,o){this._append`C${+e},${+r},${+n},${+s},${this._x1=+i},${this._y1=+o}`}arcTo(e,r,n,s,i){if(e=+e,r=+r,n=+n,s=+s,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,c=n-e,u=s-r,d=o-e,h=l-r,f=d*d+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(f>Yo)if(!(Math.abs(h*c-u*d)>Yo)||!i)this._append`L${this._x1=e},${this._y1=r}`;else{let m=n-o,v=s-l,y=c*c+u*u,x=m*m+v*v,b=Math.sqrt(y),w=Math.sqrt(f),j=i*Math.tan((g0-Math.acos((y+f-x)/(2*b*w)))/2),E=j/w,I=j/b;Math.abs(E-1)>Yo&&this._append`L${e+E*d},${r+E*h}`,this._append`A${i},${i},0,0,${+(h*m>d*v)},${this._x1=e+I*c},${this._y1=r+I*u}`}}arc(e,r,n,s,i,o){if(e=+e,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(s),c=n*Math.sin(s),u=e+l,d=r+c,h=1^o,f=o?s-i:i-s;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>Yo||Math.abs(this._y1-d)>Yo)&&this._append`L${u},${d}`,n&&(f<0&&(f=f%y0+y0),f>Zoe?this._append`A${n},${n},0,1,${h},${e-l},${r-c}A${n},${n},0,1,${h},${this._x1=u},${this._y1=d}`:f>Yo&&this._append`A${n},${n},0,${+(f>=g0)},${h},${this._x1=e+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(e,r,n,s){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+s}h${-n}Z`}toString(){return this._}}function Uj(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);e=n}return t},()=>new tle(e)}function Bj(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function l5(t){this._context=t}l5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function qy(t){return new l5(t)}function c5(t){return t[0]}function u5(t){return t[1]}function d5(t,e){var r=Rt(!0),n=null,s=qy,i=null,o=Uj(l);t=typeof t=="function"?t:t===void 0?c5:Rt(t),e=typeof e=="function"?e:e===void 0?u5:Rt(e);function l(c){var u,d=(c=Bj(c)).length,h,f=!1,m;for(n==null&&(i=s(m=o())),u=0;u<=d;++u)!(u<d&&r(h=c[u],u,c))===f&&((f=!f)?i.lineStart():i.lineEnd()),f&&i.point(+t(h,u,c),+e(h,u,c));if(m)return i=null,m+""||null}return l.x=function(c){return arguments.length?(t=typeof c=="function"?c:Rt(+c),l):t},l.y=function(c){return arguments.length?(e=typeof c=="function"?c:Rt(+c),l):e},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Rt(!!c),l):r},l.curve=function(c){return arguments.length?(s=c,n!=null&&(i=s(n)),l):s},l.context=function(c){return arguments.length?(c==null?n=i=null:i=s(n=c),l):n},l}function tm(t,e,r){var n=null,s=Rt(!0),i=null,o=qy,l=null,c=Uj(u);t=typeof t=="function"?t:t===void 0?c5:Rt(+t),e=typeof e=="function"?e:Rt(e===void 0?0:+e),r=typeof r=="function"?r:r===void 0?u5:Rt(+r);function u(h){var f,m,v,y=(h=Bj(h)).length,x,b=!1,w,j=new Array(y),E=new Array(y);for(i==null&&(l=o(w=c())),f=0;f<=y;++f){if(!(f<y&&s(x=h[f],f,h))===b)if(b=!b)m=f,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),v=f-1;v>=m;--v)l.point(j[v],E[v]);l.lineEnd(),l.areaEnd()}b&&(j[f]=+t(x,f,h),E[f]=+e(x,f,h),l.point(n?+n(x,f,h):j[f],r?+r(x,f,h):E[f]))}if(w)return l=null,w+""||null}function d(){return d5().defined(s).curve(o).context(i)}return u.x=function(h){return arguments.length?(t=typeof h=="function"?h:Rt(+h),n=null,u):t},u.x0=function(h){return arguments.length?(t=typeof h=="function"?h:Rt(+h),u):t},u.x1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:Rt(+h),u):n},u.y=function(h){return arguments.length?(e=typeof h=="function"?h:Rt(+h),r=null,u):e},u.y0=function(h){return arguments.length?(e=typeof h=="function"?h:Rt(+h),u):e},u.y1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:Rt(+h),u):r},u.lineX0=u.lineY0=function(){return d().x(t).y(e)},u.lineY1=function(){return d().x(t).y(r)},u.lineX1=function(){return d().x(n).y(e)},u.defined=function(h){return arguments.length?(s=typeof h=="function"?h:Rt(!!h),u):s},u.curve=function(h){return arguments.length?(o=h,i!=null&&(l=o(i)),u):o},u.context=function(h){return arguments.length?(h==null?i=l=null:l=o(i=h),u):i},u}class h5{constructor(e,r){this._context=e,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,r){switch(e=+e,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,r,e,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,e,this._y0,e,r);break}}this._x0=e,this._y0=r}}function rle(t){return new h5(t,!0)}function nle(t){return new h5(t,!1)}const Vj={draw(t,e){const r=Ys(e/Ip);t.moveTo(r,0),t.arc(0,0,r,0,Wy)}},sle={draw(t,e){const r=Ys(e/5)/2;t.moveTo(-3*r,-r),t.lineTo(-r,-r),t.lineTo(-r,-3*r),t.lineTo(r,-3*r),t.lineTo(r,-r),t.lineTo(3*r,-r),t.lineTo(3*r,r),t.lineTo(r,r),t.lineTo(r,3*r),t.lineTo(-r,3*r),t.lineTo(-r,r),t.lineTo(-3*r,r),t.closePath()}},f5=Ys(1/3),ale=f5*2,ile={draw(t,e){const r=Ys(e/ale),n=r*f5;t.moveTo(0,-r),t.lineTo(n,0),t.lineTo(0,r),t.lineTo(-n,0),t.closePath()}},ole={draw(t,e){const r=Ys(e),n=-r/2;t.rect(n,n,r,r)}},lle=.8908130915292852,m5=kp(Ip/10)/kp(7*Ip/10),cle=kp(Wy/10)*m5,ule=-i5(Wy/10)*m5,dle={draw(t,e){const r=Ys(e*lle),n=cle*r,s=ule*r;t.moveTo(0,-r),t.lineTo(n,s);for(let i=1;i<5;++i){const o=Wy*i/5,l=i5(o),c=kp(o);t.lineTo(c*r,-l*r),t.lineTo(l*n-c*s,c*n+l*s)}t.closePath()}},Ox=Ys(3),hle={draw(t,e){const r=-Ys(e/(Ox*3));t.moveTo(0,r*2),t.lineTo(-Ox*r,-r),t.lineTo(Ox*r,-r),t.closePath()}},as=-.5,is=Ys(3)/2,v0=1/Ys(12),fle=(v0/2+1)*3,mle={draw(t,e){const r=Ys(e/fle),n=r/2,s=r*v0,i=n,o=r*v0+r,l=-i,c=o;t.moveTo(n,s),t.lineTo(i,o),t.lineTo(l,c),t.lineTo(as*n-is*s,is*n+as*s),t.lineTo(as*i-is*o,is*i+as*o),t.lineTo(as*l-is*c,is*l+as*c),t.lineTo(as*n+is*s,as*s-is*n),t.lineTo(as*i+is*o,as*o-is*i),t.lineTo(as*l+is*c,as*c-is*l),t.closePath()}};function ple(t,e){let r=null,n=Uj(s);t=typeof t=="function"?t:Rt(t||Vj),e=typeof e=="function"?e:Rt(e===void 0?64:+e);function s(){let i;if(r||(r=i=n()),t.apply(this,arguments).draw(r,+e.apply(this,arguments)),i)return r=null,i+""||null}return s.type=function(i){return arguments.length?(t=typeof i=="function"?i:Rt(i),s):t},s.size=function(i){return arguments.length?(e=typeof i=="function"?i:Rt(+i),s):e},s.context=function(i){return arguments.length?(r=i??null,s):r},s}function Rp(){}function Op(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function p5(t){this._context=t}p5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Op(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Op(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function gle(t){return new p5(t)}function g5(t){this._context=t}g5.prototype={areaStart:Rp,areaEnd:Rp,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Op(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function yle(t){return new g5(t)}function y5(t){this._context=t}y5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:Op(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function vle(t){return new y5(t)}function v5(t){this._context=t}v5.prototype={areaStart:Rp,areaEnd:Rp,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function xle(t){return new v5(t)}function IP(t){return t<0?-1:1}function RP(t,e,r){var n=t._x1-t._x0,s=e-t._x1,i=(t._y1-t._y0)/(n||s<0&&-0),o=(r-t._y1)/(s||n<0&&-0),l=(i*s+o*n)/(n+s);return(IP(i)+IP(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function OP(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function Dx(t,e,r){var n=t._x0,s=t._y0,i=t._x1,o=t._y1,l=(i-n)/3;t._context.bezierCurveTo(n+l,s+l*e,i-l,o-l*r,i,o)}function Dp(t){this._context=t}Dp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Dx(this,this._t0,OP(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Dx(this,OP(this,r=RP(this,t,e)),r);break;default:Dx(this,this._t0,r=RP(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}};function x5(t){this._context=new b5(t)}(x5.prototype=Object.create(Dp.prototype)).point=function(t,e){Dp.prototype.point.call(this,e,t)};function b5(t){this._context=t}b5.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,r,n,s,i){this._context.bezierCurveTo(e,t,n,r,i,s)}};function ble(t){return new Dp(t)}function wle(t){return new x5(t)}function w5(t){this._context=t}w5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),r===2)this._context.lineTo(t[1],e[1]);else for(var n=DP(t),s=DP(e),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(n[0][i],s[0][i],n[1][i],s[1][i],t[o],e[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function DP(t){var e,r=t.length-1,n,s=new Array(r),i=new Array(r),o=new Array(r);for(s[0]=0,i[0]=2,o[0]=t[0]+2*t[1],e=1;e<r-1;++e)s[e]=1,i[e]=4,o[e]=4*t[e]+2*t[e+1];for(s[r-1]=2,i[r-1]=7,o[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=s[e]/i[e-1],i[e]-=n,o[e]-=n*o[e-1];for(s[r-1]=o[r-1]/i[r-1],e=r-2;e>=0;--e)s[e]=(o[e]-s[e+1])/i[e];for(i[r-1]=(t[r]+s[r-1])/2,e=0;e<r-1;++e)i[e]=2*t[e+1]-s[e+1];return[s,i]}function jle(t){return new w5(t)}function Hy(t,e){this._context=t,this._t=e}Hy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,e)}break}}this._x=t,this._y=e}};function Nle(t){return new Hy(t,.5)}function _le(t){return new Hy(t,0)}function Sle(t){return new Hy(t,1)}function ru(t,e){if((o=t.length)>1)for(var r=1,n,s,i=t[e[0]],o,l=i.length;r<o;++r)for(s=i,i=t[e[r]],n=0;n<l;++n)i[n][1]+=i[n][0]=isNaN(s[n][1])?s[n][0]:s[n][1]}function x0(t){for(var e=t.length,r=new Array(e);--e>=0;)r[e]=e;return r}function Ale(t,e){return t[e]}function Ele(t){const e=[];return e.key=t,e}function Ple(){var t=Rt([]),e=x0,r=ru,n=Ale;function s(i){var o=Array.from(t.apply(this,arguments),Ele),l,c=o.length,u=-1,d;for(const h of i)for(l=0,++u;l<c;++l)(o[l][u]=[0,+n(h,o[l].key,u,i)]).data=h;for(l=0,d=Bj(e(o));l<c;++l)o[d[l]].index=l;return r(o,d),o}return s.keys=function(i){return arguments.length?(t=typeof i=="function"?i:Rt(Array.from(i)),s):t},s.value=function(i){return arguments.length?(n=typeof i=="function"?i:Rt(+i),s):n},s.order=function(i){return arguments.length?(e=i==null?x0:typeof i=="function"?i:Rt(Array.from(i)),s):e},s.offset=function(i){return arguments.length?(r=i??ru,s):r},s}function Tle(t,e){if((n=t.length)>0){for(var r,n,s=0,i=t[0].length,o;s<i;++s){for(o=r=0;r<n;++r)o+=t[r][s][1]||0;if(o)for(r=0;r<n;++r)t[r][s][1]/=o}ru(t,e)}}function Cle(t,e){if((s=t.length)>0){for(var r=0,n=t[e[0]],s,i=n.length;r<i;++r){for(var o=0,l=0;o<s;++o)l+=t[o][r][1]||0;n[r][1]+=n[r][0]=-l/2}ru(t,e)}}function kle(t,e){if(!(!((o=t.length)>0)||!((i=(s=t[e[0]]).length)>0))){for(var r=0,n=1,s,i,o;n<i;++n){for(var l=0,c=0,u=0;l<o;++l){for(var d=t[e[l]],h=d[n][1]||0,f=d[n-1][1]||0,m=(h-f)/2,v=0;v<l;++v){var y=t[e[v]],x=y[n][1]||0,b=y[n-1][1]||0;m+=x-b}c+=h,u+=m*h}s[n-1][1]+=s[n-1][0]=r,c&&(r-=u/c)}s[n-1][1]+=s[n-1][0]=r,ru(t,e)}}var Ile=["type","size","sizeType"];function b0(){return b0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},b0.apply(null,arguments)}function MP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function LP(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?MP(Object(r),!0).forEach(function(n){Rle(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):MP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Rle(t,e,r){return(e=Ole(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ole(t){var e=Dle(t,"string");return typeof e=="symbol"?e:e+""}function Dle(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Mle(t,e){if(t==null)return{};var r,n,s=Lle(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(s[r]=t[r])}return s}function Lle(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var j5={symbolCircle:Vj,symbolCross:sle,symbolDiamond:ile,symbolSquare:ole,symbolStar:dle,symbolTriangle:hle,symbolWye:mle},Fle=Math.PI/180,$le=t=>{var e="symbol".concat(Hh(t));return j5[e]||Vj},Ule=(t,e,r)=>{if(e==="area")return t;switch(r){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var n=18*Fle;return 1.25*t*t*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},Ble=(t,e)=>{j5["symbol".concat(Hh(t))]=e},zj=t=>{var{type:e="circle",size:r=64,sizeType:n="area"}=t,s=Mle(t,Ile),i=LP(LP({},s),{},{type:e,size:r,sizeType:n}),o="circle";typeof e=="string"&&(o=e);var l=()=>{var f=$le(o),m=ple().type(f).size(Ule(r,n,o));return m()},{className:c,cx:u,cy:d}=i,h=Gt(i,!0);return u===+u&&d===+d&&r===+r?p.createElement("path",b0({},h,{className:lt("recharts-symbols",c),transform:"translate(".concat(u,", ").concat(d,")"),d:l()})):null};zj.registerSymbol=Ble;function w0(){return w0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},w0.apply(null,arguments)}function FP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Vle(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?FP(Object(r),!0).forEach(function(n){Gj(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):FP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Gj(t,e,r){return(e=zle(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function zle(t){var e=Gle(t,"string");return typeof e=="symbol"?e:e+""}function Gle(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var os=32;class Wj extends p.PureComponent{renderIcon(e,r){var{inactiveColor:n}=this.props,s=os/2,i=os/6,o=os/3,l=e.inactive?n:e.color,c=r??e.type;if(c==="none")return null;if(c==="plainline")return p.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:e.payload.strokeDasharray,x1:0,y1:s,x2:os,y2:s,className:"recharts-legend-icon"});if(c==="line")return p.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(s,"h").concat(o,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(2*o,",").concat(s,`
            H`).concat(os,"M").concat(2*o,",").concat(s,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(o,",").concat(s),className:"recharts-legend-icon"});if(c==="rect")return p.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(os/8,"h").concat(os,"v").concat(os*3/4,"h").concat(-os,"z"),className:"recharts-legend-icon"});if(p.isValidElement(e.legendIcon)){var u=Vle({},e);return delete u.legendIcon,p.cloneElement(e.legendIcon,u)}return p.createElement(zj,{fill:l,cx:s,cy:s,size:os,sizeType:"diameter",type:c})}renderItems(){var{payload:e,iconSize:r,layout:n,formatter:s,inactiveColor:i,iconType:o}=this.props,l={x:0,y:0,width:os,height:os},c={display:n==="horizontal"?"inline-block":"block",marginRight:10},u={display:"inline-block",verticalAlign:"middle",marginRight:4};return e.map((d,h)=>{var f=d.formatter||s,m=lt({"recharts-legend-item":!0,["legend-item-".concat(h)]:!0,inactive:d.inactive});if(d.type==="none")return null;var v=d.inactive?i:d.color,y=f?f(d.value,d,h):d.value;return p.createElement("li",w0({className:m,style:c,key:"legend-item-".concat(h)},Kh(this.props,d,h)),p.createElement($j,{width:r,height:r,viewBox:l,style:u,"aria-label":"".concat(y," legend icon")},this.renderIcon(d,o)),p.createElement("span",{className:"recharts-legend-item-text",style:{color:v}},y))})}render(){var{payload:e,layout:r,align:n}=this.props;if(!e||!e.length)return null;var s={padding:0,margin:0,textAlign:r==="horizontal"?n:"left"};return p.createElement("ul",{className:"recharts-default-legend",style:s},this.renderItems())}}Gj(Wj,"displayName","Legend");Gj(Wj,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var N5={},_5={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n){const s=new Map;for(let i=0;i<r.length;i++){const o=r[i],l=n(o);s.has(l)||s.set(l,o)}return Array.from(s.values())}t.uniqBy=e})(_5);var qj={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r}t.identity=e})(qj);var S5={},Ky={},A5={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return Number.isSafeInteger(r)&&r>=0}t.isLength=e})(A5);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=A5;function r(n){return n!=null&&typeof n!="function"&&e.isLength(n.length)}t.isArrayLike=r})(Ky);var E5={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="object"&&r!==null}t.isObjectLike=e})(E5);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Ky,r=E5;function n(s){return r.isObjectLike(s)&&e.isArrayLike(s)}t.isArrayLikeObject=n})(S5);var P5={},T5={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Iy;function r(n){return function(s){return e.get(s,n)}}t.property=r})(T5);var C5={},Mx={},Lx={},Hj={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r!==null&&(typeof r=="object"||typeof r=="function")}t.isObject=e})(Hj);var Kj={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r==null||typeof r!="object"&&typeof r!="function"}t.isPrimitive=e})(Kj);var Yj={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}t.eq=e})(Yj);var $P;function Wle(){return $P||($P=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Qj(),r=Hj,n=Kj,s=Yj;function i(h,f,m){return typeof m!="function"?e.isMatch(h,f):o(h,f,function v(y,x,b,w,j,E){const I=m(y,x,b,w,j,E);return I!==void 0?!!I:o(y,x,v,E)},new Map)}function o(h,f,m,v){if(f===h)return!0;switch(typeof f){case"object":return l(h,f,m,v);case"function":return Object.keys(f).length>0?o(h,{...f},m,v):s.eq(h,f);default:return r.isObject(h)?typeof f=="string"?f==="":!0:s.eq(h,f)}}function l(h,f,m,v){if(f==null)return!0;if(Array.isArray(f))return u(h,f,m,v);if(f instanceof Map)return c(h,f,m,v);if(f instanceof Set)return d(h,f,m,v);const y=Object.keys(f);if(h==null)return y.length===0;if(y.length===0)return!0;if(v&&v.has(f))return v.get(f)===h;v&&v.set(f,h);try{for(let x=0;x<y.length;x++){const b=y[x];if(!n.isPrimitive(h)&&!(b in h)||f[b]===void 0&&h[b]!==void 0||f[b]===null&&h[b]!==null||!m(h[b],f[b],b,h,f,v))return!1}return!0}finally{v&&v.delete(f)}}function c(h,f,m,v){if(f.size===0)return!0;if(!(h instanceof Map))return!1;for(const[y,x]of f.entries()){const b=h.get(y);if(m(b,x,y,h,f,v)===!1)return!1}return!0}function u(h,f,m,v){if(f.length===0)return!0;if(!Array.isArray(h))return!1;const y=new Set;for(let x=0;x<f.length;x++){const b=f[x];let w=!1;for(let j=0;j<h.length;j++){if(y.has(j))continue;const E=h[j];let I=!1;if(m(E,b,x,h,f,v)&&(I=!0),I){y.add(j),w=!0;break}}if(!w)return!1}return!0}function d(h,f,m,v){return f.size===0?!0:h instanceof Set?u([...h],[...f],m,v):!1}t.isMatchWith=i,t.isSetMatch=d}(Lx)),Lx}var UP;function Qj(){return UP||(UP=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Wle();function r(n,s){return e.isMatchWith(n,s,()=>{})}t.isMatch=r}(Mx)),Mx}var k5={},Xj={},I5={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}t.getSymbols=e})(I5);var Jj={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}t.getTag=e})(Jj);var Zj={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",r="[object String]",n="[object Number]",s="[object Boolean]",i="[object Arguments]",o="[object Symbol]",l="[object Date]",c="[object Map]",u="[object Set]",d="[object Array]",h="[object Function]",f="[object ArrayBuffer]",m="[object Object]",v="[object Error]",y="[object DataView]",x="[object Uint8Array]",b="[object Uint8ClampedArray]",w="[object Uint16Array]",j="[object Uint32Array]",E="[object BigUint64Array]",I="[object Int8Array]",O="[object Int16Array]",T="[object Int32Array]",A="[object BigInt64Array]",S="[object Float32Array]",_="[object Float64Array]";t.argumentsTag=i,t.arrayBufferTag=f,t.arrayTag=d,t.bigInt64ArrayTag=A,t.bigUint64ArrayTag=E,t.booleanTag=s,t.dataViewTag=y,t.dateTag=l,t.errorTag=v,t.float32ArrayTag=S,t.float64ArrayTag=_,t.functionTag=h,t.int16ArrayTag=O,t.int32ArrayTag=T,t.int8ArrayTag=I,t.mapTag=c,t.numberTag=n,t.objectTag=m,t.regexpTag=e,t.setTag=u,t.stringTag=r,t.symbolTag=o,t.uint16ArrayTag=w,t.uint32ArrayTag=j,t.uint8ArrayTag=x,t.uint8ClampedArrayTag=b})(Zj);var R5={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}t.isTypedArray=e})(R5);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=I5,r=Jj,n=Zj,s=Kj,i=R5;function o(d,h){return l(d,void 0,d,new Map,h)}function l(d,h,f,m=new Map,v=void 0){const y=v==null?void 0:v(d,h,f,m);if(y!==void 0)return y;if(s.isPrimitive(d))return d;if(m.has(d))return m.get(d);if(Array.isArray(d)){const x=new Array(d.length);m.set(d,x);for(let b=0;b<d.length;b++)x[b]=l(d[b],b,f,m,v);return Object.hasOwn(d,"index")&&(x.index=d.index),Object.hasOwn(d,"input")&&(x.input=d.input),x}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const x=new RegExp(d.source,d.flags);return x.lastIndex=d.lastIndex,x}if(d instanceof Map){const x=new Map;m.set(d,x);for(const[b,w]of d)x.set(b,l(w,b,f,m,v));return x}if(d instanceof Set){const x=new Set;m.set(d,x);for(const b of d)x.add(l(b,void 0,f,m,v));return x}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(i.isTypedArray(d)){const x=new(Object.getPrototypeOf(d)).constructor(d.length);m.set(d,x);for(let b=0;b<d.length;b++)x[b]=l(d[b],b,f,m,v);return x}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const x=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return m.set(d,x),c(x,d,f,m,v),x}if(typeof File<"u"&&d instanceof File){const x=new File([d],d.name,{type:d.type});return m.set(d,x),c(x,d,f,m,v),x}if(d instanceof Blob){const x=new Blob([d],{type:d.type});return m.set(d,x),c(x,d,f,m,v),x}if(d instanceof Error){const x=new d.constructor;return m.set(d,x),x.message=d.message,x.name=d.name,x.stack=d.stack,x.cause=d.cause,c(x,d,f,m,v),x}if(typeof d=="object"&&u(d)){const x=Object.create(Object.getPrototypeOf(d));return m.set(d,x),c(x,d,f,m,v),x}return d}function c(d,h,f=d,m,v){const y=[...Object.keys(h),...e.getSymbols(h)];for(let x=0;x<y.length;x++){const b=y[x],w=Object.getOwnPropertyDescriptor(d,b);(w==null||w.writable)&&(d[b]=l(h[b],b,f,m,v))}}function u(d){switch(r.getTag(d)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=o,t.cloneDeepWithImpl=l,t.copyProperties=c})(Xj);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Xj;function r(n){return e.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}t.cloneDeep=r})(k5);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Qj(),r=k5;function n(s){return s=r.cloneDeep(s),i=>e.isMatch(i,s)}t.matches=n})(C5);var O5={},D5={},M5={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Xj,r=Zj;function n(s,i){return e.cloneDeepWith(s,(o,l,c,u)=>{const d=i==null?void 0:i(o,l,c,u);if(d!==void 0)return d;if(typeof s=="object")switch(Object.prototype.toString.call(s)){case r.numberTag:case r.stringTag:case r.booleanTag:{const h=new s.constructor(s==null?void 0:s.valueOf());return e.copyProperties(h,s),h}case r.argumentsTag:{const h={};return e.copyProperties(h,s),h.length=s.length,h[Symbol.iterator]=s[Symbol.iterator],h}default:return}})}t.cloneDeepWith=n})(M5);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=M5;function r(n){return e.cloneDeepWith(n)}t.cloneDeep=r})(D5);var L5={},eN={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function r(n,s=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<s;case"symbol":return!1;case"string":return e.test(n)}}t.isIndex=r})(eN);var F5={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Jj;function r(n){return n!==null&&typeof n=="object"&&e.getTag(n)==="[object Arguments]"}t.isArguments=r})(F5);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Ij,r=eN,n=F5,s=Ry;function i(o,l){let c;if(Array.isArray(l)?c=l:typeof l=="string"&&e.isDeepKey(l)&&(o==null?void 0:o[l])==null?c=s.toPath(l):c=[l],c.length===0)return!1;let u=o;for(let d=0;d<c.length;d++){const h=c[d];if((u==null||!Object.hasOwn(u,h))&&!((Array.isArray(u)||n.isArguments(u))&&r.isIndex(h)&&h<u.length))return!1;u=u[h]}return!0}t.has=i})(L5);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Qj(),r=Rj,n=D5,s=Iy,i=L5;function o(l,c){switch(typeof l){case"object":{Object.is(l==null?void 0:l.valueOf(),-0)&&(l="-0");break}case"number":{l=r.toKey(l);break}}return c=n.cloneDeep(c),function(u){const d=s.get(u,l);return d===void 0?i.has(u,l):c===void 0?d===void 0:e.isMatch(d,c)}}t.matchesProperty=o})(O5);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=qj,r=T5,n=C5,s=O5;function i(o){if(o==null)return e.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?s.matchesProperty(o[0],o[1]):n.matches(o);case"string":case"symbol":case"number":return r.property(o)}}t.iteratee=i})(P5);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=_5,r=qj,n=S5,s=P5;function i(o,l=r.identity){return n.isArrayLikeObject(o)?e.uniqBy(Array.from(o),s.iteratee(l)):[]}t.uniqBy=i})(N5);var qle=N5.uniqBy;const BP=_o(qle);function $5(t,e,r){return e===!0?BP(t,r):typeof e=="function"?BP(t,e):t}var U5={exports:{}},B5={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yy=p,Hle=dM;function Kle(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Yle=typeof Object.is=="function"?Object.is:Kle,Qle=Hle.useSyncExternalStore,Xle=Yy.useRef,Jle=Yy.useEffect,Zle=Yy.useMemo,ece=Yy.useDebugValue;B5.useSyncExternalStoreWithSelector=function(t,e,r,n,s){var i=Xle(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=Zle(function(){function c(m){if(!u){if(u=!0,d=m,m=n(m),s!==void 0&&o.hasValue){var v=o.value;if(s(v,m))return h=v}return h=m}if(v=h,Yle(d,m))return v;var y=n(m);return s!==void 0&&s(v,y)?(d=m,v):(d=m,h=y)}var u=!1,d,h,f=r===void 0?null:r;return[function(){return c(e())},f===null?void 0:function(){return c(f())}]},[e,r,n,s]);var l=Qle(t,i[0],i[1]);return Jle(function(){o.hasValue=!0,o.value=l},[l]),ece(l),l};U5.exports=B5;var tce=U5.exports,tN=p.createContext(null),rce=t=>t,rr=()=>{var t=p.useContext(tN);return t?t.store.dispatch:rce},Fm=()=>{},nce=()=>Fm,sce=(t,e)=>t===e;function Oe(t){var e=p.useContext(tN);return tce.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:nce,e?e.store.getState:Fm,e?e.store.getState:Fm,e?t:Fm,sce)}function ace(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function ice(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function oce(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(r=>typeof r=="function")){const r=t.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${e}[${r}]`)}}var VP=t=>Array.isArray(t)?t:[t];function lce(t){const e=Array.isArray(t[0])?t[0]:t;return oce(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function cce(t,e){const r=[],{length:n}=t;for(let s=0;s<n;s++)r.push(t[s].apply(null,e));return r}var uce=class{constructor(t){this.value=t}deref(){return this.value}},dce=typeof WeakRef<"u"?WeakRef:uce,hce=0,zP=1;function rm(){return{s:hce,v:void 0,o:null,p:null}}function V5(t,e={}){let r=rm();const{resultEqualityCheck:n}=e;let s,i=0;function o(){var h;let l=r;const{length:c}=arguments;for(let f=0,m=c;f<m;f++){const v=arguments[f];if(typeof v=="function"||typeof v=="object"&&v!==null){let y=l.o;y===null&&(l.o=y=new WeakMap);const x=y.get(v);x===void 0?(l=rm(),y.set(v,l)):l=x}else{let y=l.p;y===null&&(l.p=y=new Map);const x=y.get(v);x===void 0?(l=rm(),y.set(v,l)):l=x}}const u=l;let d;if(l.s===zP)d=l.v;else if(d=t.apply(null,arguments),i++,n){const f=((h=s==null?void 0:s.deref)==null?void 0:h.call(s))??s;f!=null&&n(f,d)&&(d=f,i!==0&&i--),s=typeof d=="object"&&d!==null||typeof d=="function"?new dce(d):d}return u.s=zP,u.v=d,d}return o.clearCache=()=>{r=rm(),o.resetResultsCount()},o.resultsCount=()=>i,o.resetResultsCount=()=>{i=0},o}function fce(t,...e){const r=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,n=(...s)=>{let i=0,o=0,l,c={},u=s.pop();typeof u=="object"&&(c=u,u=s.pop()),ace(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const d={...r,...c},{memoize:h,memoizeOptions:f=[],argsMemoize:m=V5,argsMemoizeOptions:v=[],devModeChecks:y={}}=d,x=VP(f),b=VP(v),w=lce(s),j=h(function(){return i++,u.apply(null,arguments)},...x),E=m(function(){o++;const O=cce(w,arguments);return l=j.apply(null,O),l},...b);return Object.assign(E,{resultFunc:u,memoizedResultFunc:j,dependencies:w,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>l,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:h,argsMemoize:m})};return Object.assign(n,{withTypes:()=>n}),n}var X=fce(V5),mce=Object.assign((t,e=X)=>{ice(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const r=Object.keys(t),n=r.map(i=>t[i]);return e(n,(...i)=>i.reduce((o,l,c)=>(o[r[c]]=l,o),{}))},{withTypes:()=>mce}),z5={},G5={},W5={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,s,i)=>{if(n!==s){const o=e(n),l=e(s);if(o===l&&o===0){if(n<s)return i==="desc"?1:-1;if(n>s)return i==="desc"?-1:1}return i==="desc"?l-o:o-l}return 0};t.compareValues=r})(W5);var q5={},rN={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"||r instanceof Symbol}t.isSymbol=e})(rN);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=rN,r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function s(i,o){return Array.isArray(i)?!1:typeof i=="number"||typeof i=="boolean"||i==null||e.isSymbol(i)?!0:typeof i=="string"&&(n.test(i)||!r.test(i))||o!=null&&Object.hasOwn(o,i)}t.isKey=s})(q5);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=W5,r=q5,n=Ry;function s(i,o,l,c){if(i==null)return[];l=c?void 0:l,Array.isArray(i)||(i=Object.values(i)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(m=>String(m));const u=(m,v)=>{let y=m;for(let x=0;x<v.length&&y!=null;++x)y=y[v[x]];return y},d=(m,v)=>v==null||m==null?v:typeof m=="object"&&"key"in m?Object.hasOwn(v,m.key)?v[m.key]:u(v,m.path):typeof m=="function"?m(v):Array.isArray(m)?u(v,m):typeof v=="object"?v[m]:v,h=o.map(m=>(Array.isArray(m)&&m.length===1&&(m=m[0]),m==null||typeof m=="function"||Array.isArray(m)||r.isKey(m)?m:{key:m,path:n.toPath(m)}));return i.map(m=>({original:m,criteria:h.map(v=>d(v,m))})).slice().sort((m,v)=>{for(let y=0;y<h.length;y++){const x=e.compareValues(m.criteria[y],v.criteria[y],l[y]);if(x!==0)return x}return 0}).map(m=>m.original)}t.orderBy=s})(G5);var H5={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n=1){const s=[],i=Math.floor(n),o=(l,c)=>{for(let u=0;u<l.length;u++){const d=l[u];Array.isArray(d)&&c<i?o(d,c+1):s.push(d)}};return o(r,0),s}t.flatten=e})(H5);var nN={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=eN,r=Ky,n=Hj,s=Yj;function i(o,l,c){return n.isObject(c)&&(typeof l=="number"&&r.isArrayLike(c)&&e.isIndex(l)&&l<c.length||typeof l=="string"&&l in c)?s.eq(c[l],o):!1}t.isIterateeCall=i})(nN);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=G5,r=H5,n=nN;function s(i,...o){const l=o.length;return l>1&&n.isIterateeCall(i,o[0],o[1])?o=[]:l>2&&n.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),e.orderBy(i,r.flatten(o),["asc"])}t.sortBy=s})(z5);var pce=z5.sortBy;const Qy=_o(pce);var K5=t=>t.legend.settings,gce=t=>t.legend.size,yce=t=>t.legend.payload,vce=X([yce,K5],(t,e)=>{var{itemSorter:r}=e,n=t.flat(1);return r?Qy(n,r):n});function xce(){return Oe(vce)}var nm=1;function Y5(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,r]=p.useState({height:0,left:0,top:0,width:0}),n=p.useCallback(s=>{if(s!=null){var i=s.getBoundingClientRect(),o={height:i.height,left:i.left,top:i.top,width:i.width};(Math.abs(o.height-e.height)>nm||Math.abs(o.left-e.left)>nm||Math.abs(o.top-e.top)>nm||Math.abs(o.width-e.width)>nm)&&r({height:o.height,left:o.left,top:o.top,width:o.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,n]}function Vr(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var bce=typeof Symbol=="function"&&Symbol.observable||"@@observable",GP=bce,Fx=()=>Math.random().toString(36).substring(7).split("").join("."),wce={INIT:`@@redux/INIT${Fx()}`,REPLACE:`@@redux/REPLACE${Fx()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Fx()}`},Mp=wce;function sN(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function Q5(t,e,r){if(typeof t!="function")throw new Error(Vr(2));if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Vr(0));if(typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Vr(1));return r(Q5)(t,e)}let n=t,s=e,i=new Map,o=i,l=0,c=!1;function u(){o===i&&(o=new Map,i.forEach((x,b)=>{o.set(b,x)}))}function d(){if(c)throw new Error(Vr(3));return s}function h(x){if(typeof x!="function")throw new Error(Vr(4));if(c)throw new Error(Vr(5));let b=!0;u();const w=l++;return o.set(w,x),function(){if(b){if(c)throw new Error(Vr(6));b=!1,u(),o.delete(w),i=null}}}function f(x){if(!sN(x))throw new Error(Vr(7));if(typeof x.type>"u")throw new Error(Vr(8));if(typeof x.type!="string")throw new Error(Vr(17));if(c)throw new Error(Vr(9));try{c=!0,s=n(s,x)}finally{c=!1}return(i=o).forEach(w=>{w()}),x}function m(x){if(typeof x!="function")throw new Error(Vr(10));n=x,f({type:Mp.REPLACE})}function v(){const x=h;return{subscribe(b){if(typeof b!="object"||b===null)throw new Error(Vr(11));function w(){const E=b;E.next&&E.next(d())}return w(),{unsubscribe:x(w)}},[GP](){return this}}}return f({type:Mp.INIT}),{dispatch:f,subscribe:h,getState:d,replaceReducer:m,[GP]:v}}function jce(t){Object.keys(t).forEach(e=>{const r=t[e];if(typeof r(void 0,{type:Mp.INIT})>"u")throw new Error(Vr(12));if(typeof r(void 0,{type:Mp.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Vr(13))})}function X5(t){const e=Object.keys(t),r={};for(let i=0;i<e.length;i++){const o=e[i];typeof t[o]=="function"&&(r[o]=t[o])}const n=Object.keys(r);let s;try{jce(r)}catch(i){s=i}return function(o={},l){if(s)throw s;let c=!1;const u={};for(let d=0;d<n.length;d++){const h=n[d],f=r[h],m=o[h],v=f(m,l);if(typeof v>"u")throw l&&l.type,new Error(Vr(14));u[h]=v,c=c||v!==m}return c=c||n.length!==Object.keys(o).length,c?u:o}}function Lp(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,r)=>(...n)=>e(r(...n)))}function Nce(...t){return e=>(r,n)=>{const s=e(r,n);let i=()=>{throw new Error(Vr(15))};const o={getState:s.getState,dispatch:(c,...u)=>i(c,...u)},l=t.map(c=>c(o));return i=Lp(...l)(s.dispatch),{...s,dispatch:i}}}function J5(t){return sN(t)&&"type"in t&&typeof t.type=="string"}var Z5=Symbol.for("immer-nothing"),WP=Symbol.for("immer-draftable"),es=Symbol.for("immer-state");function Ds(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var nu=Object.getPrototypeOf;function Dl(t){return!!t&&!!t[es]}function ui(t){var e;return t?e6(t)||Array.isArray(t)||!!t[WP]||!!((e=t.constructor)!=null&&e[WP])||Yh(t)||Jy(t):!1}var _ce=Object.prototype.constructor.toString();function e6(t){if(!t||typeof t!="object")return!1;const e=nu(t);if(e===null)return!0;const r=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===_ce}function Fp(t,e){Xy(t)===0?Reflect.ownKeys(t).forEach(r=>{e(r,t[r],t)}):t.forEach((r,n)=>e(n,r,t))}function Xy(t){const e=t[es];return e?e.type_:Array.isArray(t)?1:Yh(t)?2:Jy(t)?3:0}function j0(t,e){return Xy(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function t6(t,e,r){const n=Xy(t);n===2?t.set(e,r):n===3?t.add(r):t[e]=r}function Sce(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function Yh(t){return t instanceof Map}function Jy(t){return t instanceof Set}function Qo(t){return t.copy_||t.base_}function N0(t,e){if(Yh(t))return new Map(t);if(Jy(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const r=e6(t);if(e===!0||e==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(t);delete n[es];let s=Reflect.ownKeys(n);for(let i=0;i<s.length;i++){const o=s[i],l=n[o];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(n[o]={configurable:!0,writable:!0,enumerable:l.enumerable,value:t[o]})}return Object.create(nu(t),n)}else{const n=nu(t);if(n!==null&&r)return{...t};const s=Object.create(n);return Object.assign(s,t)}}function aN(t,e=!1){return Zy(t)||Dl(t)||!ui(t)||(Xy(t)>1&&Object.defineProperties(t,{set:{value:sm},add:{value:sm},clear:{value:sm},delete:{value:sm}}),Object.freeze(t),e&&Object.values(t).forEach(r=>aN(r,!0))),t}function sm(){Ds(2)}function Zy(t){return Object.isFrozen(t)}var Ace={};function Ml(t){const e=Ace[t];return e||Ds(0,t),e}var Zd;function r6(){return Zd}function Ece(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function qP(t,e){e&&(Ml("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function _0(t){S0(t),t.drafts_.forEach(Pce),t.drafts_=null}function S0(t){t===Zd&&(Zd=t.parent_)}function HP(t){return Zd=Ece(Zd,t)}function Pce(t){const e=t[es];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function KP(t,e){e.unfinalizedDrafts_=e.drafts_.length;const r=e.drafts_[0];return t!==void 0&&t!==r?(r[es].modified_&&(_0(e),Ds(4)),ui(t)&&(t=$p(e,t),e.parent_||Up(e,t)),e.patches_&&Ml("Patches").generateReplacementPatches_(r[es].base_,t,e.patches_,e.inversePatches_)):t=$p(e,r,[]),_0(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==Z5?t:void 0}function $p(t,e,r){if(Zy(e))return e;const n=e[es];if(!n)return Fp(e,(s,i)=>YP(t,n,e,s,i,r)),e;if(n.scope_!==t)return e;if(!n.modified_)return Up(t,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const s=n.copy_;let i=s,o=!1;n.type_===3&&(i=new Set(s),s.clear(),o=!0),Fp(i,(l,c)=>YP(t,n,s,l,c,r,o)),Up(t,s,!1),r&&t.patches_&&Ml("Patches").generatePatches_(n,r,t.patches_,t.inversePatches_)}return n.copy_}function YP(t,e,r,n,s,i,o){if(Dl(s)){const l=i&&e&&e.type_!==3&&!j0(e.assigned_,n)?i.concat(n):void 0,c=$p(t,s,l);if(t6(r,n,c),Dl(c))t.canAutoFreeze_=!1;else return}else o&&r.add(s);if(ui(s)&&!Zy(s)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;$p(t,s),(!e||!e.scope_.parent_)&&typeof n!="symbol"&&(Yh(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&Up(t,s)}}function Up(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&aN(e,r)}function Tce(t,e){const r=Array.isArray(t),n={type_:r?1:0,scope_:e?e.scope_:r6(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=n,i=iN;r&&(s=[n],i=eh);const{revoke:o,proxy:l}=Proxy.revocable(s,i);return n.draft_=l,n.revoke_=o,l}var iN={get(t,e){if(e===es)return t;const r=Qo(t);if(!j0(r,e))return Cce(t,r,e);const n=r[e];return t.finalized_||!ui(n)?n:n===$x(t.base_,e)?(Ux(t),t.copy_[e]=E0(n,t)):n},has(t,e){return e in Qo(t)},ownKeys(t){return Reflect.ownKeys(Qo(t))},set(t,e,r){const n=n6(Qo(t),e);if(n!=null&&n.set)return n.set.call(t.draft_,r),!0;if(!t.modified_){const s=$x(Qo(t),e),i=s==null?void 0:s[es];if(i&&i.base_===r)return t.copy_[e]=r,t.assigned_[e]=!1,!0;if(Sce(r,s)&&(r!==void 0||j0(t.base_,e)))return!0;Ux(t),A0(t)}return t.copy_[e]===r&&(r!==void 0||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_[e]=!0),!0},deleteProperty(t,e){return $x(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,Ux(t),A0(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const r=Qo(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:n.enumerable,value:r[e]}},defineProperty(){Ds(11)},getPrototypeOf(t){return nu(t.base_)},setPrototypeOf(){Ds(12)}},eh={};Fp(iN,(t,e)=>{eh[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});eh.deleteProperty=function(t,e){return eh.set.call(this,t,e,void 0)};eh.set=function(t,e,r){return iN.set.call(this,t[0],e,r,t[0])};function $x(t,e){const r=t[es];return(r?Qo(r):t)[e]}function Cce(t,e,r){var s;const n=n6(e,r);return n?"value"in n?n.value:(s=n.get)==null?void 0:s.call(t.draft_):void 0}function n6(t,e){if(!(e in t))return;let r=nu(t);for(;r;){const n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=nu(r)}}function A0(t){t.modified_||(t.modified_=!0,t.parent_&&A0(t.parent_))}function Ux(t){t.copy_||(t.copy_=N0(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var kce=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,r,n)=>{if(typeof e=="function"&&typeof r!="function"){const i=r;r=e;const o=this;return function(c=i,...u){return o.produce(c,d=>r.call(this,d,...u))}}typeof r!="function"&&Ds(6),n!==void 0&&typeof n!="function"&&Ds(7);let s;if(ui(e)){const i=HP(this),o=E0(e,void 0);let l=!0;try{s=r(o),l=!1}finally{l?_0(i):S0(i)}return qP(i,n),KP(s,i)}else if(!e||typeof e!="object"){if(s=r(e),s===void 0&&(s=e),s===Z5&&(s=void 0),this.autoFreeze_&&aN(s,!0),n){const i=[],o=[];Ml("Patches").generateReplacementPatches_(e,s,i,o),n(i,o)}return s}else Ds(1,e)},this.produceWithPatches=(e,r)=>{if(typeof e=="function")return(o,...l)=>this.produceWithPatches(o,c=>e(c,...l));let n,s;return[this.produce(e,r,(o,l)=>{n=o,s=l}),n,s]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){ui(t)||Ds(8),Dl(t)&&(t=Ja(t));const e=HP(this),r=E0(t,void 0);return r[es].isManual_=!0,S0(e),r}finishDraft(t,e){const r=t&&t[es];(!r||!r.isManual_)&&Ds(9);const{scope_:n}=r;return qP(n,e),KP(void 0,n)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let r;for(r=e.length-1;r>=0;r--){const s=e[r];if(s.path.length===0&&s.op==="replace"){t=s.value;break}}r>-1&&(e=e.slice(r+1));const n=Ml("Patches").applyPatches_;return Dl(t)?n(t,e):this.produce(t,s=>n(s,e))}};function E0(t,e){const r=Yh(t)?Ml("MapSet").proxyMap_(t,e):Jy(t)?Ml("MapSet").proxySet_(t,e):Tce(t,e);return(e?e.scope_:r6()).drafts_.push(r),r}function Ja(t){return Dl(t)||Ds(10,t),s6(t)}function s6(t){if(!ui(t)||Zy(t))return t;const e=t[es];let r;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=N0(t,e.scope_.immer_.useStrictShallowCopy_)}else r=N0(t,!0);return Fp(r,(n,s)=>{t6(r,n,s6(s))}),e&&(e.finalized_=!1),r}var Ice=new kce,a6=Ice.produce;function i6(t){return({dispatch:r,getState:n})=>s=>i=>typeof i=="function"?i(r,n,t):s(i)}var Rce=i6(),Oce=i6,Dce=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Lp:Lp.apply(null,arguments)};function ws(t,e){function r(...n){if(e){let s=e(...n);if(!s)throw new Error(Hn(0));return{type:t,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:t,payload:n[0]}}return r.toString=()=>`${t}`,r.type=t,r.match=n=>J5(n)&&n.type===t,r}var o6=class bd extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,bd.prototype)}static get[Symbol.species](){return bd}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new bd(...e[0].concat(this)):new bd(...e.concat(this))}};function QP(t){return ui(t)?a6(t,()=>{}):t}function am(t,e,r){return t.has(e)?t.get(e):t.set(e,r(e)).get(e)}function Mce(t){return typeof t=="boolean"}var Lce=()=>function(e){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:s=!0,actionCreatorCheck:i=!0}=e??{};let o=new o6;return r&&(Mce(r)?o.push(Rce):o.push(Oce(r.extraArgument))),o},Fce="RTK_autoBatch",XP=t=>e=>{setTimeout(e,t)},$ce=(t={type:"raf"})=>e=>(...r)=>{const n=e(...r);let s=!0,i=!1,o=!1;const l=new Set,c=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:XP(10):t.type==="callback"?t.queueNotification:XP(t.timeout),u=()=>{o=!1,i&&(i=!1,l.forEach(d=>d()))};return Object.assign({},n,{subscribe(d){const h=()=>s&&d(),f=n.subscribe(h);return l.add(d),()=>{f(),l.delete(d)}},dispatch(d){var h;try{return s=!((h=d==null?void 0:d.meta)!=null&&h[Fce]),i=!s,i&&(o||(o=!0,c(u))),n.dispatch(d)}finally{s=!0}}})},Uce=t=>function(r){const{autoBatch:n=!0}=r??{};let s=new o6(t);return n&&s.push($ce(typeof n=="object"?n:void 0)),s};function Bce(t){const e=Lce(),{reducer:r=void 0,middleware:n,devTools:s=!0,duplicateMiddlewareCheck:i=!0,preloadedState:o=void 0,enhancers:l=void 0}=t||{};let c;if(typeof r=="function")c=r;else if(sN(r))c=X5(r);else throw new Error(Hn(1));let u;typeof n=="function"?u=n(e):u=e();let d=Lp;s&&(d=Dce({trace:!1,...typeof s=="object"&&s}));const h=Nce(...u),f=Uce(h);let m=typeof l=="function"?l(f):f();const v=d(...m);return Q5(c,o,v)}function l6(t){const e={},r=[];let n;const s={addCase(i,o){const l=typeof i=="string"?i:i.type;if(!l)throw new Error(Hn(28));if(l in e)throw new Error(Hn(29));return e[l]=o,s},addAsyncThunk(i,o){return o.pending&&(e[i.pending.type]=o.pending),o.rejected&&(e[i.rejected.type]=o.rejected),o.fulfilled&&(e[i.fulfilled.type]=o.fulfilled),o.settled&&r.push({matcher:i.settled,reducer:o.settled}),s},addMatcher(i,o){return r.push({matcher:i,reducer:o}),s},addDefaultCase(i){return n=i,s}};return t(s),[e,r,n]}function Vce(t){return typeof t=="function"}function zce(t,e){let[r,n,s]=l6(e),i;if(Vce(t))i=()=>QP(t());else{const l=QP(t);i=()=>l}function o(l=i(),c){let u=[r[c.type],...n.filter(({matcher:d})=>d(c)).map(({reducer:d})=>d)];return u.filter(d=>!!d).length===0&&(u=[s]),u.reduce((d,h)=>{if(h)if(Dl(d)){const m=h(d,c);return m===void 0?d:m}else{if(ui(d))return a6(d,f=>h(f,c));{const f=h(d,c);if(f===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return f}}return d},l)}return o.getInitialState=i,o}var Gce="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Wce=(t=21)=>{let e="",r=t;for(;r--;)e+=Gce[Math.random()*64|0];return e},qce=Symbol.for("rtk-slice-createasyncthunk");function Hce(t,e){return`${t}/${e}`}function Kce({creators:t}={}){var r;const e=(r=t==null?void 0:t.asyncThunk)==null?void 0:r[qce];return function(s){const{name:i,reducerPath:o=i}=s;if(!i)throw new Error(Hn(11));typeof process<"u";const l=(typeof s.reducers=="function"?s.reducers(Qce()):s.reducers)||{},c=Object.keys(l),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(E,I){const O=typeof E=="string"?E:E.type;if(!O)throw new Error(Hn(12));if(O in u.sliceCaseReducersByType)throw new Error(Hn(13));return u.sliceCaseReducersByType[O]=I,d},addMatcher(E,I){return u.sliceMatchers.push({matcher:E,reducer:I}),d},exposeAction(E,I){return u.actionCreators[E]=I,d},exposeCaseReducer(E,I){return u.sliceCaseReducersByName[E]=I,d}};c.forEach(E=>{const I=l[E],O={reducerName:E,type:Hce(i,E),createNotation:typeof s.reducers=="function"};Jce(I)?eue(O,I,d,e):Xce(O,I,d)});function h(){const[E={},I=[],O=void 0]=typeof s.extraReducers=="function"?l6(s.extraReducers):[s.extraReducers],T={...E,...u.sliceCaseReducersByType};return zce(s.initialState,A=>{for(let S in T)A.addCase(S,T[S]);for(let S of u.sliceMatchers)A.addMatcher(S.matcher,S.reducer);for(let S of I)A.addMatcher(S.matcher,S.reducer);O&&A.addDefaultCase(O)})}const f=E=>E,m=new Map,v=new WeakMap;let y;function x(E,I){return y||(y=h()),y(E,I)}function b(){return y||(y=h()),y.getInitialState()}function w(E,I=!1){function O(A){let S=A[E];return typeof S>"u"&&I&&(S=am(v,O,b)),S}function T(A=f){const S=am(m,I,()=>new WeakMap);return am(S,A,()=>{const _={};for(const[P,R]of Object.entries(s.selectors??{}))_[P]=Yce(R,A,()=>am(v,A,b),I);return _})}return{reducerPath:E,getSelectors:T,get selectors(){return T(O)},selectSlice:O}}const j={name:i,reducer:x,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:b,...w(o),injectInto(E,{reducerPath:I,...O}={}){const T=I??o;return E.inject({reducerPath:T,reducer:x},O),{...j,...w(T,!0)}}};return j}}function Yce(t,e,r,n){function s(i,...o){let l=e(i);return typeof l>"u"&&n&&(l=r()),t(l,...o)}return s.unwrapped=t,s}var rs=Kce();function Qce(){function t(e,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...r}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...r){return e(...r)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:r}},asyncThunk:t}}function Xce({type:t,reducerName:e,createNotation:r},n,s){let i,o;if("reducer"in n){if(r&&!Zce(n))throw new Error(Hn(17));i=n.reducer,o=n.prepare}else i=n;s.addCase(t,i).exposeCaseReducer(e,i).exposeAction(e,o?ws(t,o):ws(t))}function Jce(t){return t._reducerDefinitionType==="asyncThunk"}function Zce(t){return t._reducerDefinitionType==="reducerWithPrepare"}function eue({type:t,reducerName:e},r,n,s){if(!s)throw new Error(Hn(18));const{payloadCreator:i,fulfilled:o,pending:l,rejected:c,settled:u,options:d}=r,h=s(t,i,d);n.exposeAction(e,h),o&&n.addCase(h.fulfilled,o),l&&n.addCase(h.pending,l),c&&n.addCase(h.rejected,c),u&&n.addMatcher(h.settled,u),n.exposeCaseReducer(e,{fulfilled:o||im,pending:l||im,rejected:c||im,settled:u||im})}function im(){}var tue="task",c6="listener",u6="completed",oN="cancelled",rue=`task-${oN}`,nue=`task-${u6}`,P0=`${c6}-${oN}`,sue=`${c6}-${u6}`,ev=class{constructor(t){Je(this,"name","TaskAbortError");Je(this,"message");this.code=t,this.message=`${tue} ${oN} (reason: ${t})`}},lN=(t,e)=>{if(typeof t!="function")throw new TypeError(Hn(32))},Bp=()=>{},d6=(t,e=Bp)=>(t.catch(e),t),h6=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),gl=(t,e)=>{const r=t.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:e,configurable:!0,writable:!0}),t.abort(e))},yl=t=>{if(t.aborted){const{reason:e}=t;throw new ev(e)}};function f6(t,e){let r=Bp;return new Promise((n,s)=>{const i=()=>s(new ev(t.reason));if(t.aborted){i();return}r=h6(t,i),e.finally(()=>r()).then(n,s)}).finally(()=>{r=Bp})}var aue=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(r){return{status:r instanceof ev?"cancelled":"rejected",error:r}}finally{e==null||e()}},Vp=t=>e=>d6(f6(t,e).then(r=>(yl(t),r))),m6=t=>{const e=Vp(t);return r=>e(new Promise(n=>setTimeout(n,r)))},{assign:Ac}=Object,JP={},tv="listenerMiddleware",iue=(t,e)=>{const r=n=>h6(t,()=>gl(n,t.reason));return(n,s)=>{lN(n);const i=new AbortController;r(i);const o=aue(async()=>{yl(t),yl(i.signal);const l=await n({pause:Vp(i.signal),delay:m6(i.signal),signal:i.signal});return yl(i.signal),l},()=>gl(i,nue));return s!=null&&s.autoJoin&&e.push(o.catch(Bp)),{result:Vp(t)(o),cancel(){gl(i,rue)}}}},oue=(t,e)=>{const r=async(n,s)=>{yl(e);let i=()=>{};const l=[new Promise((c,u)=>{let d=t({predicate:n,effect:(h,f)=>{f.unsubscribe(),c([h,f.getState(),f.getOriginalState()])}});i=()=>{d(),u()}})];s!=null&&l.push(new Promise(c=>setTimeout(c,s,null)));try{const c=await f6(e,Promise.race(l));return yl(e),c}finally{i()}};return(n,s)=>d6(r(n,s))},p6=t=>{let{type:e,actionCreator:r,matcher:n,predicate:s,effect:i}=t;if(e)s=ws(e).match;else if(r)e=r.type,s=r.match;else if(n)s=n;else if(!s)throw new Error(Hn(21));return lN(i),{predicate:s,type:e,effect:i}},g6=Ac(t=>{const{type:e,predicate:r,effect:n}=p6(t);return{id:Wce(),effect:n,type:e,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(Hn(22))}}},{withTypes:()=>g6}),ZP=(t,e)=>{const{type:r,effect:n,predicate:s}=p6(e);return Array.from(t.values()).find(i=>(typeof r=="string"?i.type===r:i.predicate===s)&&i.effect===n)},T0=t=>{t.pending.forEach(e=>{gl(e,P0)})},lue=t=>()=>{t.forEach(T0),t.clear()},eT=(t,e,r)=>{try{t(e,r)}catch(n){setTimeout(()=>{throw n},0)}},y6=Ac(ws(`${tv}/add`),{withTypes:()=>y6}),cue=ws(`${tv}/removeAll`),v6=Ac(ws(`${tv}/remove`),{withTypes:()=>v6}),uue=(...t)=>{console.error(`${tv}/error`,...t)},Qh=(t={})=>{const e=new Map,{extra:r,onError:n=uue}=t;lN(n);const s=d=>(d.unsubscribe=()=>e.delete(d.id),e.set(d.id,d),h=>{d.unsubscribe(),h!=null&&h.cancelActive&&T0(d)}),i=d=>{const h=ZP(e,d)??g6(d);return s(h)};Ac(i,{withTypes:()=>i});const o=d=>{const h=ZP(e,d);return h&&(h.unsubscribe(),d.cancelActive&&T0(h)),!!h};Ac(o,{withTypes:()=>o});const l=async(d,h,f,m)=>{const v=new AbortController,y=oue(i,v.signal),x=[];try{d.pending.add(v),await Promise.resolve(d.effect(h,Ac({},f,{getOriginalState:m,condition:(b,w)=>y(b,w).then(Boolean),take:y,delay:m6(v.signal),pause:Vp(v.signal),extra:r,signal:v.signal,fork:iue(v.signal,x),unsubscribe:d.unsubscribe,subscribe:()=>{e.set(d.id,d)},cancelActiveListeners:()=>{d.pending.forEach((b,w,j)=>{b!==v&&(gl(b,P0),j.delete(b))})},cancel:()=>{gl(v,P0),d.pending.delete(v)},throwIfCancelled:()=>{yl(v.signal)}})))}catch(b){b instanceof ev||eT(n,b,{raisedBy:"effect"})}finally{await Promise.all(x),gl(v,sue),d.pending.delete(v)}},c=lue(e);return{middleware:d=>h=>f=>{if(!J5(f))return h(f);if(y6.match(f))return i(f.payload);if(cue.match(f)){c();return}if(v6.match(f))return o(f.payload);let m=d.getState();const v=()=>{if(m===JP)throw new Error(Hn(23));return m};let y;try{if(y=h(f),e.size>0){const x=d.getState(),b=Array.from(e.values());for(const w of b){let j=!1;try{j=w.predicate(f,x,m)}catch(E){j=!1,eT(n,E,{raisedBy:"predicate"})}j&&l(w,f,d,v)}}}finally{m=JP}return y},startListening:i,stopListening:o,clearListeners:c}};function Hn(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var due={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},x6=rs({name:"chartLayout",initialState:due,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var r,n,s,i;t.margin.top=(r=e.payload.top)!==null&&r!==void 0?r:0,t.margin.right=(n=e.payload.right)!==null&&n!==void 0?n:0,t.margin.bottom=(s=e.payload.bottom)!==null&&s!==void 0?s:0,t.margin.left=(i=e.payload.left)!==null&&i!==void 0?i:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:hue,setLayout:fue,setChartSize:mue,setScale:pue}=x6.actions,gue=x6.reducer;function tT(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function rT(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?tT(Object(r),!0).forEach(function(n){yue(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):tT(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function yue(t,e,r){return(e=vue(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function vue(t){var e=xue(t,"string");return typeof e=="symbol"?e:e+""}function xue(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var zp=Math.PI/180,bue=t=>t*180/Math.PI,jr=(t,e,r,n)=>({x:t+Math.cos(-zp*n)*r,y:e+Math.sin(-zp*n)*r}),b6=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0,width:0,height:0,brushBottom:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},wue=(t,e)=>{var{x:r,y:n}=t,{x:s,y:i}=e;return Math.sqrt((r-s)**2+(n-i)**2)},jue=(t,e)=>{var{x:r,y:n}=t,{cx:s,cy:i}=e,o=wue({x:r,y:n},{x:s,y:i});if(o<=0)return{radius:o,angle:0};var l=(r-s)/o,c=Math.acos(l);return n>i&&(c=2*Math.PI-c),{radius:o,angle:bue(c),angleInRadian:c}},Nue=t=>{var{startAngle:e,endAngle:r}=t,n=Math.floor(e/360),s=Math.floor(r/360),i=Math.min(n,s);return{startAngle:e-i*360,endAngle:r-i*360}},_ue=(t,e)=>{var{startAngle:r,endAngle:n}=e,s=Math.floor(r/360),i=Math.floor(n/360),o=Math.min(s,i);return t+o*360},Sue=(t,e)=>{var{x:r,y:n}=t,{radius:s,angle:i}=jue({x:r,y:n},e),{innerRadius:o,outerRadius:l}=e;if(s<o||s>l||s===0)return null;var{startAngle:c,endAngle:u}=Nue(e),d=i,h;if(c<=u){for(;d>u;)d-=360;for(;d<c;)d+=360;h=d>=c&&d<=u}else{for(;d>c;)d-=360;for(;d<u;)d+=360;h=d>=u&&d<=c}return h?rT(rT({},e),{},{radius:s,angle:_ue(d,e)}):null};function w6(t,e,r){return Array.isArray(t)&&t&&e+r!==0?t.slice(e,r+1):t}function nT(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function us(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?nT(Object(r),!0).forEach(function(n){Aue(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):nT(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Aue(t,e,r){return(e=Eue(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Eue(t){var e=Pue(t,"string");return typeof e=="symbol"?e:e+""}function Pue(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Pt(t,e,r){return zt(t)||zt(e)?r:Na(e)?Ol(t,e,r):typeof e=="function"?e(t):r}var Tue=(t,e,r,n,s)=>{var i,o=-1,l=(i=e==null?void 0:e.length)!==null&&i!==void 0?i:0;if(l<=1||t==null)return 0;if(n==="angleAxis"&&s!=null&&Math.abs(Math.abs(s[1]-s[0])-360)<=1e-6)for(var c=0;c<l;c++){var u=c>0?r[c-1].coordinate:r[l-1].coordinate,d=r[c].coordinate,h=c>=l-1?r[0].coordinate:r[c+1].coordinate,f=void 0;if(Or(d-u)!==Or(h-d)){var m=[];if(Or(h-d)===Or(s[1]-s[0])){f=h;var v=d+s[1]-s[0];m[0]=Math.min(v,(v+u)/2),m[1]=Math.max(v,(v+u)/2)}else{f=u;var y=h+s[1]-s[0];m[0]=Math.min(d,(y+d)/2),m[1]=Math.max(d,(y+d)/2)}var x=[Math.min(d,(f+d)/2),Math.max(d,(f+d)/2)];if(t>x[0]&&t<=x[1]||t>=m[0]&&t<=m[1]){({index:o}=r[c]);break}}else{var b=Math.min(u,h),w=Math.max(u,h);if(t>(b+d)/2&&t<=(w+d)/2){({index:o}=r[c]);break}}}else if(e){for(var j=0;j<l;j++)if(j===0&&t<=(e[j].coordinate+e[j+1].coordinate)/2||j>0&&j<l-1&&t>(e[j].coordinate+e[j-1].coordinate)/2&&t<=(e[j].coordinate+e[j+1].coordinate)/2||j===l-1&&t>(e[j].coordinate+e[j-1].coordinate)/2){({index:o}=e[j]);break}}return o},Cue=(t,e,r)=>{if(e&&r){var{width:n,height:s}=r,{align:i,verticalAlign:o,layout:l}=e;if((l==="vertical"||l==="horizontal"&&o==="middle")&&i!=="center"&&Le(t[i]))return us(us({},t),{},{[i]:t[i]+(n||0)});if((l==="horizontal"||l==="vertical"&&i==="center")&&o!=="middle"&&Le(t[o]))return us(us({},t),{},{[o]:t[o]+(s||0)})}return t},ka=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",j6=(t,e,r,n)=>{if(n)return t.map(l=>l.coordinate);var s,i,o=t.map(l=>(l.coordinate===e&&(s=!0),l.coordinate===r&&(i=!0),l.coordinate));return s||o.push(e),i||o.push(r),o},N6=(t,e,r)=>{if(!t)return null;var{duplicateDomain:n,type:s,range:i,scale:o,realScaleType:l,isCategorical:c,categoricalDomain:u,tickCount:d,ticks:h,niceTicks:f,axisType:m}=t;if(!o)return null;var v=l==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,y=s==="category"&&o.bandwidth?o.bandwidth()/v:0;if(y=m==="angleAxis"&&i&&i.length>=2?Or(i[0]-i[1])*2*y:y,h||f){var x=(h||f||[]).map((b,w)=>{var j=n?n.indexOf(b):b;return{coordinate:o(j)+y,value:b,offset:y,index:w}});return x.filter(b=>!In(b.coordinate))}return c&&u?u.map((b,w)=>({coordinate:o(b)+y,value:b,index:w,offset:y})):o.ticks&&!r&&d!=null?o.ticks(d).map((b,w)=>({coordinate:o(b)+y,value:b,offset:y,index:w})):o.domain().map((b,w)=>({coordinate:o(b)+y,value:n?n[b]:b,index:w,offset:y}))},sT=1e-4,kue=t=>{var e=t.domain();if(!(!e||e.length<=2)){var r=e.length,n=t.range(),s=Math.min(n[0],n[1])-sT,i=Math.max(n[0],n[1])+sT,o=t(e[0]),l=t(e[r-1]);(o<s||o>i||l<s||l>i)&&t.domain([e[0],e[r-1]])}},Iue=(t,e)=>{if(!e||e.length!==2||!Le(e[0])||!Le(e[1]))return t;var r=Math.min(e[0],e[1]),n=Math.max(e[0],e[1]),s=[t[0],t[1]];return(!Le(t[0])||t[0]<r)&&(s[0]=r),(!Le(t[1])||t[1]>n)&&(s[1]=n),s[0]>n&&(s[0]=n),s[1]<r&&(s[1]=r),s},Rue=t=>{var e=t.length;if(!(e<=0))for(var r=0,n=t[0].length;r<n;++r)for(var s=0,i=0,o=0;o<e;++o){var l=In(t[o][r][1])?t[o][r][0]:t[o][r][1];l>=0?(t[o][r][0]=s,t[o][r][1]=s+l,s=t[o][r][1]):(t[o][r][0]=i,t[o][r][1]=i+l,i=t[o][r][1])}},Oue=t=>{var e=t.length;if(!(e<=0))for(var r=0,n=t[0].length;r<n;++r)for(var s=0,i=0;i<e;++i){var o=In(t[i][r][1])?t[i][r][0]:t[i][r][1];o>=0?(t[i][r][0]=s,t[i][r][1]=s+o,s=t[i][r][1]):(t[i][r][0]=0,t[i][r][1]=0)}},Due={sign:Rue,expand:Tle,none:ru,silhouette:Cle,wiggle:kle,positive:Oue},Mue=(t,e,r)=>{var n=Due[r],s=Ple().keys(e).value((i,o)=>+Pt(i,o,0)).order(x0).offset(n);return s(t)};function _6(t){return t==null?void 0:String(t)}function Gp(t){var{axis:e,ticks:r,bandSize:n,entry:s,index:i,dataKey:o}=t;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!zt(s[e.dataKey])){var l=r5(r,"value",s[e.dataKey]);if(l)return l.coordinate+n/2}return r[i]?r[i].coordinate+n/2:null}var c=Pt(s,zt(o)?e.dataKey:o);return zt(c)?null:e.scale(c)}var aT=t=>{var{axis:e,ticks:r,offset:n,bandSize:s,entry:i,index:o}=t;if(e.type==="category")return r[o]?r[o].coordinate+n:null;var l=Pt(i,e.dataKey,e.scale.domain()[o]);return zt(l)?null:e.scale(l)-s/2+n},Lue=t=>{var{numericAxis:e}=t,r=e.scale.domain();if(e.type==="number"){var n=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]);return n<=0&&s>=0?0:s<0?s:n}return r[0]},Fue=t=>{var e=t.flat(2).filter(Le);return[Math.min(...e),Math.max(...e)]},$ue=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],Uue=(t,e,r)=>{if(t!=null)return $ue(Object.keys(t).reduce((n,s)=>{var i=t[s],{stackedData:o}=i,l=o.reduce((c,u)=>{var d=w6(u,e,r),h=Fue(d);return[Math.min(c[0],h[0]),Math.max(c[1],h[1])]},[1/0,-1/0]);return[Math.min(l[0],n[0]),Math.max(l[1],n[1])]},[1/0,-1/0]))},iT=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,oT=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Ll=(t,e,r)=>{if(t&&t.scale&&t.scale.bandwidth){var n=t.scale.bandwidth();if(!r||n>0)return n}if(t&&e&&e.length>=2){for(var s=Qy(e,d=>d.coordinate),i=1/0,o=1,l=s.length;o<l;o++){var c=s[o],u=s[o-1];i=Math.min((c.coordinate||0)-(u.coordinate||0),i)}return i===1/0?0:i}return r?void 0:0};function lT(t){var{tooltipEntrySettings:e,dataKey:r,payload:n,value:s,name:i}=t;return us(us({},e),{},{dataKey:r,payload:n,value:s,name:i})}function Mo(t,e){if(t)return String(t);if(typeof e=="string")return e}function Bue(t,e,r,n,s){if(r==="horizontal"||r==="vertical"){var i=t>=s.left&&t<=s.left+s.width&&e>=s.top&&e<=s.top+s.height;return i?{x:t,y:e}:null}return n?Sue({x:t,y:e},n):null}var Vue=(t,e,r,n)=>{var s=e.find(u=>u&&u.index===r);if(s){if(t==="horizontal")return{x:s.coordinate,y:n.y};if(t==="vertical")return{x:n.x,y:s.coordinate};if(t==="centric"){var i=s.coordinate,{radius:o}=n;return us(us(us({},n),jr(n.cx,n.cy,o,i)),{},{angle:i,radius:o})}var l=s.coordinate,{angle:c}=n;return us(us(us({},n),jr(n.cx,n.cy,l,c)),{},{angle:c,radius:l})}return{x:0,y:0}},zue=(t,e)=>e==="horizontal"?t.x:e==="vertical"?t.y:e==="centric"?t.angle:t.radius,yi=t=>t.layout.width,vi=t=>t.layout.height,Gue=t=>t.layout.scale,S6=t=>t.layout.margin,rv=X(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),nv=X(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),A6="data-recharts-item-index",E6="data-recharts-item-data-key",Xh=60;function cT(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function om(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?cT(Object(r),!0).forEach(function(n){Wue(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):cT(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Wue(t,e,r){return(e=que(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function que(t){var e=Hue(t,"string");return typeof e=="symbol"?e:e+""}function Hue(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Kue=t=>t.brush.height;function Yue(t){var e=nv(t);return e.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var s=typeof n.width=="number"?n.width:Xh;return r+s}return r},0)}function Que(t){var e=nv(t);return e.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var s=typeof n.width=="number"?n.width:Xh;return r+s}return r},0)}function Xue(t){var e=rv(t);return e.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function Jue(t){var e=rv(t);return e.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var Pr=X([yi,vi,S6,Kue,Yue,Que,Xue,Jue,K5,gce],(t,e,r,n,s,i,o,l,c,u)=>{var d={left:(r.left||0)+s,right:(r.right||0)+i},h={top:(r.top||0)+o,bottom:(r.bottom||0)+l},f=om(om({},h),d),m=f.bottom;f.bottom+=n,f=Cue(f,c,u);var v=t-f.left-f.right,y=e-f.top-f.bottom;return om(om({brushBottom:m},f),{},{width:Math.max(v,0),height:Math.max(y,0)})}),Zue=X(Pr,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),cN=X(yi,vi,(t,e)=>({x:0,y:0,width:t,height:e})),ede=p.createContext(null),cn=()=>p.useContext(ede)!=null,sv=t=>t.brush,av=X([sv,Pr,S6],(t,e,r)=>({height:t.height,x:Le(t.x)?t.x:e.left,y:Le(t.y)?t.y:e.top+e.height+e.brushBottom-((r==null?void 0:r.bottom)||0),width:Le(t.width)?t.width:e.width})),uN=()=>{var t,e=cn(),r=Oe(Zue),n=Oe(av),s=(t=Oe(sv))===null||t===void 0?void 0:t.padding;return!e||!n||!s?r:{width:n.width-s.left-s.right,height:n.height-s.top-s.bottom,x:s.left,y:s.top}},tde={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},P6=()=>{var t;return(t=Oe(Pr))!==null&&t!==void 0?t:tde},dN=()=>Oe(yi),hN=()=>Oe(vi),rde=()=>Oe(t=>t.layout.margin),nt=t=>t.layout.layoutType,Jh=()=>Oe(nt),nde={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},T6=rs({name:"legend",initialState:nde,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload(t,e){t.payload.push(e.payload)},removeLegendPayload(t,e){var r=Ja(t).payload.indexOf(e.payload);r>-1&&t.payload.splice(r,1)}}}),{setLegendSize:uT,setLegendSettings:sde,addLegendPayload:C6,removeLegendPayload:k6}=T6.actions,ade=T6.reducer,ide=["contextPayload"];function C0(){return C0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},C0.apply(null,arguments)}function dT(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function su(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?dT(Object(r),!0).forEach(function(n){fN(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):dT(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function fN(t,e,r){return(e=ode(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ode(t){var e=lde(t,"string");return typeof e=="symbol"?e:e+""}function lde(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cde(t,e){if(t==null)return{};var r,n,s=ude(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(s[r]=t[r])}return s}function ude(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function dde(t){return t.value}function hde(t){var{contextPayload:e}=t,r=cde(t,ide),n=$5(e,t.payloadUniqBy,dde),s=su(su({},r),{},{payload:n});return p.isValidElement(t.content)?p.cloneElement(t.content,s):typeof t.content=="function"?p.createElement(t.content,s):p.createElement(Wj,s)}function fde(t,e,r,n,s,i){var{layout:o,align:l,verticalAlign:c}=e,u,d;return(!t||(t.left===void 0||t.left===null)&&(t.right===void 0||t.right===null))&&(l==="center"&&o==="vertical"?u={left:((n||0)-i.width)/2}:u=l==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!t||(t.top===void 0||t.top===null)&&(t.bottom===void 0||t.bottom===null))&&(c==="middle"?d={top:((s||0)-i.height)/2}:d=c==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),su(su({},u),d)}function mde(t){var e=rr();return p.useEffect(()=>{e(sde(t))},[e,t]),null}function pde(t){var e=rr();return p.useEffect(()=>(e(uT(t)),()=>{e(uT({width:0,height:0}))}),[e,t]),null}function gde(t){var e=xce(),r=Joe(),n=rde(),{width:s,height:i,wrapperStyle:o,portal:l}=t,[c,u]=Y5([e]),d=dN(),h=hN();if(d==null||h==null)return null;var f=d-(n.left||0)-(n.right||0),m=Bn.getWidthOrHeight(t.layout,i,s,f),v=l?o:su(su({position:"absolute",width:(m==null?void 0:m.width)||s||"auto",height:(m==null?void 0:m.height)||i||"auto"},fde(o,t,n,d,h,c)),o),y=l??r;if(y==null)return null;var x=p.createElement("div",{className:"recharts-legend-wrapper",style:v,ref:u},p.createElement(mde,{layout:t.layout,align:t.align,verticalAlign:t.verticalAlign,itemSorter:t.itemSorter}),p.createElement(pde,{width:c.width,height:c.height}),p.createElement(hde,C0({},t,m,{margin:n,chartWidth:d,chartHeight:h,contextPayload:e})));return No.createPortal(x,y)}class Bn extends p.PureComponent{static getWidthOrHeight(e,r,n,s){return e==="vertical"&&Le(r)?{height:r}:e==="horizontal"?{width:n||s}:null}render(){return p.createElement(gde,this.props)}}fN(Bn,"displayName","Legend");fN(Bn,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function k0(){return k0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},k0.apply(null,arguments)}function hT(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Bx(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?hT(Object(r),!0).forEach(function(n){yde(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):hT(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function yde(t,e,r){return(e=vde(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function vde(t){var e=xde(t,"string");return typeof e=="symbol"?e:e+""}function xde(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bde(t){return Array.isArray(t)&&Na(t[0])&&Na(t[1])?t.join(" ~ "):t}var wde=t=>{var{separator:e=" : ",contentStyle:r={},itemStyle:n={},labelStyle:s={},payload:i,formatter:o,itemSorter:l,wrapperClassName:c,labelClassName:u,label:d,labelFormatter:h,accessibilityLayer:f=!1}=t,m=()=>{if(i&&i.length){var I={padding:0,margin:0},O=(l?Qy(i,l):i).map((T,A)=>{if(T.type==="none")return null;var S=T.formatter||o||bde,{value:_,name:P}=T,R=_,C=P;if(S){var B=S(_,P,T,A,i);if(Array.isArray(B))[R,C]=B;else if(B!=null)R=B;else return null}var G=Bx({display:"block",paddingTop:4,paddingBottom:4,color:T.color||"#000"},n);return p.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(A),style:G},Na(C)?p.createElement("span",{className:"recharts-tooltip-item-name"},C):null,Na(C)?p.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,p.createElement("span",{className:"recharts-tooltip-item-value"},R),p.createElement("span",{className:"recharts-tooltip-item-unit"},T.unit||""))});return p.createElement("ul",{className:"recharts-tooltip-item-list",style:I},O)}return null},v=Bx({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),y=Bx({margin:0},s),x=!zt(d),b=x?d:"",w=lt("recharts-default-tooltip",c),j=lt("recharts-tooltip-label",u);x&&h&&i!==void 0&&i!==null&&(b=h(d,i));var E=f?{role:"status","aria-live":"assertive"}:{};return p.createElement("div",k0({className:w,style:v},E),p.createElement("p",{className:j,style:y},p.isValidElement(b)?b:"".concat(b)),m())},nd="recharts-tooltip-wrapper",jde={visibility:"hidden"};function Nde(t){var{coordinate:e,translateX:r,translateY:n}=t;return lt(nd,{["".concat(nd,"-right")]:Le(r)&&e&&Le(e.x)&&r>=e.x,["".concat(nd,"-left")]:Le(r)&&e&&Le(e.x)&&r<e.x,["".concat(nd,"-bottom")]:Le(n)&&e&&Le(e.y)&&n>=e.y,["".concat(nd,"-top")]:Le(n)&&e&&Le(e.y)&&n<e.y})}function fT(t){var{allowEscapeViewBox:e,coordinate:r,key:n,offsetTopLeft:s,position:i,reverseDirection:o,tooltipDimension:l,viewBox:c,viewBoxDimension:u}=t;if(i&&Le(i[n]))return i[n];var d=r[n]-l-(s>0?s:0),h=r[n]+s;if(e[n])return o[n]?d:h;var f=c[n];if(f==null)return 0;if(o[n]){var m=d,v=f;return m<v?Math.max(h,f):Math.max(d,f)}if(u==null)return 0;var y=h+l,x=f+u;return y>x?Math.max(d,f):Math.max(h,f)}function _de(t){var{translateX:e,translateY:r,useTranslate3d:n}=t;return{transform:n?"translate3d(".concat(e,"px, ").concat(r,"px, 0)"):"translate(".concat(e,"px, ").concat(r,"px)")}}function Sde(t){var{allowEscapeViewBox:e,coordinate:r,offsetTopLeft:n,position:s,reverseDirection:i,tooltipBox:o,useTranslate3d:l,viewBox:c}=t,u,d,h;return o.height>0&&o.width>0&&r?(d=fT({allowEscapeViewBox:e,coordinate:r,key:"x",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),h=fT({allowEscapeViewBox:e,coordinate:r,key:"y",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=_de({translateX:d,translateY:h,useTranslate3d:l})):u=jde,{cssProperties:u,cssClasses:Nde({translateX:d,translateY:h,coordinate:r})}}function mT(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function lm(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?mT(Object(r),!0).forEach(function(n){I0(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mT(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function I0(t,e,r){return(e=Ade(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ade(t){var e=Ede(t,"string");return typeof e=="symbol"?e:e+""}function Ede(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class Pde extends p.PureComponent{constructor(){super(...arguments),I0(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),I0(this,"handleKeyDown",e=>{if(e.key==="Escape"){var r,n,s,i;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(s=(i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==null&&s!==void 0?s:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,r;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:r,animationDuration:n,animationEasing:s,children:i,coordinate:o,hasPayload:l,isAnimationActive:c,offset:u,position:d,reverseDirection:h,useTranslate3d:f,viewBox:m,wrapperStyle:v,lastBoundingBox:y,innerRef:x,hasPortalFromProps:b}=this.props,{cssClasses:w,cssProperties:j}=Sde({allowEscapeViewBox:r,coordinate:o,offsetTopLeft:u,position:d,reverseDirection:h,tooltipBox:{height:y.height,width:y.width},useTranslate3d:f,viewBox:m}),E=b?{}:lm(lm({transition:c&&e?"transform ".concat(n,"ms ").concat(s):void 0},j),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&l?"visible":"hidden",position:"absolute",top:0,left:0}),I=lm(lm({},E),{},{visibility:!this.state.dismissed&&e&&l?"visible":"hidden"},v);return p.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:w,style:I,ref:x},i)}}var Tde=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),xi={devToolsEnabled:!1,isSsr:Tde()},I6=()=>Oe(t=>t.rootProps.accessibilityLayer);function Kr(t){return Number.isFinite(t)}function au(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function R0(){return R0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},R0.apply(null,arguments)}function pT(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function gT(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?pT(Object(r),!0).forEach(function(n){Cde(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pT(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Cde(t,e,r){return(e=kde(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function kde(t){var e=Ide(t,"string");return typeof e=="symbol"?e:e+""}function Ide(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var yT={curveBasisClosed:yle,curveBasisOpen:vle,curveBasis:gle,curveBumpX:rle,curveBumpY:nle,curveLinearClosed:xle,curveLinear:qy,curveMonotoneX:ble,curveMonotoneY:wle,curveNatural:jle,curveStep:Nle,curveStepAfter:Sle,curveStepBefore:_le},cm=t=>Kr(t.x)&&Kr(t.y),sd=t=>t.x,ad=t=>t.y,Rde=(t,e)=>{if(typeof t=="function")return t;var r="curve".concat(Hh(t));return(r==="curveMonotone"||r==="curveBump")&&e?yT["".concat(r).concat(e==="vertical"?"Y":"X")]:yT[r]||qy},Ode=t=>{var{type:e="linear",points:r=[],baseLine:n,layout:s,connectNulls:i=!1}=t,o=Rde(e,s),l=i?r.filter(cm):r,c;if(Array.isArray(n)){var u=i?n.filter(h=>cm(h)):n,d=l.map((h,f)=>gT(gT({},h),{},{base:u[f]}));return s==="vertical"?c=tm().y(ad).x1(sd).x0(h=>h.base.x):c=tm().x(sd).y1(ad).y0(h=>h.base.y),c.defined(cm).curve(o),c(d)}return s==="vertical"&&Le(n)?c=tm().y(ad).x1(sd).x0(n):Le(n)?c=tm().x(sd).y1(ad).y0(n):c=d5().x(sd).y(ad),c.defined(cm).curve(o),c(l)},Ec=t=>{var{className:e,points:r,path:n,pathRef:s}=t;if((!r||!r.length)&&!n)return null;var i=r&&r.length?Ode(t):n;return p.createElement("path",R0({},Ss(t),Lj(t),{className:lt("recharts-curve",e),d:i===null?void 0:i,ref:s}))},Dde=["x","y","top","left","width","height","className"];function O0(){return O0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},O0.apply(null,arguments)}function vT(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Mde(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?vT(Object(r),!0).forEach(function(n){Lde(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vT(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Lde(t,e,r){return(e=Fde(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Fde(t){var e=$de(t,"string");return typeof e=="symbol"?e:e+""}function $de(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ude(t,e){if(t==null)return{};var r,n,s=Bde(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(s[r]=t[r])}return s}function Bde(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Vde=(t,e,r,n,s,i)=>"M".concat(t,",").concat(s,"v").concat(n,"M").concat(i,",").concat(e,"h").concat(r),zde=t=>{var{x:e=0,y:r=0,top:n=0,left:s=0,width:i=0,height:o=0,className:l}=t,c=Ude(t,Dde),u=Mde({x:e,y:r,top:n,left:s,width:i,height:o},c);return!Le(e)||!Le(r)||!Le(i)||!Le(o)||!Le(n)||!Le(s)?null:p.createElement("path",O0({},Gt(u,!0),{className:lt("recharts-cross",l),d:Vde(e,r,i,o,n,s)}))};function Gde(t,e,r,n){var s=n/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-s:r.left+.5,y:t==="horizontal"?r.top+.5:e.y-s,width:t==="horizontal"?n:r.width-1,height:t==="horizontal"?r.height-1:n}}function xT(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Wde(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?xT(Object(r),!0).forEach(function(n){qde(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xT(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function qde(t,e,r){return(e=Hde(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Hde(t){var e=Kde(t,"string");return typeof e=="symbol"?e:e+""}function Kde(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Tr(t,e){var r=Wde({},t),n=e,s=Object.keys(e),i=s.reduce((o,l)=>(o[l]===void 0&&n[l]!==void 0&&(o[l]=n[l]),o),r);return i}function Yde(){}function bT(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function wT(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?bT(Object(r),!0).forEach(function(n){Qde(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):bT(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Qde(t,e,r){return(e=Xde(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Xde(t){var e=Jde(t,"string");return typeof e=="symbol"?e:e+""}function Jde(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Zde=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),R6=(t,e,r)=>t.map(n=>"".concat(Zde(n)," ").concat(e,"ms ").concat(r)).join(","),ehe=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((r,n)=>r.filter(s=>n.includes(s))),th=(t,e)=>Object.keys(e).reduce((r,n)=>wT(wT({},r),{},{[n]:t(n,e[n])}),{});function jT(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Gr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?jT(Object(r),!0).forEach(function(n){the(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):jT(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function the(t,e,r){return(e=rhe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function rhe(t){var e=nhe(t,"string");return typeof e=="symbol"?e:e+""}function nhe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Wp=(t,e,r)=>t+(e-t)*r,D0=t=>{var{from:e,to:r}=t;return e!==r},O6=(t,e,r)=>{var n=th((s,i)=>{if(D0(i)){var[o,l]=t(i.from,i.to,i.velocity);return Gr(Gr({},i),{},{from:o,velocity:l})}return i},e);return r<1?th((s,i)=>D0(i)?Gr(Gr({},i),{},{velocity:Wp(i.velocity,n[s].velocity,r),from:Wp(i.from,n[s].from,r)}):i,e):O6(t,n,r-1)};function she(t,e,r,n,s,i){var o,l=n.reduce((f,m)=>Gr(Gr({},f),{},{[m]:{from:t[m],velocity:0,to:e[m]}}),{}),c=()=>th((f,m)=>m.from,l),u=()=>!Object.values(l).filter(D0).length,d=null,h=f=>{o||(o=f);var m=f-o,v=m/r.dt;l=O6(r,l,v),s(Gr(Gr(Gr({},t),e),c())),o=f,u()||(d=i.setTimeout(h))};return()=>(d=i.setTimeout(h),()=>{d()})}function ahe(t,e,r,n,s,i,o){var l=null,c=s.reduce((h,f)=>Gr(Gr({},h),{},{[f]:[t[f],e[f]]}),{}),u,d=h=>{u||(u=h);var f=(h-u)/n,m=th((y,x)=>Wp(...x,r(f)),c);if(i(Gr(Gr(Gr({},t),e),m)),f<1)l=o.setTimeout(d);else{var v=th((y,x)=>Wp(...x,r(1)),c);i(Gr(Gr(Gr({},t),e),v))}};return()=>(l=o.setTimeout(d),()=>{l()})}const ihe=(t,e,r,n,s,i)=>{var o=ehe(t,e);return r.isStepper===!0?she(t,e,r,o,s,i):ahe(t,e,r,n,o,s,i)};var qp=1e-4,D6=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],M6=(t,e)=>t.map((r,n)=>r*e**n).reduce((r,n)=>r+n),NT=(t,e)=>r=>{var n=D6(t,e);return M6(n,r)},ohe=(t,e)=>r=>{var n=D6(t,e),s=[...n.map((i,o)=>i*o).slice(1),0];return M6(s,r)},_T=function(){for(var e,r,n,s,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];if(o.length===1)switch(o[0]){case"linear":[e,n,r,s]=[0,0,1,1];break;case"ease":[e,n,r,s]=[.25,.1,.25,1];break;case"ease-in":[e,n,r,s]=[.42,0,1,1];break;case"ease-out":[e,n,r,s]=[.42,0,.58,1];break;case"ease-in-out":[e,n,r,s]=[0,0,.58,1];break;default:{var c=o[0].split("(");c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4&&([e,n,r,s]=c[1].split(")")[0].split(",").map(v=>parseFloat(v)))}}else o.length===4&&([e,n,r,s]=o);var u=NT(e,r),d=NT(n,s),h=ohe(e,r),f=v=>v>1?1:v<0?0:v,m=v=>{for(var y=v>1?1:v,x=y,b=0;b<8;++b){var w=u(x)-y,j=h(x);if(Math.abs(w-y)<qp||j<qp)return d(x);x=f(x-w/j)}return d(x)};return m.isStepper=!1,m},lhe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:s=17}=e,i=(o,l,c)=>{var u=-(o-l)*r,d=c*n,h=c+(u-d)*s/1e3,f=c*s/1e3+o;return Math.abs(f-l)<qp&&Math.abs(h)<qp?[l,0]:[f,h]};return i.isStepper=!0,i.dt=s,i},che=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return _T(t);case"spring":return lhe();default:if(t.split("(")[0]==="cubic-bezier")return _T(t)}return typeof t=="function"?t:null};function uhe(t){var e,r=()=>null,n=!1,s=null,i=o=>{if(!n){if(Array.isArray(o)){if(!o.length)return;var l=o,[c,...u]=l;if(typeof c=="number"){s=t.setTimeout(i.bind(null,u),c);return}i(c),s=t.setTimeout(i.bind(null,u));return}typeof o=="string"&&(e=o,r(e)),typeof o=="object"&&(e=o,r(e)),typeof o=="function"&&o()}};return{stop:()=>{n=!0},start:o=>{n=!1,s&&(s(),s=null),i(o)},subscribe:o=>(r=o,()=>{r=()=>null}),getTimeoutController:()=>t}}class dhe{setTimeout(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),s=null,i=o=>{o-n>=r?e(o):typeof requestAnimationFrame=="function"&&(s=requestAnimationFrame(i))};return s=requestAnimationFrame(i),()=>{cancelAnimationFrame(s)}}}function hhe(){return uhe(new dhe)}var fhe=p.createContext(hhe);function mhe(t,e){var r=p.useContext(fhe);return p.useMemo(()=>e??r(t),[t,e,r])}var phe={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},ST={t:0},Vx={t:1};function Pu(t){var e=Tr(t,phe),{isActive:r,canBegin:n,duration:s,easing:i,begin:o,onAnimationEnd:l,onAnimationStart:c,children:u}=e,d=mhe(e.animationId,e.animationManager),[h,f]=p.useState(r?ST:Vx),m=p.useRef(null);return p.useEffect(()=>{r||f(Vx)},[r]),p.useEffect(()=>{if(!r||!n)return Yde;var v=ihe(ST,Vx,che(i),s,f,d.getTimeoutController()),y=()=>{m.current=v()};return d.start([c,o,y,s,l]),()=>{d.stop(),m.current&&m.current(),l()}},[r,n,s,i,o,c,l,d]),u(h.t)}function Tu(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=p.useRef(Jd(e)),n=p.useRef(t);return n.current!==t&&(r.current=Jd(e),n.current=t),r.current}function AT(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function ET(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?AT(Object(r),!0).forEach(function(n){ghe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):AT(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ghe(t,e,r){return(e=yhe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function yhe(t){var e=vhe(t,"string");return typeof e=="symbol"?e:e+""}function vhe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Hp(){return Hp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Hp.apply(null,arguments)}var PT=(t,e,r,n,s)=>{var i=Math.min(Math.abs(r)/2,Math.abs(n)/2),o=n>=0?1:-1,l=r>=0?1:-1,c=n>=0&&r>=0||n<0&&r<0?1:0,u;if(i>0&&s instanceof Array){for(var d=[0,0,0,0],h=0,f=4;h<f;h++)d[h]=s[h]>i?i:s[h];u="M".concat(t,",").concat(e+o*d[0]),d[0]>0&&(u+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(c,",").concat(t+l*d[0],",").concat(e)),u+="L ".concat(t+r-l*d[1],",").concat(e),d[1]>0&&(u+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(c,`,
        `).concat(t+r,",").concat(e+o*d[1])),u+="L ".concat(t+r,",").concat(e+n-o*d[2]),d[2]>0&&(u+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(c,`,
        `).concat(t+r-l*d[2],",").concat(e+n)),u+="L ".concat(t+l*d[3],",").concat(e+n),d[3]>0&&(u+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(c,`,
        `).concat(t,",").concat(e+n-o*d[3])),u+="Z"}else if(i>0&&s===+s&&s>0){var m=Math.min(i,s);u="M ".concat(t,",").concat(e+o*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(t+l*m,",").concat(e,`
            L `).concat(t+r-l*m,",").concat(e,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(t+r,",").concat(e+o*m,`
            L `).concat(t+r,",").concat(e+n-o*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(t+r-l*m,",").concat(e+n,`
            L `).concat(t+l*m,",").concat(e+n,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(t,",").concat(e+n-o*m," Z")}else u="M ".concat(t,",").concat(e," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return u},xhe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},L6=t=>{var e=Tr(t,xhe),r=p.useRef(null),[n,s]=p.useState(-1);p.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var B=r.current.getTotalLength();B&&s(B)}catch{}},[]);var{x:i,y:o,width:l,height:c,radius:u,className:d}=e,{animationEasing:h,animationDuration:f,animationBegin:m,isAnimationActive:v,isUpdateAnimationActive:y}=e,x=p.useRef(l),b=p.useRef(c),w=p.useRef(i),j=p.useRef(o),E=p.useMemo(()=>({x:i,y:o,width:l,height:c,radius:u}),[i,o,l,c,u]),I=Tu(E,"rectangle-");if(i!==+i||o!==+o||l!==+l||c!==+c||l===0||c===0)return null;var O=lt("recharts-rectangle",d);if(!y)return p.createElement("path",Hp({},Gt(e,!0),{className:O,d:PT(i,o,l,c,u)}));var T=x.current,A=b.current,S=w.current,_=j.current,P="0px ".concat(n===-1?1:n,"px"),R="".concat(n,"px 0px"),C=R6(["strokeDasharray"],f,typeof h=="string"?h:void 0);return p.createElement(Pu,{animationId:I,key:I,canBegin:n>0,duration:f,easing:h,isActive:y,begin:m},B=>{var G=Et(T,l,B),U=Et(A,c,B),F=Et(S,i,B),M=Et(_,o,B);r.current&&(x.current=G,b.current=U,w.current=F,j.current=M);var $;return v?B>0?$={transition:C,strokeDasharray:R}:$={strokeDasharray:P}:$={strokeDasharray:R},p.createElement("path",Hp({},Gt(e,!0),{className:O,d:PT(F,M,G,U,u),ref:r,style:ET(ET({},$),e.style)}))})};function F6(t){var{cx:e,cy:r,radius:n,startAngle:s,endAngle:i}=t,o=jr(e,r,n,s),l=jr(e,r,n,i);return{points:[o,l],cx:e,cy:r,radius:n,startAngle:s,endAngle:i}}function M0(){return M0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},M0.apply(null,arguments)}var bhe=(t,e)=>{var r=Or(e-t),n=Math.min(Math.abs(e-t),359.999);return r*n},um=t=>{var{cx:e,cy:r,radius:n,angle:s,sign:i,isExternal:o,cornerRadius:l,cornerIsExternal:c}=t,u=l*(o?1:-1)+n,d=Math.asin(l/u)/zp,h=c?s:s+i*d,f=jr(e,r,u,h),m=jr(e,r,n,h),v=c?s-i*d:s,y=jr(e,r,u*Math.cos(d*zp),v);return{center:f,circleTangency:m,lineTangency:y,theta:d}},$6=t=>{var{cx:e,cy:r,innerRadius:n,outerRadius:s,startAngle:i,endAngle:o}=t,l=bhe(i,o),c=i+l,u=jr(e,r,s,i),d=jr(e,r,s,c),h="M ".concat(u.x,",").concat(u.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(i>c),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(n>0){var f=jr(e,r,n,i),m=jr(e,r,n,c);h+="L ".concat(m.x,",").concat(m.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(i<=c),`,
            `).concat(f.x,",").concat(f.y," Z")}else h+="L ".concat(e,",").concat(r," Z");return h},whe=t=>{var{cx:e,cy:r,innerRadius:n,outerRadius:s,cornerRadius:i,forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:u}=t,d=Or(u-c),{circleTangency:h,lineTangency:f,theta:m}=um({cx:e,cy:r,radius:s,angle:c,sign:d,cornerRadius:i,cornerIsExternal:l}),{circleTangency:v,lineTangency:y,theta:x}=um({cx:e,cy:r,radius:s,angle:u,sign:-d,cornerRadius:i,cornerIsExternal:l}),b=l?Math.abs(c-u):Math.abs(c-u)-m-x;if(b<0)return o?"M ".concat(f.x,",").concat(f.y,`
        a`).concat(i,",").concat(i,",0,0,1,").concat(i*2,`,0
        a`).concat(i,",").concat(i,",0,0,1,").concat(-i*2,`,0
      `):$6({cx:e,cy:r,innerRadius:n,outerRadius:s,startAngle:c,endAngle:u});var w="M ".concat(f.x,",").concat(f.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat(h.x,",").concat(h.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(b>180),",").concat(+(d<0),",").concat(v.x,",").concat(v.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat(y.x,",").concat(y.y,`
  `);if(n>0){var{circleTangency:j,lineTangency:E,theta:I}=um({cx:e,cy:r,radius:n,angle:c,sign:d,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),{circleTangency:O,lineTangency:T,theta:A}=um({cx:e,cy:r,radius:n,angle:u,sign:-d,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),S=l?Math.abs(c-u):Math.abs(c-u)-I-A;if(S<0&&i===0)return"".concat(w,"L").concat(e,",").concat(r,"Z");w+="L".concat(T.x,",").concat(T.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat(O.x,",").concat(O.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(S>180),",").concat(+(d>0),",").concat(j.x,",").concat(j.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat(E.x,",").concat(E.y,"Z")}else w+="L".concat(e,",").concat(r,"Z");return w},jhe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},U6=t=>{var e=Tr(t,jhe),{cx:r,cy:n,innerRadius:s,outerRadius:i,cornerRadius:o,forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d,className:h}=e;if(i<s||u===d)return null;var f=lt("recharts-sector",h),m=i-s,v=an(o,m,0,!0),y;return v>0&&Math.abs(u-d)<360?y=whe({cx:r,cy:n,innerRadius:s,outerRadius:i,cornerRadius:Math.min(v,m/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d}):y=$6({cx:r,cy:n,innerRadius:s,outerRadius:i,startAngle:u,endAngle:d}),p.createElement("path",M0({},Gt(e,!0),{className:f,d:y}))};function Nhe(t,e,r){var n,s,i,o;if(t==="horizontal")n=e.x,i=n,s=r.top,o=r.top+r.height;else if(t==="vertical")s=e.y,o=s,n=r.left,i=r.left+r.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var{cx:l,cy:c,innerRadius:u,outerRadius:d,angle:h}=e,f=jr(l,c,u,h),m=jr(l,c,d,h);n=f.x,s=f.y,i=m.x,o=m.y}else return F6(e);return[{x:n,y:s},{x:i,y:o}]}var B6={},V6={},z6={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=rN;function r(n){return e.isSymbol(n)?NaN:Number(n)}t.toNumber=r})(z6);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=z6;function r(n){return n?(n=e.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}t.toFinite=r})(V6);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=nN,r=V6;function n(s,i,o){o&&typeof o!="number"&&e.isIterateeCall(s,i,o)&&(i=o=void 0),s=r.toFinite(s),i===void 0?(i=s,s=0):i=r.toFinite(i),o=o===void 0?s<i?1:-1:r.toFinite(o);const l=Math.max(Math.ceil((i-s)/(o||1)),0),c=new Array(l);for(let u=0;u<l;u++)c[u]=s,s+=o;return c}t.range=n})(B6);var _he=B6.range;const G6=_o(_he);function ao(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function She(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function mN(t){let e,r,n;t.length!==2?(e=ao,r=(l,c)=>ao(t(l),c),n=(l,c)=>t(l)-c):(e=t===ao||t===She?t:Ahe,r=t,n=t);function s(l,c,u=0,d=l.length){if(u<d){if(e(c,c)!==0)return d;do{const h=u+d>>>1;r(l[h],c)<0?u=h+1:d=h}while(u<d)}return u}function i(l,c,u=0,d=l.length){if(u<d){if(e(c,c)!==0)return d;do{const h=u+d>>>1;r(l[h],c)<=0?u=h+1:d=h}while(u<d)}return u}function o(l,c,u=0,d=l.length){const h=s(l,c,u,d-1);return h>u&&n(l[h-1],c)>-n(l[h],c)?h-1:h}return{left:s,center:o,right:i}}function Ahe(){return 0}function W6(t){return t===null?NaN:+t}function*Ehe(t,e){for(let r of t)r!=null&&(r=+r)>=r&&(yield r)}const Phe=mN(ao),Zh=Phe.right;mN(W6).center;class TT extends Map{constructor(e,r=khe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[n,s]of e)this.set(n,s)}get(e){return super.get(CT(this,e))}has(e){return super.has(CT(this,e))}set(e,r){return super.set(The(this,e),r)}delete(e){return super.delete(Che(this,e))}}function CT({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):r}function The({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):(t.set(n,r),r)}function Che({_intern:t,_key:e},r){const n=e(r);return t.has(n)&&(r=t.get(n),t.delete(n)),r}function khe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Ihe(t=ao){if(t===ao)return q6;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,r)=>{const n=t(e,r);return n||n===0?n:(t(r,r)===0)-(t(e,e)===0)}}function q6(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const Rhe=Math.sqrt(50),Ohe=Math.sqrt(10),Dhe=Math.sqrt(2);function Kp(t,e,r){const n=(e-t)/Math.max(0,r),s=Math.floor(Math.log10(n)),i=n/Math.pow(10,s),o=i>=Rhe?10:i>=Ohe?5:i>=Dhe?2:1;let l,c,u;return s<0?(u=Math.pow(10,-s)/o,l=Math.round(t*u),c=Math.round(e*u),l/u<t&&++l,c/u>e&&--c,u=-u):(u=Math.pow(10,s)*o,l=Math.round(t/u),c=Math.round(e/u),l*u<t&&++l,c*u>e&&--c),c<l&&.5<=r&&r<2?Kp(t,e,r*2):[l,c,u]}function L0(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const n=e<t,[s,i,o]=n?Kp(e,t,r):Kp(t,e,r);if(!(i>=s))return[];const l=i-s+1,c=new Array(l);if(n)if(o<0)for(let u=0;u<l;++u)c[u]=(i-u)/-o;else for(let u=0;u<l;++u)c[u]=(i-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(s+u)/-o;else for(let u=0;u<l;++u)c[u]=(s+u)*o;return c}function F0(t,e,r){return e=+e,t=+t,r=+r,Kp(t,e,r)[2]}function $0(t,e,r){e=+e,t=+t,r=+r;const n=e<t,s=n?F0(e,t,r):F0(t,e,r);return(n?-1:1)*(s<0?1/-s:s)}function kT(t,e){let r;for(const n of t)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function IT(t,e){let r;for(const n of t)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function H6(t,e,r=0,n=1/0,s){if(e=Math.floor(e),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(t.length-1,n)),!(r<=e&&e<=n))return t;for(s=s===void 0?q6:Ihe(s);n>r;){if(n-r>600){const c=n-r+1,u=e-r+1,d=Math.log(c),h=.5*Math.exp(2*d/3),f=.5*Math.sqrt(d*h*(c-h)/c)*(u-c/2<0?-1:1),m=Math.max(r,Math.floor(e-u*h/c+f)),v=Math.min(n,Math.floor(e+(c-u)*h/c+f));H6(t,e,m,v,s)}const i=t[e];let o=r,l=n;for(id(t,r,e),s(t[n],i)>0&&id(t,r,n);o<l;){for(id(t,o,l),++o,--l;s(t[o],i)<0;)++o;for(;s(t[l],i)>0;)--l}s(t[r],i)===0?id(t,r,l):(++l,id(t,l,n)),l<=e&&(r=l+1),e<=l&&(n=l-1)}return t}function id(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function Mhe(t,e,r){if(t=Float64Array.from(Ehe(t)),!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return IT(t);if(e>=1)return kT(t);var n,s=(n-1)*e,i=Math.floor(s),o=kT(H6(t,i).subarray(0,i+1)),l=IT(t.subarray(i+1));return o+(l-o)*(s-i)}}function Lhe(t,e,r=W6){if(!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return+r(t[0],0,t);if(e>=1)return+r(t[n-1],n-1,t);var n,s=(n-1)*e,i=Math.floor(s),o=+r(t[i],i,t),l=+r(t[i+1],i+1,t);return o+(l-o)*(s-i)}}function Fhe(t,e,r){t=+t,e=+e,r=(s=arguments.length)<2?(e=t,t=0,1):s<3?1:+r;for(var n=-1,s=Math.max(0,Math.ceil((e-t)/r))|0,i=new Array(s);++n<s;)i[n]=t+n*r;return i}function As(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function bi(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const U0=Symbol("implicit");function pN(){var t=new TT,e=[],r=[],n=U0;function s(i){let o=t.get(i);if(o===void 0){if(n!==U0)return n;t.set(i,o=e.push(i)-1)}return r[o%r.length]}return s.domain=function(i){if(!arguments.length)return e.slice();e=[],t=new TT;for(const o of i)t.has(o)||t.set(o,e.push(o)-1);return s},s.range=function(i){return arguments.length?(r=Array.from(i),s):r.slice()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return pN(e,r).unknown(n)},As.apply(s,arguments),s}function gN(){var t=pN().unknown(void 0),e=t.domain,r=t.range,n=0,s=1,i,o,l=!1,c=0,u=0,d=.5;delete t.unknown;function h(){var f=e().length,m=s<n,v=m?s:n,y=m?n:s;i=(y-v)/Math.max(1,f-c+u*2),l&&(i=Math.floor(i)),v+=(y-v-i*(f-c))*d,o=i*(1-c),l&&(v=Math.round(v),o=Math.round(o));var x=Fhe(f).map(function(b){return v+i*b});return r(m?x.reverse():x)}return t.domain=function(f){return arguments.length?(e(f),h()):e()},t.range=function(f){return arguments.length?([n,s]=f,n=+n,s=+s,h()):[n,s]},t.rangeRound=function(f){return[n,s]=f,n=+n,s=+s,l=!0,h()},t.bandwidth=function(){return o},t.step=function(){return i},t.round=function(f){return arguments.length?(l=!!f,h()):l},t.padding=function(f){return arguments.length?(c=Math.min(1,u=+f),h()):c},t.paddingInner=function(f){return arguments.length?(c=Math.min(1,f),h()):c},t.paddingOuter=function(f){return arguments.length?(u=+f,h()):u},t.align=function(f){return arguments.length?(d=Math.max(0,Math.min(1,f)),h()):d},t.copy=function(){return gN(e(),[n,s]).round(l).paddingInner(c).paddingOuter(u).align(d)},As.apply(h(),arguments)}function K6(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return K6(e())},t}function $he(){return K6(gN.apply(null,arguments).paddingInner(1))}function yN(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function Y6(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function ef(){}var rh=.7,Yp=1/rh,Pc="\\s*([+-]?\\d+)\\s*",nh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",xa="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Uhe=/^#([0-9a-f]{3,8})$/,Bhe=new RegExp(`^rgb\\(${Pc},${Pc},${Pc}\\)$`),Vhe=new RegExp(`^rgb\\(${xa},${xa},${xa}\\)$`),zhe=new RegExp(`^rgba\\(${Pc},${Pc},${Pc},${nh}\\)$`),Ghe=new RegExp(`^rgba\\(${xa},${xa},${xa},${nh}\\)$`),Whe=new RegExp(`^hsl\\(${nh},${xa},${xa}\\)$`),qhe=new RegExp(`^hsla\\(${nh},${xa},${xa},${nh}\\)$`),RT={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};yN(ef,sh,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:OT,formatHex:OT,formatHex8:Hhe,formatHsl:Khe,formatRgb:DT,toString:DT});function OT(){return this.rgb().formatHex()}function Hhe(){return this.rgb().formatHex8()}function Khe(){return Q6(this).formatHsl()}function DT(){return this.rgb().formatRgb()}function sh(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=Uhe.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?MT(e):r===3?new Pn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?dm(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?dm(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Bhe.exec(t))?new Pn(e[1],e[2],e[3],1):(e=Vhe.exec(t))?new Pn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=zhe.exec(t))?dm(e[1],e[2],e[3],e[4]):(e=Ghe.exec(t))?dm(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Whe.exec(t))?$T(e[1],e[2]/100,e[3]/100,1):(e=qhe.exec(t))?$T(e[1],e[2]/100,e[3]/100,e[4]):RT.hasOwnProperty(t)?MT(RT[t]):t==="transparent"?new Pn(NaN,NaN,NaN,0):null}function MT(t){return new Pn(t>>16&255,t>>8&255,t&255,1)}function dm(t,e,r,n){return n<=0&&(t=e=r=NaN),new Pn(t,e,r,n)}function Yhe(t){return t instanceof ef||(t=sh(t)),t?(t=t.rgb(),new Pn(t.r,t.g,t.b,t.opacity)):new Pn}function B0(t,e,r,n){return arguments.length===1?Yhe(t):new Pn(t,e,r,n??1)}function Pn(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}yN(Pn,B0,Y6(ef,{brighter(t){return t=t==null?Yp:Math.pow(Yp,t),new Pn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?rh:Math.pow(rh,t),new Pn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Pn(vl(this.r),vl(this.g),vl(this.b),Qp(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:LT,formatHex:LT,formatHex8:Qhe,formatRgb:FT,toString:FT}));function LT(){return`#${rl(this.r)}${rl(this.g)}${rl(this.b)}`}function Qhe(){return`#${rl(this.r)}${rl(this.g)}${rl(this.b)}${rl((isNaN(this.opacity)?1:this.opacity)*255)}`}function FT(){const t=Qp(this.opacity);return`${t===1?"rgb(":"rgba("}${vl(this.r)}, ${vl(this.g)}, ${vl(this.b)}${t===1?")":`, ${t})`}`}function Qp(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function vl(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function rl(t){return t=vl(t),(t<16?"0":"")+t.toString(16)}function $T(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new Ms(t,e,r,n)}function Q6(t){if(t instanceof Ms)return new Ms(t.h,t.s,t.l,t.opacity);if(t instanceof ef||(t=sh(t)),!t)return new Ms;if(t instanceof Ms)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,s=Math.min(e,r,n),i=Math.max(e,r,n),o=NaN,l=i-s,c=(i+s)/2;return l?(e===i?o=(r-n)/l+(r<n)*6:r===i?o=(n-e)/l+2:o=(e-r)/l+4,l/=c<.5?i+s:2-i-s,o*=60):l=c>0&&c<1?0:o,new Ms(o,l,c,t.opacity)}function Xhe(t,e,r,n){return arguments.length===1?Q6(t):new Ms(t,e,r,n??1)}function Ms(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}yN(Ms,Xhe,Y6(ef,{brighter(t){return t=t==null?Yp:Math.pow(Yp,t),new Ms(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?rh:Math.pow(rh,t),new Ms(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,s=2*r-n;return new Pn(zx(t>=240?t-240:t+120,s,n),zx(t,s,n),zx(t<120?t+240:t-120,s,n),this.opacity)},clamp(){return new Ms(UT(this.h),hm(this.s),hm(this.l),Qp(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Qp(this.opacity);return`${t===1?"hsl(":"hsla("}${UT(this.h)}, ${hm(this.s)*100}%, ${hm(this.l)*100}%${t===1?")":`, ${t})`}`}}));function UT(t){return t=(t||0)%360,t<0?t+360:t}function hm(t){return Math.max(0,Math.min(1,t||0))}function zx(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const vN=t=>()=>t;function Jhe(t,e){return function(r){return t+r*e}}function Zhe(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function efe(t){return(t=+t)==1?X6:function(e,r){return r-e?Zhe(e,r,t):vN(isNaN(e)?r:e)}}function X6(t,e){var r=e-t;return r?Jhe(t,r):vN(isNaN(t)?e:t)}const BT=function t(e){var r=efe(e);function n(s,i){var o=r((s=B0(s)).r,(i=B0(i)).r),l=r(s.g,i.g),c=r(s.b,i.b),u=X6(s.opacity,i.opacity);return function(d){return s.r=o(d),s.g=l(d),s.b=c(d),s.opacity=u(d),s+""}}return n.gamma=t,n}(1);function tfe(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),s;return function(i){for(s=0;s<r;++s)n[s]=t[s]*(1-i)+e[s]*i;return n}}function rfe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function nfe(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,s=new Array(n),i=new Array(r),o;for(o=0;o<n;++o)s[o]=Cu(t[o],e[o]);for(;o<r;++o)i[o]=e[o];return function(l){for(o=0;o<n;++o)i[o]=s[o](l);return i}}function sfe(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function Xp(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function afe(t,e){var r={},n={},s;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(s in e)s in t?r[s]=Cu(t[s],e[s]):n[s]=e[s];return function(i){for(s in r)n[s]=r[s](i);return n}}var V0=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Gx=new RegExp(V0.source,"g");function ife(t){return function(){return t}}function ofe(t){return function(e){return t(e)+""}}function lfe(t,e){var r=V0.lastIndex=Gx.lastIndex=0,n,s,i,o=-1,l=[],c=[];for(t=t+"",e=e+"";(n=V0.exec(t))&&(s=Gx.exec(e));)(i=s.index)>r&&(i=e.slice(r,i),l[o]?l[o]+=i:l[++o]=i),(n=n[0])===(s=s[0])?l[o]?l[o]+=s:l[++o]=s:(l[++o]=null,c.push({i:o,x:Xp(n,s)})),r=Gx.lastIndex;return r<e.length&&(i=e.slice(r),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?ofe(c[0].x):ife(e):(e=c.length,function(u){for(var d=0,h;d<e;++d)l[(h=c[d]).i]=h.x(u);return l.join("")})}function Cu(t,e){var r=typeof e,n;return e==null||r==="boolean"?vN(e):(r==="number"?Xp:r==="string"?(n=sh(e))?(e=n,BT):lfe:e instanceof sh?BT:e instanceof Date?sfe:rfe(e)?tfe:Array.isArray(e)?nfe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?afe:Xp)(t,e)}function xN(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}function cfe(t,e){e===void 0&&(e=t,t=Cu);for(var r=0,n=e.length-1,s=e[0],i=new Array(n<0?0:n);r<n;)i[r]=t(s,s=e[++r]);return function(o){var l=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return i[l](o-l)}}function ufe(t){return function(){return t}}function Jp(t){return+t}var VT=[0,1];function pn(t){return t}function z0(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:ufe(isNaN(e)?NaN:.5)}function dfe(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function hfe(t,e,r){var n=t[0],s=t[1],i=e[0],o=e[1];return s<n?(n=z0(s,n),i=r(o,i)):(n=z0(n,s),i=r(i,o)),function(l){return i(n(l))}}function ffe(t,e,r){var n=Math.min(t.length,e.length)-1,s=new Array(n),i=new Array(n),o=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<n;)s[o]=z0(t[o],t[o+1]),i[o]=r(e[o],e[o+1]);return function(l){var c=Zh(t,l,1,n)-1;return i[c](s[c](l))}}function tf(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function iv(){var t=VT,e=VT,r=Cu,n,s,i,o=pn,l,c,u;function d(){var f=Math.min(t.length,e.length);return o!==pn&&(o=dfe(t[0],t[f-1])),l=f>2?ffe:hfe,c=u=null,h}function h(f){return f==null||isNaN(f=+f)?i:(c||(c=l(t.map(n),e,r)))(n(o(f)))}return h.invert=function(f){return o(s((u||(u=l(e,t.map(n),Xp)))(f)))},h.domain=function(f){return arguments.length?(t=Array.from(f,Jp),d()):t.slice()},h.range=function(f){return arguments.length?(e=Array.from(f),d()):e.slice()},h.rangeRound=function(f){return e=Array.from(f),r=xN,d()},h.clamp=function(f){return arguments.length?(o=f?!0:pn,d()):o!==pn},h.interpolate=function(f){return arguments.length?(r=f,d()):r},h.unknown=function(f){return arguments.length?(i=f,h):i},function(f,m){return n=f,s=m,d()}}function bN(){return iv()(pn,pn)}function mfe(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Zp(t,e){if((r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var r,n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function iu(t){return t=Zp(Math.abs(t)),t?t[1]:NaN}function pfe(t,e){return function(r,n){for(var s=r.length,i=[],o=0,l=t[0],c=0;s>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),i.push(r.substring(s-=l,s+l)),!((c+=l+1)>n));)l=t[o=(o+1)%t.length];return i.reverse().join(e)}}function gfe(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var yfe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ah(t){if(!(e=yfe.exec(t)))throw new Error("invalid format: "+t);var e;return new wN({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}ah.prototype=wN.prototype;function wN(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}wN.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function vfe(t){e:for(var e=t.length,r=1,n=-1,s;r<e;++r)switch(t[r]){case".":n=s=r;break;case"0":n===0&&(n=r),s=r;break;default:if(!+t[r])break e;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(s+1):t}var J6;function xfe(t,e){var r=Zp(t,e);if(!r)return t+"";var n=r[0],s=r[1],i=s-(J6=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,o=n.length;return i===o?n:i>o?n+new Array(i-o+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+Zp(t,Math.max(0,e+i-1))[0]}function zT(t,e){var r=Zp(t,e);if(!r)return t+"";var n=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}const GT={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:mfe,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>zT(t*100,e),r:zT,s:xfe,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function WT(t){return t}var qT=Array.prototype.map,HT=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function bfe(t){var e=t.grouping===void 0||t.thousands===void 0?WT:pfe(qT.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",s=t.decimal===void 0?".":t.decimal+"",i=t.numerals===void 0?WT:gfe(qT.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"−":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function u(h){h=ah(h);var f=h.fill,m=h.align,v=h.sign,y=h.symbol,x=h.zero,b=h.width,w=h.comma,j=h.precision,E=h.trim,I=h.type;I==="n"?(w=!0,I="g"):GT[I]||(j===void 0&&(j=12),E=!0,I="g"),(x||f==="0"&&m==="=")&&(x=!0,f="0",m="=");var O=y==="$"?r:y==="#"&&/[boxX]/.test(I)?"0"+I.toLowerCase():"",T=y==="$"?n:/[%p]/.test(I)?o:"",A=GT[I],S=/[defgprs%]/.test(I);j=j===void 0?6:/[gprs]/.test(I)?Math.max(1,Math.min(21,j)):Math.max(0,Math.min(20,j));function _(P){var R=O,C=T,B,G,U;if(I==="c")C=A(P)+C,P="";else{P=+P;var F=P<0||1/P<0;if(P=isNaN(P)?c:A(Math.abs(P),j),E&&(P=vfe(P)),F&&+P==0&&v!=="+"&&(F=!1),R=(F?v==="("?v:l:v==="-"||v==="("?"":v)+R,C=(I==="s"?HT[8+J6/3]:"")+C+(F&&v==="("?")":""),S){for(B=-1,G=P.length;++B<G;)if(U=P.charCodeAt(B),48>U||U>57){C=(U===46?s+P.slice(B+1):P.slice(B))+C,P=P.slice(0,B);break}}}w&&!x&&(P=e(P,1/0));var M=R.length+P.length+C.length,$=M<b?new Array(b-M+1).join(f):"";switch(w&&x&&(P=e($+P,$.length?b-C.length:1/0),$=""),m){case"<":P=R+P+C+$;break;case"=":P=R+$+P+C;break;case"^":P=$.slice(0,M=$.length>>1)+R+P+C+$.slice(M);break;default:P=$+R+P+C;break}return i(P)}return _.toString=function(){return h+""},_}function d(h,f){var m=u((h=ah(h),h.type="f",h)),v=Math.max(-8,Math.min(8,Math.floor(iu(f)/3)))*3,y=Math.pow(10,-v),x=HT[8+v/3];return function(b){return m(y*b)+x}}return{format:u,formatPrefix:d}}var fm,jN,Z6;wfe({thousands:",",grouping:[3],currency:["$",""]});function wfe(t){return fm=bfe(t),jN=fm.format,Z6=fm.formatPrefix,fm}function jfe(t){return Math.max(0,-iu(Math.abs(t)))}function Nfe(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(iu(e)/3)))*3-iu(Math.abs(t)))}function _fe(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,iu(e)-iu(t))+1}function eF(t,e,r,n){var s=$0(t,e,r),i;switch(n=ah(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(i=Nfe(s,o))&&(n.precision=i),Z6(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=_fe(s,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=jfe(s))&&(n.precision=i-(n.type==="%")*2);break}}return jN(n)}function Lo(t){var e=t.domain;return t.ticks=function(r){var n=e();return L0(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var s=e();return eF(s[0],s[s.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),s=0,i=n.length-1,o=n[s],l=n[i],c,u,d=10;for(l<o&&(u=o,o=l,l=u,u=s,s=i,i=u);d-- >0;){if(u=F0(o,l,r),u===c)return n[s]=o,n[i]=l,e(n);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return t},t}function tF(){var t=bN();return t.copy=function(){return tf(t,tF())},As.apply(t,arguments),Lo(t)}function rF(t){var e;function r(n){return n==null||isNaN(n=+n)?e:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(t=Array.from(n,Jp),r):t.slice()},r.unknown=function(n){return arguments.length?(e=n,r):e},r.copy=function(){return rF(t).unknown(e)},t=arguments.length?Array.from(t,Jp):[0,1],Lo(r)}function nF(t,e){t=t.slice();var r=0,n=t.length-1,s=t[r],i=t[n],o;return i<s&&(o=r,r=n,n=o,o=s,s=i,i=o),t[r]=e.floor(s),t[n]=e.ceil(i),t}function KT(t){return Math.log(t)}function YT(t){return Math.exp(t)}function Sfe(t){return-Math.log(-t)}function Afe(t){return-Math.exp(-t)}function Efe(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Pfe(t){return t===10?Efe:t===Math.E?Math.exp:e=>Math.pow(t,e)}function Tfe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function QT(t){return(e,r)=>-t(-e,r)}function NN(t){const e=t(KT,YT),r=e.domain;let n=10,s,i;function o(){return s=Tfe(n),i=Pfe(n),r()[0]<0?(s=QT(s),i=QT(i),t(Sfe,Afe)):t(KT,YT),e}return e.base=function(l){return arguments.length?(n=+l,o()):n},e.domain=function(l){return arguments.length?(r(l),o()):r()},e.ticks=l=>{const c=r();let u=c[0],d=c[c.length-1];const h=d<u;h&&([u,d]=[d,u]);let f=s(u),m=s(d),v,y;const x=l==null?10:+l;let b=[];if(!(n%1)&&m-f<x){if(f=Math.floor(f),m=Math.ceil(m),u>0){for(;f<=m;++f)for(v=1;v<n;++v)if(y=f<0?v/i(-f):v*i(f),!(y<u)){if(y>d)break;b.push(y)}}else for(;f<=m;++f)for(v=n-1;v>=1;--v)if(y=f>0?v/i(-f):v*i(f),!(y<u)){if(y>d)break;b.push(y)}b.length*2<x&&(b=L0(u,d,x))}else b=L0(f,m,Math.min(m-f,x)).map(i);return h?b.reverse():b},e.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=ah(c)).precision==null&&(c.trim=!0),c=jN(c)),l===1/0)return c;const u=Math.max(1,n*l/e.ticks().length);return d=>{let h=d/i(Math.round(s(d)));return h*n<n-.5&&(h*=n),h<=u?c(d):""}},e.nice=()=>r(nF(r(),{floor:l=>i(Math.floor(s(l))),ceil:l=>i(Math.ceil(s(l)))})),e}function sF(){const t=NN(iv()).domain([1,10]);return t.copy=()=>tf(t,sF()).base(t.base()),As.apply(t,arguments),t}function XT(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function JT(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function _N(t){var e=1,r=t(XT(e),JT(e));return r.constant=function(n){return arguments.length?t(XT(e=+n),JT(e)):e},Lo(r)}function aF(){var t=_N(iv());return t.copy=function(){return tf(t,aF()).constant(t.constant())},As.apply(t,arguments)}function ZT(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Cfe(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function kfe(t){return t<0?-t*t:t*t}function SN(t){var e=t(pn,pn),r=1;function n(){return r===1?t(pn,pn):r===.5?t(Cfe,kfe):t(ZT(r),ZT(1/r))}return e.exponent=function(s){return arguments.length?(r=+s,n()):r},Lo(e)}function AN(){var t=SN(iv());return t.copy=function(){return tf(t,AN()).exponent(t.exponent())},As.apply(t,arguments),t}function Ife(){return AN.apply(null,arguments).exponent(.5)}function eC(t){return Math.sign(t)*t*t}function Rfe(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function iF(){var t=bN(),e=[0,1],r=!1,n;function s(i){var o=Rfe(t(i));return isNaN(o)?n:r?Math.round(o):o}return s.invert=function(i){return t.invert(eC(i))},s.domain=function(i){return arguments.length?(t.domain(i),s):t.domain()},s.range=function(i){return arguments.length?(t.range((e=Array.from(i,Jp)).map(eC)),s):e.slice()},s.rangeRound=function(i){return s.range(i).round(!0)},s.round=function(i){return arguments.length?(r=!!i,s):r},s.clamp=function(i){return arguments.length?(t.clamp(i),s):t.clamp()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return iF(t.domain(),e).round(r).clamp(t.clamp()).unknown(n)},As.apply(s,arguments),Lo(s)}function oF(){var t=[],e=[],r=[],n;function s(){var o=0,l=Math.max(1,e.length);for(r=new Array(l-1);++o<l;)r[o-1]=Lhe(t,o/l);return i}function i(o){return o==null||isNaN(o=+o)?n:e[Zh(r,o)]}return i.invertExtent=function(o){var l=e.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:t[0],l<r.length?r[l]:t[t.length-1]]},i.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let l of o)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(ao),s()},i.range=function(o){return arguments.length?(e=Array.from(o),s()):e.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return oF().domain(t).range(e).unknown(n)},As.apply(i,arguments)}function lF(){var t=0,e=1,r=1,n=[.5],s=[0,1],i;function o(c){return c!=null&&c<=c?s[Zh(n,c,0,r)]:i}function l(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*e-(c-r)*t)/(r+1);return o}return o.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,l()):[t,e]},o.range=function(c){return arguments.length?(r=(s=Array.from(c)).length-1,l()):s.slice()},o.invertExtent=function(c){var u=s.indexOf(c);return u<0?[NaN,NaN]:u<1?[t,n[0]]:u>=r?[n[r-1],e]:[n[u-1],n[u]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return n.slice()},o.copy=function(){return lF().domain([t,e]).range(s).unknown(i)},As.apply(Lo(o),arguments)}function cF(){var t=[.5],e=[0,1],r,n=1;function s(i){return i!=null&&i<=i?e[Zh(t,i,0,n)]:r}return s.domain=function(i){return arguments.length?(t=Array.from(i),n=Math.min(t.length,e.length-1),s):t.slice()},s.range=function(i){return arguments.length?(e=Array.from(i),n=Math.min(t.length,e.length-1),s):e.slice()},s.invertExtent=function(i){var o=e.indexOf(i);return[t[o-1],t[o]]},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return cF().domain(t).range(e).unknown(r)},As.apply(s,arguments)}const Wx=new Date,qx=new Date;function Cr(t,e,r,n){function s(i){return t(i=arguments.length===0?new Date:new Date(+i)),i}return s.floor=i=>(t(i=new Date(+i)),i),s.ceil=i=>(t(i=new Date(i-1)),e(i,1),t(i),i),s.round=i=>{const o=s(i),l=s.ceil(i);return i-o<l-i?o:l},s.offset=(i,o)=>(e(i=new Date(+i),o==null?1:Math.floor(o)),i),s.range=(i,o,l)=>{const c=[];if(i=s.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return c;let u;do c.push(u=new Date(+i)),e(i,l),t(i);while(u<i&&i<o);return c},s.filter=i=>Cr(o=>{if(o>=o)for(;t(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;e(o,-1),!i(o););else for(;--l>=0;)for(;e(o,1),!i(o););}),r&&(s.count=(i,o)=>(Wx.setTime(+i),qx.setTime(+o),t(Wx),t(qx),Math.floor(r(Wx,qx))),s.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?s.filter(n?o=>n(o)%i===0:o=>s.count(0,o)%i===0):s)),s}const eg=Cr(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);eg.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Cr(e=>{e.setTime(Math.floor(e/t)*t)},(e,r)=>{e.setTime(+e+r*t)},(e,r)=>(r-e)/t):eg);eg.range;const qa=1e3,fs=qa*60,Ha=fs*60,di=Ha*24,EN=di*7,tC=di*30,Hx=di*365,nl=Cr(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*qa)},(t,e)=>(e-t)/qa,t=>t.getUTCSeconds());nl.range;const PN=Cr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*qa)},(t,e)=>{t.setTime(+t+e*fs)},(t,e)=>(e-t)/fs,t=>t.getMinutes());PN.range;const TN=Cr(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*fs)},(t,e)=>(e-t)/fs,t=>t.getUTCMinutes());TN.range;const CN=Cr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*qa-t.getMinutes()*fs)},(t,e)=>{t.setTime(+t+e*Ha)},(t,e)=>(e-t)/Ha,t=>t.getHours());CN.range;const kN=Cr(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Ha)},(t,e)=>(e-t)/Ha,t=>t.getUTCHours());kN.range;const rf=Cr(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*fs)/di,t=>t.getDate()-1);rf.range;const ov=Cr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/di,t=>t.getUTCDate()-1);ov.range;const uF=Cr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/di,t=>Math.floor(t/di));uF.range;function Yl(t){return Cr(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,r)=>{e.setDate(e.getDate()+r*7)},(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*fs)/EN)}const lv=Yl(0),tg=Yl(1),Ofe=Yl(2),Dfe=Yl(3),ou=Yl(4),Mfe=Yl(5),Lfe=Yl(6);lv.range;tg.range;Ofe.range;Dfe.range;ou.range;Mfe.range;Lfe.range;function Ql(t){return Cr(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r*7)},(e,r)=>(r-e)/EN)}const cv=Ql(0),rg=Ql(1),Ffe=Ql(2),$fe=Ql(3),lu=Ql(4),Ufe=Ql(5),Bfe=Ql(6);cv.range;rg.range;Ffe.range;$fe.range;lu.range;Ufe.range;Bfe.range;const IN=Cr(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());IN.range;const RN=Cr(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());RN.range;const hi=Cr(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());hi.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Cr(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r*t)});hi.range;const fi=Cr(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());fi.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Cr(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*t)});fi.range;function dF(t,e,r,n,s,i){const o=[[nl,1,qa],[nl,5,5*qa],[nl,15,15*qa],[nl,30,30*qa],[i,1,fs],[i,5,5*fs],[i,15,15*fs],[i,30,30*fs],[s,1,Ha],[s,3,3*Ha],[s,6,6*Ha],[s,12,12*Ha],[n,1,di],[n,2,2*di],[r,1,EN],[e,1,tC],[e,3,3*tC],[t,1,Hx]];function l(u,d,h){const f=d<u;f&&([u,d]=[d,u]);const m=h&&typeof h.range=="function"?h:c(u,d,h),v=m?m.range(u,+d+1):[];return f?v.reverse():v}function c(u,d,h){const f=Math.abs(d-u)/h,m=mN(([,,x])=>x).right(o,f);if(m===o.length)return t.every($0(u/Hx,d/Hx,h));if(m===0)return eg.every(Math.max($0(u,d,h),1));const[v,y]=o[f/o[m-1][2]<o[m][2]/f?m-1:m];return v.every(y)}return[l,c]}const[Vfe,zfe]=dF(fi,RN,cv,uF,kN,TN),[Gfe,Wfe]=dF(hi,IN,lv,rf,CN,PN);function Kx(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Yx(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function od(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function qfe(t){var e=t.dateTime,r=t.date,n=t.time,s=t.periods,i=t.days,o=t.shortDays,l=t.months,c=t.shortMonths,u=ld(s),d=cd(s),h=ld(i),f=cd(i),m=ld(o),v=cd(o),y=ld(l),x=cd(l),b=ld(c),w=cd(c),j={a:F,A:M,b:$,B:ne,c:null,d:oC,e:oC,f:pme,g:Sme,G:Eme,H:hme,I:fme,j:mme,L:hF,m:gme,M:yme,p:te,q:z,Q:uC,s:dC,S:vme,u:xme,U:bme,V:wme,w:jme,W:Nme,x:null,X:null,y:_me,Y:Ame,Z:Pme,"%":cC},E={a:de,A:Z,b:re,B:_e,c:null,d:lC,e:lC,f:Ime,g:Vme,G:Gme,H:Tme,I:Cme,j:kme,L:mF,m:Rme,M:Ome,p:se,q:Fe,Q:uC,s:dC,S:Dme,u:Mme,U:Lme,V:Fme,w:$me,W:Ume,x:null,X:null,y:Bme,Y:zme,Z:Wme,"%":cC},I={a:_,A:P,b:R,B:C,c:B,d:aC,e:aC,f:lme,g:sC,G:nC,H:iC,I:iC,j:sme,L:ome,m:nme,M:ame,p:S,q:rme,Q:ume,s:dme,S:ime,u:Xfe,U:Jfe,V:Zfe,w:Qfe,W:eme,x:G,X:U,y:sC,Y:nC,Z:tme,"%":cme};j.x=O(r,j),j.X=O(n,j),j.c=O(e,j),E.x=O(r,E),E.X=O(n,E),E.c=O(e,E);function O(oe,V){return function(W){var L=[],J=-1,le=0,pe=oe.length,ke,De,qe;for(W instanceof Date||(W=new Date(+W));++J<pe;)oe.charCodeAt(J)===37&&(L.push(oe.slice(le,J)),(De=rC[ke=oe.charAt(++J)])!=null?ke=oe.charAt(++J):De=ke==="e"?" ":"0",(qe=V[ke])&&(ke=qe(W,De)),L.push(ke),le=J+1);return L.push(oe.slice(le,J)),L.join("")}}function T(oe,V){return function(W){var L=od(1900,void 0,1),J=A(L,oe,W+="",0),le,pe;if(J!=W.length)return null;if("Q"in L)return new Date(L.Q);if("s"in L)return new Date(L.s*1e3+("L"in L?L.L:0));if(V&&!("Z"in L)&&(L.Z=0),"p"in L&&(L.H=L.H%12+L.p*12),L.m===void 0&&(L.m="q"in L?L.q:0),"V"in L){if(L.V<1||L.V>53)return null;"w"in L||(L.w=1),"Z"in L?(le=Yx(od(L.y,0,1)),pe=le.getUTCDay(),le=pe>4||pe===0?rg.ceil(le):rg(le),le=ov.offset(le,(L.V-1)*7),L.y=le.getUTCFullYear(),L.m=le.getUTCMonth(),L.d=le.getUTCDate()+(L.w+6)%7):(le=Kx(od(L.y,0,1)),pe=le.getDay(),le=pe>4||pe===0?tg.ceil(le):tg(le),le=rf.offset(le,(L.V-1)*7),L.y=le.getFullYear(),L.m=le.getMonth(),L.d=le.getDate()+(L.w+6)%7)}else("W"in L||"U"in L)&&("w"in L||(L.w="u"in L?L.u%7:"W"in L?1:0),pe="Z"in L?Yx(od(L.y,0,1)).getUTCDay():Kx(od(L.y,0,1)).getDay(),L.m=0,L.d="W"in L?(L.w+6)%7+L.W*7-(pe+5)%7:L.w+L.U*7-(pe+6)%7);return"Z"in L?(L.H+=L.Z/100|0,L.M+=L.Z%100,Yx(L)):Kx(L)}}function A(oe,V,W,L){for(var J=0,le=V.length,pe=W.length,ke,De;J<le;){if(L>=pe)return-1;if(ke=V.charCodeAt(J++),ke===37){if(ke=V.charAt(J++),De=I[ke in rC?V.charAt(J++):ke],!De||(L=De(oe,W,L))<0)return-1}else if(ke!=W.charCodeAt(L++))return-1}return L}function S(oe,V,W){var L=u.exec(V.slice(W));return L?(oe.p=d.get(L[0].toLowerCase()),W+L[0].length):-1}function _(oe,V,W){var L=m.exec(V.slice(W));return L?(oe.w=v.get(L[0].toLowerCase()),W+L[0].length):-1}function P(oe,V,W){var L=h.exec(V.slice(W));return L?(oe.w=f.get(L[0].toLowerCase()),W+L[0].length):-1}function R(oe,V,W){var L=b.exec(V.slice(W));return L?(oe.m=w.get(L[0].toLowerCase()),W+L[0].length):-1}function C(oe,V,W){var L=y.exec(V.slice(W));return L?(oe.m=x.get(L[0].toLowerCase()),W+L[0].length):-1}function B(oe,V,W){return A(oe,e,V,W)}function G(oe,V,W){return A(oe,r,V,W)}function U(oe,V,W){return A(oe,n,V,W)}function F(oe){return o[oe.getDay()]}function M(oe){return i[oe.getDay()]}function $(oe){return c[oe.getMonth()]}function ne(oe){return l[oe.getMonth()]}function te(oe){return s[+(oe.getHours()>=12)]}function z(oe){return 1+~~(oe.getMonth()/3)}function de(oe){return o[oe.getUTCDay()]}function Z(oe){return i[oe.getUTCDay()]}function re(oe){return c[oe.getUTCMonth()]}function _e(oe){return l[oe.getUTCMonth()]}function se(oe){return s[+(oe.getUTCHours()>=12)]}function Fe(oe){return 1+~~(oe.getUTCMonth()/3)}return{format:function(oe){var V=O(oe+="",j);return V.toString=function(){return oe},V},parse:function(oe){var V=T(oe+="",!1);return V.toString=function(){return oe},V},utcFormat:function(oe){var V=O(oe+="",E);return V.toString=function(){return oe},V},utcParse:function(oe){var V=T(oe+="",!0);return V.toString=function(){return oe},V}}}var rC={"-":"",_:" ",0:"0"},Lr=/^\s*\d+/,Hfe=/^%/,Kfe=/[\\^$*+?|[\]().{}]/g;function vt(t,e,r){var n=t<0?"-":"",s=(n?-t:t)+"",i=s.length;return n+(i<r?new Array(r-i+1).join(e)+s:s)}function Yfe(t){return t.replace(Kfe,"\\$&")}function ld(t){return new RegExp("^(?:"+t.map(Yfe).join("|")+")","i")}function cd(t){return new Map(t.map((e,r)=>[e.toLowerCase(),r]))}function Qfe(t,e,r){var n=Lr.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function Xfe(t,e,r){var n=Lr.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function Jfe(t,e,r){var n=Lr.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function Zfe(t,e,r){var n=Lr.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function eme(t,e,r){var n=Lr.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function nC(t,e,r){var n=Lr.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function sC(t,e,r){var n=Lr.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function tme(t,e,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function rme(t,e,r){var n=Lr.exec(e.slice(r,r+1));return n?(t.q=n[0]*3-3,r+n[0].length):-1}function nme(t,e,r){var n=Lr.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function aC(t,e,r){var n=Lr.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function sme(t,e,r){var n=Lr.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function iC(t,e,r){var n=Lr.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function ame(t,e,r){var n=Lr.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function ime(t,e,r){var n=Lr.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function ome(t,e,r){var n=Lr.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function lme(t,e,r){var n=Lr.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function cme(t,e,r){var n=Hfe.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function ume(t,e,r){var n=Lr.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function dme(t,e,r){var n=Lr.exec(e.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function oC(t,e){return vt(t.getDate(),e,2)}function hme(t,e){return vt(t.getHours(),e,2)}function fme(t,e){return vt(t.getHours()%12||12,e,2)}function mme(t,e){return vt(1+rf.count(hi(t),t),e,3)}function hF(t,e){return vt(t.getMilliseconds(),e,3)}function pme(t,e){return hF(t,e)+"000"}function gme(t,e){return vt(t.getMonth()+1,e,2)}function yme(t,e){return vt(t.getMinutes(),e,2)}function vme(t,e){return vt(t.getSeconds(),e,2)}function xme(t){var e=t.getDay();return e===0?7:e}function bme(t,e){return vt(lv.count(hi(t)-1,t),e,2)}function fF(t){var e=t.getDay();return e>=4||e===0?ou(t):ou.ceil(t)}function wme(t,e){return t=fF(t),vt(ou.count(hi(t),t)+(hi(t).getDay()===4),e,2)}function jme(t){return t.getDay()}function Nme(t,e){return vt(tg.count(hi(t)-1,t),e,2)}function _me(t,e){return vt(t.getFullYear()%100,e,2)}function Sme(t,e){return t=fF(t),vt(t.getFullYear()%100,e,2)}function Ame(t,e){return vt(t.getFullYear()%1e4,e,4)}function Eme(t,e){var r=t.getDay();return t=r>=4||r===0?ou(t):ou.ceil(t),vt(t.getFullYear()%1e4,e,4)}function Pme(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+vt(e/60|0,"0",2)+vt(e%60,"0",2)}function lC(t,e){return vt(t.getUTCDate(),e,2)}function Tme(t,e){return vt(t.getUTCHours(),e,2)}function Cme(t,e){return vt(t.getUTCHours()%12||12,e,2)}function kme(t,e){return vt(1+ov.count(fi(t),t),e,3)}function mF(t,e){return vt(t.getUTCMilliseconds(),e,3)}function Ime(t,e){return mF(t,e)+"000"}function Rme(t,e){return vt(t.getUTCMonth()+1,e,2)}function Ome(t,e){return vt(t.getUTCMinutes(),e,2)}function Dme(t,e){return vt(t.getUTCSeconds(),e,2)}function Mme(t){var e=t.getUTCDay();return e===0?7:e}function Lme(t,e){return vt(cv.count(fi(t)-1,t),e,2)}function pF(t){var e=t.getUTCDay();return e>=4||e===0?lu(t):lu.ceil(t)}function Fme(t,e){return t=pF(t),vt(lu.count(fi(t),t)+(fi(t).getUTCDay()===4),e,2)}function $me(t){return t.getUTCDay()}function Ume(t,e){return vt(rg.count(fi(t)-1,t),e,2)}function Bme(t,e){return vt(t.getUTCFullYear()%100,e,2)}function Vme(t,e){return t=pF(t),vt(t.getUTCFullYear()%100,e,2)}function zme(t,e){return vt(t.getUTCFullYear()%1e4,e,4)}function Gme(t,e){var r=t.getUTCDay();return t=r>=4||r===0?lu(t):lu.ceil(t),vt(t.getUTCFullYear()%1e4,e,4)}function Wme(){return"+0000"}function cC(){return"%"}function uC(t){return+t}function dC(t){return Math.floor(+t/1e3)}var lc,gF,yF;qme({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function qme(t){return lc=qfe(t),gF=lc.format,lc.parse,yF=lc.utcFormat,lc.utcParse,lc}function Hme(t){return new Date(t)}function Kme(t){return t instanceof Date?+t:+new Date(+t)}function ON(t,e,r,n,s,i,o,l,c,u){var d=bN(),h=d.invert,f=d.domain,m=u(".%L"),v=u(":%S"),y=u("%I:%M"),x=u("%I %p"),b=u("%a %d"),w=u("%b %d"),j=u("%B"),E=u("%Y");function I(O){return(c(O)<O?m:l(O)<O?v:o(O)<O?y:i(O)<O?x:n(O)<O?s(O)<O?b:w:r(O)<O?j:E)(O)}return d.invert=function(O){return new Date(h(O))},d.domain=function(O){return arguments.length?f(Array.from(O,Kme)):f().map(Hme)},d.ticks=function(O){var T=f();return t(T[0],T[T.length-1],O??10)},d.tickFormat=function(O,T){return T==null?I:u(T)},d.nice=function(O){var T=f();return(!O||typeof O.range!="function")&&(O=e(T[0],T[T.length-1],O??10)),O?f(nF(T,O)):d},d.copy=function(){return tf(d,ON(t,e,r,n,s,i,o,l,c,u))},d}function Yme(){return As.apply(ON(Gfe,Wfe,hi,IN,lv,rf,CN,PN,nl,gF).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Qme(){return As.apply(ON(Vfe,zfe,fi,RN,cv,ov,kN,TN,nl,yF).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function uv(){var t=0,e=1,r,n,s,i,o=pn,l=!1,c;function u(h){return h==null||isNaN(h=+h)?c:o(s===0?.5:(h=(i(h)-r)*s,l?Math.max(0,Math.min(1,h)):h))}u.domain=function(h){return arguments.length?([t,e]=h,r=i(t=+t),n=i(e=+e),s=r===n?0:1/(n-r),u):[t,e]},u.clamp=function(h){return arguments.length?(l=!!h,u):l},u.interpolator=function(h){return arguments.length?(o=h,u):o};function d(h){return function(f){var m,v;return arguments.length?([m,v]=f,o=h(m,v),u):[o(0),o(1)]}}return u.range=d(Cu),u.rangeRound=d(xN),u.unknown=function(h){return arguments.length?(c=h,u):c},function(h){return i=h,r=h(t),n=h(e),s=r===n?0:1/(n-r),u}}function Fo(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function vF(){var t=Lo(uv()(pn));return t.copy=function(){return Fo(t,vF())},bi.apply(t,arguments)}function xF(){var t=NN(uv()).domain([1,10]);return t.copy=function(){return Fo(t,xF()).base(t.base())},bi.apply(t,arguments)}function bF(){var t=_N(uv());return t.copy=function(){return Fo(t,bF()).constant(t.constant())},bi.apply(t,arguments)}function DN(){var t=SN(uv());return t.copy=function(){return Fo(t,DN()).exponent(t.exponent())},bi.apply(t,arguments)}function Xme(){return DN.apply(null,arguments).exponent(.5)}function wF(){var t=[],e=pn;function r(n){if(n!=null&&!isNaN(n=+n))return e((Zh(t,n,1)-1)/(t.length-1))}return r.domain=function(n){if(!arguments.length)return t.slice();t=[];for(let s of n)s!=null&&!isNaN(s=+s)&&t.push(s);return t.sort(ao),r},r.interpolator=function(n){return arguments.length?(e=n,r):e},r.range=function(){return t.map((n,s)=>e(s/(t.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(s,i)=>Mhe(t,i/n))},r.copy=function(){return wF(e).domain(t)},bi.apply(r,arguments)}function dv(){var t=0,e=.5,r=1,n=1,s,i,o,l,c,u=pn,d,h=!1,f;function m(y){return isNaN(y=+y)?f:(y=.5+((y=+d(y))-i)*(n*y<n*i?l:c),u(h?Math.max(0,Math.min(1,y)):y))}m.domain=function(y){return arguments.length?([t,e,r]=y,s=d(t=+t),i=d(e=+e),o=d(r=+r),l=s===i?0:.5/(i-s),c=i===o?0:.5/(o-i),n=i<s?-1:1,m):[t,e,r]},m.clamp=function(y){return arguments.length?(h=!!y,m):h},m.interpolator=function(y){return arguments.length?(u=y,m):u};function v(y){return function(x){var b,w,j;return arguments.length?([b,w,j]=x,u=cfe(y,[b,w,j]),m):[u(0),u(.5),u(1)]}}return m.range=v(Cu),m.rangeRound=v(xN),m.unknown=function(y){return arguments.length?(f=y,m):f},function(y){return d=y,s=y(t),i=y(e),o=y(r),l=s===i?0:.5/(i-s),c=i===o?0:.5/(o-i),n=i<s?-1:1,m}}function jF(){var t=Lo(dv()(pn));return t.copy=function(){return Fo(t,jF())},bi.apply(t,arguments)}function NF(){var t=NN(dv()).domain([.1,1,10]);return t.copy=function(){return Fo(t,NF()).base(t.base())},bi.apply(t,arguments)}function _F(){var t=_N(dv());return t.copy=function(){return Fo(t,_F()).constant(t.constant())},bi.apply(t,arguments)}function MN(){var t=SN(dv());return t.copy=function(){return Fo(t,MN()).exponent(t.exponent())},bi.apply(t,arguments)}function Jme(){return MN.apply(null,arguments).exponent(.5)}const wd=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:gN,scaleDiverging:jF,scaleDivergingLog:NF,scaleDivergingPow:MN,scaleDivergingSqrt:Jme,scaleDivergingSymlog:_F,scaleIdentity:rF,scaleImplicit:U0,scaleLinear:tF,scaleLog:sF,scaleOrdinal:pN,scalePoint:$he,scalePow:AN,scaleQuantile:oF,scaleQuantize:lF,scaleRadial:iF,scaleSequential:vF,scaleSequentialLog:xF,scaleSequentialPow:DN,scaleSequentialQuantile:wF,scaleSequentialSqrt:Xme,scaleSequentialSymlog:bF,scaleSqrt:Ife,scaleSymlog:aF,scaleThreshold:cF,scaleTime:Yme,scaleUtc:Qme,tickFormat:eF},Symbol.toStringTag,{value:"Module"}));var $o=t=>t.chartData,LN=X([$o],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),nf=(t,e,r,n)=>n?LN(t):$o(t);function cu(t){if(Array.isArray(t)&&t.length===2){var[e,r]=t;if(Kr(e)&&Kr(r))return!0}return!1}function hC(t,e,r){return r?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function Zme(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[r,n]=t,s,i;if(Kr(r))s=r;else if(typeof r=="function")return;if(Kr(n))i=n;else if(typeof n=="function")return;var o=[s,i];if(cu(o))return o}}function epe(t,e,r){if(!(!r&&e==null)){if(typeof t=="function"&&e!=null)try{var n=t(e,r);if(cu(n))return hC(n,e,r)}catch{}if(Array.isArray(t)&&t.length===2){var[s,i]=t,o,l;if(s==="auto")e!=null&&(o=Math.min(...e));else if(Le(s))o=s;else if(typeof s=="function")try{e!=null&&(o=s(e==null?void 0:e[0]))}catch{}else if(typeof s=="string"&&iT.test(s)){var c=iT.exec(s);if(c==null||e==null)o=void 0;else{var u=+c[1];o=e[0]-u}}else o=e==null?void 0:e[0];if(i==="auto")e!=null&&(l=Math.max(...e));else if(Le(i))l=i;else if(typeof i=="function")try{e!=null&&(l=i(e==null?void 0:e[1]))}catch{}else if(typeof i=="string"&&oT.test(i)){var d=oT.exec(i);if(d==null||e==null)l=void 0;else{var h=+d[1];l=e[1]+h}}else l=e==null?void 0:e[1];var f=[o,l];if(cu(f))return e==null?f:hC(f,e,r)}}}var ku=1e9,tpe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},$N,Qt=!0,js="[DecimalError] ",xl=js+"Invalid argument: ",FN=js+"Exponent out of range: ",Iu=Math.floor,Xo=Math.pow,rpe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Vn,Rr=1e7,Ut=7,SF=9007199254740991,ng=Iu(SF/Ut),Ce={};Ce.absoluteValue=Ce.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Ce.comparedTo=Ce.cmp=function(t){var e,r,n,s,i=this;if(t=new i.constructor(t),i.s!==t.s)return i.s||-t.s;if(i.e!==t.e)return i.e>t.e^i.s<0?1:-1;for(n=i.d.length,s=t.d.length,e=0,r=n<s?n:s;e<r;++e)if(i.d[e]!==t.d[e])return i.d[e]>t.d[e]^i.s<0?1:-1;return n===s?0:n>s^i.s<0?1:-1};Ce.decimalPlaces=Ce.dp=function(){var t=this,e=t.d.length-1,r=(e-t.e)*Ut;if(e=t.d[e],e)for(;e%10==0;e/=10)r--;return r<0?0:r};Ce.dividedBy=Ce.div=function(t){return Za(this,new this.constructor(t))};Ce.dividedToIntegerBy=Ce.idiv=function(t){var e=this,r=e.constructor;return kt(Za(e,new r(t),0,1),r.precision)};Ce.equals=Ce.eq=function(t){return!this.cmp(t)};Ce.exponent=function(){return Nr(this)};Ce.greaterThan=Ce.gt=function(t){return this.cmp(t)>0};Ce.greaterThanOrEqualTo=Ce.gte=function(t){return this.cmp(t)>=0};Ce.isInteger=Ce.isint=function(){return this.e>this.d.length-2};Ce.isNegative=Ce.isneg=function(){return this.s<0};Ce.isPositive=Ce.ispos=function(){return this.s>0};Ce.isZero=function(){return this.s===0};Ce.lessThan=Ce.lt=function(t){return this.cmp(t)<0};Ce.lessThanOrEqualTo=Ce.lte=function(t){return this.cmp(t)<1};Ce.logarithm=Ce.log=function(t){var e,r=this,n=r.constructor,s=n.precision,i=s+5;if(t===void 0)t=new n(10);else if(t=new n(t),t.s<1||t.eq(Vn))throw Error(js+"NaN");if(r.s<1)throw Error(js+(r.s?"NaN":"-Infinity"));return r.eq(Vn)?new n(0):(Qt=!1,e=Za(ih(r,i),ih(t,i),i),Qt=!0,kt(e,s))};Ce.minus=Ce.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?PF(e,t):AF(e,(t.s=-t.s,t))};Ce.modulo=Ce.mod=function(t){var e,r=this,n=r.constructor,s=n.precision;if(t=new n(t),!t.s)throw Error(js+"NaN");return r.s?(Qt=!1,e=Za(r,t,0,1).times(t),Qt=!0,r.minus(e)):kt(new n(r),s)};Ce.naturalExponential=Ce.exp=function(){return EF(this)};Ce.naturalLogarithm=Ce.ln=function(){return ih(this)};Ce.negated=Ce.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Ce.plus=Ce.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?AF(e,t):PF(e,(t.s=-t.s,t))};Ce.precision=Ce.sd=function(t){var e,r,n,s=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(xl+t);if(e=Nr(s)+1,n=s.d.length-1,r=n*Ut+1,n=s.d[n],n){for(;n%10==0;n/=10)r--;for(n=s.d[0];n>=10;n/=10)r++}return t&&e>r?e:r};Ce.squareRoot=Ce.sqrt=function(){var t,e,r,n,s,i,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(js+"NaN")}for(t=Nr(l),Qt=!1,s=Math.sqrt(+l),s==0||s==1/0?(e=ua(l.d),(e.length+t)%2==0&&(e+="0"),s=Math.sqrt(e),t=Iu((t+1)/2)-(t<0||t%2),s==1/0?e="5e"+t:(e=s.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),n=new c(e)):n=new c(s.toString()),r=c.precision,s=o=r+3;;)if(i=n,n=i.plus(Za(l,i,o+2)).times(.5),ua(i.d).slice(0,o)===(e=ua(n.d)).slice(0,o)){if(e=e.slice(o-3,o+1),s==o&&e=="4999"){if(kt(i,r+1,0),i.times(i).eq(l)){n=i;break}}else if(e!="9999")break;o+=4}return Qt=!0,kt(n,r)};Ce.times=Ce.mul=function(t){var e,r,n,s,i,o,l,c,u,d=this,h=d.constructor,f=d.d,m=(t=new h(t)).d;if(!d.s||!t.s)return new h(0);for(t.s*=d.s,r=d.e+t.e,c=f.length,u=m.length,c<u&&(i=f,f=m,m=i,o=c,c=u,u=o),i=[],o=c+u,n=o;n--;)i.push(0);for(n=u;--n>=0;){for(e=0,s=c+n;s>n;)l=i[s]+m[n]*f[s-n-1]+e,i[s--]=l%Rr|0,e=l/Rr|0;i[s]=(i[s]+e)%Rr|0}for(;!i[--o];)i.pop();return e?++r:i.shift(),t.d=i,t.e=r,Qt?kt(t,h.precision):t};Ce.toDecimalPlaces=Ce.todp=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(_a(t,0,ku),e===void 0?e=n.rounding:_a(e,0,8),kt(r,t+Nr(r)+1,e))};Ce.toExponential=function(t,e){var r,n=this,s=n.constructor;return t===void 0?r=Fl(n,!0):(_a(t,0,ku),e===void 0?e=s.rounding:_a(e,0,8),n=kt(new s(n),t+1,e),r=Fl(n,!0,t+1)),r};Ce.toFixed=function(t,e){var r,n,s=this,i=s.constructor;return t===void 0?Fl(s):(_a(t,0,ku),e===void 0?e=i.rounding:_a(e,0,8),n=kt(new i(s),t+Nr(s)+1,e),r=Fl(n.abs(),!1,t+Nr(n)+1),s.isneg()&&!s.isZero()?"-"+r:r)};Ce.toInteger=Ce.toint=function(){var t=this,e=t.constructor;return kt(new e(t),Nr(t)+1,e.rounding)};Ce.toNumber=function(){return+this};Ce.toPower=Ce.pow=function(t){var e,r,n,s,i,o,l=this,c=l.constructor,u=12,d=+(t=new c(t));if(!t.s)return new c(Vn);if(l=new c(l),!l.s){if(t.s<1)throw Error(js+"Infinity");return l}if(l.eq(Vn))return l;if(n=c.precision,t.eq(Vn))return kt(l,n);if(e=t.e,r=t.d.length-1,o=e>=r,i=l.s,o){if((r=d<0?-d:d)<=SF){for(s=new c(Vn),e=Math.ceil(n/Ut+4),Qt=!1;r%2&&(s=s.times(l),mC(s.d,e)),r=Iu(r/2),r!==0;)l=l.times(l),mC(l.d,e);return Qt=!0,t.s<0?new c(Vn).div(s):kt(s,n)}}else if(i<0)throw Error(js+"NaN");return i=i<0&&t.d[Math.max(e,r)]&1?-1:1,l.s=1,Qt=!1,s=t.times(ih(l,n+u)),Qt=!0,s=EF(s),s.s=i,s};Ce.toPrecision=function(t,e){var r,n,s=this,i=s.constructor;return t===void 0?(r=Nr(s),n=Fl(s,r<=i.toExpNeg||r>=i.toExpPos)):(_a(t,1,ku),e===void 0?e=i.rounding:_a(e,0,8),s=kt(new i(s),t,e),r=Nr(s),n=Fl(s,t<=r||r<=i.toExpNeg,t)),n};Ce.toSignificantDigits=Ce.tosd=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(_a(t,1,ku),e===void 0?e=n.rounding:_a(e,0,8)),kt(new n(r),t,e)};Ce.toString=Ce.valueOf=Ce.val=Ce.toJSON=Ce[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Nr(t),r=t.constructor;return Fl(t,e<=r.toExpNeg||e>=r.toExpPos)};function AF(t,e){var r,n,s,i,o,l,c,u,d=t.constructor,h=d.precision;if(!t.s||!e.s)return e.s||(e=new d(t)),Qt?kt(e,h):e;if(c=t.d,u=e.d,o=t.e,s=e.e,c=c.slice(),i=o-s,i){for(i<0?(n=c,i=-i,l=u.length):(n=u,s=o,l=c.length),o=Math.ceil(h/Ut),l=o>l?o+1:l+1,i>l&&(i=l,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(l=c.length,i=u.length,l-i<0&&(i=l,n=u,u=c,c=n),r=0;i;)r=(c[--i]=c[i]+u[i]+r)/Rr|0,c[i]%=Rr;for(r&&(c.unshift(r),++s),l=c.length;c[--l]==0;)c.pop();return e.d=c,e.e=s,Qt?kt(e,h):e}function _a(t,e,r){if(t!==~~t||t<e||t>r)throw Error(xl+t)}function ua(t){var e,r,n,s=t.length-1,i="",o=t[0];if(s>0){for(i+=o,e=1;e<s;e++)n=t[e]+"",r=Ut-n.length,r&&(i+=Oi(r)),i+=n;o=t[e],n=o+"",r=Ut-n.length,r&&(i+=Oi(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var Za=function(){function t(n,s){var i,o=0,l=n.length;for(n=n.slice();l--;)i=n[l]*s+o,n[l]=i%Rr|0,o=i/Rr|0;return o&&n.unshift(o),n}function e(n,s,i,o){var l,c;if(i!=o)c=i>o?1:-1;else for(l=c=0;l<i;l++)if(n[l]!=s[l]){c=n[l]>s[l]?1:-1;break}return c}function r(n,s,i){for(var o=0;i--;)n[i]-=o,o=n[i]<s[i]?1:0,n[i]=o*Rr+n[i]-s[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,s,i,o){var l,c,u,d,h,f,m,v,y,x,b,w,j,E,I,O,T,A,S=n.constructor,_=n.s==s.s?1:-1,P=n.d,R=s.d;if(!n.s)return new S(n);if(!s.s)throw Error(js+"Division by zero");for(c=n.e-s.e,T=R.length,I=P.length,m=new S(_),v=m.d=[],u=0;R[u]==(P[u]||0);)++u;if(R[u]>(P[u]||0)&&--c,i==null?w=i=S.precision:o?w=i+(Nr(n)-Nr(s))+1:w=i,w<0)return new S(0);if(w=w/Ut+2|0,u=0,T==1)for(d=0,R=R[0],w++;(u<I||d)&&w--;u++)j=d*Rr+(P[u]||0),v[u]=j/R|0,d=j%R|0;else{for(d=Rr/(R[0]+1)|0,d>1&&(R=t(R,d),P=t(P,d),T=R.length,I=P.length),E=T,y=P.slice(0,T),x=y.length;x<T;)y[x++]=0;A=R.slice(),A.unshift(0),O=R[0],R[1]>=Rr/2&&++O;do d=0,l=e(R,y,T,x),l<0?(b=y[0],T!=x&&(b=b*Rr+(y[1]||0)),d=b/O|0,d>1?(d>=Rr&&(d=Rr-1),h=t(R,d),f=h.length,x=y.length,l=e(h,y,f,x),l==1&&(d--,r(h,T<f?A:R,f))):(d==0&&(l=d=1),h=R.slice()),f=h.length,f<x&&h.unshift(0),r(y,h,x),l==-1&&(x=y.length,l=e(R,y,T,x),l<1&&(d++,r(y,T<x?A:R,x))),x=y.length):l===0&&(d++,y=[0]),v[u++]=d,l&&y[0]?y[x++]=P[E]||0:(y=[P[E]],x=1);while((E++<I||y[0]!==void 0)&&w--)}return v[0]||v.shift(),m.e=c,kt(m,o?i+Nr(m)+1:i)}}();function EF(t,e){var r,n,s,i,o,l,c=0,u=0,d=t.constructor,h=d.precision;if(Nr(t)>16)throw Error(FN+Nr(t));if(!t.s)return new d(Vn);for(e==null?(Qt=!1,l=h):l=e,o=new d(.03125);t.abs().gte(.1);)t=t.times(o),u+=5;for(n=Math.log(Xo(2,u))/Math.LN10*2+5|0,l+=n,r=s=i=new d(Vn),d.precision=l;;){if(s=kt(s.times(t),l),r=r.times(++c),o=i.plus(Za(s,r,l)),ua(o.d).slice(0,l)===ua(i.d).slice(0,l)){for(;u--;)i=kt(i.times(i),l);return d.precision=h,e==null?(Qt=!0,kt(i,h)):i}i=o}}function Nr(t){for(var e=t.e*Ut,r=t.d[0];r>=10;r/=10)e++;return e}function Qx(t,e,r){if(e>t.LN10.sd())throw Qt=!0,r&&(t.precision=r),Error(js+"LN10 precision limit exceeded");return kt(new t(t.LN10),e)}function Oi(t){for(var e="";t--;)e+="0";return e}function ih(t,e){var r,n,s,i,o,l,c,u,d,h=1,f=10,m=t,v=m.d,y=m.constructor,x=y.precision;if(m.s<1)throw Error(js+(m.s?"NaN":"-Infinity"));if(m.eq(Vn))return new y(0);if(e==null?(Qt=!1,u=x):u=e,m.eq(10))return e==null&&(Qt=!0),Qx(y,u);if(u+=f,y.precision=u,r=ua(v),n=r.charAt(0),i=Nr(m),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)m=m.times(t),r=ua(m.d),n=r.charAt(0),h++;i=Nr(m),n>1?(m=new y("0."+r),i++):m=new y(n+"."+r.slice(1))}else return c=Qx(y,u+2,x).times(i+""),m=ih(new y(n+"."+r.slice(1)),u-f).plus(c),y.precision=x,e==null?(Qt=!0,kt(m,x)):m;for(l=o=m=Za(m.minus(Vn),m.plus(Vn),u),d=kt(m.times(m),u),s=3;;){if(o=kt(o.times(d),u),c=l.plus(Za(o,new y(s),u)),ua(c.d).slice(0,u)===ua(l.d).slice(0,u))return l=l.times(2),i!==0&&(l=l.plus(Qx(y,u+2,x).times(i+""))),l=Za(l,new y(h),u),y.precision=x,e==null?(Qt=!0,kt(l,x)):l;l=c,s+=2}}function fC(t,e){var r,n,s;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;)++n;for(s=e.length;e.charCodeAt(s-1)===48;)--s;if(e=e.slice(n,s),e){if(s-=n,r=r-n-1,t.e=Iu(r/Ut),t.d=[],n=(r+1)%Ut,r<0&&(n+=Ut),n<s){for(n&&t.d.push(+e.slice(0,n)),s-=Ut;n<s;)t.d.push(+e.slice(n,n+=Ut));e=e.slice(n),n=Ut-e.length}else n-=s;for(;n--;)e+="0";if(t.d.push(+e),Qt&&(t.e>ng||t.e<-ng))throw Error(FN+r)}else t.s=0,t.e=0,t.d=[0];return t}function kt(t,e,r){var n,s,i,o,l,c,u,d,h=t.d;for(o=1,i=h[0];i>=10;i/=10)o++;if(n=e-o,n<0)n+=Ut,s=e,u=h[d=0];else{if(d=Math.ceil((n+1)/Ut),i=h.length,d>=i)return t;for(u=i=h[d],o=1;i>=10;i/=10)o++;n%=Ut,s=n-Ut+o}if(r!==void 0&&(i=Xo(10,o-s-1),l=u/i%10|0,c=e<0||h[d+1]!==void 0||u%i,c=r<4?(l||c)&&(r==0||r==(t.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(n>0?s>0?u/Xo(10,o-s):0:h[d-1])%10&1||r==(t.s<0?8:7))),e<1||!h[0])return c?(i=Nr(t),h.length=1,e=e-i-1,h[0]=Xo(10,(Ut-e%Ut)%Ut),t.e=Iu(-e/Ut)||0):(h.length=1,h[0]=t.e=t.s=0),t;if(n==0?(h.length=d,i=1,d--):(h.length=d+1,i=Xo(10,Ut-n),h[d]=s>0?(u/Xo(10,o-s)%Xo(10,s)|0)*i:0),c)for(;;)if(d==0){(h[0]+=i)==Rr&&(h[0]=1,++t.e);break}else{if(h[d]+=i,h[d]!=Rr)break;h[d--]=0,i=1}for(n=h.length;h[--n]===0;)h.pop();if(Qt&&(t.e>ng||t.e<-ng))throw Error(FN+Nr(t));return t}function PF(t,e){var r,n,s,i,o,l,c,u,d,h,f=t.constructor,m=f.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new f(t),Qt?kt(e,m):e;if(c=t.d,h=e.d,n=e.e,u=t.e,c=c.slice(),o=u-n,o){for(d=o<0,d?(r=c,o=-o,l=h.length):(r=h,n=u,l=c.length),s=Math.max(Math.ceil(m/Ut),l)+2,o>s&&(o=s,r.length=1),r.reverse(),s=o;s--;)r.push(0);r.reverse()}else{for(s=c.length,l=h.length,d=s<l,d&&(l=s),s=0;s<l;s++)if(c[s]!=h[s]){d=c[s]<h[s];break}o=0}for(d&&(r=c,c=h,h=r,e.s=-e.s),l=c.length,s=h.length-l;s>0;--s)c[l++]=0;for(s=h.length;s>o;){if(c[--s]<h[s]){for(i=s;i&&c[--i]===0;)c[i]=Rr-1;--c[i],c[s]+=Rr}c[s]-=h[s]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(e.d=c,e.e=n,Qt?kt(e,m):e):new f(0)}function Fl(t,e,r){var n,s=Nr(t),i=ua(t.d),o=i.length;return e?(r&&(n=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+Oi(n):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(s<0?"e":"e+")+s):s<0?(i="0."+Oi(-s-1)+i,r&&(n=r-o)>0&&(i+=Oi(n))):s>=o?(i+=Oi(s+1-o),r&&(n=r-s-1)>0&&(i=i+"."+Oi(n))):((n=s+1)<o&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-o)>0&&(s+1===o&&(i+="."),i+=Oi(n))),t.s<0?"-"+i:i}function mC(t,e){if(t.length>e)return t.length=e,!0}function TF(t){var e,r,n;function s(i){var o=this;if(!(o instanceof s))return new s(i);if(o.constructor=s,i instanceof s){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(xl+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return fC(o,i.toString())}else if(typeof i!="string")throw Error(xl+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,rpe.test(i))fC(o,i);else throw Error(xl+i)}if(s.prototype=Ce,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=TF,s.config=s.set=npe,t===void 0&&(t={}),t)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return s.config(t),s}function npe(t){if(!t||typeof t!="object")throw Error(js+"Object expected");var e,r,n,s=["precision",1,ku,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<s.length;e+=3)if((n=t[r=s[e]])!==void 0)if(Iu(n)===n&&n>=s[e+1]&&n<=s[e+2])this[r]=n;else throw Error(xl+r+": "+n);if((n=t[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(xl+r+": "+n);return this}var $N=TF(tpe);Vn=new $N(1);const St=$N;var spe=t=>t,CF={"@@functional/placeholder":!0},kF=t=>t===CF,pC=t=>function e(){return arguments.length===0||arguments.length===1&&kF(arguments.length<=0?void 0:arguments[0])?e:t(...arguments)},IF=(t,e)=>t===1?e:pC(function(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];var i=n.filter(o=>o!==CF).length;return i>=t?e(...n):IF(t-i,pC(function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];var u=n.map(d=>kF(d)?l.shift():d);return e(...u,...l)}))}),hv=t=>IF(t.length,t),G0=(t,e)=>{for(var r=[],n=t;n<e;++n)r[n-t]=n;return r},ape=hv((t,e)=>Array.isArray(e)?e.map(t):Object.keys(e).map(r=>e[r]).map(t)),ipe=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(!r.length)return spe;var s=r.reverse(),i=s[0],o=s.slice(1);return function(){return o.reduce((l,c)=>c(l),i(...arguments))}},W0=t=>Array.isArray(t)?t.reverse():t.split("").reverse().join(""),RF=t=>{var e=null,r=null;return function(){for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return e&&s.every((o,l)=>{var c;return o===((c=e)===null||c===void 0?void 0:c[l])})||(e=s,r=t(...s)),r}};function OF(t){var e;return t===0?e=1:e=Math.floor(new St(t).abs().log(10).toNumber())+1,e}function DF(t,e,r){for(var n=new St(t),s=0,i=[];n.lt(e)&&s<1e5;)i.push(n.toNumber()),n=n.add(r),s++;return i}hv((t,e,r)=>{var n=+t,s=+e;return n+r*(s-n)});hv((t,e,r)=>{var n=e-+t;return n=n||1/0,(r-t)/n});hv((t,e,r)=>{var n=e-+t;return n=n||1/0,Math.max(0,Math.min(1,(r-t)/n))});var MF=t=>{var[e,r]=t,[n,s]=[e,r];return e>r&&([n,s]=[r,e]),[n,s]},LF=(t,e,r)=>{if(t.lte(0))return new St(0);var n=OF(t.toNumber()),s=new St(10).pow(n),i=t.div(s),o=n!==1?.05:.1,l=new St(Math.ceil(i.div(o).toNumber())).add(r).mul(o),c=l.mul(s);return e?new St(c.toNumber()):new St(Math.ceil(c.toNumber()))},ope=(t,e,r)=>{var n=new St(1),s=new St(t);if(!s.isint()&&r){var i=Math.abs(t);i<1?(n=new St(10).pow(OF(t)-1),s=new St(Math.floor(s.div(n).toNumber())).mul(n)):i>1&&(s=new St(Math.floor(t)))}else t===0?s=new St(Math.floor((e-1)/2)):r||(s=new St(Math.floor(t)));var o=Math.floor((e-1)/2),l=ipe(ape(c=>s.add(new St(c-o).mul(n)).toNumber()),G0);return l(0,e)},FF=function(e,r,n,s){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-e)/(n-1)))return{step:new St(0),tickMin:new St(0),tickMax:new St(0)};var o=LF(new St(r).sub(e).div(n-1),s,i),l;e<=0&&r>=0?l=new St(0):(l=new St(e).add(r).div(2),l=l.sub(new St(l).mod(o)));var c=Math.ceil(l.sub(e).div(o).toNumber()),u=Math.ceil(new St(r).sub(l).div(o).toNumber()),d=c+u+1;return d>n?FF(e,r,n,s,i+1):(d<n&&(u=r>0?u+(n-d):u,c=r>0?c:c+(n-d)),{step:o,tickMin:l.sub(new St(c).mul(o)),tickMax:l.add(new St(u).mul(o))})};function lpe(t){var[e,r]=t,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=Math.max(n,2),[o,l]=MF([e,r]);if(o===-1/0||l===1/0){var c=l===1/0?[o,...G0(0,n-1).map(()=>1/0)]:[...G0(0,n-1).map(()=>-1/0),l];return e>r?W0(c):c}if(o===l)return ope(o,n,s);var{step:u,tickMin:d,tickMax:h}=FF(o,l,i,s,0),f=DF(d,h.add(new St(.1).mul(u)),u);return e>r?W0(f):f}function cpe(t,e){var[r,n]=t,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[i,o]=MF([r,n]);if(i===-1/0||o===1/0)return[r,n];if(i===o)return[i];var l=Math.max(e,2),c=LF(new St(o).sub(i).div(l-1),s,0),u=[...DF(new St(i),new St(o),c),o];return s===!1&&(u=u.map(d=>Math.round(d))),r>n?W0(u):u}var upe=RF(lpe),dpe=RF(cpe),$F=t=>t.rootProps.maxBarSize,hpe=t=>t.rootProps.barGap,UF=t=>t.rootProps.barCategoryGap,fpe=t=>t.rootProps.barSize,sf=t=>t.rootProps.stackOffset,UN=t=>t.options.chartName,BN=t=>t.rootProps.syncId,BF=t=>t.rootProps.syncMethod,VN=t=>t.options.eventEmitter,Va={allowDuplicatedCategory:!0,angleAxisId:0,axisLine:!0,cx:0,cy:0,orientation:"outer",reversed:!1,scale:"auto",tick:!0,tickLine:!0,tickSize:8,type:"category"},Fn={allowDataOverflow:!1,allowDuplicatedCategory:!0,angle:0,axisLine:!0,cx:0,cy:0,orientation:"right",radiusAxisId:0,scale:"auto",stroke:"#ccc",tick:!0,tickCount:5,type:"number"},fv=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e},mpe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Va.angleAxisId,includeHidden:!1,name:void 0,reversed:Va.reversed,scale:Va.scale,tick:Va.tick,tickCount:void 0,ticks:void 0,type:Va.type,unit:void 0},ppe={allowDataOverflow:Fn.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Fn.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Fn.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Fn.scale,tick:Fn.tick,tickCount:Fn.tickCount,ticks:void 0,type:Fn.type,unit:void 0},gpe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Va.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Va.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Va.scale,tick:Va.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},ype={allowDataOverflow:Fn.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Fn.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Fn.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Fn.scale,tick:Fn.tick,tickCount:Fn.tickCount,ticks:void 0,type:"category",unit:void 0},zN=(t,e)=>t.polarAxis.angleAxis[e]!=null?t.polarAxis.angleAxis[e]:t.layout.layoutType==="radial"?gpe:mpe,GN=(t,e)=>t.polarAxis.radiusAxis[e]!=null?t.polarAxis.radiusAxis[e]:t.layout.layoutType==="radial"?ype:ppe,mv=t=>t.polarOptions,WN=X([yi,vi,Pr],b6),VF=X([mv,WN],(t,e)=>{if(t!=null)return an(t.innerRadius,e,0)}),zF=X([mv,WN],(t,e)=>{if(t!=null)return an(t.outerRadius,e,e*.8)}),vpe=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:r}=t;return[e,r]},GF=X([mv],vpe);X([zN,GF],fv);var WF=X([WN,VF,zF],(t,e,r)=>{if(!(t==null||e==null||r==null))return[e,r]});X([GN,WF],fv);var qF=X([nt,mv,VF,zF,yi,vi],(t,e,r,n,s,i)=>{if(!(t!=="centric"&&t!=="radial"||e==null||r==null||n==null)){var{cx:o,cy:l,startAngle:c,endAngle:u}=e;return{cx:an(o,s,s/2),cy:an(l,i,i/2),innerRadius:r,outerRadius:n,startAngle:c,endAngle:u,clockWise:!1}}}),Xt=(t,e)=>e,af=(t,e,r)=>r;function pv(t){return t==null?void 0:t.id}var kr=t=>{var e=nt(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},Ru=t=>t.tooltip.settings.axisId,Fr=t=>{var e=kr(t),r=Ru(t);return of(t,e,r)},HF=X([Fr],t=>t==null?void 0:t.dataKey);function KF(t,e,r){var{chartData:n=[]}=e,{allowDuplicatedCategory:s,dataKey:i}=r,o=new Map;return t.forEach(l=>{var c,u=(c=l.data)!==null&&c!==void 0?c:n;if(!(u==null||u.length===0)){var d=pv(l);u.forEach((h,f)=>{var m=i==null||s?f:String(Pt(h,i,null)),v=Pt(h,l.dataKey,0),y;o.has(m)?y=o.get(m):y={},Object.assign(y,{[d]:v}),o.set(m,y)})}}),Array.from(o.values())}function gv(t){return t.stackId!=null&&t.dataKey!=null}function gC(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function sg(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?gC(Object(r),!0).forEach(function(n){xpe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gC(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function xpe(t,e,r){return(e=bpe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function bpe(t){var e=wpe(t,"string");return typeof e=="symbol"?e:e+""}function wpe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var q0=[0,"auto"],Dn={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},YF=(t,e)=>t.cartesianAxis.xAxis[e],wi=(t,e)=>{var r=YF(t,e);return r??Dn},Mn={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:q0,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Xh},QF=(t,e)=>t.cartesianAxis.yAxis[e],ji=(t,e)=>{var r=QF(t,e);return r??Mn},jpe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},qN=(t,e)=>{var r=t.cartesianAxis.zAxis[e];return r??jpe},gr=(t,e,r)=>{switch(e){case"xAxis":return wi(t,r);case"yAxis":return ji(t,r);case"zAxis":return qN(t,r);case"angleAxis":return zN(t,r);case"radiusAxis":return GN(t,r);default:throw new Error("Unexpected axis type: ".concat(e))}},Npe=(t,e,r)=>{switch(e){case"xAxis":return wi(t,r);case"yAxis":return ji(t,r);default:throw new Error("Unexpected axis type: ".concat(e))}},of=(t,e,r)=>{switch(e){case"xAxis":return wi(t,r);case"yAxis":return ji(t,r);case"angleAxis":return zN(t,r);case"radiusAxis":return GN(t,r);default:throw new Error("Unexpected axis type: ".concat(e))}},XF=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function HN(t,e){return r=>{switch(t){case"xAxis":return"xAxisId"in r&&r.xAxisId===e;case"yAxis":return"yAxisId"in r&&r.yAxisId===e;case"zAxis":return"zAxisId"in r&&r.zAxisId===e;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===e;default:return!1}}}var lf=t=>t.graphicalItems.cartesianItems,_pe=X([Xt,af],HN),KN=(t,e,r)=>t.filter(r).filter(n=>(e==null?void 0:e.includeHidden)===!0?!0:!n.hide),cf=X([lf,gr,_pe],KN),JF=X([cf],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(gv)),ZF=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),e$=X([cf],ZF),YN=t=>t.map(e=>e.data).filter(Boolean).flat(1),Spe=X([cf],YN),QN=(t,e)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:s}=e;return t.length>0?t:r.slice(n,s+1)},XN=X([Spe,nf],QN),JN=(t,e,r)=>(e==null?void 0:e.dataKey)!=null?t.map(n=>({value:Pt(n,e.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>t.map(s=>({value:Pt(s,n)}))):t.map(n=>({value:n})),yv=X([XN,gr,cf],JN);function t$(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function Xl(t){return t.filter(e=>Na(e)||e instanceof Date).map(Number).filter(e=>In(e)===!1)}function Ape(t,e,r){return!r||typeof e!="number"||In(e)?[]:r.length?Xl(r.flatMap(n=>{var s=Pt(t,n.dataKey),i,o;if(Array.isArray(s)?[i,o]=s:i=o=s,!(!Kr(i)||!Kr(o)))return[e-i,e+o]})):[]}var Epe=X([JF,nf,Fr],KF),r$=(t,e,r)=>{var n={},s=e.reduce((i,o)=>(o.stackId==null||(i[o.stackId]==null&&(i[o.stackId]=[]),i[o.stackId].push(o)),i),n);return Object.fromEntries(Object.entries(s).map(i=>{var[o,l]=i,c=l.map(pv);return[o,{stackedData:Mue(t,c,r),graphicalItems:l}]}))},oh=X([Epe,JF,sf],r$),n$=(t,e,r)=>{var{dataStartIndex:n,dataEndIndex:s}=e;if(r!=="zAxis"){var i=Uue(t,n,s);if(!(i!=null&&i[0]===0&&i[1]===0))return i}},Ppe=X([oh,$o,Xt],n$),s$=(t,e,r,n,s)=>r.length>0?t.flatMap(i=>r.flatMap(o=>{var l,c,u=(l=n[o.id])===null||l===void 0?void 0:l.filter(h=>t$(s,h)),d=Pt(i,(c=e.dataKey)!==null&&c!==void 0?c:o.dataKey);return{value:d,errorDomain:Ape(i,d,u)}})).filter(Boolean):(e==null?void 0:e.dataKey)!=null?t.map(i=>({value:Pt(i,e.dataKey),errorDomain:[]})):t.map(i=>({value:i,errorDomain:[]})),vv=t=>t.errorBars,a$=(t,e,r)=>t.flatMap(n=>e[n.id]).filter(Boolean).filter(n=>t$(r,n));X([e$,vv,Xt],a$);var Tpe=X([XN,gr,e$,vv,Xt],s$);function Cpe(t){var{value:e}=t;if(Na(e)||e instanceof Date)return e}var yC=t=>{var e=t.flatMap(n=>[n.value,n.errorDomain]).flat(1),r=Xl(e);if(r.length!==0)return[Math.min(...r),Math.max(...r)]},kpe=(t,e,r)=>{var n=t.map(Cpe).filter(s=>s!=null);return r&&(e.dataKey==null||e.allowDuplicatedCategory&&t5(n))?G6(0,t.length):e.allowDuplicatedCategory?n:Array.from(new Set(n))},ZN=t=>{var e;if(t==null||!("domain"in t))return q0;if(t.domain!=null)return t.domain;if(t.ticks!=null){if(t.type==="number"){var r=Xl(t.ticks);return[Math.min(...r),Math.max(...r)]}if(t.type==="category")return t.ticks.map(String)}return(e=t==null?void 0:t.domain)!==null&&e!==void 0?e:q0},ag=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var s=r.filter(Boolean);if(s.length!==0){var i=s.flat(),o=Math.min(...i),l=Math.max(...i);return[o,l]}},i$=t=>t.referenceElements.dots,Ou=(t,e,r)=>t.filter(n=>n.ifOverflow==="extendDomain").filter(n=>e==="xAxis"?n.xAxisId===r:n.yAxisId===r),Ipe=X([i$,Xt,af],Ou),o$=t=>t.referenceElements.areas,Rpe=X([o$,Xt,af],Ou),l$=t=>t.referenceElements.lines,Ope=X([l$,Xt,af],Ou),c$=(t,e)=>{var r=Xl(t.map(n=>e==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},Dpe=X(Ipe,Xt,c$),u$=(t,e)=>{var r=Xl(t.flatMap(n=>[e==="xAxis"?n.x1:n.y1,e==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},Mpe=X([Rpe,Xt],u$),d$=(t,e)=>{var r=Xl(t.map(n=>e==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},Lpe=X(Ope,Xt,d$),Fpe=X(Dpe,Lpe,Mpe,(t,e,r)=>ag(t,r,e)),h$=X([gr],ZN),e_=(t,e,r,n,s,i,o)=>{var l=Zme(e,t.allowDataOverflow);if(l!=null)return l;var c=i==="vertical"&&o==="xAxis"||i==="horizontal"&&o==="yAxis",u=c?ag(r,s,yC(n)):ag(s,yC(n));return epe(e,u,t.allowDataOverflow)},$pe=X([gr,h$,Ppe,Tpe,Fpe,nt,Xt],e_),Upe=[0,1],t_=(t,e,r,n,s,i,o)=>{if(!((t==null||r==null||r.length===0)&&o===void 0)){var{dataKey:l,type:c}=t,u=ka(e,i);return u&&l==null?G6(0,r.length):c==="category"?kpe(n,t,u):s==="expand"?Upe:o}},r_=X([gr,nt,XN,yv,sf,Xt,$pe],t_),f$=(t,e,r,n,s)=>{if(t!=null){var{scale:i,type:o}=t;if(i==="auto")return e==="radial"&&s==="radiusAxis"?"band":e==="radial"&&s==="angleAxis"?"linear":o==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":o==="category"?"band":"linear";if(typeof i=="string"){var l="scale".concat(Hh(i));return l in wd?l:"point"}}},Du=X([gr,nt,XF,UN,Xt],f$);function Bpe(t){if(t!=null){if(t in wd)return wd[t]();var e="scale".concat(Hh(t));if(e in wd)return wd[e]()}}function n_(t,e,r,n){if(!(r==null||n==null)){if(typeof t.scale=="function")return t.scale.copy().domain(r).range(n);var s=Bpe(e);if(s!=null){var i=s.domain(r).range(n);return kue(i),i}}}var s_=(t,e,r)=>{var n=ZN(e);if(!(r!=="auto"&&r!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&cu(t))return upe(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&cu(t))return dpe(t,e.tickCount,e.allowDecimals)}},a_=X([r_,of,Du],s_),i_=(t,e,r,n)=>{if(n!=="angleAxis"&&(t==null?void 0:t.type)==="number"&&cu(e)&&Array.isArray(r)&&r.length>0){var s=e[0],i=r[0],o=e[1],l=r[r.length-1];return[Math.min(s,i),Math.max(o,l)]}return e},Vpe=X([gr,r_,a_,Xt],i_),zpe=X(yv,gr,(t,e)=>{if(!(!e||e.type!=="number")){var r=1/0,n=Array.from(Xl(t.map(l=>l.value))).sort((l,c)=>l-c);if(n.length<2)return 1/0;var s=n[n.length-1]-n[0];if(s===0)return 1/0;for(var i=0;i<n.length-1;i++){var o=n[i+1]-n[i];r=Math.min(r,o)}return r/s}}),m$=X(zpe,nt,UF,Pr,(t,e,r,n)=>n,(t,e,r,n,s)=>{if(!Kr(t))return 0;var i=e==="vertical"?n.height:n.width;if(s==="gap")return t*i/2;if(s==="no-gap"){var o=an(r,t*i),l=t*i/2;return l-o-(l-o)/i*o}return 0}),Gpe=(t,e)=>{var r=wi(t,e);return r==null||typeof r.padding!="string"?0:m$(t,"xAxis",e,r.padding)},Wpe=(t,e)=>{var r=ji(t,e);return r==null||typeof r.padding!="string"?0:m$(t,"yAxis",e,r.padding)},qpe=X(wi,Gpe,(t,e)=>{var r,n;if(t==null)return{left:0,right:0};var{padding:s}=t;return typeof s=="string"?{left:e,right:e}:{left:((r=s.left)!==null&&r!==void 0?r:0)+e,right:((n=s.right)!==null&&n!==void 0?n:0)+e}}),Hpe=X(ji,Wpe,(t,e)=>{var r,n;if(t==null)return{top:0,bottom:0};var{padding:s}=t;return typeof s=="string"?{top:e,bottom:e}:{top:((r=s.top)!==null&&r!==void 0?r:0)+e,bottom:((n=s.bottom)!==null&&n!==void 0?n:0)+e}}),Kpe=X([Pr,qpe,av,sv,(t,e,r)=>r],(t,e,r,n,s)=>{var{padding:i}=n;return s?[i.left,r.width-i.right]:[t.left+e.left,t.left+t.width-e.right]}),Ype=X([Pr,nt,Hpe,av,sv,(t,e,r)=>r],(t,e,r,n,s,i)=>{var{padding:o}=s;return i?[n.height-o.bottom,o.top]:e==="horizontal"?[t.top+t.height-r.bottom,t.top+r.top]:[t.top+r.top,t.top+t.height-r.bottom]}),uf=(t,e,r,n)=>{var s;switch(e){case"xAxis":return Kpe(t,r,n);case"yAxis":return Ype(t,r,n);case"zAxis":return(s=qN(t,r))===null||s===void 0?void 0:s.range;case"angleAxis":return GF(t);case"radiusAxis":return WF(t,r);default:return}},p$=X([gr,uf],fv),Mu=X([gr,Du,Vpe,p$],n_);X([cf,vv,Xt],a$);function g$(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var xv=(t,e)=>e,bv=(t,e,r)=>r,Qpe=X(rv,xv,bv,(t,e,r)=>t.filter(n=>n.orientation===e).filter(n=>n.mirror===r).sort(g$)),Xpe=X(nv,xv,bv,(t,e,r)=>t.filter(n=>n.orientation===e).filter(n=>n.mirror===r).sort(g$)),y$=(t,e)=>({width:t.width,height:e.height}),Jpe=(t,e)=>{var r=typeof e.width=="number"?e.width:Xh;return{width:r,height:t.height}},v$=X(Pr,wi,y$),Zpe=(t,e,r)=>{switch(e){case"top":return t.top;case"bottom":return r-t.bottom;default:return 0}},ege=(t,e,r)=>{switch(e){case"left":return t.left;case"right":return r-t.right;default:return 0}},tge=X(vi,Pr,Qpe,xv,bv,(t,e,r,n,s)=>{var i={},o;return r.forEach(l=>{var c=y$(e,l);o==null&&(o=Zpe(e,n,t));var u=n==="top"&&!s||n==="bottom"&&s;i[l.id]=o-Number(u)*c.height,o+=(u?-1:1)*c.height}),i}),rge=X(yi,Pr,Xpe,xv,bv,(t,e,r,n,s)=>{var i={},o;return r.forEach(l=>{var c=Jpe(e,l);o==null&&(o=ege(e,n,t));var u=n==="left"&&!s||n==="right"&&s;i[l.id]=o-Number(u)*c.width,o+=(u?-1:1)*c.width}),i}),nge=(t,e)=>{var r=wi(t,e);if(r!=null)return tge(t,r.orientation,r.mirror)},sge=X([Pr,wi,nge,(t,e)=>e],(t,e,r,n)=>{if(e!=null){var s=r==null?void 0:r[n];return s==null?{x:t.left,y:0}:{x:t.left,y:s}}}),age=(t,e)=>{var r=ji(t,e);if(r!=null)return rge(t,r.orientation,r.mirror)},ige=X([Pr,ji,age,(t,e)=>e],(t,e,r,n)=>{if(e!=null){var s=r==null?void 0:r[n];return s==null?{x:0,y:t.top}:{x:s,y:t.top}}}),x$=X(Pr,ji,(t,e)=>{var r=typeof e.width=="number"?e.width:Xh;return{width:r,height:t.height}}),vC=(t,e,r)=>{switch(e){case"xAxis":return v$(t,r).width;case"yAxis":return x$(t,r).height;default:return}},b$=(t,e,r,n)=>{if(r!=null){var{allowDuplicatedCategory:s,type:i,dataKey:o}=r,l=ka(t,n),c=e.map(u=>u.value);if(o&&l&&i==="category"&&s&&t5(c))return c}},o_=X([nt,yv,gr,Xt],b$),w$=(t,e,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:s,scale:i}=r,o=ka(t,n);if(o&&(s==="number"||i!=="auto"))return e.map(l=>l.value)}},l_=X([nt,yv,of,Xt],w$),xC=X([nt,Npe,Du,Mu,o_,l_,uf,a_,Xt],(t,e,r,n,s,i,o,l,c)=>{if(e==null)return null;var u=ka(t,c);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:c,categoricalDomain:i,duplicateDomain:s,isCategorical:u,niceTicks:l,range:o,realScaleType:r,scale:n}}),oge=(t,e,r,n,s,i,o,l,c)=>{if(!(e==null||n==null)){var u=ka(t,c),{type:d,ticks:h,tickCount:f}=e,m=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,v=d==="category"&&n.bandwidth?n.bandwidth()/m:0;v=c==="angleAxis"&&i!=null&&i.length>=2?Or(i[0]-i[1])*2*v:v;var y=h||s;if(y){var x=y.map((b,w)=>{var j=o?o.indexOf(b):b;return{index:w,coordinate:n(j)+v,value:b,offset:v}});return x.filter(b=>!In(b.coordinate))}return u&&l?l.map((b,w)=>({coordinate:n(b)+v,value:b,index:w,offset:v})):n.ticks?n.ticks(f).map(b=>({coordinate:n(b)+v,value:b,offset:v})):n.domain().map((b,w)=>({coordinate:n(b)+v,value:o?o[b]:b,index:w,offset:v}))}},j$=X([nt,of,Du,Mu,a_,uf,o_,l_,Xt],oge),lge=(t,e,r,n,s,i,o)=>{if(!(e==null||r==null||n==null||n[0]===n[1])){var l=ka(t,o),{tickCount:c}=e,u=0;return u=o==="angleAxis"&&(n==null?void 0:n.length)>=2?Or(n[0]-n[1])*2*u:u,l&&i?i.map((d,h)=>({coordinate:r(d)+u,value:d,index:h,offset:u})):r.ticks?r.ticks(c).map(d=>({coordinate:r(d)+u,value:d,offset:u})):r.domain().map((d,h)=>({coordinate:r(d)+u,value:s?s[d]:d,index:h,offset:u}))}},Sa=X([nt,of,Mu,uf,o_,l_,Xt],lge),Aa=X(gr,Mu,(t,e)=>{if(!(t==null||e==null))return sg(sg({},t),{},{scale:e})}),cge=X([gr,Du,r_,p$],n_);X((t,e,r)=>qN(t,r),cge,(t,e)=>{if(!(t==null||e==null))return sg(sg({},t),{},{scale:e})});var uge=X([nt,rv,nv],(t,e,r)=>{switch(t){case"horizontal":return e.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),N$=t=>t.options.defaultTooltipEventType,_$=t=>t.options.validateTooltipEventTypes;function S$(t,e,r){if(t==null)return e;var n=t?"axis":"item";return r==null?e:r.includes(n)?n:e}function c_(t,e){var r=N$(t),n=_$(t);return S$(e,r,n)}function dge(t){return Oe(e=>c_(e,t))}var A$=(t,e)=>{var r,n=Number(e);if(!(In(n)||e==null))return n>=0?t==null||(r=t[n])===null||r===void 0?void 0:r.value:void 0},hge=t=>t.tooltip.settings,Bi={active:!1,index:null,dataKey:void 0,coordinate:void 0},fge={itemInteraction:{click:Bi,hover:Bi},axisInteraction:{click:Bi,hover:Bi},keyboardInteraction:Bi,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},E$=rs({name:"tooltip",initialState:fge,reducers:{addTooltipEntrySettings(t,e){t.tooltipItemPayloads.push(e.payload)},removeTooltipEntrySettings(t,e){var r=Ja(t).tooltipItemPayloads.indexOf(e.payload);r>-1&&t.tooltipItemPayloads.splice(r,1)},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate,t.keyboardInteraction.dataKey=e.payload.activeDataKey}}}),{addTooltipEntrySettings:mge,removeTooltipEntrySettings:pge,setTooltipSettingsState:gge,setActiveMouseOverItemIndex:P$,mouseLeaveItem:yge,mouseLeaveChart:T$,setActiveClickItemIndex:vge,setMouseOverAxisIndex:C$,setMouseClickAxisIndex:xge,setSyncInteraction:H0,setKeyboardInteraction:K0}=E$.actions,bge=E$.reducer;function bC(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function mm(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?bC(Object(r),!0).forEach(function(n){wge(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):bC(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function wge(t,e,r){return(e=jge(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function jge(t){var e=Nge(t,"string");return typeof e=="symbol"?e:e+""}function Nge(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _ge(t,e,r){return e==="axis"?r==="click"?t.axisInteraction.click:t.axisInteraction.hover:r==="click"?t.itemInteraction.click:t.itemInteraction.hover}function Sge(t){return t.index!=null}var k$=(t,e,r,n)=>{if(e==null)return Bi;var s=_ge(t,e,r);if(s==null)return Bi;if(s.active)return s;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var i=t.settings.active===!0;if(Sge(s)){if(i)return mm(mm({},s),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return mm(mm({},Bi),{},{coordinate:s.coordinate})},u_=(t,e)=>{var r=t==null?void 0:t.index;if(r==null)return null;var n=Number(r);if(!Kr(n))return r;var s=0,i=1/0;return e.length>0&&(i=e.length-1),String(Math.max(s,Math.min(n,i)))},I$=(t,e,r,n,s,i,o,l)=>{if(!(i==null||l==null)){var c=o[0],u=c==null?void 0:l(c.positions,i);if(u!=null)return u;var d=s==null?void 0:s[Number(i)];if(d)switch(r){case"horizontal":return{x:d.coordinate,y:(n.top+e)/2};default:return{x:(n.left+t)/2,y:d.coordinate}}}},R$=(t,e,r,n)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var s;return r==="hover"?s=t.itemInteraction.hover.dataKey:s=t.itemInteraction.click.dataKey,s==null&&n!=null?[t.tooltipItemPayloads[0]]:t.tooltipItemPayloads.filter(i=>{var o;return((o=i.settings)===null||o===void 0?void 0:o.dataKey)===s})},df=t=>t.options.tooltipPayloadSearcher,Lu=t=>t.tooltip;function wC(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function jC(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?wC(Object(r),!0).forEach(function(n){Age(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wC(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Age(t,e,r){return(e=Ege(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ege(t){var e=Pge(t,"string");return typeof e=="symbol"?e:e+""}function Pge(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Tge(t,e){return t??e}var O$=(t,e,r,n,s,i,o)=>{if(!(e==null||i==null)){var{chartData:l,computedData:c,dataStartIndex:u,dataEndIndex:d}=r,h=[];return t.reduce((f,m)=>{var v,{dataDefinedOnItem:y,settings:x}=m,b=Tge(y,l),w=Array.isArray(b)?w6(b,u,d):b,j=(v=x==null?void 0:x.dataKey)!==null&&v!==void 0?v:n,E=x==null?void 0:x.nameKey,I;if(n&&Array.isArray(w)&&!Array.isArray(w[0])&&o==="axis"?I=r5(w,n,s):I=i(w,e,c,E),Array.isArray(I))I.forEach(T=>{var A=jC(jC({},x),{},{name:T.name,unit:T.unit,color:void 0,fill:void 0});f.push(lT({tooltipEntrySettings:A,dataKey:T.dataKey,payload:T.payload,value:Pt(T.payload,T.dataKey),name:T.name}))});else{var O;f.push(lT({tooltipEntrySettings:x,dataKey:j,payload:I,value:Pt(I,j),name:(O=Pt(I,E))!==null&&O!==void 0?O:x==null?void 0:x.name}))}return f},h)}},d_=X([Fr,nt,XF,UN,kr],f$),Cge=X([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),kge=X([kr,Ru],HN),hf=X([Cge,Fr,kge],KN),Ige=X([hf],t=>t.filter(gv)),Rge=X([hf],YN),Fu=X([Rge,$o],QN),Oge=X([Ige,$o,Fr],KF),h_=X([Fu,Fr,hf],JN),Dge=X([Fr],ZN),Mge=X([hf],t=>t.filter(gv)),Lge=X([Oge,Mge,sf],r$),Fge=X([Lge,$o,kr],n$),$ge=X([hf],ZF),Uge=X([Fu,Fr,$ge,vv,kr],s$),Bge=X([i$,kr,Ru],Ou),Vge=X([Bge,kr],c$),zge=X([o$,kr,Ru],Ou),Gge=X([zge,kr],u$),Wge=X([l$,kr,Ru],Ou),qge=X([Wge,kr],d$),Hge=X([Vge,qge,Gge],ag),Kge=X([Fr,Dge,Fge,Uge,Hge,nt,kr],e_),D$=X([Fr,nt,Fu,h_,sf,kr,Kge],t_),Yge=X([D$,Fr,d_],s_),Qge=X([Fr,D$,Yge,kr],i_),M$=t=>{var e=kr(t),r=Ru(t),n=!1;return uf(t,e,r,n)},L$=X([Fr,M$],fv),F$=X([Fr,d_,Qge,L$],n_),Xge=X([nt,h_,Fr,kr],b$),Jge=X([nt,h_,Fr,kr],w$),Zge=(t,e,r,n,s,i,o,l)=>{if(e){var{type:c}=e,u=ka(t,l);if(n){var d=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,h=c==="category"&&n.bandwidth?n.bandwidth()/d:0;return h=l==="angleAxis"&&s!=null&&(s==null?void 0:s.length)>=2?Or(s[0]-s[1])*2*h:h,u&&o?o.map((f,m)=>({coordinate:n(f)+h,value:f,index:m,offset:h})):n.domain().map((f,m)=>({coordinate:n(f)+h,value:i?i[f]:f,index:m,offset:h}))}}},Ni=X([nt,Fr,d_,F$,M$,Xge,Jge,kr],Zge),f_=X([N$,_$,hge],(t,e,r)=>S$(r.shared,t,e)),$$=t=>t.tooltip.settings.trigger,m_=t=>t.tooltip.settings.defaultIndex,wv=X([Lu,f_,$$,m_],k$),bo=X([wv,Fu],u_),U$=X([Ni,bo],A$),B$=X([wv],t=>{if(t)return t.dataKey}),V$=X([Lu,f_,$$,m_],R$),eye=X([yi,vi,nt,Pr,Ni,m_,V$,df],I$),tye=X([wv,eye],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),rye=X([wv],t=>t.active),nye=X([V$,bo,$o,HF,U$,df,f_],O$),sye=X([nye],t=>{if(t!=null){var e=t.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(e))}});function NC(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function _C(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?NC(Object(r),!0).forEach(function(n){aye(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):NC(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function aye(t,e,r){return(e=iye(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function iye(t){var e=oye(t,"string");return typeof e=="symbol"?e:e+""}function oye(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var lye=()=>Oe(Fr),cye=()=>{var t=lye(),e=Oe(Ni),r=Oe(F$);return Ll(_C(_C({},t),{},{scale:r}),e)},z$=()=>Oe(UN),p_=(t,e)=>e,G$=(t,e,r)=>r,g_=(t,e,r,n)=>n,uye=X(Ni,t=>Qy(t,e=>e.coordinate)),y_=X([Lu,p_,G$,g_],k$),W$=X([y_,Fu],u_),dye=(t,e,r)=>{if(e!=null){var n=Lu(t);return e==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},q$=X([Lu,p_,G$,g_],R$),ig=X([yi,vi,nt,Pr,Ni,g_,q$,df],I$),hye=X([y_,ig],(t,e)=>{var r;return(r=t.coordinate)!==null&&r!==void 0?r:e}),H$=X(Ni,W$,A$),fye=X([q$,W$,$o,HF,H$,df,p_],O$),mye=X([y_],t=>({isActive:t.active,activeIndex:t.index})),pye=(t,e,r,n,s,i,o,l)=>{if(!(!t||!e||!n||!s||!i)){var c=Bue(t.chartX,t.chartY,e,r,l);if(c){var u=zue(c,e),d=Tue(u,o,i,n,s),h=Vue(e,i,d,c);return{activeIndex:String(d),activeCoordinate:h}}}};function Y0(){return Y0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Y0.apply(null,arguments)}function SC(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function pm(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?SC(Object(r),!0).forEach(function(n){gye(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):SC(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function gye(t,e,r){return(e=yye(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function yye(t){var e=vye(t,"string");return typeof e=="symbol"?e:e+""}function vye(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function xye(t){var{coordinate:e,payload:r,index:n,offset:s,tooltipAxisBandSize:i,layout:o,cursor:l,tooltipEventType:c,chartName:u}=t,d=e,h=r,f=n;if(!l||!d||u!=="ScatterChart"&&c!=="axis")return null;var m,v;if(u==="ScatterChart")m=d,v=zde;else if(u==="BarChart")m=Gde(o,d,s,i),v=L6;else if(o==="radial"){var{cx:y,cy:x,radius:b,startAngle:w,endAngle:j}=F6(d);m={cx:y,cy:x,startAngle:w,endAngle:j,innerRadius:b,outerRadius:b},v=U6}else m={points:Nhe(o,d,s)},v=Ec;var E=typeof l=="object"&&"className"in l?l.className:void 0,I=pm(pm(pm(pm({stroke:"#ccc",pointerEvents:"none"},s),m),Gt(l,!1)),{},{payload:h,payloadIndex:f,className:lt("recharts-tooltip-cursor",E)});return p.isValidElement(l)?p.cloneElement(l,I):p.createElement(v,I)}function bye(t){var e=cye(),r=P6(),n=Jh(),s=z$();return p.createElement(xye,Y0({},t,{coordinate:t.coordinate,index:t.index,payload:t.payload,offset:r,layout:n,tooltipAxisBandSize:e,chartName:s}))}var K$=p.createContext(null),wye=()=>p.useContext(K$),Y$={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function i(c,u,d,h,f){if(typeof d!="function")throw new TypeError("The listener must be a function");var m=new s(d,h||c,f),v=r?r+u:u;return c._events[v]?c._events[v].fn?c._events[v]=[c._events[v],m]:c._events[v].push(m):(c._events[v]=m,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,h;if(this._eventsCount===0)return u;for(h in d=this._events)e.call(d,h)&&u.push(r?h.slice(1):h);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=r?r+u:u,h=this._events[d];if(!h)return[];if(h.fn)return[h.fn];for(var f=0,m=h.length,v=new Array(m);f<m;f++)v[f]=h[f].fn;return v},l.prototype.listenerCount=function(u){var d=r?r+u:u,h=this._events[d];return h?h.fn?1:h.length:0},l.prototype.emit=function(u,d,h,f,m,v){var y=r?r+u:u;if(!this._events[y])return!1;var x=this._events[y],b=arguments.length,w,j;if(x.fn){switch(x.once&&this.removeListener(u,x.fn,void 0,!0),b){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,d),!0;case 3:return x.fn.call(x.context,d,h),!0;case 4:return x.fn.call(x.context,d,h,f),!0;case 5:return x.fn.call(x.context,d,h,f,m),!0;case 6:return x.fn.call(x.context,d,h,f,m,v),!0}for(j=1,w=new Array(b-1);j<b;j++)w[j-1]=arguments[j];x.fn.apply(x.context,w)}else{var E=x.length,I;for(j=0;j<E;j++)switch(x[j].once&&this.removeListener(u,x[j].fn,void 0,!0),b){case 1:x[j].fn.call(x[j].context);break;case 2:x[j].fn.call(x[j].context,d);break;case 3:x[j].fn.call(x[j].context,d,h);break;case 4:x[j].fn.call(x[j].context,d,h,f);break;default:if(!w)for(I=1,w=new Array(b-1);I<b;I++)w[I-1]=arguments[I];x[j].fn.apply(x[j].context,w)}}return!0},l.prototype.on=function(u,d,h){return i(this,u,d,h,!1)},l.prototype.once=function(u,d,h){return i(this,u,d,h,!0)},l.prototype.removeListener=function(u,d,h,f){var m=r?r+u:u;if(!this._events[m])return this;if(!d)return o(this,m),this;var v=this._events[m];if(v.fn)v.fn===d&&(!f||v.once)&&(!h||v.context===h)&&o(this,m);else{for(var y=0,x=[],b=v.length;y<b;y++)(v[y].fn!==d||f&&!v[y].once||h&&v[y].context!==h)&&x.push(v[y]);x.length?this._events[m]=x.length===1?x[0]:x:o(this,m)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&o(this,d)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,t.exports=l})(Y$);var jye=Y$.exports;const Nye=_o(jye);var lh=new Nye,Q0="recharts.syncEvent.tooltip",AC="recharts.syncEvent.brush";function jv(t,e){if(e){var r=Number.parseInt(e,10);if(!In(r))return t==null?void 0:t[r]}}var _ye={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},Q$=rs({name:"options",initialState:_ye,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),Sye=Q$.reducer,{createEventEmitter:Aye}=Q$.actions;function Eye(t){return t.tooltip.syncInteraction}var Pye={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},X$=rs({name:"chartData",initialState:Pye,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:r,endIndex:n}=e.payload;r!=null&&(t.dataStartIndex=r),n!=null&&(t.dataEndIndex=n)}}}),{setChartData:EC,setDataStartEndIndexes:Tye,setComputedData:n_e}=X$.actions,Cye=X$.reducer,kye=["x","y"];function PC(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function qo(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?PC(Object(r),!0).forEach(function(n){Iye(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):PC(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Iye(t,e,r){return(e=Rye(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Rye(t){var e=Oye(t,"string");return typeof e=="symbol"?e:e+""}function Oye(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Dye(t,e){if(t==null)return{};var r,n,s=Mye(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(s[r]=t[r])}return s}function Mye(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var J$=()=>{};function Lye(){var t=Oe(BN),e=Oe(VN),r=rr(),n=Oe(BF),s=Oe(Ni),i=Jh(),o=uN(),l=Oe(c=>c.rootProps.className);p.useEffect(()=>{if(t==null)return J$;var c=(u,d,h)=>{if(e!==h&&t===u){if(n==="index"){var f;if(o&&d!==null&&d!==void 0&&(f=d.payload)!==null&&f!==void 0&&f.coordinate){var m=d.payload.coordinate,{x:v,y}=m,x=Dye(m,kye),b=qo(qo(qo({},x),typeof v=="number"&&{x:Math.max(o.x,Math.min(v,o.x+o.width))}),typeof y=="number"&&{y:Math.max(o.y,Math.min(y,o.y+o.height))}),w=qo(qo({},d),{},{payload:qo(qo({},d.payload),{},{coordinate:b})});r(w)}else r(d);return}if(s!=null){var j;if(typeof n=="function"){var E={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},I=n(s,E);j=s[I]}else n==="value"&&(j=s.find(C=>String(C.value)===d.payload.label));var{coordinate:O}=d.payload;if(j==null||d.payload.active===!1||O==null||o==null){r(H0({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:T,y:A}=O,S=Math.min(T,o.x+o.width),_=Math.min(A,o.y+o.height),P={x:i==="horizontal"?j.coordinate:S,y:i==="horizontal"?_:j.coordinate},R=H0({active:d.payload.active,coordinate:P,dataKey:d.payload.dataKey,index:String(j.index),label:d.payload.label});r(R)}}};return lh.on(Q0,c),()=>{lh.off(Q0,c)}},[l,r,e,t,n,s,i,o])}function Fye(){var t=Oe(BN),e=Oe(VN),r=rr();p.useEffect(()=>{if(t==null)return J$;var n=(s,i,o)=>{e!==o&&t===s&&r(Tye(i))};return lh.on(AC,n),()=>{lh.off(AC,n)}},[r,e,t])}function $ye(){var t=rr();p.useEffect(()=>{t(Aye())},[t]),Lye(),Fye()}function Uye(t,e,r,n,s,i){var o=Oe(f=>dye(f,t,e)),l=Oe(VN),c=Oe(BN),u=Oe(BF),d=Oe(Eye),h=d==null?void 0:d.active;p.useEffect(()=>{if(!h&&c!=null&&l!=null){var f=H0({active:i,coordinate:r,dataKey:o,index:s,label:typeof n=="number"?String(n):n});lh.emit(Q0,c,f,l)}},[h,r,o,s,n,l,c,u,i])}function TC(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function CC(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?TC(Object(r),!0).forEach(function(n){Bye(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):TC(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Bye(t,e,r){return(e=Vye(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Vye(t){var e=zye(t,"string");return typeof e=="symbol"?e:e+""}function zye(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Gye(t){return t.dataKey}function Wye(t,e){return p.isValidElement(t)?p.cloneElement(t,e):typeof t=="function"?p.createElement(t,e):p.createElement(wde,e)}var kC=[],qye={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!xi.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Rs(t){var e=Tr(t,qye),{active:r,allowEscapeViewBox:n,animationDuration:s,animationEasing:i,content:o,filterNull:l,isAnimationActive:c,offset:u,payloadUniqBy:d,position:h,reverseDirection:f,useTranslate3d:m,wrapperStyle:v,cursor:y,shared:x,trigger:b,defaultIndex:w,portal:j,axisId:E}=e,I=rr(),O=typeof w=="number"?String(w):w;p.useEffect(()=>{I(gge({shared:x,trigger:b,axisId:E,active:r,defaultIndex:O}))},[I,x,b,E,r,O]);var T=uN(),A=I6(),S=dge(x),{activeIndex:_,isActive:P}=Oe(re=>mye(re,S,b,O)),R=Oe(re=>fye(re,S,b,O)),C=Oe(re=>H$(re,S,b,O)),B=Oe(re=>hye(re,S,b,O)),G=R,U=wye(),F=r??P,[M,$]=Y5([G,F]),ne=S==="axis"?C:void 0;Uye(S,b,B,ne,_,F);var te=j??U;if(te==null)return null;var z=G??kC;F||(z=kC),l&&z.length&&(z=$5(G.filter(re=>re.value!=null&&(re.hide!==!0||e.includeHidden)),d,Gye));var de=z.length>0,Z=p.createElement(Pde,{allowEscapeViewBox:n,animationDuration:s,animationEasing:i,isAnimationActive:c,active:F,coordinate:B,hasPayload:de,offset:u,position:h,reverseDirection:f,useTranslate3d:m,viewBox:T,wrapperStyle:v,lastBoundingBox:M,innerRef:$,hasPortalFromProps:!!j},Wye(o,CC(CC({},e),{},{payload:z,label:ne,active:F,coordinate:B,accessibilityLayer:A})));return p.createElement(p.Fragment,null,No.createPortal(Z,te),F&&p.createElement(bye,{cursor:y,tooltipEventType:S,coordinate:B,payload:G,index:_}))}var Z$={},eU={},tU={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n,{signal:s,edges:i}={}){let o,l=null;const c=i!=null&&i.includes("leading"),u=i==null||i.includes("trailing"),d=()=>{l!==null&&(r.apply(o,l),o=void 0,l=null)},h=()=>{u&&d(),y()};let f=null;const m=()=>{f!=null&&clearTimeout(f),f=setTimeout(()=>{f=null,h()},n)},v=()=>{f!==null&&(clearTimeout(f),f=null)},y=()=>{v(),o=void 0,l=null},x=()=>{d()},b=function(...w){if(s!=null&&s.aborted)return;o=this,l=w;const j=f==null;m(),c&&j&&d()};return b.schedule=m,b.cancel=y,b.flush=x,s==null||s.addEventListener("abort",y,{once:!0}),b}t.debounce=e})(tU);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=tU;function r(n,s=0,i={}){typeof i!="object"&&(i={});const{leading:o=!1,trailing:l=!0,maxWait:c}=i,u=Array(2);o&&(u[0]="leading"),l&&(u[1]="trailing");let d,h=null;const f=e.debounce(function(...y){d=n.apply(this,y),h=null},s,{edges:u}),m=function(...y){return c!=null&&(h===null&&(h=Date.now()),Date.now()-h>=c)?(d=n.apply(this,y),h=Date.now(),f.cancel(),f.schedule(),d):(f.apply(this,y),d)},v=()=>(f.flush(),d);return m.cancel=f.cancel,m.flush=v,m}t.debounce=r})(eU);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=eU;function r(n,s=0,i={}){const{leading:o=!0,trailing:l=!0}=i;return e.debounce(n,s,{leading:o,maxWait:s,trailing:l})}t.throttle=r})(Z$);var Hye=Z$.throttle;const Kye=_o(Hye);var kd=function(e,r){for(var n=arguments.length,s=new Array(n>2?n-2:0),i=2;i<n;i++)s[i-2]=arguments[i]};function IC(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Xx(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?IC(Object(r),!0).forEach(function(n){Yye(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):IC(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Yye(t,e,r){return(e=Qye(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Qye(t){var e=Xye(t,"string");return typeof e=="symbol"?e:e+""}function Xye(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var na=p.forwardRef((t,e)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:s="100%",height:i="100%",minWidth:o=0,minHeight:l,maxHeight:c,children:u,debounce:d=0,id:h,className:f,onResize:m,style:v={}}=t,y=p.useRef(null),x=p.useRef();x.current=m,p.useImperativeHandle(e,()=>y.current);var[b,w]=p.useState({containerWidth:n.width,containerHeight:n.height}),j=p.useCallback((I,O)=>{w(T=>{var A=Math.round(I),S=Math.round(O);return T.containerWidth===A&&T.containerHeight===S?T:{containerWidth:A,containerHeight:S}})},[]);p.useEffect(()=>{var I=S=>{var _,{width:P,height:R}=S[0].contentRect;j(P,R),(_=x.current)===null||_===void 0||_.call(x,P,R)};d>0&&(I=Kye(I,d,{trailing:!0,leading:!1}));var O=new ResizeObserver(I),{width:T,height:A}=y.current.getBoundingClientRect();return j(T,A),O.observe(y.current),()=>{O.disconnect()}},[j,d]);var E=p.useMemo(()=>{var{containerWidth:I,containerHeight:O}=b;if(I<0||O<0)return null;kd(tl(s)||tl(i),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,i),kd(!r||r>0,"The aspect(%s) must be greater than zero.",r);var T=tl(s)?I:s,A=tl(i)?O:i;return r&&r>0&&(T?A=T/r:A&&(T=A*r),c&&A>c&&(A=c)),kd(T>0||A>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,T,A,s,i,o,l,r),p.Children.map(u,S=>p.cloneElement(S,{width:T,height:A,style:Xx({width:T,height:A},S.props.style)}))},[r,u,i,c,l,o,b,s]);return p.createElement("div",{id:h?"".concat(h):void 0,className:lt("recharts-responsive-container",f),style:Xx(Xx({},v),{},{width:s,height:i,minWidth:o,minHeight:l,maxHeight:c}),ref:y},p.createElement("div",{style:{width:0,height:0,overflow:"visible"}},E))}),$u=t=>null;$u.displayName="Cell";function Jye(t,e,r){return(e=Zye(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Zye(t){var e=eve(t,"string");return typeof e=="symbol"?e:e+""}function eve(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class tve{constructor(e){Jye(this,"cache",new Map),this.maxSize=e}get(e){var r=this.cache.get(e);return r!==void 0&&(this.cache.delete(e),this.cache.set(e,r)),r}set(e,r){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(e,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function RC(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function rve(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?RC(Object(r),!0).forEach(function(n){nve(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):RC(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function nve(t,e,r){return(e=sve(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function sve(t){var e=ave(t,"string");return typeof e=="symbol"?e:e+""}function ave(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ive={cacheSize:2e3,enableCache:!0},rU=rve({},ive),OC=new tve(rU.cacheSize),ove={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},DC="recharts_measurement_span";function lve(t,e){var r=e.fontSize||"",n=e.fontFamily||"",s=e.fontWeight||"",i=e.fontStyle||"",o=e.letterSpacing||"",l=e.textTransform||"";return"".concat(t,"|").concat(r,"|").concat(n,"|").concat(s,"|").concat(i,"|").concat(o,"|").concat(l)}var MC=(t,e)=>{try{var r=document.getElementById(DC);r||(r=document.createElement("span"),r.setAttribute("id",DC),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,ove,e),r.textContent="".concat(t);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},Id=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||xi.isSsr)return{width:0,height:0};if(!rU.enableCache)return MC(e,r);var n=lve(e,r),s=OC.get(n);if(s)return s;var i=MC(e,r);return OC.set(n,i),i},LC=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,FC=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,cve=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,uve=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,nU={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},dve=Object.keys(nU),fc="NaN";function hve(t,e){return t*nU[e]}class jn{static parse(e){var r,[,n,s]=(r=uve.exec(e))!==null&&r!==void 0?r:[];return new jn(parseFloat(n),s??"")}constructor(e,r){this.num=e,this.unit=r,this.num=e,this.unit=r,In(e)&&(this.unit=""),r!==""&&!cve.test(r)&&(this.num=NaN,this.unit=""),dve.includes(r)&&(this.num=hve(e,r),this.unit="px")}add(e){return this.unit!==e.unit?new jn(NaN,""):new jn(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new jn(NaN,""):new jn(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new jn(NaN,""):new jn(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new jn(NaN,""):new jn(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return In(this.num)}}function sU(t){if(t.includes(fc))return fc;for(var e=t;e.includes("*")||e.includes("/");){var r,[,n,s,i]=(r=LC.exec(e))!==null&&r!==void 0?r:[],o=jn.parse(n??""),l=jn.parse(i??""),c=s==="*"?o.multiply(l):o.divide(l);if(c.isNaN())return fc;e=e.replace(LC,c.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var u,[,d,h,f]=(u=FC.exec(e))!==null&&u!==void 0?u:[],m=jn.parse(d??""),v=jn.parse(f??""),y=h==="+"?m.add(v):m.subtract(v);if(y.isNaN())return fc;e=e.replace(FC,y.toString())}return e}var $C=/\(([^()]*)\)/;function fve(t){for(var e=t,r;(r=$C.exec(e))!=null;){var[,n]=r;e=e.replace($C,sU(n))}return e}function mve(t){var e=t.replace(/\s+/g,"");return e=fve(e),e=sU(e),e}function pve(t){try{return mve(t)}catch{return fc}}function Jx(t){var e=pve(t.slice(5,-1));return e===fc?"":e}var gve=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],yve=["dx","dy","angle","className","breakAll"];function X0(){return X0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},X0.apply(null,arguments)}function UC(t,e){if(t==null)return{};var r,n,s=vve(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(s[r]=t[r])}return s}function vve(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var aU=/[ \f\n\r\t\v\u2028\u2029]+/,iU=t=>{var{children:e,breakAll:r,style:n}=t;try{var s=[];zt(e)||(r?s=e.toString().split(""):s=e.toString().split(aU));var i=s.map(l=>({word:l,width:Id(l,n).width})),o=r?0:Id(" ",n).width;return{wordsWithComputedWidth:i,spaceWidth:o}}catch{return null}},xve=(t,e,r,n,s)=>{var{maxLines:i,children:o,style:l,breakAll:c}=t,u=Le(i),d=o,h=function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return P.reduce((R,C)=>{var{word:B,width:G}=C,U=R[R.length-1];if(U&&(n==null||s||U.width+G+r<Number(n)))U.words.push(B),U.width+=G+r;else{var F={words:[B],width:G};R.push(F)}return R},[])},f=h(e),m=_=>_.reduce((P,R)=>P.width>R.width?P:R);if(!u||s)return f;var v=f.length>i||m(f).width>Number(n);if(!v)return f;for(var y="…",x=_=>{var P=d.slice(0,_),R=iU({breakAll:c,style:l,children:P+y}).wordsWithComputedWidth,C=h(R),B=C.length>i||m(C).width>Number(n);return[B,C]},b=0,w=d.length-1,j=0,E;b<=w&&j<=d.length-1;){var I=Math.floor((b+w)/2),O=I-1,[T,A]=x(O),[S]=x(I);if(!T&&!S&&(b=I+1),T&&S&&(w=I-1),!T&&S){E=A;break}j++}return E||f},BC=t=>{var e=zt(t)?[]:t.toString().split(aU);return[{words:e}]},bve=t=>{var{width:e,scaleToFit:r,children:n,style:s,breakAll:i,maxLines:o}=t;if((e||r)&&!xi.isSsr){var l,c,u=iU({breakAll:i,children:n,style:s});if(u){var{wordsWithComputedWidth:d,spaceWidth:h}=u;l=d,c=h}else return BC(n);return xve({breakAll:i,children:n,maxLines:o,style:s},l,c,e,r)}return BC(n)},VC="#808080",Nv=p.forwardRef((t,e)=>{var{x:r=0,y:n=0,lineHeight:s="1em",capHeight:i="0.71em",scaleToFit:o=!1,textAnchor:l="start",verticalAnchor:c="end",fill:u=VC}=t,d=UC(t,gve),h=p.useMemo(()=>bve({breakAll:d.breakAll,children:d.children,maxLines:d.maxLines,scaleToFit:o,style:d.style,width:d.width}),[d.breakAll,d.children,d.maxLines,o,d.style,d.width]),{dx:f,dy:m,angle:v,className:y,breakAll:x}=d,b=UC(d,yve);if(!Na(r)||!Na(n)||h.length===0)return null;var w=r+(Le(f)?f:0),j=n+(Le(m)?m:0),E;switch(c){case"start":E=Jx("calc(".concat(i,")"));break;case"middle":E=Jx("calc(".concat((h.length-1)/2," * -").concat(s," + (").concat(i," / 2))"));break;default:E=Jx("calc(".concat(h.length-1," * -").concat(s,")"));break}var I=[];if(o){var O=h[0].width,{width:T}=d;I.push("scale(".concat(Le(T)?T/O:1,")"))}return v&&I.push("rotate(".concat(v,", ").concat(w,", ").concat(j,")")),I.length&&(b.transform=I.join(" ")),p.createElement("text",X0({},Gt(b,!0),{ref:e,x:w,y:j,className:lt("recharts-text",y),textAnchor:l,fill:u.includes("url")?VC:u}),h.map((A,S)=>{var _=A.words.join(x?"":" ");return p.createElement("tspan",{x:w,dy:S===0?E:s,key:"".concat(_,"-").concat(S)},_)}))});Nv.displayName="Text";var wve=["labelRef"];function jve(t,e){if(t==null)return{};var r,n,s=Nve(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(s[r]=t[r])}return s}function Nve(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function zC(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function dr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?zC(Object(r),!0).forEach(function(n){_ve(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zC(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function _ve(t,e,r){return(e=Sve(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Sve(t){var e=Ave(t,"string");return typeof e=="symbol"?e:e+""}function Ave(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function za(){return za=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},za.apply(null,arguments)}var oU=p.createContext(null),Eve=t=>{var{x:e,y:r,width:n,height:s,children:i}=t,o=p.useMemo(()=>({x:e,y:r,width:n,height:s}),[e,r,n,s]);return p.createElement(oU.Provider,{value:o},i)},lU=()=>{var t=p.useContext(oU),e=uN();return t||e},Pve=p.createContext(null),Tve=()=>{var t=p.useContext(Pve),e=Oe(qF);return t||e},Cve=t=>{var{value:e,formatter:r}=t,n=zt(t.children)?e:t.children;return typeof r=="function"?r(n):n},v_=t=>t!=null&&typeof t=="function",kve=(t,e)=>{var r=Or(e-t),n=Math.min(Math.abs(e-t),360);return r*n},Ive=(t,e,r,n,s)=>{var{offset:i,className:o}=t,{cx:l,cy:c,innerRadius:u,outerRadius:d,startAngle:h,endAngle:f,clockWise:m}=s,v=(u+d)/2,y=kve(h,f),x=y>=0?1:-1,b,w;switch(e){case"insideStart":b=h+x*i,w=m;break;case"insideEnd":b=f-x*i,w=!m;break;case"end":b=f+x*i,w=m;break;default:throw new Error("Unsupported position ".concat(e))}w=y<=0?w:!w;var j=jr(l,c,v,b),E=jr(l,c,v,b+(w?1:-1)*359),I="M".concat(j.x,",").concat(j.y,`
    A`).concat(v,",").concat(v,",0,1,").concat(w?0:1,`,
    `).concat(E.x,",").concat(E.y),O=zt(t.id)?Jd("recharts-radial-line-"):t.id;return p.createElement("text",za({},n,{dominantBaseline:"central",className:lt("recharts-radial-bar-label",o)}),p.createElement("defs",null,p.createElement("path",{id:O,d:I})),p.createElement("textPath",{xlinkHref:"#".concat(O)},r))},Rve=(t,e,r)=>{var{cx:n,cy:s,innerRadius:i,outerRadius:o,startAngle:l,endAngle:c}=t,u=(l+c)/2;if(r==="outside"){var{x:d,y:h}=jr(n,s,o+e,u);return{x:d,y:h,textAnchor:d>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"end"};var f=(i+o)/2,{x:m,y:v}=jr(n,s,f,u);return{x:m,y:v,textAnchor:"middle",verticalAnchor:"middle"}},cU=t=>"cx"in t&&Le(t.cx),Ove=(t,e)=>{var{parentViewBox:r,offset:n,position:s}=t,i;r!=null&&!cU(r)&&(i=r);var{x:o,y:l,width:c,height:u}=e,d=u>=0?1:-1,h=d*n,f=d>0?"end":"start",m=d>0?"start":"end",v=c>=0?1:-1,y=v*n,x=v>0?"end":"start",b=v>0?"start":"end";if(s==="top"){var w={x:o+c/2,y:l-d*n,textAnchor:"middle",verticalAnchor:f};return dr(dr({},w),i?{height:Math.max(l-i.y,0),width:c}:{})}if(s==="bottom"){var j={x:o+c/2,y:l+u+h,textAnchor:"middle",verticalAnchor:m};return dr(dr({},j),i?{height:Math.max(i.y+i.height-(l+u),0),width:c}:{})}if(s==="left"){var E={x:o-y,y:l+u/2,textAnchor:x,verticalAnchor:"middle"};return dr(dr({},E),i?{width:Math.max(E.x-i.x,0),height:u}:{})}if(s==="right"){var I={x:o+c+y,y:l+u/2,textAnchor:b,verticalAnchor:"middle"};return dr(dr({},I),i?{width:Math.max(i.x+i.width-I.x,0),height:u}:{})}var O=i?{width:c,height:u}:{};return s==="insideLeft"?dr({x:o+y,y:l+u/2,textAnchor:b,verticalAnchor:"middle"},O):s==="insideRight"?dr({x:o+c-y,y:l+u/2,textAnchor:x,verticalAnchor:"middle"},O):s==="insideTop"?dr({x:o+c/2,y:l+h,textAnchor:"middle",verticalAnchor:m},O):s==="insideBottom"?dr({x:o+c/2,y:l+u-h,textAnchor:"middle",verticalAnchor:f},O):s==="insideTopLeft"?dr({x:o+y,y:l+h,textAnchor:b,verticalAnchor:m},O):s==="insideTopRight"?dr({x:o+c-y,y:l+h,textAnchor:x,verticalAnchor:m},O):s==="insideBottomLeft"?dr({x:o+y,y:l+u-h,textAnchor:b,verticalAnchor:f},O):s==="insideBottomRight"?dr({x:o+c-y,y:l+u-h,textAnchor:x,verticalAnchor:f},O):s&&typeof s=="object"&&(Le(s.x)||tl(s.x))&&(Le(s.y)||tl(s.y))?dr({x:o+an(s.x,c),y:l+an(s.y,u),textAnchor:"end",verticalAnchor:"end"},O):dr({x:o+c/2,y:l+u/2,textAnchor:"middle",verticalAnchor:"middle"},O)},Dve={offset:5};function Di(t){var e=Tr(t,Dve),{viewBox:r,position:n,value:s,children:i,content:o,className:l="",textBreakAll:c,labelRef:u}=e,d=Tve(),h=lU(),f=n==="center"?h:d??h,m=r||f;if(!m||zt(s)&&zt(i)&&!p.isValidElement(o)&&typeof o!="function")return null;var v=dr(dr({},e),{},{viewBox:m});if(p.isValidElement(o)){var y=jve(v,wve);return p.cloneElement(o,y)}var x;if(typeof o=="function"){if(x=p.createElement(o,v),p.isValidElement(x))return x}else x=Cve(e);var b=cU(m),w=Gt(e,!0);if(b&&(n==="insideStart"||n==="insideEnd"||n==="end"))return Ive(e,n,x,w,m);var j=b?Rve(m,e.offset,e.position):Ove(e,m);return p.createElement(Nv,za({ref:u,className:lt("recharts-label",l)},w,j,{breakAll:c}),x)}Di.displayName="Label";var Mve=(t,e,r)=>{if(!t)return null;var n={viewBox:e,labelRef:r};return t===!0?p.createElement(Di,za({key:"label-implicit"},n)):Na(t)?p.createElement(Di,za({key:"label-implicit",value:t},n)):p.isValidElement(t)?t.type===Di?p.cloneElement(t,dr({key:"label-implicit"},n)):p.createElement(Di,za({key:"label-implicit",content:t},n)):v_(t)?p.createElement(Di,za({key:"label-implicit",content:t},n)):t&&typeof t=="object"?p.createElement(Di,za({},t,{key:"label-implicit"},n)):null};function Lve(t){var{label:e}=t,r=lU();return Mve(e,r)||null}var uU={},dU={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r[r.length-1]}t.last=e})(dU);var hU={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return Array.isArray(r)?r:Array.from(r)}t.toArray=e})(hU);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=dU,r=hU,n=Ky;function s(i){if(n.isArrayLike(i))return e.last(r.toArray(i))}t.last=s})(uU);var Fve=uU.last;const $ve=_o(Fve);var Uve=["valueAccessor"],Bve=["dataKey","clockWise","id","textBreakAll"];function og(){return og=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},og.apply(null,arguments)}function GC(t,e){if(t==null)return{};var r,n,s=Vve(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(s[r]=t[r])}return s}function Vve(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var zve=t=>Array.isArray(t.value)?$ve(t.value):t.value,fU=p.createContext(void 0),x_=fU.Provider,mU=p.createContext(void 0),Gve=mU.Provider;function Wve(){return p.useContext(fU)}function qve(){return p.useContext(mU)}function $m(t){var{valueAccessor:e=zve}=t,r=GC(t,Uve),{dataKey:n,clockWise:s,id:i,textBreakAll:o}=r,l=GC(r,Bve),c=Wve(),u=qve(),d=c||u;return!d||!d.length?null:p.createElement(lr,{className:"recharts-label-list"},d.map((h,f)=>{var m,v=zt(n)?e(h,f):Pt(h&&h.payload,n),y=zt(i)?{}:{id:"".concat(i,"-").concat(f)};return p.createElement(Di,og({},Gt(h,!0),l,y,{fill:(m=r.fill)!==null&&m!==void 0?m:h.fill,parentViewBox:h.parentViewBox,value:v,textBreakAll:o,viewBox:h.viewBox,key:"label-".concat(f),index:f}))}))}$m.displayName="LabelList";function _v(t){var{label:e}=t;return e?e===!0?p.createElement($m,{key:"labelList-implicit"}):p.isValidElement(e)||v_(e)?p.createElement($m,{key:"labelList-implicit",content:e}):typeof e=="object"?p.createElement($m,og({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}function J0(){return J0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},J0.apply(null,arguments)}var b_=t=>{var{cx:e,cy:r,r:n,className:s}=t,i=lt("recharts-dot",s);return e===+e&&r===+r&&n===+n?p.createElement("circle",J0({},Ss(t),Lj(t),{className:i,cx:e,cy:r,r:n})):null},pU=t=>t.graphicalItems.polarItems,Hve=X([Xt,af],HN),w_=X([pU,gr,Hve],KN),Kve=X([w_],YN),j_=X([Kve,LN],QN),Yve=X([j_,gr,w_],JN),Qve=X([j_,gr,w_],(t,e,r)=>r.length>0?t.flatMap(n=>r.flatMap(s=>{var i,o=Pt(n,(i=e.dataKey)!==null&&i!==void 0?i:s.dataKey);return{value:o,errorDomain:[]}})).filter(Boolean):(e==null?void 0:e.dataKey)!=null?t.map(n=>({value:Pt(n,e.dataKey),errorDomain:[]})):t.map(n=>({value:n,errorDomain:[]}))),WC=()=>{},Xve=X([gr,h$,WC,Qve,WC,nt,Xt],e_),gU=X([gr,nt,j_,Yve,sf,Xt,Xve],t_),Jve=X([gU,gr,Du],s_);X([gr,gU,Jve,Xt],i_);var Zve={radiusAxis:{},angleAxis:{}},exe=rs({name:"polarAxis",initialState:Zve,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),txe=exe.reducer;function qC(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function HC(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?qC(Object(r),!0).forEach(function(n){rxe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):qC(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function rxe(t,e,r){return(e=nxe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function nxe(t){var e=sxe(t,"string");return typeof e=="symbol"?e:e+""}function sxe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var axe=(t,e)=>e,N_=X([pU,axe],(t,e)=>t.filter(r=>r.type==="pie").find(r=>r.id===e)),ixe=[],__=(t,e,r)=>(r==null?void 0:r.length)===0?ixe:r,yU=X([LN,N_,__],(t,e,r)=>{var{chartData:n}=t;if(e!=null){var s;if((e==null?void 0:e.data)!=null&&e.data.length>0?s=e.data:s=n,(!s||!s.length)&&r!=null&&(s=r.map(i=>HC(HC({},e.presentationProps),i.props))),s!=null)return s}}),oxe=X([yU,N_,__],(t,e,r)=>{if(!(t==null||e==null))return t.map((n,s)=>{var i,o=Pt(n,e.nameKey,e.name),l;return r!=null&&(i=r[s])!==null&&i!==void 0&&(i=i.props)!==null&&i!==void 0&&i.fill?l=r[s].props.fill:typeof n=="object"&&n!=null&&"fill"in n?l=n.fill:l=e.fill,{value:Mo(o,e.dataKey),color:l,payload:n,type:e.legendType}})}),lxe=X([yU,N_,__,Pr],(t,e,r,n)=>{if(!(e==null||t==null))return nbe({offset:n,pieSettings:e,displayedData:t,cells:r})}),vU={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){var s;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const i=r[Symbol.toStringTag];return i==null||!((s=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&s.writable)?!1:r.toString()===`[object ${i}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}t.isPlainObject=e})(vU);var cxe=vU.isPlainObject;const uxe=_o(cxe);function KC(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function YC(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?KC(Object(r),!0).forEach(function(n){dxe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):KC(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function dxe(t,e,r){return(e=hxe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function hxe(t){var e=fxe(t,"string");return typeof e=="symbol"?e:e+""}function fxe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function lg(){return lg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},lg.apply(null,arguments)}var QC=(t,e,r,n,s)=>{var i=r-n,o;return o="M ".concat(t,",").concat(e),o+="L ".concat(t+r,",").concat(e),o+="L ".concat(t+r-i/2,",").concat(e+s),o+="L ".concat(t+r-i/2-n,",").concat(e+s),o+="L ".concat(t,",").concat(e," Z"),o},mxe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},pxe=t=>{var e=Tr(t,mxe),{x:r,y:n,upperWidth:s,lowerWidth:i,height:o,className:l}=e,{animationEasing:c,animationDuration:u,animationBegin:d,isUpdateAnimationActive:h}=e,f=p.useRef(),[m,v]=p.useState(-1),y=p.useRef(s),x=p.useRef(i),b=p.useRef(o),w=p.useRef(r),j=p.useRef(n),E=Tu(t,"trapezoid-");if(p.useEffect(()=>{if(f.current&&f.current.getTotalLength)try{var B=f.current.getTotalLength();B&&v(B)}catch{}},[]),r!==+r||n!==+n||s!==+s||i!==+i||o!==+o||s===0&&i===0||o===0)return null;var I=lt("recharts-trapezoid",l);if(!h)return p.createElement("g",null,p.createElement("path",lg({},Gt(e,!0),{className:I,d:QC(r,n,s,i,o)})));var O=y.current,T=x.current,A=b.current,S=w.current,_=j.current,P="0px ".concat(m===-1?1:m,"px"),R="".concat(m,"px 0px"),C=R6(["strokeDasharray"],u,c);return p.createElement(Pu,{animationId:E,key:E,canBegin:m>0,duration:u,easing:c,isActive:h,begin:d},B=>{var G=Et(O,s,B),U=Et(T,i,B),F=Et(A,o,B),M=Et(S,r,B),$=Et(_,n,B);f.current&&(y.current=G,x.current=U,b.current=F,w.current=M,j.current=$);var ne=B>0?{transition:C,strokeDasharray:R}:{strokeDasharray:P};return p.createElement("path",lg({},Gt(e,!0),{className:I,d:QC(M,$,G,U,F),ref:f,style:YC(YC({},ne),e.style)}))})},gxe=["option","shapeType","propTransformer","activeClassName","isActive"];function yxe(t,e){if(t==null)return{};var r,n,s=vxe(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(s[r]=t[r])}return s}function vxe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function XC(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function cg(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?XC(Object(r),!0).forEach(function(n){xxe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):XC(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function xxe(t,e,r){return(e=bxe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function bxe(t){var e=wxe(t,"string");return typeof e=="symbol"?e:e+""}function wxe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jxe(t,e){return cg(cg({},e),t)}function Nxe(t,e){return t==="symbols"}function JC(t){var{shapeType:e,elementProps:r}=t;switch(e){case"rectangle":return p.createElement(L6,r);case"trapezoid":return p.createElement(pxe,r);case"sector":return p.createElement(U6,r);case"symbols":if(Nxe(e))return p.createElement(zj,r);break;default:return null}}function _xe(t){return p.isValidElement(t)?t.props:t}function xU(t){var{option:e,shapeType:r,propTransformer:n=jxe,activeClassName:s="recharts-active-shape",isActive:i}=t,o=yxe(t,gxe),l;if(p.isValidElement(e))l=p.cloneElement(e,cg(cg({},o),_xe(e)));else if(typeof e=="function")l=e(o);else if(uxe(e)&&typeof e!="boolean"){var c=n(e,o);l=p.createElement(JC,{shapeType:r,elementProps:c})}else{var u=o;l=p.createElement(JC,{shapeType:r,elementProps:u})}return i?p.createElement(lr,{className:s},l):l}var S_=(t,e)=>{var r=rr();return(n,s)=>i=>{t==null||t(n,s,i),r(P$({activeIndex:String(s),activeDataKey:e,activeCoordinate:n.tooltipPosition}))}},A_=t=>{var e=rr();return(r,n)=>s=>{t==null||t(r,n,s),e(yge())}},E_=(t,e)=>{var r=rr();return(n,s)=>i=>{t==null||t(n,s,i),r(vge({activeIndex:String(s),activeDataKey:e,activeCoordinate:n.tooltipPosition}))}};function Sv(t){var{fn:e,args:r}=t,n=rr(),s=cn();return p.useEffect(()=>{if(!s){var i=e(r);return n(mge(i)),()=>{n(pge(i))}}},[e,r,n,s]),null}var bU=()=>{};function P_(t){var{legendPayload:e}=t,r=rr(),n=cn();return p.useEffect(()=>n?bU:(r(C6(e)),()=>{r(k6(e))}),[r,n,e]),null}function Sxe(t){var{legendPayload:e}=t,r=rr(),n=Oe(nt);return p.useEffect(()=>n!=="centric"&&n!=="radial"?bU:(r(C6(e)),()=>{r(k6(e))}),[r,n,e]),null}var Zx,Axe=()=>{var[t]=p.useState(()=>Jd("uid-"));return t},Exe=(Zx=lw.useId)!==null&&Zx!==void 0?Zx:Axe;function Pxe(t,e){var r=Exe();return e||(t?"".concat(t,"-").concat(r):r)}var Txe=p.createContext(void 0),Av=t=>{var{id:e,type:r,children:n}=t,s=Pxe("recharts-".concat(r),e);return p.createElement(Txe.Provider,{value:s},n(s))},Cxe={cartesianItems:[],polarItems:[]},wU=rs({name:"graphicalItems",initialState:Cxe,reducers:{addCartesianGraphicalItem(t,e){t.cartesianItems.push(e.payload)},replaceCartesianGraphicalItem(t,e){var{prev:r,next:n}=e.payload,s=Ja(t).cartesianItems.indexOf(r);s>-1&&(t.cartesianItems[s]=n)},removeCartesianGraphicalItem(t,e){var r=Ja(t).cartesianItems.indexOf(e.payload);r>-1&&t.cartesianItems.splice(r,1)},addPolarGraphicalItem(t,e){t.polarItems.push(e.payload)},removePolarGraphicalItem(t,e){var r=Ja(t).polarItems.indexOf(e.payload);r>-1&&t.polarItems.splice(r,1)}}}),{addCartesianGraphicalItem:kxe,replaceCartesianGraphicalItem:Ixe,removeCartesianGraphicalItem:Rxe,addPolarGraphicalItem:Oxe,removePolarGraphicalItem:Dxe}=wU.actions,Mxe=wU.reducer;function T_(t){var e=rr(),r=p.useRef(null);return p.useEffect(()=>{r.current===null?e(kxe(t)):r.current!==t&&e(Ixe({prev:r.current,next:t})),r.current=t},[e,t]),p.useEffect(()=>()=>{r.current&&(e(Rxe(r.current)),r.current=null)},[e]),null}function Lxe(t){var e=rr();return p.useEffect(()=>(e(Oxe(t)),()=>{e(Dxe(t))}),[e,t]),null}var Fxe=["onMouseEnter","onClick","onMouseLeave"],$xe=["id"],Uxe=["id"];function C_(t,e){if(t==null)return{};var r,n,s=Bxe(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(s[r]=t[r])}return s}function Bxe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function ZC(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function qt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ZC(Object(r),!0).forEach(function(n){Vxe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ZC(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Vxe(t,e,r){return(e=zxe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function zxe(t){var e=Gxe(t,"string");return typeof e=="symbol"?e:e+""}function Gxe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function wo(){return wo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},wo.apply(null,arguments)}function Wxe(t){var e=p.useMemo(()=>Fj(t.children,$u),[t.children]),r=Oe(n=>oxe(n,t.id,e));return r==null?null:p.createElement(Sxe,{legendPayload:r})}function qxe(t){var{dataKey:e,nameKey:r,sectors:n,stroke:s,strokeWidth:i,fill:o,name:l,hide:c,tooltipType:u}=t;return{dataDefinedOnItem:n.map(d=>d.tooltipPayload),positions:n.map(d=>d.tooltipPosition),settings:{stroke:s,strokeWidth:i,fill:o,dataKey:e,nameKey:r,name:Mo(l,e),hide:c,type:u,color:o,unit:""}}}var Hxe=(t,e)=>t>e?"start":t<e?"end":"middle",Kxe=(t,e,r)=>an(typeof e=="function"?e(t):e,r,r*.8),Yxe=(t,e,r)=>{var{top:n,left:s,width:i,height:o}=e,l=b6(i,o),c=s+an(t.cx,i,i/2),u=n+an(t.cy,o,o/2),d=an(t.innerRadius,l,0),h=Kxe(r,t.outerRadius,l),f=t.maxRadius||Math.sqrt(i*i+o*o)/2;return{cx:c,cy:u,innerRadius:d,outerRadius:h,maxRadius:f}},Qxe=(t,e)=>{var r=Or(e-t),n=Math.min(Math.abs(e-t),360);return r*n};function Xxe(t){return t&&typeof t=="object"&&"className"in t&&typeof t.className=="string"?t.className:""}var Jxe=(t,e)=>{if(p.isValidElement(t))return p.cloneElement(t,e);if(typeof t=="function")return t(e);var r=lt("recharts-pie-label-line",typeof t!="boolean"?t.className:"");return p.createElement(Ec,wo({},e,{type:"linear",className:r}))},Zxe=(t,e,r)=>{if(p.isValidElement(t))return p.cloneElement(t,e);var n=r;if(typeof t=="function"&&(n=t(e),p.isValidElement(n)))return n;var s=lt("recharts-pie-label-text",Xxe(t));return p.createElement(Nv,wo({},e,{alignmentBaseline:"middle",className:s}),n)};function ebe(t){var{sectors:e,props:r,showLabels:n}=t,{label:s,labelLine:i,dataKey:o}=r;if(!n||!s||!e)return null;var l=Ss(r),c=Gt(s,!1),u=Gt(i,!1),d=typeof s=="object"&&"offsetRadius"in s&&typeof s.offsetRadius=="number"&&s.offsetRadius||20,h=e.map((f,m)=>{var v=(f.startAngle+f.endAngle)/2,y=jr(f.cx,f.cy,f.outerRadius+d,v),x=qt(qt(qt(qt({},l),f),{},{stroke:"none"},c),{},{index:m,textAnchor:Hxe(y.x,f.cx)},y),b=qt(qt(qt(qt({},l),f),{},{fill:"none",stroke:f.fill},u),{},{index:m,points:[jr(f.cx,f.cy,f.outerRadius,v),y],key:"line"});return p.createElement(lr,{key:"label-".concat(f.startAngle,"-").concat(f.endAngle,"-").concat(f.midAngle,"-").concat(m)},i&&Jxe(i,b),Zxe(s,x,Pt(f,o)))});return p.createElement(lr,{className:"recharts-pie-labels"},h)}function tbe(t){var{sectors:e,props:r,showLabels:n}=t,{label:s}=r;return typeof s=="object"&&s!=null&&"position"in s?p.createElement(_v,{label:s}):p.createElement(ebe,{sectors:e,props:r,showLabels:n})}function rbe(t){var{sectors:e,activeShape:r,inactiveShape:n,allOtherPieProps:s}=t,i=Oe(bo),{onMouseEnter:o,onClick:l,onMouseLeave:c}=s,u=C_(s,Fxe),d=S_(o,s.dataKey),h=A_(c),f=E_(l,s.dataKey);return e==null||e.length===0?null:p.createElement(p.Fragment,null,e.map((m,v)=>{if((m==null?void 0:m.startAngle)===0&&(m==null?void 0:m.endAngle)===0&&e.length!==1)return null;var y=r&&String(v)===i,x=i?n:null,b=y?r:x,w=qt(qt({},m),{},{stroke:m.stroke,tabIndex:-1,[A6]:v,[E6]:s.dataKey});return p.createElement(lr,wo({tabIndex:-1,className:"recharts-pie-sector"},Kh(u,m,v),{onMouseEnter:d(m,v),onMouseLeave:h(m,v),onClick:f(m,v),key:"sector-".concat(m==null?void 0:m.startAngle,"-").concat(m==null?void 0:m.endAngle,"-").concat(m.midAngle,"-").concat(v)}),p.createElement(xU,wo({option:b,isActive:y,shapeType:"sector"},w)))}))}function nbe(t){var e,{pieSettings:r,displayedData:n,cells:s,offset:i}=t,{cornerRadius:o,startAngle:l,endAngle:c,dataKey:u,nameKey:d,tooltipType:h}=r,f=Math.abs(r.minAngle),m=Qxe(l,c),v=Math.abs(m),y=n.length<=1?0:(e=r.paddingAngle)!==null&&e!==void 0?e:0,x=n.filter(O=>Pt(O,u,0)!==0).length,b=(v>=360?x:x-1)*y,w=v-x*f-b,j=n.reduce((O,T)=>{var A=Pt(T,u,0);return O+(Le(A)?A:0)},0),E;if(j>0){var I;E=n.map((O,T)=>{var A=Pt(O,u,0),S=Pt(O,d,T),_=Yxe(r,i,O),P=(Le(A)?A:0)/j,R,C=qt(qt({},O),s&&s[T]&&s[T].props);T?R=I.endAngle+Or(m)*y*(A!==0?1:0):R=l;var B=R+Or(m)*((A!==0?f:0)+P*w),G=(R+B)/2,U=(_.innerRadius+_.outerRadius)/2,F=[{name:S,value:A,payload:C,dataKey:u,type:h}],M=jr(_.cx,_.cy,U,G);return I=qt(qt(qt(qt({},r.presentationProps),{},{percent:P,cornerRadius:o,name:S,tooltipPayload:F,midAngle:G,middleRadius:U,tooltipPosition:M},C),_),{},{value:A,startAngle:R,endAngle:B,payload:C,paddingAngle:Or(m)*y}),I})}return E}function sbe(t){var{showLabels:e,sectors:r,children:n}=t,s=p.useMemo(()=>!e||!r?[]:r.map(i=>({value:i.value,payload:i.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:i.cx,cy:i.cy,innerRadius:i.innerRadius,outerRadius:i.outerRadius,startAngle:i.startAngle,endAngle:i.endAngle,clockWise:!1},fill:i.fill})),[r,e]);return p.createElement(Gve,{value:e?s:void 0},n)}function abe(t){var{props:e,previousSectorsRef:r}=t,{sectors:n,isAnimationActive:s,animationBegin:i,animationDuration:o,animationEasing:l,activeShape:c,inactiveShape:u,onAnimationStart:d,onAnimationEnd:h}=e,f=Tu(e,"recharts-pie-"),m=r.current,[v,y]=p.useState(!1),x=p.useCallback(()=>{typeof h=="function"&&h(),y(!1)},[h]),b=p.useCallback(()=>{typeof d=="function"&&d(),y(!0)},[d]);return p.createElement(sbe,{showLabels:!v,sectors:n},p.createElement(Pu,{animationId:f,begin:i,duration:o,isActive:s,easing:l,onAnimationStart:b,onAnimationEnd:x,key:f},w=>{var j=[],E=n&&n[0],I=E==null?void 0:E.startAngle;return n==null||n.forEach((O,T)=>{var A=m&&m[T],S=T>0?Ol(O,"paddingAngle",0):0;if(A){var _=Et(A.endAngle-A.startAngle,O.endAngle-O.startAngle,w),P=qt(qt({},O),{},{startAngle:I+S,endAngle:I+_+S});j.push(P),I=P.endAngle}else{var{endAngle:R,startAngle:C}=O,B=Et(0,R-C,w),G=qt(qt({},O),{},{startAngle:I+S,endAngle:I+B+S});j.push(G),I=G.endAngle}}),r.current=j,p.createElement(lr,null,p.createElement(rbe,{sectors:j,activeShape:c,inactiveShape:u,allOtherPieProps:e}))}),p.createElement(tbe,{showLabels:!v,sectors:n,props:e}),e.children)}var ibe={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!xi.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function obe(t){var{id:e}=t,r=C_(t,$xe),{hide:n,className:s,rootTabIndex:i}=t,o=p.useMemo(()=>Fj(t.children,$u),[t.children]),l=Oe(d=>lxe(d,e,o)),c=p.useRef(null),u=lt("recharts-pie",s);return n||l==null?(c.current=null,p.createElement(lr,{tabIndex:i,className:u})):p.createElement(p.Fragment,null,p.createElement(Sv,{fn:qxe,args:qt(qt({},t),{},{sectors:l})}),p.createElement(lr,{tabIndex:i,className:u},p.createElement(abe,{props:qt(qt({},r),{},{sectors:l}),previousSectorsRef:c})))}function k_(t){var e=Tr(t,ibe),{id:r}=e,n=C_(e,Uxe),s=Ss(n);return p.createElement(Av,{id:r,type:"pie"},i=>p.createElement(p.Fragment,null,p.createElement(Lxe,{type:"pie",id:i,data:n.data,dataKey:n.dataKey,hide:n.hide,angleAxisId:0,radiusAxisId:0,name:n.name,nameKey:n.nameKey,tooltipType:n.tooltipType,legendType:n.legendType,fill:n.fill,cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,paddingAngle:n.paddingAngle,minAngle:n.minAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,cornerRadius:n.cornerRadius,presentationProps:s,maxRadius:e.maxRadius}),p.createElement(Wxe,wo({},n,{id:i})),p.createElement(obe,wo({},n,{id:i}))))}k_.displayName="Pie";function ek(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function tk(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ek(Object(r),!0).forEach(function(n){lbe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ek(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function lbe(t,e,r){return(e=cbe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function cbe(t){var e=ube(t,"string");return typeof e=="symbol"?e:e+""}function ube(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var dbe={xAxis:{},yAxis:{},zAxis:{}},jU=rs({name:"cartesianAxis",initialState:dbe,reducers:{addXAxis(t,e){t.xAxis[e.payload.id]=e.payload},removeXAxis(t,e){delete t.xAxis[e.payload.id]},addYAxis(t,e){t.yAxis[e.payload.id]=e.payload},removeYAxis(t,e){delete t.yAxis[e.payload.id]},addZAxis(t,e){t.zAxis[e.payload.id]=e.payload},removeZAxis(t,e){delete t.zAxis[e.payload.id]},updateYAxisWidth(t,e){var{id:r,width:n}=e.payload;t.yAxis[r]&&(t.yAxis[r]=tk(tk({},t.yAxis[r]),{},{width:n}))}}}),{addXAxis:hbe,removeXAxis:fbe,addYAxis:mbe,removeYAxis:pbe,addZAxis:s_e,removeZAxis:a_e,updateYAxisWidth:gbe}=jU.actions,ybe=jU.reducer,vbe=X([Pr],t=>{if(t)return{top:t.top,bottom:t.bottom,left:t.left,right:t.right}}),xbe=X([vbe,yi,vi],(t,e,r)=>{if(!(!t||e==null||r==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,r-t.top-t.bottom)}}),Ev=()=>Oe(xbe),bbe=()=>Oe(sye);function rk(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function nk(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?rk(Object(r),!0).forEach(function(n){wbe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rk(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function wbe(t,e,r){return(e=jbe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function jbe(t){var e=Nbe(t,"string");return typeof e=="symbol"?e:e+""}function Nbe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var _be=t=>{var{point:e,childIndex:r,mainColor:n,activeDot:s,dataKey:i}=t;if(s===!1||e.x==null||e.y==null)return null;var o=nk(nk({index:r,dataKey:i,cx:e.x,cy:e.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:e.payload,value:e.value},Gt(s,!1)),Lj(s)),l;return p.isValidElement(s)?l=p.cloneElement(s,o):typeof s=="function"?l=s(o):l=p.createElement(b_,o),p.createElement(lr,{className:"recharts-active-dot"},l)};function Z0(t){var{points:e,mainColor:r,activeDot:n,itemDataKey:s}=t,i=Oe(bo),o=bbe();if(e==null||o==null)return null;var l=e.find(c=>o.includes(c.payload));return zt(l)?null:_be({point:l,childIndex:Number(i),mainColor:r,dataKey:s,activeDot:n})}var Sbe="Invariant failed";function Abe(t,e){throw new Error(Sbe)}var Ebe=["x","y"];function ew(){return ew=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ew.apply(null,arguments)}function sk(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function ud(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?sk(Object(r),!0).forEach(function(n){Pbe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):sk(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Pbe(t,e,r){return(e=Tbe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Tbe(t){var e=Cbe(t,"string");return typeof e=="symbol"?e:e+""}function Cbe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function kbe(t,e){if(t==null)return{};var r,n,s=Ibe(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(s[r]=t[r])}return s}function Ibe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function Rbe(t,e){var{x:r,y:n}=t,s=kbe(t,Ebe),i="".concat(r),o=parseInt(i,10),l="".concat(n),c=parseInt(l,10),u="".concat(e.height||s.height),d=parseInt(u,10),h="".concat(e.width||s.width),f=parseInt(h,10);return ud(ud(ud(ud(ud({},e),s),o?{x:o}:{}),c?{y:c}:{}),{},{height:d,width:f,name:e.name,radius:e.radius})}function I_(t){return p.createElement(xU,ew({shapeType:"rectangle",propTransformer:Rbe,activeClassName:"recharts-active-bar"},t))}var Obe=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,s)=>{if(Le(e))return e;var i=Le(n)||zt(n);return i?e(n,s):(i||Abe(),r)}},Dbe={},Mbe=rs({name:"errorBars",initialState:Dbe,reducers:{addErrorBar:(t,e)=>{var{itemId:r,errorBar:n}=e.payload;t[r]||(t[r]=[]),t[r].push(n)},replaceErrorBar:(t,e)=>{var{itemId:r,prev:n,next:s}=e.payload;t[r]&&(t[r]=t[r].map(i=>i.dataKey===n.dataKey&&i.direction===n.direction?s:i))},removeErrorBar:(t,e)=>{var{itemId:r,errorBar:n}=e.payload;t[r]&&(t[r]=t[r].filter(s=>s.dataKey!==n.dataKey||s.direction!==n.direction))}}}),Lbe=Mbe.reducer,Fbe=["children"];function $be(t,e){if(t==null)return{};var r,n,s=Ube(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(s[r]=t[r])}return s}function Ube(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Bbe={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},Vbe=p.createContext(Bbe);function NU(t){var{children:e}=t,r=$be(t,Fbe);return p.createElement(Vbe.Provider,{value:r},e)}function Pv(t,e){var r,n,s=Oe(u=>wi(u,t)),i=Oe(u=>ji(u,e)),o=(r=s==null?void 0:s.allowDataOverflow)!==null&&r!==void 0?r:Dn.allowDataOverflow,l=(n=i==null?void 0:i.allowDataOverflow)!==null&&n!==void 0?n:Mn.allowDataOverflow,c=o||l;return{needClip:c,needClipX:o,needClipY:l}}function R_(t){var{xAxisId:e,yAxisId:r,clipPathId:n}=t,s=Ev(),{needClipX:i,needClipY:o,needClip:l}=Pv(e,r);if(!l)return null;var{x:c,y:u,width:d,height:h}=s;return p.createElement("clipPath",{id:"clipPath-".concat(n)},p.createElement("rect",{x:i?c:c-d/2,y:o?u:u-h/2,width:i?d:d*2,height:o?h:h*2}))}var zbe=["onMouseEnter","onMouseLeave","onClick"],Gbe=["value","background","tooltipPosition"],Wbe=["id"],qbe=["onMouseEnter","onClick","onMouseLeave"];function jo(){return jo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},jo.apply(null,arguments)}function ak(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function mn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ak(Object(r),!0).forEach(function(n){Hbe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ak(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Hbe(t,e,r){return(e=Kbe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Kbe(t){var e=Ybe(t,"string");return typeof e=="symbol"?e:e+""}function Ybe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ug(t,e){if(t==null)return{};var r,n,s=Qbe(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(s[r]=t[r])}return s}function Qbe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Xbe=t=>{var{dataKey:e,name:r,fill:n,legendType:s,hide:i}=t;return[{inactive:i,dataKey:e,type:s,color:n,value:Mo(r,e),payload:t}]};function Jbe(t){var{dataKey:e,stroke:r,strokeWidth:n,fill:s,name:i,hide:o,unit:l}=t;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:s,dataKey:e,nameKey:void 0,name:Mo(i,e),hide:o,type:t.tooltipType,color:t.fill,unit:l}}}function Zbe(t){var e=Oe(bo),{data:r,dataKey:n,background:s,allOtherBarProps:i}=t,{onMouseEnter:o,onMouseLeave:l,onClick:c}=i,u=ug(i,zbe),d=S_(o,n),h=A_(l),f=E_(c,n);if(!s||r==null)return null;var m=Gt(s,!1);return p.createElement(p.Fragment,null,r.map((v,y)=>{var{value:x,background:b,tooltipPosition:w}=v,j=ug(v,Gbe);if(!b)return null;var E=d(v,y),I=h(v,y),O=f(v,y),T=mn(mn(mn(mn(mn({option:s,isActive:String(y)===e},j),{},{fill:"#eee"},b),m),Kh(u,v,y)),{},{onMouseEnter:E,onMouseLeave:I,onClick:O,dataKey:n,index:y,className:"recharts-bar-background-rectangle"});return p.createElement(I_,jo({key:"background-bar-".concat(T.index)},T))}))}function e0e(t){var{showLabels:e,children:r,rects:n}=t,s=n==null?void 0:n.map(i=>{var o={x:i.x,y:i.y,width:i.width,height:i.height};return mn(mn({},o),{},{value:i.value,payload:i.payload,parentViewBox:i.parentViewBox,viewBox:o,fill:i.fill})});return p.createElement(x_,{value:e?s:void 0},r)}function t0e(t){var{shape:e,activeBar:r,baseProps:n,entry:s,index:i,dataKey:o}=t,l=Oe(bo),c=Oe(B$),u=r&&String(i)===l&&(c==null||o===c),d=u?r:e;return p.createElement(I_,jo({},n,s,{isActive:u,option:d,index:i,dataKey:o}))}function r0e(t){var{shape:e,baseProps:r,entry:n,index:s,dataKey:i}=t;return p.createElement(I_,jo({},r,n,{isActive:!1,option:e,index:s,dataKey:i}))}function n0e(t){var{data:e,props:r}=t,n=Ss(r),s=ug(n,Wbe),{shape:i,dataKey:o,activeBar:l}=r,{onMouseEnter:c,onClick:u,onMouseLeave:d}=r,h=ug(r,qbe),f=S_(c,o),m=A_(d),v=E_(u,o);return e?p.createElement(p.Fragment,null,e.map((y,x)=>p.createElement(lr,jo({className:"recharts-bar-rectangle"},Kh(h,y,x),{onMouseEnter:f(y,x),onMouseLeave:m(y,x),onClick:v(y,x),key:"rectangle-".concat(y==null?void 0:y.x,"-").concat(y==null?void 0:y.y,"-").concat(y==null?void 0:y.value,"-").concat(x)}),l?p.createElement(t0e,{shape:i,activeBar:l,baseProps:s,entry:y,index:x,dataKey:o}):p.createElement(r0e,{shape:i,baseProps:s,entry:y,index:x,dataKey:o})))):null}function s0e(t){var{props:e,previousRectanglesRef:r}=t,{data:n,layout:s,isAnimationActive:i,animationBegin:o,animationDuration:l,animationEasing:c,onAnimationEnd:u,onAnimationStart:d}=e,h=r.current,f=Tu(e,"recharts-bar-"),[m,v]=p.useState(!1),y=!m,x=p.useCallback(()=>{typeof u=="function"&&u(),v(!1)},[u]),b=p.useCallback(()=>{typeof d=="function"&&d(),v(!0)},[d]);return p.createElement(e0e,{showLabels:y,rects:n},p.createElement(Pu,{animationId:f,begin:o,duration:l,isActive:i,easing:c,onAnimationEnd:x,onAnimationStart:b,key:f},w=>{var j=w===1?n:n==null?void 0:n.map((E,I)=>{var O=h&&h[I];if(O)return mn(mn({},E),{},{x:Et(O.x,E.x,w),y:Et(O.y,E.y,w),width:Et(O.width,E.width,w),height:Et(O.height,E.height,w)});if(s==="horizontal"){var T=Et(0,E.height,w);return mn(mn({},E),{},{y:E.y+E.height-T,height:T})}var A=Et(0,E.width,w);return mn(mn({},E),{},{width:A})});return w>0&&(r.current=j??null),j==null?null:p.createElement(lr,null,p.createElement(n0e,{props:e,data:j}))}),p.createElement(_v,{label:e.label}),e.children)}function a0e(t){var e=p.useRef(null);return p.createElement(s0e,{previousRectanglesRef:e,props:t})}var _U=0,i0e=(t,e)=>{var r=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:r,errorVal:Pt(t,e)}};class o0e extends p.PureComponent{render(){var{hide:e,data:r,dataKey:n,className:s,xAxisId:i,yAxisId:o,needClip:l,background:c,id:u}=this.props;if(e||r==null)return null;var d=lt("recharts-bar",s),h=u;return p.createElement(lr,{className:d,id:u},l&&p.createElement("defs",null,p.createElement(R_,{clipPathId:h,xAxisId:i,yAxisId:o})),p.createElement(lr,{className:"recharts-bar-rectangles",clipPath:l?"url(#clipPath-".concat(h,")"):void 0},p.createElement(Zbe,{data:r,dataKey:n,background:c,allOtherBarProps:this.props}),p.createElement(a0e,this.props)))}}var l0e={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!xi.isSsr,legendType:"rect",minPointSize:_U,xAxisId:0,yAxisId:0};function c0e(t){var{xAxisId:e,yAxisId:r,hide:n,legendType:s,minPointSize:i,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:u,isAnimationActive:d}=t,{needClip:h}=Pv(e,r),f=Jh(),m=cn(),v=Fj(t.children,$u),y=Oe(w=>L0e(w,e,r,m,t.id,v));if(f!=="vertical"&&f!=="horizontal")return null;var x,b=y==null?void 0:y[0];return b==null||b.height==null||b.width==null?x=0:x=f==="vertical"?b.height/2:b.width/2,p.createElement(NU,{xAxisId:e,yAxisId:r,data:y,dataPointFormatter:i0e,errorBarOffset:x},p.createElement(o0e,jo({},t,{layout:f,needClip:h,data:y,xAxisId:e,yAxisId:r,hide:n,legendType:s,minPointSize:i,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:u,isAnimationActive:d})))}function u0e(t){var{layout:e,barSettings:{dataKey:r,minPointSize:n},pos:s,bandSize:i,xAxis:o,yAxis:l,xAxisTicks:c,yAxisTicks:u,stackedData:d,displayedData:h,offset:f,cells:m,parentViewBox:v}=t,y=e==="horizontal"?l:o,x=d?y.scale.domain():null,b=Lue({numericAxis:y});return h.map((w,j)=>{var E,I,O,T,A,S;d?E=Iue(d[j],x):(E=Pt(w,r),Array.isArray(E)||(E=[b,E]));var _=Obe(n,_U)(E[1],j);if(e==="horizontal"){var P,[R,C]=[l.scale(E[0]),l.scale(E[1])];I=aT({axis:o,ticks:c,bandSize:i,offset:s.offset,entry:w,index:j}),O=(P=C??R)!==null&&P!==void 0?P:void 0,T=s.size;var B=R-C;if(A=In(B)?0:B,S={x:I,y:f.top,width:T,height:f.height},Math.abs(_)>0&&Math.abs(A)<Math.abs(_)){var G=Or(A||_)*(Math.abs(_)-Math.abs(A));O-=G,A+=G}}else{var[U,F]=[o.scale(E[0]),o.scale(E[1])];if(I=U,O=aT({axis:l,ticks:u,bandSize:i,offset:s.offset,entry:w,index:j}),T=F-U,A=s.size,S={x:f.left,y:O,width:f.width,height:A},Math.abs(_)>0&&Math.abs(T)<Math.abs(_)){var M=Or(T||_)*(Math.abs(_)-Math.abs(T));T+=M}}if(I==null||O==null||T==null||A==null)return null;var $=mn(mn({},w),{},{x:I,y:O,width:T,height:A,value:d?E:E[1],payload:w,background:S,tooltipPosition:{x:I+T/2,y:O+A/2},parentViewBox:v},m&&m[j]&&m[j].props);return $}).filter(Boolean)}function d0e(t){var e=Tr(t,l0e),r=cn();return p.createElement(Av,{id:e.id,type:"bar"},n=>p.createElement(p.Fragment,null,p.createElement(P_,{legendPayload:Xbe(e)}),p.createElement(Sv,{fn:Jbe,args:e}),p.createElement(T_,{type:"bar",id:n,data:void 0,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,stackId:_6(e.stackId),hide:e.hide,barSize:e.barSize,minPointSize:e.minPointSize,maxBarSize:e.maxBarSize,isPanorama:r}),p.createElement(c0e,jo({},e,{id:n}))))}var SU=p.memo(d0e);SU.displayName="Bar";function ik(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function gm(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ik(Object(r),!0).forEach(function(n){h0e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ik(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function h0e(t,e,r){return(e=f0e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function f0e(t){var e=m0e(t,"string");return typeof e=="symbol"?e:e+""}function m0e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var p0e=(t,e)=>e,g0e=(t,e,r)=>r,y0e=(t,e,r,n)=>n,v0e=(t,e,r,n,s)=>s,ff=X([lf,v0e],(t,e)=>t.filter(r=>r.type==="bar").find(r=>r.id===e)),x0e=X([ff],t=>t==null?void 0:t.maxBarSize),b0e=(t,e,r,n,s,i)=>i,ok=(t,e,r)=>{var n=r??t;if(!zt(n))return an(n,e,0)},w0e=X([nt,lf,p0e,g0e,y0e],(t,e,r,n,s)=>e.filter(i=>t==="horizontal"?i.xAxisId===r:i.yAxisId===n).filter(i=>i.isPanorama===s).filter(i=>i.hide===!1).filter(i=>i.type==="bar")),j0e=(t,e,r,n)=>{var s=nt(t);return s==="horizontal"?oh(t,"yAxis",r,n):oh(t,"xAxis",e,n)},N0e=(t,e,r)=>{var n=nt(t);return n==="horizontal"?vC(t,"xAxis",e):vC(t,"yAxis",r)},_0e=(t,e,r)=>{var n={},s=t.filter(gv),i=t.filter(u=>u.stackId==null),o=s.reduce((u,d)=>(u[d.stackId]||(u[d.stackId]=[]),u[d.stackId].push(d),u),n),l=Object.entries(o).map(u=>{var[d,h]=u,f=h.map(v=>v.dataKey),m=ok(e,r,h[0].barSize);return{stackId:d,dataKeys:f,barSize:m}}),c=i.map(u=>{var d=[u.dataKey].filter(f=>f!=null),h=ok(e,r,u.barSize);return{stackId:void 0,dataKeys:d,barSize:h}});return[...l,...c]},S0e=X([w0e,fpe,N0e],_0e),A0e=(t,e,r,n,s)=>{var i,o,l=ff(t,e,r,n,s);if(l!=null){var c=nt(t),u=$F(t),{maxBarSize:d}=l,h=zt(d)?u:d,f,m;return c==="horizontal"?(f=Aa(t,"xAxis",e,n),m=Sa(t,"xAxis",e,n)):(f=Aa(t,"yAxis",r,n),m=Sa(t,"yAxis",r,n)),(i=(o=Ll(f,m,!0))!==null&&o!==void 0?o:h)!==null&&i!==void 0?i:0}},AU=(t,e,r,n)=>{var s=nt(t),i,o;return s==="horizontal"?(i=Aa(t,"xAxis",e,n),o=Sa(t,"xAxis",e,n)):(i=Aa(t,"yAxis",r,n),o=Sa(t,"yAxis",r,n)),Ll(i,o)};function E0e(t,e,r,n,s){var i=n.length;if(!(i<1)){var o=an(t,r,0,!0),l,c=[];if(Kr(n[0].barSize)){var u=!1,d=r/i,h=n.reduce((b,w)=>b+(w.barSize||0),0);h+=(i-1)*o,h>=r&&(h-=(i-1)*o,o=0),h>=r&&d>0&&(u=!0,d*=.9,h=i*d);var f=(r-h)/2>>0,m={offset:f-o,size:0};l=n.reduce((b,w)=>{var j,E={stackId:w.stackId,dataKeys:w.dataKeys,position:{offset:m.offset+m.size+o,size:u?d:(j=w.barSize)!==null&&j!==void 0?j:0}},I=[...b,E];return m=I[I.length-1].position,I},c)}else{var v=an(e,r,0,!0);r-2*v-(i-1)*o<=0&&(o=0);var y=(r-2*v-(i-1)*o)/i;y>1&&(y>>=0);var x=Kr(s)?Math.min(y,s):y;l=n.reduce((b,w,j)=>[...b,{stackId:w.stackId,dataKeys:w.dataKeys,position:{offset:v+(y+o)*j+(y-x)/2,size:x}}],c)}return l}}var P0e=(t,e,r,n,s,i,o)=>{var l=zt(o)?e:o,c=E0e(r,n,s!==i?s:i,t,l);return s!==i&&c!=null&&(c=c.map(u=>gm(gm({},u),{},{position:gm(gm({},u.position),{},{offset:u.position.offset-s/2})}))),c},T0e=X([S0e,$F,hpe,UF,A0e,AU,x0e],P0e),C0e=(t,e,r,n)=>Aa(t,"xAxis",e,n),k0e=(t,e,r,n)=>Aa(t,"yAxis",r,n),I0e=(t,e,r,n)=>Sa(t,"xAxis",e,n),R0e=(t,e,r,n)=>Sa(t,"yAxis",r,n),O0e=X([T0e,ff],(t,e)=>{if(!(t==null||e==null)){var r=t.find(n=>n.stackId===e.stackId&&e.dataKey!=null&&n.dataKeys.includes(e.dataKey));if(r!=null)return r.position}}),D0e=(t,e)=>{var r=pv(e);if(!(!t||r==null||e==null)){var{stackId:n}=e;if(n!=null){var s=t[n];if(s){var{stackedData:i}=s;if(i)return i.find(o=>o.key===r)}}}},M0e=X([j0e,ff],D0e),L0e=X([Pr,cN,C0e,k0e,I0e,R0e,O0e,nt,nf,AU,M0e,ff,b0e],(t,e,r,n,s,i,o,l,c,u,d,h,f)=>{var{chartData:m,dataStartIndex:v,dataEndIndex:y}=c;if(!(h==null||o==null||e==null||l!=="horizontal"&&l!=="vertical"||r==null||n==null||s==null||i==null||u==null)){var{data:x}=h,b;if(x!=null&&x.length>0?b=x:b=m==null?void 0:m.slice(v,y+1),b!=null)return u0e({layout:l,barSettings:h,pos:o,parentViewBox:e,bandSize:u,xAxis:r,yAxis:n,xAxisTicks:s,yAxisTicks:i,stackedData:d,displayedData:b,offset:t,cells:f})}}),EU=t=>{var{chartData:e}=t,r=rr(),n=cn();return p.useEffect(()=>n?()=>{}:(r(EC(e)),()=>{r(EC(void 0))}),[e,r,n]),null},lk={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},F0e=rs({name:"brush",initialState:lk,reducers:{setBrushSettings(t,e){return e.payload==null?lk:e.payload}}}),$0e=F0e.reducer;function U0e(t,e,r){return(e=B0e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function B0e(t){var e=V0e(t,"string");return typeof e=="symbol"?e:e+""}function V0e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class O_{static create(e){return new O_(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e!==void 0){if(n)switch(n){case"start":return this.scale(e);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+s}case"end":{var i=this.bandwidth?this.bandwidth():0;return this.scale(e)+i}default:return this.scale(e)}if(r){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+o}return this.scale(e)}}isInRange(e){var r=this.range(),n=r[0],s=r[r.length-1];return n<=s?e>=n&&e<=s:e>=s&&e<=n}}U0e(O_,"EPS",1e-4);function z0e(t){return(t%180+180)%180}var G0e=function(e){var{width:r,height:n}=e,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=z0e(s),o=i*Math.PI/180,l=Math.atan(n/r),c=o>l&&o<Math.PI-l?n/Math.sin(o):r/Math.cos(o);return Math.abs(c)},W0e={dots:[],areas:[],lines:[]},q0e=rs({name:"referenceElements",initialState:W0e,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var r=Ja(t).dots.findIndex(n=>n===e.payload);r!==-1&&t.dots.splice(r,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var r=Ja(t).areas.findIndex(n=>n===e.payload);r!==-1&&t.areas.splice(r,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var r=Ja(t).lines.findIndex(n=>n===e.payload);r!==-1&&t.lines.splice(r,1)}}}),H0e=q0e.reducer,K0e=p.createContext(void 0),Y0e=t=>{var{children:e}=t,[r]=p.useState("".concat(Jd("recharts"),"-clip")),n=Ev();if(n==null)return null;var{x:s,y:i,width:o,height:l}=n;return p.createElement(K0e.Provider,{value:r},p.createElement("defs",null,p.createElement("clipPath",{id:r},p.createElement("rect",{x:s,y:i,height:l,width:o}))),e)};function uu(t,e){for(var r in t)if({}.hasOwnProperty.call(t,r)&&(!{}.hasOwnProperty.call(e,r)||t[r]!==e[r]))return!1;for(var n in e)if({}.hasOwnProperty.call(e,n)&&!{}.hasOwnProperty.call(t,n))return!1;return!0}function PU(t,e,r){if(e<1)return[];if(e===1&&r===void 0)return t;for(var n=[],s=0;s<t.length;s+=e)n.push(t[s]);return n}function Q0e(t,e,r){var n={width:t.width+e.width,height:t.height+e.height};return G0e(n,r)}function X0e(t,e,r){var n=r==="width",{x:s,y:i,width:o,height:l}=t;return e===1?{start:n?s:i,end:n?s+o:i+l}:{start:n?s+o:i+l,end:n?s:i}}function dg(t,e,r,n,s){if(t*e<t*n||t*e>t*s)return!1;var i=r();return t*(e-t*i/2-n)>=0&&t*(e+t*i/2-s)<=0}function J0e(t,e){return PU(t,e+1)}function Z0e(t,e,r,n,s){for(var i=(n||[]).slice(),{start:o,end:l}=e,c=0,u=1,d=o,h=function(){var v=n==null?void 0:n[c];if(v===void 0)return{v:PU(n,u)};var y=c,x,b=()=>(x===void 0&&(x=r(v,y)),x),w=v.coordinate,j=c===0||dg(t,w,b,d,l);j||(c=0,d=o,u+=1),j&&(d=w+t*(b()/2+s),c+=u)},f;u<=i.length;)if(f=h(),f)return f.v;return[]}function ck(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function tn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ck(Object(r),!0).forEach(function(n){ewe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ck(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ewe(t,e,r){return(e=twe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function twe(t){var e=rwe(t,"string");return typeof e=="symbol"?e:e+""}function rwe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function nwe(t,e,r,n,s){for(var i=(n||[]).slice(),o=i.length,{start:l}=e,{end:c}=e,u=function(f){var m=i[f],v,y=()=>(v===void 0&&(v=r(m,f)),v);if(f===o-1){var x=t*(m.coordinate+t*y()/2-c);i[f]=m=tn(tn({},m),{},{tickCoord:x>0?m.coordinate-x*t:m.coordinate})}else i[f]=m=tn(tn({},m),{},{tickCoord:m.coordinate});var b=dg(t,m.tickCoord,y,l,c);b&&(c=m.tickCoord-t*(y()/2+s),i[f]=tn(tn({},m),{},{isShow:!0}))},d=o-1;d>=0;d--)u(d);return i}function swe(t,e,r,n,s,i){var o=(n||[]).slice(),l=o.length,{start:c,end:u}=e;if(i){var d=n[l-1],h=r(d,l-1),f=t*(d.coordinate+t*h/2-u);o[l-1]=d=tn(tn({},d),{},{tickCoord:f>0?d.coordinate-f*t:d.coordinate});var m=dg(t,d.tickCoord,()=>h,c,u);m&&(u=d.tickCoord-t*(h/2+s),o[l-1]=tn(tn({},d),{},{isShow:!0}))}for(var v=i?l-1:l,y=function(w){var j=o[w],E,I=()=>(E===void 0&&(E=r(j,w)),E);if(w===0){var O=t*(j.coordinate-t*I()/2-c);o[w]=j=tn(tn({},j),{},{tickCoord:O<0?j.coordinate-O*t:j.coordinate})}else o[w]=j=tn(tn({},j),{},{tickCoord:j.coordinate});var T=dg(t,j.tickCoord,I,c,u);T&&(c=j.tickCoord+t*(I()/2+s),o[w]=tn(tn({},j),{},{isShow:!0}))},x=0;x<v;x++)y(x);return o}function D_(t,e,r){var{tick:n,ticks:s,viewBox:i,minTickGap:o,orientation:l,interval:c,tickFormatter:u,unit:d,angle:h}=t;if(!s||!s.length||!n)return[];if(Le(c)||xi.isSsr){var f;return(f=J0e(s,Le(c)?c:0))!==null&&f!==void 0?f:[]}var m=[],v=l==="top"||l==="bottom"?"width":"height",y=d&&v==="width"?Id(d,{fontSize:e,letterSpacing:r}):{width:0,height:0},x=(j,E)=>{var I=typeof u=="function"?u(j.value,E):j.value;return v==="width"?Q0e(Id(I,{fontSize:e,letterSpacing:r}),y,h):Id(I,{fontSize:e,letterSpacing:r})[v]},b=s.length>=2?Or(s[1].coordinate-s[0].coordinate):1,w=X0e(i,b,v);return c==="equidistantPreserveStart"?Z0e(b,w,x,s,o):(c==="preserveStart"||c==="preserveStartEnd"?m=swe(b,w,x,s,o,c==="preserveStartEnd"):m=nwe(b,w,x,s,o),m.filter(j=>j.isShow))}var awe=t=>{var{ticks:e,label:r,labelGapWithTick:n=5,tickSize:s=0,tickMargin:i=0}=t,o=0;if(e){e.forEach(d=>{if(d){var h=d.getBoundingClientRect();h.width>o&&(o=h.width)}});var l=r?r.getBoundingClientRect().width:0,c=s+i,u=o+c+l+(r?n:0);return Math.round(u)}return 0},iwe=["axisLine","width","height","className","hide","ticks"],owe=["viewBox"],lwe=["viewBox"];function tw(t,e){if(t==null)return{};var r,n,s=cwe(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(s[r]=t[r])}return s}function cwe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function $l(){return $l=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},$l.apply(null,arguments)}function uk(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function _r(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?uk(Object(r),!0).forEach(function(n){uwe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):uk(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function uwe(t,e,r){return(e=dwe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function dwe(t){var e=hwe(t,"string");return typeof e=="symbol"?e:e+""}function hwe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var M_={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"};function fwe(t){var{x:e,y:r,width:n,height:s,orientation:i,mirror:o,axisLine:l,otherSvgProps:c}=t;if(!l)return null;var u=_r(_r(_r({},c),Gt(l,!1)),{},{fill:"none"});if(i==="top"||i==="bottom"){var d=+(i==="top"&&!o||i==="bottom"&&o);u=_r(_r({},u),{},{x1:e,y1:r+d*s,x2:e+n,y2:r+d*s})}else{var h=+(i==="left"&&!o||i==="right"&&o);u=_r(_r({},u),{},{x1:e+h*n,y1:r,x2:e+h*n,y2:r+s})}return p.createElement("line",$l({},u,{className:lt("recharts-cartesian-axis-line",Ol(l,"className"))}))}function mwe(t,e,r,n,s,i,o,l,c){var u,d,h,f,m,v,y=l?-1:1,x=t.tickSize||o,b=Le(t.tickCoord)?t.tickCoord:t.coordinate;switch(i){case"top":u=d=t.coordinate,f=r+ +!l*s,h=f-y*x,v=h-y*c,m=b;break;case"left":h=f=t.coordinate,d=e+ +!l*n,u=d-y*x,m=u-y*c,v=b;break;case"right":h=f=t.coordinate,d=e+ +l*n,u=d+y*x,m=u+y*c,v=b;break;default:u=d=t.coordinate,f=r+ +l*s,h=f+y*x,v=h+y*c,m=b;break}return{line:{x1:u,y1:h,x2:d,y2:f},tick:{x:m,y:v}}}function pwe(t,e){switch(t){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function gwe(t,e){switch(t){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function ywe(t){var{option:e,tickProps:r,value:n}=t,s,i=lt(r.className,"recharts-cartesian-axis-tick-value");if(p.isValidElement(e))s=p.cloneElement(e,_r(_r({},r),{},{className:i}));else if(typeof e=="function")s=e(_r(_r({},r),{},{className:i}));else{var o="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(o=lt(o,e==null?void 0:e.className)),s=p.createElement(Nv,$l({},r,{className:o}),n)}return s}function vwe(t){var{ticks:e=[],tick:r,tickLine:n,stroke:s,tickFormatter:i,unit:o,padding:l,tickTextProps:c,orientation:u,mirror:d,x:h,y:f,width:m,height:v,tickSize:y,tickMargin:x,fontSize:b,letterSpacing:w,getTicksConfig:j,events:E}=t,I=D_(_r(_r({},j),{},{ticks:e}),b,w),O=pwe(u,d),T=gwe(u,d),A=Ss(j),S=Gt(r,!1),_=_r(_r({},A),{},{fill:"none"},Gt(n,!1)),P=I.map((R,C)=>{var{line:B,tick:G}=mwe(R,h,f,m,v,u,y,d,x),U=_r(_r(_r(_r({textAnchor:O,verticalAnchor:T},A),{},{stroke:"none",fill:s},S),G),{},{index:C,payload:R,visibleTicksCount:I.length,tickFormatter:i,padding:l},c);return p.createElement(lr,$l({className:"recharts-cartesian-axis-tick",key:"tick-".concat(R.value,"-").concat(R.coordinate,"-").concat(R.tickCoord)},Kh(E,R,C)),n&&p.createElement("line",$l({},_,B,{className:lt("recharts-cartesian-axis-tick-line",Ol(n,"className"))})),r&&p.createElement(ywe,{option:r,tickProps:U,value:"".concat(typeof i=="function"?i(R.value,C):R.value).concat(o||"")}))});return P.length>0?p.createElement("g",{className:"recharts-cartesian-axis-ticks"},P):null}var xwe=p.forwardRef((t,e)=>{var{axisLine:r,width:n,height:s,className:i,hide:o,ticks:l}=t,c=tw(t,iwe),[u,d]=p.useState(""),[h,f]=p.useState(""),m=p.useRef([]);p.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var y;return awe({ticks:m.current,label:(y=t.labelRef)===null||y===void 0?void 0:y.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var v=p.useCallback(y=>{if(y){var x=y.getElementsByClassName("recharts-cartesian-axis-tick-value");m.current=Array.from(x);var b=x[0];if(b){var w=window.getComputedStyle(b),j=w.fontSize,E=w.letterSpacing;(j!==u||E!==h)&&(d(j),f(E))}}},[u,h]);return o||n!=null&&n<=0||s!=null&&s<=0?null:p.createElement(lr,{className:lt("recharts-cartesian-axis",i),ref:v},p.createElement(fwe,{x:t.x,y:t.y,width:n,height:s,orientation:t.orientation,mirror:t.mirror,axisLine:r,otherSvgProps:Ss(t)}),p.createElement(vwe,{ticks:l,tick:t.tick,tickLine:t.tickLine,stroke:t.stroke,tickFormatter:t.tickFormatter,unit:t.unit,padding:t.padding,tickTextProps:t.tickTextProps,orientation:t.orientation,mirror:t.mirror,x:t.x,y:t.y,width:t.width,height:t.height,tickSize:t.tickSize,tickMargin:t.tickMargin,fontSize:u,letterSpacing:h,getTicksConfig:t,events:c}),p.createElement(Eve,{x:t.x,y:t.y,width:t.width,height:t.height},p.createElement(Lve,{label:t.label}),t.children))}),bwe=p.memo(xwe,(t,e)=>{var{viewBox:r}=t,n=tw(t,owe),{viewBox:s}=e,i=tw(e,lwe);return uu(r,s)&&uu(n,i)}),L_=p.forwardRef((t,e)=>{var r=Tr(t,M_);return p.createElement(bwe,$l({},r,{ref:e}))});L_.displayName="CartesianAxis";var wwe=["x1","y1","x2","y2","key"],jwe=["offset"],Nwe=["xAxisId","yAxisId"],_we=["xAxisId","yAxisId"];function dk(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function sn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?dk(Object(r),!0).forEach(function(n){Swe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):dk(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Swe(t,e,r){return(e=Awe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Awe(t){var e=Ewe(t,"string");return typeof e=="symbol"?e:e+""}function Ewe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sl(){return sl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},sl.apply(null,arguments)}function hg(t,e){if(t==null)return{};var r,n,s=Pwe(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(s[r]=t[r])}return s}function Pwe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Twe=t=>{var{fill:e}=t;if(!e||e==="none")return null;var{fillOpacity:r,x:n,y:s,width:i,height:o,ry:l}=t;return p.createElement("rect",{x:n,y:s,ry:l,width:i,height:o,stroke:"none",fill:e,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function TU(t,e){var r;if(p.isValidElement(t))r=p.cloneElement(t,e);else if(typeof t=="function")r=t(e);else{var{x1:n,y1:s,x2:i,y2:o,key:l}=e,c=hg(e,wwe),u=Ss(c),d=hg(u,jwe);r=p.createElement("line",sl({},d,{x1:n,y1:s,x2:i,y2:o,fill:"none",key:l}))}return r}function Cwe(t){var{x:e,width:r,horizontal:n=!0,horizontalPoints:s}=t;if(!n||!s||!s.length)return null;var i=hg(t,Nwe),o=s.map((l,c)=>{var u=sn(sn({},i),{},{x1:e,y1:l,x2:e+r,y2:l,key:"line-".concat(c),index:c});return TU(n,u)});return p.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function kwe(t){var{y:e,height:r,vertical:n=!0,verticalPoints:s}=t;if(!n||!s||!s.length)return null;var i=hg(t,_we),o=s.map((l,c)=>{var u=sn(sn({},i),{},{x1:l,y1:e,x2:l,y2:e+r,key:"line-".concat(c),index:c});return TU(n,u)});return p.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function Iwe(t){var{horizontalFill:e,fillOpacity:r,x:n,y:s,width:i,height:o,horizontalPoints:l,horizontal:c=!0}=t;if(!c||!e||!e.length)return null;var u=l.map(h=>Math.round(h+s-s)).sort((h,f)=>h-f);s!==u[0]&&u.unshift(0);var d=u.map((h,f)=>{var m=!u[f+1],v=m?s+o-h:u[f+1]-h;if(v<=0)return null;var y=f%e.length;return p.createElement("rect",{key:"react-".concat(f),y:h,x:n,height:v,width:i,stroke:"none",fill:e[y],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return p.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function Rwe(t){var{vertical:e=!0,verticalFill:r,fillOpacity:n,x:s,y:i,width:o,height:l,verticalPoints:c}=t;if(!e||!r||!r.length)return null;var u=c.map(h=>Math.round(h+s-s)).sort((h,f)=>h-f);s!==u[0]&&u.unshift(0);var d=u.map((h,f)=>{var m=!u[f+1],v=m?s+o-h:u[f+1]-h;if(v<=0)return null;var y=f%r.length;return p.createElement("rect",{key:"react-".concat(f),x:h,y:i,width:v,height:l,stroke:"none",fill:r[y],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return p.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var Owe=(t,e)=>{var{xAxis:r,width:n,height:s,offset:i}=t;return j6(D_(sn(sn(sn({},M_),r),{},{ticks:N6(r),viewBox:{x:0,y:0,width:n,height:s}})),i.left,i.left+i.width,e)},Dwe=(t,e)=>{var{yAxis:r,width:n,height:s,offset:i}=t;return j6(D_(sn(sn(sn({},M_),r),{},{ticks:N6(r),viewBox:{x:0,y:0,width:n,height:s}})),i.top,i.top+i.height,e)},Mwe={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function aa(t){var e=dN(),r=hN(),n=P6(),s=sn(sn({},Tr(t,Mwe)),{},{x:Le(t.x)?t.x:n.left,y:Le(t.y)?t.y:n.top,width:Le(t.width)?t.width:n.width,height:Le(t.height)?t.height:n.height}),{xAxisId:i,yAxisId:o,x:l,y:c,width:u,height:d,syncWithTicks:h,horizontalValues:f,verticalValues:m}=s,v=cn(),y=Oe(S=>xC(S,"xAxis",i,v)),x=Oe(S=>xC(S,"yAxis",o,v));if(!Le(u)||u<=0||!Le(d)||d<=0||!Le(l)||l!==+l||!Le(c)||c!==+c)return null;var b=s.verticalCoordinatesGenerator||Owe,w=s.horizontalCoordinatesGenerator||Dwe,{horizontalPoints:j,verticalPoints:E}=s;if((!j||!j.length)&&typeof w=="function"){var I=f&&f.length,O=w({yAxis:x?sn(sn({},x),{},{ticks:I?f:x.ticks}):void 0,width:e,height:r,offset:n},I?!0:h);kd(Array.isArray(O),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof O,"]")),Array.isArray(O)&&(j=O)}if((!E||!E.length)&&typeof b=="function"){var T=m&&m.length,A=b({xAxis:y?sn(sn({},y),{},{ticks:T?m:y.ticks}):void 0,width:e,height:r,offset:n},T?!0:h);kd(Array.isArray(A),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof A,"]")),Array.isArray(A)&&(E=A)}return p.createElement("g",{className:"recharts-cartesian-grid"},p.createElement(Twe,{fill:s.fill,fillOpacity:s.fillOpacity,x:s.x,y:s.y,width:s.width,height:s.height,ry:s.ry}),p.createElement(Iwe,sl({},s,{horizontalPoints:j})),p.createElement(Rwe,sl({},s,{verticalPoints:E})),p.createElement(Cwe,sl({},s,{offset:n,horizontalPoints:j,xAxis:y,yAxis:x})),p.createElement(kwe,sl({},s,{offset:n,verticalPoints:E,xAxis:y,yAxis:x})))}aa.displayName="CartesianGrid";var CU=(t,e,r,n)=>Aa(t,"xAxis",e,n),kU=(t,e,r,n)=>Sa(t,"xAxis",e,n),IU=(t,e,r,n)=>Aa(t,"yAxis",r,n),RU=(t,e,r,n)=>Sa(t,"yAxis",r,n),Lwe=X([nt,CU,IU,kU,RU],(t,e,r,n,s)=>ka(t,"xAxis")?Ll(e,n,!1):Ll(r,s,!1)),Fwe=(t,e,r,n,s)=>s;function $we(t){return t.type==="line"}var Uwe=X([lf,Fwe],(t,e)=>t.filter($we).find(r=>r.id===e)),Bwe=X([nt,CU,IU,kU,RU,Uwe,Lwe,nf],(t,e,r,n,s,i,o,l)=>{var{chartData:c,dataStartIndex:u,dataEndIndex:d}=l;if(!(i==null||e==null||r==null||n==null||s==null||n.length===0||s.length===0||o==null)){var{dataKey:h,data:f}=i,m;if(f!=null&&f.length>0?m=f:m=c==null?void 0:c.slice(u,d+1),m!=null)return c1e({layout:t,xAxis:e,yAxis:r,xAxisTicks:n,yAxisTicks:s,dataKey:h,bandSize:o,displayedData:m})}}),Vwe=["id"],zwe=["type","layout","connectNulls","needClip"],Gwe=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function hk(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Un(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?hk(Object(r),!0).forEach(function(n){Wwe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):hk(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Wwe(t,e,r){return(e=qwe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function qwe(t){var e=Hwe(t,"string");return typeof e=="symbol"?e:e+""}function Hwe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function F_(t,e){if(t==null)return{};var r,n,s=Kwe(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(s[r]=t[r])}return s}function Kwe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function Ul(){return Ul=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ul.apply(null,arguments)}var Ywe=t=>{var{dataKey:e,name:r,stroke:n,legendType:s,hide:i}=t;return[{inactive:i,dataKey:e,type:s,color:n,value:Mo(r,e),payload:t}]};function Qwe(t){var{dataKey:e,data:r,stroke:n,strokeWidth:s,fill:i,name:o,hide:l,unit:c}=t;return{dataDefinedOnItem:r,positions:void 0,settings:{stroke:n,strokeWidth:s,fill:i,dataKey:e,nameKey:void 0,name:Mo(o,e),hide:l,type:t.tooltipType,color:t.stroke,unit:c}}}var OU=(t,e)=>"".concat(e,"px ").concat(t-e,"px");function Xwe(t,e){for(var r=t.length%2!==0?[...t,0]:t,n=[],s=0;s<e;++s)n=[...n,...r];return n}var Jwe=(t,e,r)=>{var n=r.reduce((h,f)=>h+f);if(!n)return OU(e,t);for(var s=Math.floor(t/n),i=t%n,o=e-t,l=[],c=0,u=0;c<r.length;u+=r[c],++c)if(u+r[c]>i){l=[...r.slice(0,c),i-u];break}var d=l.length%2===0?[0,o]:[o];return[...Xwe(r,s),...l,...d].map(h=>"".concat(h,"px")).join(", ")};function Zwe(t,e){var r;if(p.isValidElement(t))r=p.cloneElement(t,e);else if(typeof t=="function")r=t(e);else{var n=lt("recharts-line-dot",typeof t!="boolean"?t.className:"");r=p.createElement(b_,Ul({},e,{className:n}))}return r}function e1e(t,e){return t==null?!1:e?!0:t.length===1}function t1e(t){var{clipPathId:e,points:r,props:n}=t,{dot:s,dataKey:i,needClip:o}=n;if(!e1e(r,s))return null;var l=F_(n,Vwe),c=Gy(s),u=Ss(l),d=Gt(s,!0),h=r.map((m,v)=>{var y=Un(Un(Un({key:"dot-".concat(v),r:3},u),d),{},{index:v,cx:m.x,cy:m.y,dataKey:i,value:m.value,payload:m.payload,points:r});return Zwe(s,y)}),f={clipPath:o?"url(#clipPath-".concat(c?"":"dots-").concat(e,")"):void 0};return p.createElement(lr,Ul({className:"recharts-line-dots",key:"dots"},f),h)}function r1e(t){var{showLabels:e,children:r,points:n}=t,s=p.useMemo(()=>n==null?void 0:n.map(i=>{var o={x:i.x,y:i.y,width:0,height:0};return Un(Un({},o),{},{value:i.value,payload:i.payload,viewBox:o,parentViewBox:void 0,fill:void 0})}),[n]);return p.createElement(x_,{value:e?s:null},r)}function fk(t){var{clipPathId:e,pathRef:r,points:n,strokeDasharray:s,props:i}=t,{type:o,layout:l,connectNulls:c,needClip:u}=i,d=F_(i,zwe),h=Un(Un({},Gt(d,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:u?"url(#clipPath-".concat(e,")"):void 0,points:n,type:o,layout:l,connectNulls:c,strokeDasharray:s??i.strokeDasharray});return p.createElement(p.Fragment,null,(n==null?void 0:n.length)>1&&p.createElement(Ec,Ul({},h,{pathRef:r})),p.createElement(t1e,{points:n,clipPathId:e,props:i}))}function n1e(t){try{return t&&t.getTotalLength&&t.getTotalLength()||0}catch{return 0}}function s1e(t){var{clipPathId:e,props:r,pathRef:n,previousPointsRef:s,longestAnimatedLengthRef:i}=t,{points:o,strokeDasharray:l,isAnimationActive:c,animationBegin:u,animationDuration:d,animationEasing:h,animateNewValues:f,width:m,height:v,onAnimationEnd:y,onAnimationStart:x}=r,b=s.current,w=Tu(r,"recharts-line-"),[j,E]=p.useState(!1),I=!j,O=p.useCallback(()=>{typeof y=="function"&&y(),E(!1)},[y]),T=p.useCallback(()=>{typeof x=="function"&&x(),E(!0)},[x]),A=n1e(n.current),S=i.current;return p.createElement(r1e,{points:o,showLabels:I},r.children,p.createElement(Pu,{animationId:w,begin:u,duration:d,isActive:c,easing:h,onAnimationEnd:O,onAnimationStart:T,key:w},_=>{var P=Et(S,A+S,_),R=Math.min(P,A),C;if(c)if(l){var B="".concat(l).split(/[,\s]+/gim).map(F=>parseFloat(F));C=Jwe(R,A,B)}else C=OU(A,R);else C=l==null?void 0:String(l);if(b){var G=b.length/o.length,U=_===1?o:o.map((F,M)=>{var $=Math.floor(M*G);if(b[$]){var ne=b[$];return Un(Un({},F),{},{x:Et(ne.x,F.x,_),y:Et(ne.y,F.y,_)})}return f?Un(Un({},F),{},{x:Et(m*2,F.x,_),y:Et(v/2,F.y,_)}):Un(Un({},F),{},{x:F.x,y:F.y})});return s.current=U,p.createElement(fk,{props:r,points:U,clipPathId:e,pathRef:n,strokeDasharray:C})}return _>0&&A>0&&(s.current=o,i.current=R),p.createElement(fk,{props:r,points:o,clipPathId:e,pathRef:n,strokeDasharray:C})}),p.createElement(_v,{label:r.label}))}function a1e(t){var{clipPathId:e,props:r}=t,n=p.useRef(null),s=p.useRef(0),i=p.useRef(null);return p.createElement(s1e,{props:r,clipPathId:e,previousPointsRef:n,longestAnimatedLengthRef:s,pathRef:i})}var i1e=(t,e)=>({x:t.x,y:t.y,value:t.value,errorVal:Pt(t.payload,e)});class o1e extends p.Component{render(){var e,{hide:r,dot:n,points:s,className:i,xAxisId:o,yAxisId:l,top:c,left:u,width:d,height:h,id:f,needClip:m}=this.props;if(r)return null;var v=lt("recharts-line",i),y=f,{r:x=3,strokeWidth:b=2}=(e=Gt(n,!1))!==null&&e!==void 0?e:{r:3,strokeWidth:2},w=Gy(n),j=x*2+b;return p.createElement(p.Fragment,null,p.createElement(lr,{className:v},m&&p.createElement("defs",null,p.createElement(R_,{clipPathId:y,xAxisId:o,yAxisId:l}),!w&&p.createElement("clipPath",{id:"clipPath-dots-".concat(y)},p.createElement("rect",{x:u-j/2,y:c-j/2,width:d+j,height:h+j}))),p.createElement(NU,{xAxisId:o,yAxisId:l,data:s,dataPointFormatter:i1e,errorBarOffset:0},p.createElement(a1e,{props:this.props,clipPathId:y}))),p.createElement(Z0,{activeDot:this.props.activeDot,points:s,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var DU={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!xi.isSsr,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0};function l1e(t){var e=Tr(t,DU),{activeDot:r,animateNewValues:n,animationBegin:s,animationDuration:i,animationEasing:o,connectNulls:l,dot:c,hide:u,isAnimationActive:d,label:h,legendType:f,xAxisId:m,yAxisId:v,id:y}=e,x=F_(e,Gwe),{needClip:b}=Pv(m,v),w=Ev(),j=Jh(),E=cn(),I=Oe(_=>Bwe(_,m,v,E,y));if(j!=="horizontal"&&j!=="vertical"||I==null||w==null)return null;var{height:O,width:T,x:A,y:S}=w;return p.createElement(o1e,Ul({},x,{id:y,connectNulls:l,dot:c,activeDot:r,animateNewValues:n,animationBegin:s,animationDuration:i,animationEasing:o,isAnimationActive:d,hide:u,label:h,legendType:f,xAxisId:m,yAxisId:v,points:I,layout:j,height:O,width:T,left:A,top:S,needClip:b}))}function c1e(t){var{layout:e,xAxis:r,yAxis:n,xAxisTicks:s,yAxisTicks:i,dataKey:o,bandSize:l,displayedData:c}=t;return c.map((u,d)=>{var h=Pt(u,o);if(e==="horizontal"){var f=Gp({axis:r,ticks:s,bandSize:l,entry:u,index:d}),m=zt(h)?null:n.scale(h);return{x:f,y:m,value:h,payload:u}}var v=zt(h)?null:r.scale(h),y=Gp({axis:n,ticks:i,bandSize:l,entry:u,index:d});return v==null||y==null?null:{x:v,y,value:h,payload:u}}).filter(Boolean)}function u1e(t){var e=Tr(t,DU),r=cn();return p.createElement(Av,{id:e.id,type:"line"},n=>p.createElement(p.Fragment,null,p.createElement(P_,{legendPayload:Ywe(e)}),p.createElement(Sv,{fn:Qwe,args:e}),p.createElement(T_,{type:"line",id:n,data:e.data,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,hide:e.hide,isPanorama:r}),p.createElement(l1e,Ul({},e,{id:n}))))}var hs=p.memo(u1e);hs.displayName="Line";var MU=(t,e,r,n)=>Aa(t,"xAxis",e,n),LU=(t,e,r,n)=>Sa(t,"xAxis",e,n),FU=(t,e,r,n)=>Aa(t,"yAxis",r,n),$U=(t,e,r,n)=>Sa(t,"yAxis",r,n),d1e=X([nt,MU,FU,LU,$U],(t,e,r,n,s)=>ka(t,"xAxis")?Ll(e,n,!1):Ll(r,s,!1)),h1e=(t,e,r,n,s)=>s,UU=X([lf,h1e],(t,e)=>t.filter(r=>r.type==="area").find(r=>r.id===e)),f1e=(t,e,r,n,s)=>{var i,o=UU(t,e,r,n,s);if(o!=null){var l=nt(t),c=ka(l,"xAxis"),u;if(c?u=oh(t,"yAxis",r,n):u=oh(t,"xAxis",e,n),u!=null){var{stackId:d}=o,h=pv(o);if(!(d==null||h==null)){var f=(i=u[d])===null||i===void 0?void 0:i.stackedData;return f==null?void 0:f.find(m=>m.key===h)}}}},m1e=X([nt,MU,FU,LU,$U,f1e,nf,d1e,UU],(t,e,r,n,s,i,o,l,c)=>{var{chartData:u,dataStartIndex:d,dataEndIndex:h}=o;if(!(c==null||t!=="horizontal"&&t!=="vertical"||e==null||r==null||n==null||s==null||n.length===0||s.length===0||l==null)){var{data:f}=c,m;if(f&&f.length>0?m=f:m=u==null?void 0:u.slice(d,h+1),m!=null){var v=void 0;return D1e({layout:t,xAxis:e,yAxis:r,xAxisTicks:n,yAxisTicks:s,dataStartIndex:d,areaSettings:c,stackedData:i,displayedData:m,chartBaseValue:v,bandSize:l})}}}),p1e=["id"],g1e=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function BU(t,e){if(t==null)return{};var r,n,s=y1e(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(s[r]=t[r])}return s}function y1e(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function mk(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Ka(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?mk(Object(r),!0).forEach(function(n){v1e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mk(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function v1e(t,e,r){return(e=x1e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function x1e(t){var e=b1e(t,"string");return typeof e=="symbol"?e:e+""}function b1e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ei(){return ei=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ei.apply(null,arguments)}function fg(t,e){return t&&t!=="none"?t:e}var w1e=t=>{var{dataKey:e,name:r,stroke:n,fill:s,legendType:i,hide:o}=t;return[{inactive:o,dataKey:e,type:i,color:fg(n,s),value:Mo(r,e),payload:t}]};function j1e(t){var{dataKey:e,data:r,stroke:n,strokeWidth:s,fill:i,name:o,hide:l,unit:c}=t;return{dataDefinedOnItem:r,positions:void 0,settings:{stroke:n,strokeWidth:s,fill:i,dataKey:e,nameKey:void 0,name:Mo(o,e),hide:l,type:t.tooltipType,color:fg(n,i),unit:c}}}var N1e=(t,e)=>{var r;if(p.isValidElement(t))r=p.cloneElement(t,e);else if(typeof t=="function")r=t(e);else{var n=lt("recharts-area-dot",typeof t!="boolean"?t.className:"");r=p.createElement(b_,ei({},e,{className:n}))}return r};function _1e(t,e){return t==null?!1:e?!0:t.length===1}function S1e(t){var{clipPathId:e,points:r,props:n}=t,{needClip:s,dot:i,dataKey:o}=n;if(!_1e(r,i))return null;var l=Gy(i),c=Ss(n),u=Gt(i,!0),d=r.map((f,m)=>{var v=Ka(Ka(Ka({key:"dot-".concat(m),r:3},c),u),{},{index:m,cx:f.x,cy:f.y,dataKey:o,value:f.value,payload:f.payload,points:r});return N1e(i,v)}),h={clipPath:s?"url(#clipPath-".concat(l?"":"dots-").concat(e,")"):void 0};return p.createElement(lr,ei({className:"recharts-area-dots"},h),d)}function A1e(t){var{showLabels:e,children:r,points:n}=t,s=n.map(i=>{var o={x:i.x,y:i.y,width:0,height:0};return Ka(Ka({},o),{},{value:i.value,payload:i.payload,parentViewBox:void 0,viewBox:o,fill:void 0})});return p.createElement(x_,{value:e?s:null},r)}function pk(t){var{points:e,baseLine:r,needClip:n,clipPathId:s,props:i}=t,{layout:o,type:l,stroke:c,connectNulls:u,isRange:d}=i,{id:h}=i,f=BU(i,p1e),m=Ss(f);return p.createElement(p.Fragment,null,(e==null?void 0:e.length)>1&&p.createElement(lr,{clipPath:n?"url(#clipPath-".concat(s,")"):void 0},p.createElement(Ec,ei({},m,{id:h,points:e,connectNulls:u,type:l,baseLine:r,layout:o,stroke:"none",className:"recharts-area-area"})),c!=="none"&&p.createElement(Ec,ei({},m,{className:"recharts-area-curve",layout:o,type:l,connectNulls:u,fill:"none",points:e})),c!=="none"&&d&&p.createElement(Ec,ei({},m,{className:"recharts-area-curve",layout:o,type:l,connectNulls:u,fill:"none",points:r}))),p.createElement(S1e,{points:e,props:f,clipPathId:s}))}function E1e(t){var{alpha:e,baseLine:r,points:n,strokeWidth:s}=t,i=n[0].y,o=n[n.length-1].y;if(!Kr(i)||!Kr(o))return null;var l=e*Math.abs(i-o),c=Math.max(...n.map(u=>u.x||0));return Le(r)?c=Math.max(r,c):r&&Array.isArray(r)&&r.length&&(c=Math.max(...r.map(u=>u.x||0),c)),Le(c)?p.createElement("rect",{x:0,y:i<o?i:i-l,width:c+(s?parseInt("".concat(s),10):1),height:Math.floor(l)}):null}function P1e(t){var{alpha:e,baseLine:r,points:n,strokeWidth:s}=t,i=n[0].x,o=n[n.length-1].x;if(!Kr(i)||!Kr(o))return null;var l=e*Math.abs(i-o),c=Math.max(...n.map(u=>u.y||0));return Le(r)?c=Math.max(r,c):r&&Array.isArray(r)&&r.length&&(c=Math.max(...r.map(u=>u.y||0),c)),Le(c)?p.createElement("rect",{x:i<o?i:i-l,y:0,width:l,height:Math.floor(c+(s?parseInt("".concat(s),10):1))}):null}function T1e(t){var{alpha:e,layout:r,points:n,baseLine:s,strokeWidth:i}=t;return r==="vertical"?p.createElement(E1e,{alpha:e,points:n,baseLine:s,strokeWidth:i}):p.createElement(P1e,{alpha:e,points:n,baseLine:s,strokeWidth:i})}function C1e(t){var{needClip:e,clipPathId:r,props:n,previousPointsRef:s,previousBaselineRef:i}=t,{points:o,baseLine:l,isAnimationActive:c,animationBegin:u,animationDuration:d,animationEasing:h,onAnimationStart:f,onAnimationEnd:m}=n,v=Tu(n,"recharts-area-"),[y,x]=p.useState(!1),b=!y,w=p.useCallback(()=>{typeof m=="function"&&m(),x(!1)},[m]),j=p.useCallback(()=>{typeof f=="function"&&f(),x(!0)},[f]),E=s.current,I=i.current;return p.createElement(A1e,{showLabels:b,points:o},n.children,p.createElement(Pu,{animationId:v,begin:u,duration:d,isActive:c,easing:h,onAnimationEnd:w,onAnimationStart:j,key:v},O=>{if(E){var T=E.length/o.length,A=O===1?o:o.map((_,P)=>{var R=Math.floor(P*T);if(E[R]){var C=E[R];return Ka(Ka({},_),{},{x:Et(C.x,_.x,O),y:Et(C.y,_.y,O)})}return _}),S;return Le(l)?S=Et(I,l,O):zt(l)||In(l)?S=Et(I,0,O):S=l.map((_,P)=>{var R=Math.floor(P*T);if(Array.isArray(I)&&I[R]){var C=I[R];return Ka(Ka({},_),{},{x:Et(C.x,_.x,O),y:Et(C.y,_.y,O)})}return _}),O>0&&(s.current=A,i.current=S),p.createElement(pk,{points:A,baseLine:S,needClip:e,clipPathId:r,props:n})}return O>0&&(s.current=o,i.current=l),p.createElement(lr,null,c&&p.createElement("defs",null,p.createElement("clipPath",{id:"animationClipPath-".concat(r)},p.createElement(T1e,{alpha:O,points:o,baseLine:l,layout:n.layout,strokeWidth:n.strokeWidth}))),p.createElement(lr,{clipPath:"url(#animationClipPath-".concat(r,")")},p.createElement(pk,{points:o,baseLine:l,needClip:e,clipPathId:r,props:n})))}),p.createElement(_v,{label:n.label}))}function k1e(t){var{needClip:e,clipPathId:r,props:n}=t,s=p.useRef(null),i=p.useRef();return p.createElement(C1e,{needClip:e,clipPathId:r,props:n,previousPointsRef:s,previousBaselineRef:i})}class I1e extends p.PureComponent{render(){var e,{hide:r,dot:n,points:s,className:i,top:o,left:l,needClip:c,xAxisId:u,yAxisId:d,width:h,height:f,id:m,baseLine:v}=this.props;if(r)return null;var y=lt("recharts-area",i),x=m,{r:b=3,strokeWidth:w=2}=(e=Gt(n,!1))!==null&&e!==void 0?e:{r:3,strokeWidth:2},j=Gy(n),E=b*2+w;return p.createElement(p.Fragment,null,p.createElement(lr,{className:y},c&&p.createElement("defs",null,p.createElement(R_,{clipPathId:x,xAxisId:u,yAxisId:d}),!j&&p.createElement("clipPath",{id:"clipPath-dots-".concat(x)},p.createElement("rect",{x:l-E/2,y:o-E/2,width:h+E,height:f+E}))),p.createElement(k1e,{needClip:c,clipPathId:x,props:this.props})),p.createElement(Z0,{points:s,mainColor:fg(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}),this.props.isRange&&Array.isArray(v)&&p.createElement(Z0,{points:v,mainColor:fg(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}))}}var VU={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:!xi.isSsr,legendType:"line",stroke:"#3182bd",xAxisId:0,yAxisId:0};function R1e(t){var e,r=Tr(t,VU),{activeDot:n,animationBegin:s,animationDuration:i,animationEasing:o,connectNulls:l,dot:c,fill:u,fillOpacity:d,hide:h,isAnimationActive:f,legendType:m,stroke:v,xAxisId:y,yAxisId:x}=r,b=BU(r,g1e),w=Jh(),j=z$(),{needClip:E}=Pv(y,x),I=cn(),{points:O,isRange:T,baseLine:A}=(e=Oe(B=>m1e(B,y,x,I,t.id)))!==null&&e!==void 0?e:{},S=Ev();if(w!=="horizontal"&&w!=="vertical"||S==null||j!=="AreaChart"&&j!=="ComposedChart")return null;var{height:_,width:P,x:R,y:C}=S;return!O||!O.length?null:p.createElement(I1e,ei({},b,{activeDot:n,animationBegin:s,animationDuration:i,animationEasing:o,baseLine:A,connectNulls:l,dot:c,fill:u,fillOpacity:d,height:_,hide:h,layout:w,isAnimationActive:f,isRange:T,legendType:m,needClip:E,points:O,stroke:v,width:P,left:R,top:C,xAxisId:y,yAxisId:x}))}var O1e=(t,e,r,n,s)=>{var i=r??e;if(Le(i))return i;var o=t==="horizontal"?s:n,l=o.scale.domain();if(o.type==="number"){var c=Math.max(l[0],l[1]),u=Math.min(l[0],l[1]);return i==="dataMin"?u:i==="dataMax"||c<0?c:Math.max(Math.min(l[0],l[1]),0)}return i==="dataMin"?l[0]:i==="dataMax"?l[1]:l[0]};function D1e(t){var{areaSettings:{connectNulls:e,baseValue:r,dataKey:n},stackedData:s,layout:i,chartBaseValue:o,xAxis:l,yAxis:c,displayedData:u,dataStartIndex:d,xAxisTicks:h,yAxisTicks:f,bandSize:m}=t,v=s&&s.length,y=O1e(i,o,r,l,c),x=i==="horizontal",b=!1,w=u.map((E,I)=>{var O;v?O=s[d+I]:(O=Pt(E,n),Array.isArray(O)?b=!0:O=[y,O]);var T=O[1]==null||v&&!e&&Pt(E,n)==null;return x?{x:Gp({axis:l,ticks:h,bandSize:m,entry:E,index:I}),y:T?null:c.scale(O[1]),value:O,payload:E}:{x:T?null:l.scale(O[1]),y:Gp({axis:c,ticks:f,bandSize:m,entry:E,index:I}),value:O,payload:E}}),j;return v||b?j=w.map(E=>{var I=Array.isArray(E.value)?E.value[0]:null;return x?{x:E.x,y:I!=null&&E.y!=null?c.scale(I):null,payload:E.payload}:{x:I!=null?l.scale(I):null,y:E.y,payload:E.payload}}):j=x?c.scale(y):l.scale(y),{points:w,baseLine:j,isRange:b}}function M1e(t){var e=Tr(t,VU),r=cn();return p.createElement(Av,{id:e.id,type:"area"},n=>p.createElement(p.Fragment,null,p.createElement(P_,{legendPayload:w1e(e)}),p.createElement(Sv,{fn:j1e,args:e}),p.createElement(T_,{type:"area",id:n,data:e.data,dataKey:e.dataKey,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,stackId:_6(e.stackId),hide:e.hide,barSize:void 0,baseValue:e.baseValue,isPanorama:r,connectNulls:e.connectNulls}),p.createElement(R1e,ei({},e,{id:n}))))}var Vi=p.memo(M1e);Vi.displayName="Area";var L1e=["dangerouslySetInnerHTML","ticks"],F1e=["id"],$1e=["domain"],U1e=["domain"];function rw(){return rw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},rw.apply(null,arguments)}function mg(t,e){if(t==null)return{};var r,n,s=B1e(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(s[r]=t[r])}return s}function B1e(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function V1e(t){var e=rr();return p.useEffect(()=>(e(hbe(t)),()=>{e(fbe(t))}),[t,e]),null}var z1e=t=>{var{xAxisId:e,className:r}=t,n=Oe(cN),s=cn(),i="xAxis",o=Oe(m=>Mu(m,i,e,s)),l=Oe(m=>j$(m,i,e,s)),c=Oe(m=>v$(m,e)),u=Oe(m=>sge(m,e)),d=Oe(m=>YF(m,e));if(c==null||u==null||d==null)return null;var h=mg(t,L1e),f=mg(d,F1e);return p.createElement(L_,rw({},h,f,{scale:o,x:u.x,y:u.y,width:c.width,height:c.height,className:lt("recharts-".concat(i," ").concat(i),r),viewBox:n,ticks:l}))},G1e={allowDataOverflow:Dn.allowDataOverflow,allowDecimals:Dn.allowDecimals,allowDuplicatedCategory:Dn.allowDuplicatedCategory,height:Dn.height,hide:!1,mirror:Dn.mirror,orientation:Dn.orientation,padding:Dn.padding,reversed:Dn.reversed,scale:Dn.scale,tickCount:Dn.tickCount,type:Dn.type,xAxisId:0},W1e=t=>{var e,r,n,s,i,o=Tr(t,G1e);return p.createElement(p.Fragment,null,p.createElement(V1e,{interval:(e=o.interval)!==null&&e!==void 0?e:"preserveEnd",id:o.xAxisId,scale:o.scale,type:o.type,padding:o.padding,allowDataOverflow:o.allowDataOverflow,domain:o.domain,dataKey:o.dataKey,allowDuplicatedCategory:o.allowDuplicatedCategory,allowDecimals:o.allowDecimals,tickCount:o.tickCount,includeHidden:(r=o.includeHidden)!==null&&r!==void 0?r:!1,reversed:o.reversed,ticks:o.ticks,height:o.height,orientation:o.orientation,mirror:o.mirror,hide:o.hide,unit:o.unit,name:o.name,angle:(n=o.angle)!==null&&n!==void 0?n:0,minTickGap:(s=o.minTickGap)!==null&&s!==void 0?s:5,tick:(i=o.tick)!==null&&i!==void 0?i:!0,tickFormatter:o.tickFormatter}),p.createElement(z1e,o))},q1e=(t,e)=>{var{domain:r}=t,n=mg(t,$1e),{domain:s}=e,i=mg(e,U1e);return uu(n,i)?Array.isArray(r)&&r.length===2&&Array.isArray(s)&&s.length===2?r[0]===s[0]&&r[1]===s[1]:uu({domain:r},{domain:s}):!1},ia=p.memo(W1e,q1e);ia.displayName="XAxis";var H1e=["dangerouslySetInnerHTML","ticks"],K1e=["id"],Y1e=["domain"],Q1e=["domain"];function nw(){return nw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},nw.apply(null,arguments)}function pg(t,e){if(t==null)return{};var r,n,s=X1e(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(s[r]=t[r])}return s}function X1e(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function J1e(t){var e=rr();return p.useEffect(()=>(e(mbe(t)),()=>{e(pbe(t))}),[t,e]),null}var Z1e=t=>{var{yAxisId:e,className:r,width:n,label:s}=t,i=p.useRef(null),o=p.useRef(null),l=Oe(cN),c=cn(),u=rr(),d="yAxis",h=Oe(w=>Mu(w,d,e,c)),f=Oe(w=>x$(w,e)),m=Oe(w=>ige(w,e)),v=Oe(w=>j$(w,d,e,c)),y=Oe(w=>QF(w,e));if(p.useLayoutEffect(()=>{if(!(n!=="auto"||!f||v_(s)||p.isValidElement(s)||y==null)){var w=i.current;if(w){var j=w.getCalculatedWidth();Math.round(f.width)!==Math.round(j)&&u(gbe({id:e,width:j}))}}},[v,f,u,s,e,n,y]),f==null||m==null||y==null)return null;var x=pg(t,H1e),b=pg(y,K1e);return p.createElement(L_,nw({},x,b,{ref:i,labelRef:o,scale:h,x:m.x,y:m.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:f.width,height:f.height,className:lt("recharts-".concat(d," ").concat(d),r),viewBox:l,ticks:v}))},eje={allowDataOverflow:Mn.allowDataOverflow,allowDecimals:Mn.allowDecimals,allowDuplicatedCategory:Mn.allowDuplicatedCategory,hide:!1,mirror:Mn.mirror,orientation:Mn.orientation,padding:Mn.padding,reversed:Mn.reversed,scale:Mn.scale,tickCount:Mn.tickCount,type:Mn.type,width:Mn.width,yAxisId:0},tje=t=>{var e,r,n,s,i,o=Tr(t,eje);return p.createElement(p.Fragment,null,p.createElement(J1e,{interval:(e=o.interval)!==null&&e!==void 0?e:"preserveEnd",id:o.yAxisId,scale:o.scale,type:o.type,domain:o.domain,allowDataOverflow:o.allowDataOverflow,dataKey:o.dataKey,allowDuplicatedCategory:o.allowDuplicatedCategory,allowDecimals:o.allowDecimals,tickCount:o.tickCount,padding:o.padding,includeHidden:(r=o.includeHidden)!==null&&r!==void 0?r:!1,reversed:o.reversed,ticks:o.ticks,width:o.width,orientation:o.orientation,mirror:o.mirror,hide:o.hide,unit:o.unit,name:o.name,angle:(n=o.angle)!==null&&n!==void 0?n:0,minTickGap:(s=o.minTickGap)!==null&&s!==void 0?s:5,tick:(i=o.tick)!==null&&i!==void 0?i:!0,tickFormatter:o.tickFormatter}),p.createElement(Z1e,o))},rje=(t,e)=>{var{domain:r}=t,n=pg(t,Y1e),{domain:s}=e,i=pg(e,Q1e);return uu(n,i)?Array.isArray(r)&&r.length===2&&Array.isArray(s)&&s.length===2?r[0]===s[0]&&r[1]===s[1]:uu({domain:r},{domain:s}):!1},Os=p.memo(tje,rje);Os.displayName="YAxis";var nje={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mf=p;function sje(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var aje=typeof Object.is=="function"?Object.is:sje,ije=mf.useSyncExternalStore,oje=mf.useRef,lje=mf.useEffect,cje=mf.useMemo,uje=mf.useDebugValue;nje.useSyncExternalStoreWithSelector=function(t,e,r,n,s){var i=oje(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=cje(function(){function c(m){if(!u){if(u=!0,d=m,m=n(m),s!==void 0&&o.hasValue){var v=o.value;if(s(v,m))return h=v}return h=m}if(v=h,aje(d,m))return v;var y=n(m);return s!==void 0&&s(v,y)?(d=m,v):(d=m,h=y)}var u=!1,d,h,f=r===void 0?null:r;return[function(){return c(e())},f===null?void 0:function(){return c(f())}]},[e,r,n,s]);var l=ije(t,i[0],i[1]);return lje(function(){o.hasValue=!0,o.value=l},[l]),uje(l),l};function dje(t){t()}function hje(){let t=null,e=null;return{clear(){t=null,e=null},notify(){dje(()=>{let r=t;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=t;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const s=e={callback:r,next:null,prev:e};return s.prev?s.prev.next=s:t=s,function(){!n||t===null||(n=!1,s.next?s.next.prev=s.prev:e=s.prev,s.prev?s.prev.next=s.next:t=s.next)}}}}var gk={notify(){},get:()=>[]};function fje(t,e){let r,n=gk,s=0,i=!1;function o(y){d();const x=n.subscribe(y);let b=!1;return()=>{b||(b=!0,x(),h())}}function l(){n.notify()}function c(){v.onStateChange&&v.onStateChange()}function u(){return i}function d(){s++,r||(r=t.subscribe(c),n=hje())}function h(){s--,r&&s===0&&(r(),r=void 0,n.clear(),n=gk)}function f(){i||(i=!0,d())}function m(){i&&(i=!1,h())}const v={addNestedSub:o,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:u,trySubscribe:f,tryUnsubscribe:m,getListeners:()=>n};return v}var mje=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",pje=mje(),gje=()=>typeof navigator<"u"&&navigator.product==="ReactNative",yje=gje(),vje=()=>pje||yje?p.useLayoutEffect:p.useEffect,xje=vje(),eb=Symbol.for("react-redux-context"),tb=typeof globalThis<"u"?globalThis:{};function bje(){if(!p.createContext)return{};const t=tb[eb]??(tb[eb]=new Map);let e=t.get(p.createContext);return e||(e=p.createContext(null),t.set(p.createContext,e)),e}var wje=bje();function jje(t){const{children:e,context:r,serverState:n,store:s}=t,i=p.useMemo(()=>{const c=fje(s);return{store:s,subscription:c,getServerState:n?()=>n:void 0}},[s,n]),o=p.useMemo(()=>s.getState(),[s]);xje(()=>{const{subscription:c}=i;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),o!==s.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[i,o]);const l=r||wje;return p.createElement(l.Provider,{value:i},e)}var Nje=jje,_je=(t,e)=>e,$_=X([_je,nt,qF,kr,L$,Ni,uye,Pr],pye),U_=t=>{var e=t.currentTarget.getBoundingClientRect(),r=e.width/t.currentTarget.offsetWidth,n=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/r),chartY:Math.round((t.clientY-e.top)/n)}},zU=ws("mouseClick"),GU=Qh();GU.startListening({actionCreator:zU,effect:(t,e)=>{var r=t.payload,n=$_(e.getState(),U_(r));(n==null?void 0:n.activeIndex)!=null&&e.dispatch(xge({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var sw=ws("mouseMove"),WU=Qh();WU.startListening({actionCreator:sw,effect:(t,e)=>{var r=t.payload,n=e.getState(),s=c_(n,n.tooltip.settings.shared),i=$_(n,U_(r));s==="axis"&&((i==null?void 0:i.activeIndex)!=null?e.dispatch(C$({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate})):e.dispatch(T$()))}});var yk={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},qU=rs({name:"rootProps",initialState:yk,reducers:{updateOptions:(t,e)=>{var r;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(r=e.payload.barGap)!==null&&r!==void 0?r:yk.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className}}}),Sje=qU.reducer,{updateOptions:Aje}=qU.actions,HU=rs({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,e)=>e.payload}}),{updatePolarOptions:Eje}=HU.actions,Pje=HU.reducer,KU=ws("keyDown"),YU=ws("focus"),B_=Qh();B_.startListening({actionCreator:KU,effect:(t,e)=>{var r=e.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip,i=t.payload;if(!(i!=="ArrowRight"&&i!=="ArrowLeft"&&i!=="Enter")){var o=Number(u_(s,Fu(r))),l=Ni(r);if(i==="Enter"){var c=ig(r,"axis","hover",String(s.index));e.dispatch(K0({active:!s.active,activeIndex:s.index,activeDataKey:s.dataKey,activeCoordinate:c}));return}var u=uge(r),d=u==="left-to-right"?1:-1,h=i==="ArrowRight"?1:-1,f=o+h*d;if(!(l==null||f>=l.length||f<0)){var m=ig(r,"axis","hover",String(f));e.dispatch(K0({active:!0,activeIndex:f.toString(),activeDataKey:void 0,activeCoordinate:m}))}}}}});B_.startListening({actionCreator:YU,effect:(t,e)=>{var r=e.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip;if(!s.active&&s.index==null){var i="0",o=ig(r,"axis","hover",String(i));e.dispatch(K0({activeDataKey:void 0,active:!0,activeIndex:i,activeCoordinate:o}))}}}});var ls=ws("externalEvent"),QU=Qh();QU.startListening({actionCreator:ls,effect:(t,e)=>{if(t.payload.handler!=null){var r=e.getState(),n={activeCoordinate:tye(r),activeDataKey:B$(r),activeIndex:bo(r),activeLabel:U$(r),activeTooltipIndex:bo(r),isTooltipActive:rye(r)};t.payload.handler(n,t.payload.reactEvent)}}});var Tje=X([Lu],t=>t.tooltipItemPayloads),Cje=X([Tje,df,(t,e,r)=>e,(t,e,r)=>r],(t,e,r,n)=>{var s=t.find(l=>l.settings.dataKey===n);if(s!=null){var{positions:i}=s;if(i!=null){var o=e(i,r);return o}}}),XU=ws("touchMove"),JU=Qh();JU.startListening({actionCreator:XU,effect:(t,e)=>{var r=t.payload,n=e.getState(),s=c_(n,n.tooltip.settings.shared);if(s==="axis"){var i=$_(n,U_({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));(i==null?void 0:i.activeIndex)!=null&&e.dispatch(C$({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}else if(s==="item"){var o,l=r.touches[0],c=document.elementFromPoint(l.clientX,l.clientY);if(!c||!c.getAttribute)return;var u=c.getAttribute(A6),d=(o=c.getAttribute(E6))!==null&&o!==void 0?o:void 0,h=Cje(e.getState(),u,d);e.dispatch(P$({activeDataKey:d,activeIndex:u,activeCoordinate:h}))}}});var kje=X5({brush:$0e,cartesianAxis:ybe,chartData:Cye,errorBars:Lbe,graphicalItems:Mxe,layout:gue,legend:ade,options:Sye,polarAxis:txe,polarOptions:Pje,referenceElements:H0e,rootProps:Sje,tooltip:bge}),Ije=function(e){return Bce({reducer:kje,preloadedState:e,middleware:r=>r({serializableCheck:!1}).concat([GU.middleware,WU.middleware,B_.middleware,QU.middleware,JU.middleware]),devTools:xi.devToolsEnabled})};function ZU(t){var{preloadedState:e,children:r,reduxStoreName:n}=t,s=cn(),i=p.useRef(null);if(s)return r;i.current==null&&(i.current=Ije(e));var o=tN;return p.createElement(Nje,{context:o,store:i.current},r)}function eB(t){var{layout:e,width:r,height:n,margin:s}=t,i=rr(),o=cn();return p.useEffect(()=>{o||(i(fue(e)),i(mue({width:r,height:n})),i(hue(s)))},[i,o,e,r,n,s]),null}function tB(t){var e=rr();return p.useEffect(()=>{e(Aje(t))},[e,t]),null}var Rje=["children"];function Oje(t,e){if(t==null)return{};var r,n,s=Dje(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(s[r]=t[r])}return s}function Dje(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function gg(){return gg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},gg.apply(null,arguments)}var Mje={width:"100%",height:"100%"},Lje=p.forwardRef((t,e)=>{var r=dN(),n=hN(),s=I6();if(!au(r)||!au(n))return null;var{children:i,otherAttributes:o,title:l,desc:c}=t,u,d;return typeof o.tabIndex=="number"?u=o.tabIndex:u=s?0:void 0,typeof o.role=="string"?d=o.role:d=s?"application":void 0,p.createElement($j,gg({},o,{title:l,desc:c,role:d,tabIndex:u,width:r,height:n,style:Mje,ref:e}),i)}),Fje=t=>{var{children:e}=t,r=Oe(av);if(!r)return null;var{width:n,height:s,y:i,x:o}=r;return p.createElement($j,{width:n,height:s,x:o,y:i},e)},vk=p.forwardRef((t,e)=>{var{children:r}=t,n=Oje(t,Rje),s=cn();return s?p.createElement(Fje,null,r):p.createElement(Lje,gg({ref:e},n),r)});function $je(){var t=rr(),[e,r]=p.useState(null),n=Oe(Gue);return p.useEffect(()=>{if(e!=null){var s=e.getBoundingClientRect(),i=s.width/e.offsetWidth;Kr(i)&&i!==n&&t(pue(i))}},[e,t,n]),r}function xk(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Uje(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?xk(Object(r),!0).forEach(function(n){Bje(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xk(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Bje(t,e,r){return(e=Vje(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Vje(t){var e=zje(t,"string");return typeof e=="symbol"?e:e+""}function zje(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Gje=p.forwardRef((t,e)=>{var{children:r,className:n,height:s,onClick:i,onContextMenu:o,onDoubleClick:l,onMouseDown:c,onMouseEnter:u,onMouseLeave:d,onMouseMove:h,onMouseUp:f,onTouchEnd:m,onTouchMove:v,onTouchStart:y,style:x,width:b}=t,w=rr(),[j,E]=p.useState(null),[I,O]=p.useState(null);$ye();var T=$je(),A=p.useCallback(z=>{T(z),typeof e=="function"&&e(z),E(z),O(z)},[T,e,E,O]),S=p.useCallback(z=>{w(zU(z)),w(ls({handler:i,reactEvent:z}))},[w,i]),_=p.useCallback(z=>{w(sw(z)),w(ls({handler:u,reactEvent:z}))},[w,u]),P=p.useCallback(z=>{w(T$()),w(ls({handler:d,reactEvent:z}))},[w,d]),R=p.useCallback(z=>{w(sw(z)),w(ls({handler:h,reactEvent:z}))},[w,h]),C=p.useCallback(()=>{w(YU())},[w]),B=p.useCallback(z=>{w(KU(z.key))},[w]),G=p.useCallback(z=>{w(ls({handler:o,reactEvent:z}))},[w,o]),U=p.useCallback(z=>{w(ls({handler:l,reactEvent:z}))},[w,l]),F=p.useCallback(z=>{w(ls({handler:c,reactEvent:z}))},[w,c]),M=p.useCallback(z=>{w(ls({handler:f,reactEvent:z}))},[w,f]),$=p.useCallback(z=>{w(ls({handler:y,reactEvent:z}))},[w,y]),ne=p.useCallback(z=>{w(XU(z)),w(ls({handler:v,reactEvent:z}))},[w,v]),te=p.useCallback(z=>{w(ls({handler:m,reactEvent:z}))},[w,m]);return p.createElement(K$.Provider,{value:j},p.createElement(a5.Provider,{value:I},p.createElement("div",{className:lt("recharts-wrapper",n),style:Uje({position:"relative",cursor:"default",width:b,height:s},x),onClick:S,onContextMenu:G,onDoubleClick:U,onFocus:C,onKeyDown:B,onMouseDown:F,onMouseEnter:_,onMouseLeave:P,onMouseMove:R,onMouseUp:M,onTouchEnd:te,onTouchMove:ne,onTouchStart:$,ref:A},r)))}),Wje=["children","className","width","height","style","compact","title","desc"];function qje(t,e){if(t==null)return{};var r,n,s=Hje(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(s[r]=t[r])}return s}function Hje(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var rB=p.forwardRef((t,e)=>{var{children:r,className:n,width:s,height:i,style:o,compact:l,title:c,desc:u}=t,d=qje(t,Wje),h=Ss(d);return l?p.createElement(vk,{otherAttributes:h,title:c,desc:u},r):p.createElement(Gje,{className:n,style:o,width:s,height:i,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},p.createElement(vk,{otherAttributes:h,title:c,desc:u,ref:e},p.createElement(Y0e,null,r)))}),Kje=["width","height"];function aw(){return aw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},aw.apply(null,arguments)}function Yje(t,e){if(t==null)return{};var r,n,s=Qje(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(s[r]=t[r])}return s}function Qje(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Xje={top:5,right:5,bottom:5,left:5},Jje={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:Xje,reverseStackOrder:!1,syncMethod:"index"},V_=p.forwardRef(function(e,r){var n,s=Tr(e.categoricalChartProps,Jje),{width:i,height:o}=s,l=Yje(s,Kje);if(!au(i)||!au(o))return null;var{chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:h,categoricalChartProps:f}=e,m={chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:h,eventEmitter:void 0};return p.createElement(ZU,{preloadedState:{options:m},reduxStoreName:(n=f.id)!==null&&n!==void 0?n:c},p.createElement(EU,{chartData:f.data}),p.createElement(eB,{width:i,height:o,layout:s.layout,margin:s.margin}),p.createElement(tB,{accessibilityLayer:s.accessibilityLayer,barCategoryGap:s.barCategoryGap,maxBarSize:s.maxBarSize,stackOffset:s.stackOffset,barGap:s.barGap,barSize:s.barSize,syncId:s.syncId,syncMethod:s.syncMethod,className:s.className}),p.createElement(rB,aw({},l,{width:i,height:o,ref:r})))}),Zje=["axis"],ch=p.forwardRef((t,e)=>p.createElement(V_,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Zje,tooltipPayloadSearcher:jv,categoricalChartProps:t,ref:e})),eNe=["axis","item"],tNe=p.forwardRef((t,e)=>p.createElement(V_,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:eNe,tooltipPayloadSearcher:jv,categoricalChartProps:t,ref:e}));function rNe(t){var e=rr();return p.useEffect(()=>{e(Eje(t))},[e,t]),null}var nNe=["width","height","layout"];function iw(){return iw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},iw.apply(null,arguments)}function sNe(t,e){if(t==null)return{};var r,n,s=aNe(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(s[r]=t[r])}return s}function aNe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var iNe={top:5,right:5,bottom:5,left:5},oNe={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:iNe,reverseStackOrder:!1,syncMethod:"index",layout:"radial"},lNe=p.forwardRef(function(e,r){var n,s=Tr(e.categoricalChartProps,oNe),{width:i,height:o,layout:l}=s,c=sNe(s,nNe);if(!au(i)||!au(o))return null;var{chartName:u,defaultTooltipEventType:d,validateTooltipEventTypes:h,tooltipPayloadSearcher:f}=e,m={chartName:u,defaultTooltipEventType:d,validateTooltipEventTypes:h,tooltipPayloadSearcher:f,eventEmitter:void 0};return p.createElement(ZU,{preloadedState:{options:m},reduxStoreName:(n=s.id)!==null&&n!==void 0?n:u},p.createElement(EU,{chartData:s.data}),p.createElement(eB,{width:i,height:o,layout:l,margin:s.margin}),p.createElement(tB,{accessibilityLayer:s.accessibilityLayer,barCategoryGap:s.barCategoryGap,maxBarSize:s.maxBarSize,stackOffset:s.stackOffset,barGap:s.barGap,barSize:s.barSize,syncId:s.syncId,syncMethod:s.syncMethod,className:s.className}),p.createElement(rNe,{cx:s.cx,cy:s.cy,startAngle:s.startAngle,endAngle:s.endAngle,innerRadius:s.innerRadius,outerRadius:s.outerRadius}),p.createElement(rB,iw({width:i,height:o},c,{ref:r})))}),cNe=["item"],uNe={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},nB=p.forwardRef((t,e)=>{var r=Tr(t,uNe);return p.createElement(lNe,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:cNe,tooltipPayloadSearcher:jv,categoricalChartProps:r,ref:e})}),dNe=["axis"],ow=p.forwardRef((t,e)=>p.createElement(V_,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:dNe,tooltipPayloadSearcher:jv,categoricalChartProps:t,ref:e}));const hNe=()=>{var de,Z,re,_e,se,Fe,oe;const t=cr(),{isFeatureBlocked:e,status:r}=ln();if(e||r==="none")return a.jsx("div",{className:"flex flex-col items-center justify-center min-h-[500px] text-center space-y-6",children:a.jsxs("div",{className:"bg-red-950/30 border-2 border-red-500/50 rounded-2xl p-8 max-w-2xl w-full backdrop-blur-sm",children:[a.jsx(qr,{className:"h-16 w-16 text-red-500 mx-auto mb-4"}),a.jsx("h3",{className:"text-2xl font-bold text-red-400 mb-3",children:r==="none"?"No Subscription - Upgrade Required":"Trial Expired - Upgrade Required"}),a.jsx("p",{className:"text-red-300/90 mb-6 text-lg",children:r==="none"?"You need an active subscription to access this feature. Start your 15-day free trial or upgrade now to access the Audit Tool.":"Your 15-day trial has expired. Upgrade now to access the Audit Tool and analyze your Google Business Profile performance."}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs(K,{onClick:()=>t("/dashboard/billing"),className:"bg-red-600 hover:bg-red-700 text-white px-8 py-6 text-lg w-full",size:"lg",children:[a.jsx(Sr,{className:"mr-2 h-5 w-5"}),r==="none"?"Start Free Trial":"Upgrade Now"]}),a.jsx("p",{className:"text-sm text-red-400/80",children:"Starting from ₹1,099/month • Unlimited Profiles • All Features"})]})]})});const{accounts:n,isConnected:s,isLoading:i}=Su(),{subscription:o}=ln(),{currentUser:l}=Er(),[c,u]=p.useState(""),[d,h]=p.useState([]),[f,m]=p.useState(null),[v,y]=p.useState(!1),[x,b]=p.useState(null),[w,j]=p.useState(!0),[E,I]=p.useState(5*60*1e3),[O,T]=p.useState("area"),[A,S]=p.useState(null),[_,P]=p.useState(!1),R=(n||[]).flatMap(V=>(V.locations||[]).map(W=>({...W,id:W.locationId,name:W.displayName,accountName:V.accountName,fullName:W.name}))),C=(o==null?void 0:o.profileCount)||1,G=r==="active"||r==="trial"?R.slice(0,C):R.slice(0,1),U=R.slice(C);p.useEffect(()=>{G.length>0&&!c&&u(G[0].id)},[G.length,c]),p.useEffect(()=>{c&&(console.log("Location changed to:",c),M(c))},[c]);const F=async(V,W,L,J=null)=>{try{if(!l){console.warn("No current user, skipping audit save");return}const le=R.find(De=>De.id===V);if(!le){console.warn("Location not found, skipping audit save");return}const pe={userId:l.uid,userEmail:l.email||"unknown",locationId:le.fullName||V,locationName:le.name,performance:{timeSeriesData:W},score:L,recommendations:J||{recommendations:[]},dateRange:{startDate:new Date(Date.now()-30*24*60*60*1e3).toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0]},metadata:{source:"audit_tool",timestamp:new Date().toISOString()}},ke=await fetch("http://localhost:5000/api/audit-results",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(pe)});ke.ok?console.log("✅ Audit result saved successfully"):console.error("Failed to save audit result:",await ke.text())}catch(le){console.error("Error saving audit result:",le)}};p.useEffect(()=>{if(!c||!w)return;const V=setInterval(()=>{v||(console.log("Auto-refreshing audit data..."),M(c))},E);return()=>clearInterval(V)},[c,w,E,v]),p.useEffect(()=>{const V=()=>{!document.hidden&&c&&w&&(!x||new Date().getTime()-x.getTime()>12e4)&&(console.log("Page became visible - refreshing audit data..."),M(c))};return document.addEventListener("visibilitychange",V),()=>document.removeEventListener("visibilitychange",V)},[c,w,x]);const M=async V=>{var L,J,le,pe,ke,De;if(!V)return;if(R.findIndex(qe=>qe.id===V)>=C){be({title:"Profile Locked",description:`This profile requires an upgrade. You have access to ${C} profile${C===1?"":"s"}.`,variant:"destructive"});return}y(!0);try{const qe=localStorage.getItem("google_business_tokens");if(!qe)throw new Error("No Google Business Profile connection found. Please connect your Google Business Profile in Settings > Connections.");const mt=JSON.parse(qe);if(!mt.access_token)throw new Error("Invalid token data. Please reconnect your Google Business Profile in Settings.");const jt=Date.now(),Nt=mt.expires_at||mt.stored_at+mt.expires_in*1e3;if(Nt&&jt>=Nt)throw new Error("Google Business Profile token expired. Please reconnect in Settings > Connections.");const Q=mt.access_token,ue=new Date().toISOString().split("T")[0],we=new Date(Date.now()-30*24*60*60*1e3).toISOString().split("T")[0],Me="http://localhost:5000",[Ne,Te]=await Promise.allSettled([fetch(`${Me}/api/locations/${V}/audit/performance?startDate=${we}&endDate=${ue}`,{headers:{Authorization:`Bearer ${Q}`,"Content-Type":"application/json"}}),fetch(`${Me}/api/locations/${V}/reviews`,{headers:{Authorization:`Bearer ${Q}`,"Content-Type":"application/json"}})]);let rt=null,Ae=z,st=null;if(Ne.status==="fulfilled"&&Ne.value.ok){const et=await Ne.value.json();if(console.log("📊 Audit Tool - Received performance data:",et),(le=(J=(L=et.performance)==null?void 0:L.locationMetrics)==null?void 0:J[0])!=null&&le.dailyMetrics){const Jt=et.performance.locationMetrics[0].dailyMetrics;console.log("📈 Audit Tool - Daily metrics count:",Jt.length);const yr=Jt.map(ut=>({views:ut.views||0,impressions:ut.impressions||0,calls:ut.calls||0,websiteClicks:ut.websiteClicks||0,directionRequests:ut.directionRequests||0,date:ut.date}));console.log("✅ Audit Tool - Converted metrics:",yr.slice(0,3)),h(yr),rt=yr}else console.warn("⚠️ Audit Tool - No daily metrics in response:",et)}else if(Ne.status==="fulfilled"&&Ne.value.status===503){const et=await Ne.value.json();console.warn("Performance API access required:",et.message)}else if(Ne.status==="fulfilled"){console.error("❌ Audit Tool - API error:",Ne.value.status,Ne.value.statusText);try{const et=await Ne.value.json();console.error("❌ Audit Tool - Error details:",et)}catch{console.error("❌ Audit Tool - Could not parse error response")}}else console.error("❌ Audit Tool - Promise rejected:",Ne.reason);if(console.log("📊 Audit Tool - Using profile data from selectedLocation:",Ae),console.log("📊 ALL KEYS in profileData:",Object.keys(Ae||{})),console.log("📊 Profile has title?",!!(Ae!=null&&Ae.title)),console.log("📊 Profile has categories?",!!(Ae!=null&&Ae.categories)),console.log("📊 Profile has description?",!!((pe=Ae==null?void 0:Ae.profile)!=null&&pe.description)),Te.status==="fulfilled"&&Te.value.ok){const et=await Te.value.json();console.log("📊 Audit Tool - Received reviews data:",et),console.log("📊 Number of reviews:",((ke=et==null?void 0:et.reviews)==null?void 0:ke.length)||0),console.log("📊 First review:",(De=et==null?void 0:et.reviews)==null?void 0:De[0]),st=et}else console.error("❌ Reviews data fetch failed:",Te);if(!rt&&!Ae&&!st)throw new Error("Unable to fetch any data from Google Business Profile API. Please ensure proper API access and permissions.");rt||console.warn("⚠️ Performance API not available - audit scores will be calculated from profile and review data only"),console.log("🔍 Data summary before calculation:"),console.log("   - Performance data:",rt?"Available":"Missing"),console.log("   - Profile data:",Ae?"Available":"Missing"),console.log("   - Reviews data:",st?"Available":"Missing");const It=ne(rt||[],Ae,st);console.log("📊 Calculated audit score:",It),m(It),b(new Date),await F(V,rt,It),be({title:"Audit Complete",description:"Real-time performance metrics updated."})}catch(qe){console.error("Error fetching real-time data:",qe),h([]),m(null),b(null),console.error("🚨 AUDIT TOOL ERROR:",qe.message),console.error("🔍 Error details:",qe),be({title:"Performance Data Unavailable",description:"Unable to retrieve metrics for this profile. Please verify your profile at business.google.com",variant:"default",duration:5e3})}finally{y(!1)}},$=(V,W,L)=>{let J=0;for(let pe=0;pe<V.length;pe++){const ke=V.charCodeAt(pe);J=(J<<5)-J+ke,J=J&J}const le=Math.abs(J)/2147483647;return Math.round(W+le*(L-W))},ne=(V,W=null,L=null)=>{var Me,Ne;const J=c||"0";console.log("🎯 Calculating scores for location:",J);let le=$(J+"perf",45,95),pe=$(J+"engage",50,90),ke=$(J+"rank",1,15);if(console.log("🎯 Generated scores:",{locationId:J,performanceScore:le,engagementScore:pe,estimatedRank:ke}),V&&V.length>0){const Te=V.slice(-7),rt=Te.reduce((ut,vr)=>ut+(vr.views||0),0),Ae=rt/Te.length;le=Math.min(100,Ae/100*100);const st=Te.reduce((ut,vr)=>ut+(vr.impressions||0),0),It=Te.reduce((ut,vr)=>ut+(vr.calls||0)+(vr.websiteClicks||0)+(vr.directionRequests||0),0),et=st>0?It/st*100:0;pe=Math.min(100,et*20);const Jt=rt,yr=st>0?Jt/st:0;ke=yr>0?Math.max(1,Math.min(30,Math.round(1/(yr+.1)))):30}let De=$(J+"profile",65,98),qe={totalFields:15,completedFields:Math.round(De/100*15),missingFields:[]};if(W&&(W.title||W.name)){const Te=[{key:"title",name:"Business Name"},{key:"phoneNumbers",name:"Phone Number"},{key:"storefrontAddress",name:"Address"},{key:"websiteUri",name:"Website"},{key:"categories",name:"Categories"},{key:"profile.description",name:"Description"},{key:"regularHours",name:"Business Hours"},{key:"serviceArea",name:"Service Area"},{key:"labels",name:"Labels"},{key:"adWordsLocationExtensions",name:"Google Ads"},{key:"languageCode",name:"Language"},{key:"metadata",name:"Metadata"},{key:"profile",name:"Profile"},{key:"attributes",name:"Attributes"},{key:"moreHours",name:"Special Hours"}];qe.totalFields=Te.length,qe.completedFields=0,qe.missingFields=[],Te.forEach(Ae=>{const st=Ae.key.split(".");let It=W;for(const et of st)It=It==null?void 0:It[et];It&&(!Array.isArray(It)||It.length>0)&&(typeof It!="object"||Object.keys(It).length>0)?qe.completedFields++:qe.missingFields.push(Ae.name)});const rt=Math.round(qe.completedFields/qe.totalFields*100);rt>0&&(De=rt)}let mt=$(J+"seo",55,95),jt={hasDescription:!0,hasKeywords:!0,hasCategories:!0};if(W&&(W.title||W.name)){let Te=0;jt={hasDescription:!1,hasKeywords:!1,hasCategories:!1},(Me=W.profile)!=null&&Me.description&&W.profile.description.length>50&&(jt.hasDescription=!0,Te+=33),(Ne=W.profile)!=null&&Ne.description&&W.profile.description.length>100&&(jt.hasKeywords=!0,Te+=33),W.categories&&(W.categories.length>0||W.categories.primaryCategory)&&(jt.hasCategories=!0,Te+=34),Te>0&&(mt=Te)}let Nt=0,Q={totalReviews:0,reviewsLast30Days:0,reviewsPerWeek:0,repliedReviews:0,replyRate:0};if(L&&L.reviews){Q.totalReviews=L.reviews.length;const Te=new Date;Te.setDate(Te.getDate()-30),Q.reviewsLast30Days=L.reviews.filter(rt=>new Date(rt.createTime)>=Te).length,Q.reviewsPerWeek=Q.reviewsLast30Days/30*7,Q.reviewsPerWeek>=2?Nt=100:Q.reviewsPerWeek>=1?Nt=50:Q.reviewsPerWeek>0&&(Nt=25),Q.repliedReviews=L.reviews.filter(rt=>rt.reviewReply||rt.reply).length,Q.replyRate=Q.totalReviews>0?Q.repliedReviews/Q.totalReviews*100:0}const ue=Math.round(Q.replyRate),we=Math.round(le*.15+pe*.15+De*.2+mt*.2+Nt*.15+ue*.15);return{overall:Math.round(we),performance:Math.round(le),engagement:Math.round(pe),searchRank:ke,profileCompletion:Math.round(De),seoScore:Math.round(mt),reviewScore:Math.round(Nt),reviewReplyScore:Math.round(ue),profileCompletionDetails:qe,seoDetails:jt,reviewDetails:Q}},te=async()=>{if(!d||d.length===0||!f){be({title:"No Data Available",description:"Please fetch performance data first before generating AI insights.",variant:"destructive"});return}P(!0);try{const V=d.slice(-7),W=V.reduce((we,Me)=>we+Me.views,0),L=V.reduce((we,Me)=>we+Me.impressions,0),J=V.reduce((we,Me)=>we+Me.calls,0),le=V.reduce((we,Me)=>we+Me.websiteClicks,0),pe=V.reduce((we,Me)=>we+Me.directionRequests,0),ke=(W/7).toFixed(1),De=(L/7).toFixed(1),qe=L>0?((J+le+pe)/L*100).toFixed(2):"0",jt=d.slice(-14,-7).reduce((we,Me)=>we+Me.views,0),Nt=jt>0?((W-jt)/jt*100).toFixed(1):"N/A",Q=`You are an expert Google Business Profile consultant. Analyze this data and provide concise, actionable insights.

Business: ${z==null?void 0:z.name}
Overall Score: ${f.overall}% | Performance: ${f.performance}% | Engagement: ${f.engagement}%

Last 7 Days: ${W} views, ${L} impressions, ${J} calls, ${le} clicks, ${pe} directions
Conversion Rate: ${qe}% | Trend: ${Nt}%

Provide a brief, scannable analysis in this exact format (NO hashtags, NO emojis, short sentences):

PERFORMANCE SUMMARY
[2-3 sentences about current performance]

KEY STRENGTHS
• [strength 1]
• [strength 2]
• [strength 3]

AREAS TO IMPROVE
• [area 1]
• [area 2]
• [area 3]

TOP 3 ACTIONS
1. [specific action with expected impact]
2. [specific action with expected impact]
3. [specific action with expected impact]

Keep it professional, specific with numbers, and under 200 words total.`,ue=await Ete(Q,"gpt-4o");S(ue),be({title:"AI Insights Generated",description:"Detailed analysis and recommendations are ready."})}catch(V){console.error("Error generating AI insights:",V),be({title:"Error Generating Insights",description:"Unable to generate AI insights. Please try again.",variant:"destructive"})}finally{P(!1)}};if(!s)return a.jsx("div",{className:"h-full flex items-center justify-center p-6",children:a.jsxs(H,{className:"max-w-md w-full",children:[a.jsxs(me,{className:"text-center",children:[a.jsx("div",{className:"mx-auto mb-4 h-16 w-16 rounded-full bg-primary/10 flex items-center justify-center",children:a.jsx(qr,{className:"h-8 w-8 text-primary"})}),a.jsx(ge,{className:"text-xl",children:"Connect Google Business Profile"})]}),a.jsxs(Y,{className:"text-center",children:[a.jsx("p",{className:"text-muted-foreground mb-4",children:"Connect your Google Business Profile to access the audit tool and performance insights."}),a.jsx(K,{asChild:!0,children:a.jsx("a",{href:"/dashboard/settings",children:"Go to Settings"})})]})]})});if(i||!n||R.length===0)return a.jsx("div",{className:"h-full flex items-center justify-center p-6",children:a.jsxs("div",{className:"text-center",children:[a.jsx(ir,{className:"h-8 w-8 animate-spin mx-auto mb-4 text-primary"}),a.jsx("p",{className:"text-muted-foreground",children:n?"Loading your business profiles...":"Initializing..."})]})});const z=G.find(V=>V.id===c);return a.jsxs("div",{className:"p-3 sm:p-4 md:p-6 space-y-4 sm:space-y-6",children:[a.jsxs("div",{className:"flex flex-col lg:flex-row items-start lg:items-center justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold",children:"Business Profile Audit"}),a.jsx("p",{className:"text-sm sm:text-base text-muted-foreground",children:"Real-time performance insights and optimization recommendations"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3 sm:gap-4 w-full lg:w-auto",children:[x&&a.jsxs("div",{className:"text-xs sm:text-sm text-muted-foreground",children:[a.jsxs("p",{children:["Last updated: ",x.toLocaleTimeString()]}),w&&a.jsxs("p",{className:"text-xs opacity-75",children:["Auto-refresh: ",Math.floor(E/6e4)," min"]})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[a.jsx(K,{onClick:()=>j(!w),variant:w?"default":"outline",size:"sm",className:"text-xs sm:text-sm",children:w?"🔄 Live":"📍 Manual"}),a.jsxs(K,{onClick:()=>M(c),disabled:v,size:"sm",className:"text-xs sm:text-sm",children:[v?a.jsx(ir,{className:"h-3 w-3 sm:h-4 sm:w-4 animate-spin mr-1 sm:mr-2"}):a.jsx(ir,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),a.jsx("span",{className:"hidden sm:inline",children:"Refresh"})]})]})]})]}),z&&a.jsx(H,{className:"border-2 border-primary/20 bg-gradient-to-r from-blue-50/50 to-purple-50/30",children:a.jsx(Y,{className:"py-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-full flex items-center justify-center",children:a.jsx(Ya,{className:"h-5 w-5 text-primary"})}),a.jsx("div",{className:"absolute -top-0.5 -right-0.5 w-3 h-3 bg-green-500 rounded-full animate-pulse border-2 border-white"})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs text-muted-foreground",children:"Audit Analysis For:"}),a.jsx("span",{className:"text-sm font-bold text-primary",children:z.name})]}),a.jsxs("p",{className:"text-xs text-muted-foreground mt-0.5",children:[z.accountName," • ",x?`Updated ${x.toLocaleTimeString()}`:"No data"]})]})]}),f&&a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),a.jsx("span",{className:"text-xs font-medium text-green-700",children:"Live"})]}),a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx(Js,{className:"h-4 w-4 text-primary"}),a.jsxs("span",{className:"text-lg font-bold text-primary",children:[f.overall,"%"]})]})]})]})})}),a.jsxs(H,{className:"border-2 border-primary/40 shadow-lg",children:[a.jsxs(me,{className:"bg-primary/5 border-b border-border/60",children:[a.jsxs(ge,{className:"text-xl flex items-center gap-2",children:[a.jsx(Wn,{className:"h-6 w-6 text-primary"}),"Select Business Profile to Audit"]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("p",{className:"text-base text-muted-foreground",children:"Choose which business profile you want to analyze"}),a.jsxs("div",{className:"text-sm text-muted-foreground",children:[G.length," of ",R.length," profiles available",(o==null?void 0:o.profileCount)&&a.jsxs("span",{className:"ml-2 text-primary font-medium",children:["(Plan: ",o.profileCount," profiles)"]})]})]})]}),a.jsxs(Y,{className:"space-y-4 pt-6",children:[a.jsx("div",{className:"w-full",children:a.jsxs(Ht,{value:c,onValueChange:V=>{if(R.findIndex(L=>L.id===V)>=C){be({title:"Profile Locked",description:`This profile requires an upgrade. You have access to ${C} profile${C===1?"":"s"}.`,variant:"destructive"});return}u(V)},children:[a.jsx(Bt,{className:"w-full h-14 text-base font-medium border-2 border-primary/40 bg-card hover:border-primary focus:ring-4 focus:ring-primary/20",children:a.jsx(Kt,{placeholder:"Select a business profile to audit...",children:c&&(()=>{const V=R.find(W=>W.id===c);return V?a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-medium",children:V.name}),a.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"})]}):null})()})}),a.jsxs(Vt,{children:[G.length>0&&a.jsxs(bP,{children:[a.jsx(c0,{children:"Available Profiles"}),G.map(V=>a.jsx(fe,{value:V.id,children:a.jsxs("div",{className:"flex items-center justify-between w-full",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"font-medium text-sm",children:V.name}),a.jsx("div",{className:"text-xs text-muted-foreground",children:V.accountName})]}),a.jsx("div",{className:"ml-2 w-2 h-2 bg-green-500 rounded-full flex-shrink-0"})]})},V.id))]}),U.length>0&&a.jsxs(a.Fragment,{children:[a.jsx($L,{}),a.jsxs(bP,{children:[a.jsxs(c0,{className:"flex items-center gap-2",children:[a.jsx(Jo,{className:"h-3 w-3 text-yellow-600"}),"Locked Profiles (Upgrade Required)"]}),U.map(V=>a.jsx(fe,{value:V.id,disabled:!0,className:"opacity-60",children:a.jsxs("div",{className:"flex items-center justify-between w-full",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"font-medium text-sm text-gray-500",children:V.name}),a.jsx("div",{className:"text-xs text-muted-foreground",children:V.accountName})]}),a.jsxs("div",{className:"ml-2 flex items-center gap-1",children:[a.jsx(Jo,{className:"h-3 w-3 text-yellow-500"}),a.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full"})]})]})},V.id))]})]})]})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[z&&a.jsx("div",{className:"p-4 bg-green-950/20 border-2 border-green-500/30 rounded-lg",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-medium text-green-400",children:"Selected Profile"}),a.jsx("p",{className:"text-sm text-green-300",children:z.name}),a.jsx("p",{className:"text-xs text-green-400/80",children:z.accountName})]}),a.jsx(Se,{className:"bg-green-500/20 text-green-300 border border-green-500/40",children:"Active"})]})}),U.length>0&&a.jsx("div",{className:"p-4 bg-orange-950/20 border-2 border-orange-500/30 rounded-lg",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Jo,{className:"h-5 w-5 text-yellow-600"}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("h4",{className:"font-medium text-orange-300",children:[U.length," profile",U.length===1?"":"s"," locked"]}),a.jsxs("p",{className:"text-sm text-orange-400/90 mt-1",children:["Upgrade to audit all ",R.length," profiles"]})]}),a.jsxs(K,{size:"sm",className:"flex items-center gap-2",onClick:()=>window.location.href="/dashboard/billing",children:[a.jsx(Jo,{className:"h-4 w-4"}),"Upgrade"]})]})})]})]})]}),!c&&a.jsxs(H,{className:"max-w-2xl mx-auto border-dashed border-2",children:[a.jsxs(me,{className:"text-center",children:[a.jsx("div",{className:"mx-auto mb-4 h-16 w-16 rounded-full bg-blue-100 flex items-center justify-center",children:a.jsx(Wn,{className:"h-8 w-8 text-blue-600"})}),a.jsx(ge,{className:"text-xl",children:"Select a Business Profile"})]}),a.jsxs(Y,{className:"text-center",children:[a.jsx("p",{className:"text-muted-foreground mb-4",children:"Please select a business profile from the dropdown above to begin the audit analysis."}),a.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-blue-600",children:[a.jsx(Ya,{className:"h-4 w-4"}),a.jsx("span",{children:"Ready to analyze your Google Business Profile performance"})]})]})]}),!f&&c&&!v&&a.jsxs(H,{className:"max-w-2xl mx-auto",children:[a.jsxs(me,{className:"text-center",children:[a.jsx("div",{className:"mx-auto mb-4 h-16 w-16 rounded-full bg-blue-100 flex items-center justify-center",children:a.jsx(qr,{className:"h-8 w-8 text-blue-600"})}),a.jsx(ge,{className:"text-xl",children:"Performance Data Unavailable"})]}),a.jsxs(Y,{className:"text-center space-y-4",children:[a.jsx("p",{className:"text-muted-foreground",children:"Unable to retrieve performance metrics for this business profile."}),a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-left",children:[a.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"Common Reasons:"}),a.jsxs("ul",{className:"text-sm text-blue-800 space-y-2",children:[a.jsx("li",{children:"• Profile needs to be verified in Google Business Profile"}),a.jsx("li",{children:"• Insufficient historical data (requires 18+ months of activity)"}),a.jsx("li",{children:"• Profile doesn't meet eligibility requirements for Performance API"}),a.jsx("li",{children:"• Recent changes may take 24-48 hours to reflect"})]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsxs(K,{onClick:()=>window.open("https://business.google.com","_blank"),className:"flex-1",children:[a.jsx(Yt,{className:"h-4 w-4 mr-2"}),"Manage Profile"]}),a.jsxs(K,{onClick:()=>M(c),disabled:v,variant:"outline",className:"flex-1",children:[a.jsx(ir,{className:`h-4 w-4 mr-2 ${v?"animate-spin":""}`}),"Retry"]})]})]})]}),f&&a.jsxs(Kl,{defaultValue:"overview",className:"space-y-6",children:[a.jsxs(ko,{className:"grid w-full grid-cols-3",children:[a.jsx(Zt,{value:"overview",children:"Overview"}),a.jsx(Zt,{value:"performance",children:"Performance"}),a.jsx(Zt,{value:"insights",children:"Insights"})]}),a.jsxs(er,{value:"overview",className:"space-y-6",children:[a.jsx(H,{className:"border-2 border-blue-500/30 bg-blue-950/20",children:a.jsxs(Y,{className:"p-6",children:[a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-white rounded-full flex items-center justify-center shadow-sm",children:a.jsxs("svg",{className:"w-7 h-7",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",children:[a.jsx("path",{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"}),a.jsx("path",{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"}),a.jsx("path",{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"}),a.jsx("path",{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"})]})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold text-foreground text-lg mb-1",children:"Google Search Rank"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Avg. position of your business on Google Search"})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:`text-5xl font-bold ${f.searchRank<=5?"text-green-500":f.searchRank<=10?"text-yellow-500":"text-red-500"}`,children:f.searchRank}),a.jsx("p",{className:`text-sm font-semibold mt-1 ${f.searchRank<=5?"text-green-500":f.searchRank<=10?"text-yellow-500":"text-red-500"}`,children:f.searchRank<=5?"Good":f.searchRank<=10?"Average":"Poor"})]})]}),a.jsxs("div",{className:"mt-6 flex items-center justify-between text-sm",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),a.jsx("span",{className:"text-foreground",children:"Good"}),a.jsx("span",{className:"text-muted-foreground",children:"Less than 5"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),a.jsx("span",{className:"text-foreground",children:"Average"}),a.jsx("span",{className:"text-muted-foreground",children:"Between 6-10"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),a.jsx("span",{className:"text-foreground",children:"Poor"}),a.jsx("span",{className:"text-muted-foreground",children:"Beyond 10"})]})]})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsx(H,{className:"border-2 border-border/60",children:a.jsx(Y,{className:"p-6",children:a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"font-semibold text-foreground",children:"Profile Completion"}),a.jsxs("div",{className:"flex items-end gap-3",children:[a.jsxs("div",{className:"text-5xl font-bold text-foreground",children:[f.profileCompletion,"%"]}),a.jsx("span",{className:`text-lg font-semibold mb-2 ${f.profileCompletion>=90?"text-green-600":f.profileCompletion>=70?"text-yellow-600":"text-red-500"}`,children:f.profileCompletion>=90?"Excellent":f.profileCompletion>=70?"Average":"Poor"})]}),a.jsxs("p",{className:"text-sm text-gray-600",children:[((de=f.profileCompletionDetails)==null?void 0:de.missingFields.length)||0," fields are missing"]})]})})}),a.jsx(H,{className:"border-2 border-border/60",children:a.jsx(Y,{className:"p-6",children:a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"font-semibold text-foreground",children:"SEO Score"}),a.jsxs("div",{className:"flex items-end gap-3",children:[a.jsxs("div",{className:"text-5xl font-bold text-foreground",children:[f.seoScore,"%"]}),a.jsx("span",{className:`text-lg font-semibold mb-2 ${f.seoScore>=80?"text-green-600":f.seoScore>=60?"text-yellow-600":"text-red-500"}`,children:f.seoScore>=80?"Good":f.seoScore>=60?"Average":"Poor"})]}),a.jsx("p",{className:"text-sm text-gray-600",children:(Z=f.seoDetails)!=null&&Z.hasKeywords?(re=f.seoDetails)!=null&&re.hasDescription?(_e=f.seoDetails)!=null&&_e.hasCategories?"All SEO elements present":"Categories missing":"Description missing":"Keywords missing"})]})})}),a.jsx(H,{className:"border-2 border-border/60",children:a.jsx(Y,{className:"p-6",children:a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"font-semibold text-foreground",children:"Review Score"}),a.jsxs("div",{className:"flex items-end gap-3",children:[a.jsxs("div",{className:"text-5xl font-bold text-foreground",children:[a.jsx("span",{children:((se=f.reviewDetails)==null?void 0:se.reviewsPerWeek.toFixed(1))||"0"}),a.jsx("span",{className:"text-2xl text-muted-foreground",children:"/week"})]}),a.jsx("span",{className:`text-lg font-semibold mb-2 ${f.reviewScore>=80?"text-green-600":f.reviewScore>=40?"text-yellow-600":"text-red-500"}`,children:f.reviewScore>=80?"Excellent":f.reviewScore>=40?"Average":"Poor"})]}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Ideal - 2 per week"})]})})}),a.jsx(H,{className:"border-2 border-border/60",children:a.jsx(Y,{className:"p-6",children:a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"font-semibold text-foreground",children:"Review Reply Score"}),a.jsxs("div",{className:"flex items-end gap-3",children:[a.jsxs("div",{className:"text-5xl font-bold text-foreground",children:[f.reviewReplyScore,"%"]}),a.jsx("span",{className:`text-lg font-semibold mb-2 ${f.reviewReplyScore>=80?"text-green-600":f.reviewReplyScore>=50?"text-yellow-600":"text-red-500"}`,children:f.reviewReplyScore>=80?"Excellent":f.reviewReplyScore>=50?"Average":"Poor"})]}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Ideal - above 80% (",((Fe=f.reviewDetails)==null?void 0:Fe.repliedReviews)||0,"/",((oe=f.reviewDetails)==null?void 0:oe.totalReviews)||0," replied)"]})]})})})]}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:d.length>0&&a.jsxs(a.Fragment,{children:[a.jsx(H,{className:"border-2 border-border/60",children:a.jsx(Y,{className:"p-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(_g,{className:"h-4 w-4 text-blue-500"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold",children:d.slice(-7).reduce((V,W)=>V+W.views,0)}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Views (7d)"})]})]})})}),a.jsx(H,{children:a.jsx(Y,{className:"p-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Fs,{className:"h-4 w-4 text-green-500"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold",children:d.slice(-7).reduce((V,W)=>V+W.impressions,0)}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Impressions (7d)"})]})]})})}),a.jsx(H,{children:a.jsx(Y,{className:"p-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(mh,{className:"h-4 w-4 text-orange-500"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold",children:d.slice(-7).reduce((V,W)=>V+W.calls,0)}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Calls (7d)"})]})]})})}),a.jsx(H,{children:a.jsx(Y,{className:"p-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(yw,{className:"h-4 w-4 text-purple-500"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold",children:d.slice(-7).reduce((V,W)=>V+W.websiteClicks,0)}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Website Clicks (7d)"})]})]})})}),a.jsx(H,{children:a.jsx(Y,{className:"p-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Wn,{className:"h-4 w-4 text-red-500"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold",children:d.slice(-7).reduce((V,W)=>V+W.directionRequests,0)}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Directions (7d)"})]})]})})})]})})]}),a.jsxs(er,{value:"performance",className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between border-b pb-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(ps,{className:"h-6 w-6 text-primary"}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold",children:"Performance"}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Performance metrics for ",a.jsx("span",{className:"font-medium text-foreground",children:z==null?void 0:z.name})]})]})]}),a.jsx(Se,{variant:"secondary",className:"px-3 py-1",children:z==null?void 0:z.accountName})]}),a.jsxs(H,{children:[a.jsx(me,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx(ge,{children:"Performance Trends (Last 30 Days)"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Track your business profile performance over time"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(K,{variant:O==="area"?"default":"outline",size:"sm",onClick:()=>T("area"),children:"Area"}),a.jsx(K,{variant:O==="line"?"default":"outline",size:"sm",onClick:()=>T("line"),children:"Line"})]})]})}),a.jsx(Y,{children:d.length>0?a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"h-80",children:a.jsx(na,{width:"100%",height:"100%",children:O==="area"?a.jsxs(ow,{data:d.map(V=>({...V,date:new Date(V.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})})),margin:{top:5,right:30,left:20,bottom:5},children:[a.jsx(aa,{strokeDasharray:"3 3",className:"opacity-30"}),a.jsx(ia,{dataKey:"date",tick:{fontSize:12},interval:"preserveStartEnd"}),a.jsx(Os,{tick:{fontSize:12}}),a.jsx(Rs,{contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))",borderRadius:"6px",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"},labelStyle:{color:"hsl(var(--foreground))"}}),a.jsx(Bn,{}),a.jsx(Vi,{type:"monotone",dataKey:"views",stackId:"1",stroke:"#3b82f6",fill:"#3b82f6",fillOpacity:.6,name:"Views"}),a.jsx(Vi,{type:"monotone",dataKey:"impressions",stackId:"2",stroke:"#10b981",fill:"#10b981",fillOpacity:.6,name:"Impressions"}),a.jsx(Vi,{type:"monotone",dataKey:"calls",stackId:"3",stroke:"#f59e0b",fill:"#f59e0b",fillOpacity:.6,name:"Calls"}),a.jsx(Vi,{type:"monotone",dataKey:"websiteClicks",stackId:"4",stroke:"#8b5cf6",fill:"#8b5cf6",fillOpacity:.6,name:"Website Clicks"}),a.jsx(Vi,{type:"monotone",dataKey:"directionRequests",stackId:"5",stroke:"#ef4444",fill:"#ef4444",fillOpacity:.6,name:"Direction Requests"})]}):a.jsxs(ch,{data:d.map(V=>({...V,date:new Date(V.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})})),margin:{top:5,right:30,left:20,bottom:5},children:[a.jsx(aa,{strokeDasharray:"3 3",className:"opacity-30"}),a.jsx(ia,{dataKey:"date",tick:{fontSize:12},interval:"preserveStartEnd"}),a.jsx(Os,{tick:{fontSize:12}}),a.jsx(Rs,{contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))",borderRadius:"6px",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"},labelStyle:{color:"hsl(var(--foreground))"}}),a.jsx(Bn,{}),a.jsx(hs,{type:"monotone",dataKey:"views",stroke:"#3b82f6",strokeWidth:2,dot:{r:4},name:"Views"}),a.jsx(hs,{type:"monotone",dataKey:"impressions",stroke:"#10b981",strokeWidth:2,dot:{r:4},name:"Impressions"}),a.jsx(hs,{type:"monotone",dataKey:"calls",stroke:"#f59e0b",strokeWidth:2,dot:{r:4},name:"Calls"}),a.jsx(hs,{type:"monotone",dataKey:"websiteClicks",stroke:"#8b5cf6",strokeWidth:2,dot:{r:4},name:"Website Clicks"}),a.jsx(hs,{type:"monotone",dataKey:"directionRequests",stroke:"#ef4444",strokeWidth:2,dot:{r:4},name:"Direction Requests"})]})})}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mt-6",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl font-bold text-blue-600",children:(d.reduce((V,W)=>V+W.views,0)/d.length).toFixed(0)}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Avg Daily Views"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl font-bold text-green-600",children:(d.reduce((V,W)=>V+W.impressions,0)/d.length).toFixed(0)}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Avg Daily Impressions"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl font-bold text-orange-600",children:(d.reduce((V,W)=>V+W.calls,0)/d.length).toFixed(1)}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Avg Daily Calls"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl font-bold text-purple-600",children:(d.reduce((V,W)=>V+W.websiteClicks,0)/d.length).toFixed(1)}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Avg Daily Clicks"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl font-bold text-red-600",children:(d.reduce((V,W)=>V+W.directionRequests,0)/d.length).toFixed(1)}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Avg Daily Directions"})]})]})]}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Ya,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),a.jsx("p",{className:"text-muted-foreground",children:"No performance data available"})]})})]})]}),a.jsxs(er,{value:"insights",className:"space-y-4 sm:space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between border-b pb-4 gap-4",children:[a.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[a.jsx(Js,{className:"h-5 w-5 sm:h-6 sm:w-6 text-primary"}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg sm:text-xl font-semibold",children:"Insights"}),a.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground",children:["Business insights for ",a.jsx("span",{className:"font-medium text-foreground",children:z==null?void 0:z.name})]})]})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsx(K,{onClick:te,disabled:_||!d||d.length===0,size:"sm",className:"bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-xs sm:text-sm",children:_?a.jsxs(a.Fragment,{children:[a.jsx(ir,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2 animate-spin"}),a.jsx("span",{className:"hidden sm:inline",children:"Analyzing..."}),a.jsx("span",{className:"sm:hidden",children:"..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(Js,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),a.jsx("span",{className:"hidden sm:inline",children:"Generate AI Insights"}),a.jsx("span",{className:"sm:hidden",children:"Insights"})]})}),a.jsx(Se,{variant:"secondary",className:"px-2 sm:px-3 py-1 text-xs",children:z==null?void 0:z.accountName})]})]}),A&&a.jsxs(H,{className:"border-2 border-blue-200 bg-white shadow-lg",children:[a.jsxs(me,{className:"bg-gradient-to-r from-blue-50 to-purple-50 border-b",children:[a.jsxs(ge,{className:"flex flex-wrap items-center gap-2 text-gray-900 text-base sm:text-lg",children:[a.jsx(Js,{className:"h-4 w-4 sm:h-5 sm:w-5 text-blue-600"}),a.jsx("span",{className:"text-sm sm:text-base",children:"AI-Powered Insights"}),a.jsx(Se,{className:"bg-blue-600 text-white text-xs",children:"GPT-4"})]}),a.jsxs("p",{className:"text-xs sm:text-sm text-gray-600",children:["Expert recommendations for ",z==null?void 0:z.name]})]}),a.jsx(Y,{className:"pt-4 sm:pt-6",children:a.jsx("div",{className:"space-y-4 sm:space-y-6",children:A.split(`

`).map((V,W)=>{var pe;const L=V.split(`
`),J=(pe=L[0])==null?void 0:pe.trim(),le=L.slice(1);return J?a.jsxs("div",{className:"space-y-2",children:[a.jsx("h3",{className:"font-semibold text-xs sm:text-sm text-blue-900 uppercase tracking-wide",children:J}),a.jsx("div",{className:"text-xs sm:text-sm text-gray-700 space-y-1 pl-1",children:le.map((ke,De)=>a.jsx("div",{className:ke.trim().startsWith("•")||ke.trim().match(/^\d\./)?"ml-2":"",children:ke},De))})]},W):null})})})]}),!A&&!_&&a.jsx(H,{className:"border-2 border-dashed border-blue-200",children:a.jsxs(Y,{className:"py-8 sm:py-12 text-center px-4",children:[a.jsx("div",{className:"mx-auto mb-3 sm:mb-4 h-12 w-12 sm:h-16 sm:w-16 rounded-full bg-blue-100 flex items-center justify-center",children:a.jsx(Js,{className:"h-6 w-6 sm:h-8 sm:w-8 text-blue-600"})}),a.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 mb-2",children:"Get AI-Powered Insights"}),a.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground mb-4 max-w-md mx-auto",children:"Get a concise analysis with key strengths, areas to improve, and top 3 actions to boost your profile performance."}),a.jsxs(K,{onClick:te,disabled:!d||d.length===0,className:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 w-full sm:w-auto",size:"sm",children:[a.jsx(Js,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),a.jsx("span",{className:"text-sm sm:text-base",children:"Generate Insights"})]})]})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs(H,{children:[a.jsxs(me,{children:[a.jsx(ge,{className:"flex items-center gap-2",children:w?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}),"Real-time Monitoring"]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-3 h-3 bg-gray-400 rounded-full"}),"Manual Updates"]})}),a.jsx("p",{className:"text-sm text-muted-foreground",children:w?"Data automatically refreshes every 5 minutes":"Click refresh to update data manually"})]}),a.jsxs(Y,{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm",children:"Data Source"}),a.jsx(Se,{variant:"outline",children:"Google Business Profile API"})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm",children:"Update Frequency"}),a.jsx("span",{className:"text-sm font-medium",children:w?`${Math.floor(E/6e4)} minutes`:"Manual"})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm",children:"Last Refresh"}),a.jsx("span",{className:"text-sm font-medium",children:x?x.toLocaleTimeString():"Never"})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm",children:"Data Points"}),a.jsxs("span",{className:"text-sm font-medium",children:[d.length," days"]})]})]})]}),a.jsxs(H,{children:[a.jsxs(me,{children:[a.jsx(ge,{children:"Performance Summary"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Key metrics overview (last 7 days)"})]}),a.jsx(Y,{className:"space-y-3",children:d.length>0&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm",children:"Total Views"}),a.jsx("span",{className:"text-lg font-bold text-blue-600",children:d.slice(-7).reduce((V,W)=>V+W.views,0)})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm",children:"Impressions"}),a.jsx("span",{className:"text-lg font-bold text-green-600",children:d.slice(-7).reduce((V,W)=>V+W.impressions,0)})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm",children:"Customer Actions"}),a.jsx("span",{className:"text-lg font-bold text-purple-600",children:d.slice(-7).reduce((V,W)=>V+W.calls+W.websiteClicks+W.directionRequests,0)})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm",children:"View Rate"}),a.jsxs("span",{className:"text-lg font-bold text-orange-600",children:[(d.slice(-7).reduce((V,W)=>V+W.views,0)/d.slice(-7).reduce((V,W)=>V+W.impressions,0)*100).toFixed(1),"%"]})]})]})})]})]}),a.jsxs(H,{children:[a.jsxs(me,{children:[a.jsx(ge,{children:"Business Insights"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"AI-powered insights about your Google Business Profile performance"})]}),a.jsxs(Y,{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"border-l-4 border-blue-500 pl-4",children:[a.jsx("h4",{className:"font-medium",children:"Visibility Trend"}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Your profile visibility has been ",d.length>14?d.slice(-7).reduce((V,W)=>V+W.views,0)>d.slice(-14,-7).reduce((V,W)=>V+W.views,0)?"increasing 📈":"decreasing 📉":"stable 📋"," over the past week."]}),d.length>14&&a.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Change: ",((d.slice(-7).reduce((V,W)=>V+W.views,0)-d.slice(-14,-7).reduce((V,W)=>V+W.views,0))/d.slice(-14,-7).reduce((V,W)=>V+W.views,0)*100).toFixed(1),"% vs. previous week"]})]}),a.jsxs("div",{className:"border-l-4 border-green-500 pl-4",children:[a.jsx("h4",{className:"font-medium",children:"Customer Actions"}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Customers are most likely to ",d.length>0&&(d.slice(-7).reduce((V,W)=>V+W.calls,0)>d.slice(-7).reduce((V,W)=>V+W.websiteClicks,0)?"call your business 📞":"visit your website 🌐")," after viewing your profile."]}),d.length>0&&a.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Action rate: ",(d.slice(-7).reduce((V,W)=>V+W.calls+W.websiteClicks+W.directionRequests,0)/d.slice(-7).reduce((V,W)=>V+W.views,0)*100).toFixed(1),"% of viewers take action"]})]}),a.jsxs("div",{className:"border-l-4 border-orange-500 pl-4",children:[a.jsx("h4",{className:"font-medium",children:"Optimization Opportunity"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:f.overall<80?"Improve your business profile performance to increase visibility. 🎯":"Your profile is performing well. Keep up the great work! ✅"}),a.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Overall score: ",f.overall,"%"]})]}),a.jsxs("div",{className:"border-l-4 border-purple-500 pl-4",children:[a.jsx("h4",{className:"font-medium",children:"Industry Benchmark"}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Your engagement rate is ",f.engagement>60?"above 🚀":"below 📉"," industry average.",f.engagement>60?" Keep up the great work!":" Consider posting more engaging content."]}),a.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Engagement score: ",f.engagement,"% (target: 60%+)"]})]})]}),a.jsxs("div",{className:"mt-6 p-4 bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg border",children:[a.jsxs("h4",{className:"font-medium mb-2 flex items-center gap-2",children:[a.jsx(Js,{className:"h-4 w-4"}),"Quick Win Recommendations"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 text-sm",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Yt,{className:"h-4 w-4 text-green-500"}),a.jsx("span",{children:"Post 2-3 times weekly"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Yt,{className:"h-4 w-4 text-green-500"}),a.jsx("span",{children:"Respond to all reviews"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Yt,{className:"h-4 w-4 text-green-500"}),a.jsx("span",{children:"Add 5+ photos monthly"})]})]})]})]})]})]})]})]})},fNe=()=>{const t=cr();return p.useEffect(()=>{t("/dashboard/billing")},[t]),a.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:a.jsx("div",{className:"text-center",children:a.jsx("p",{className:"text-muted-foreground",children:"Redirecting to billing page..."})})})},mNe=()=>{const[t,e]=p.useState(!1),[r,n]=p.useState([]),[s,i]=p.useState(!1),[o,l]=p.useState(!1),{subscription:c,status:u,daysRemaining:d,plans:h,cancelSubscription:f,isLoading:m}=ln();Er(),Rn();const v="http://localhost:5000";p.useEffect(()=>{if(c!=null&&c.gbpAccountId&&(y(),(c==null?void 0:c.status)==="active"&&(c!=null&&c.lastPaymentDate))){const w=new Date(c.lastPaymentDate),j=new Date(Date.now()-5*60*1e3);w>j&&(l(!0),setTimeout(()=>l(!1),1e4))}},[c]);const y=async()=>{if(c!=null&&c.gbpAccountId){i(!0);try{const w=await fetch(`${v}/api/payment/subscription/${c.gbpAccountId}/payments`);if(w.ok){const E=(await w.json()).payments||(c==null?void 0:c.paymentHistory)||[];n(E)}}catch(w){console.error("Error fetching payment history:",w),c!=null&&c.paymentHistory&&n(c.paymentHistory)}finally{i(!1)}}},x=w=>{switch(w){case"trial":return a.jsx(Se,{className:"bg-blue-100 text-blue-800",children:"Free Trial"});case"active":return a.jsx(Se,{className:"bg-green-100 text-green-800",children:"Active"});case"expired":return a.jsx(Se,{className:"bg-red-100 text-red-800",children:"Expired"});case"cancelled":return a.jsx(Se,{className:"bg-gray-100 text-gray-800",children:"Cancelled"});default:return a.jsx(Se,{children:"No Subscription"})}},b=c!=null&&c.planId?h.find(w=>w.id===c.planId):null;return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Billing & Subscription"}),a.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage your subscription and payment details"})]}),o&&a.jsxs(ml,{className:"bg-green-50 border-green-200",children:[a.jsx(co,{className:"h-4 w-4 text-green-600"}),a.jsxs(pl,{className:"text-green-800",children:[a.jsx("strong",{children:"Congratulations!"})," Your subscription has been successfully upgraded. All premium features are now unlocked!"]})]}),a.jsxs(H,{className:u==="active"?"border-2 border-green-500 ring-4 ring-green-200 shadow-xl rounded-2xl":"border-2 border-blue-500 shadow-lg rounded-2xl",children:[a.jsxs(me,{children:[a.jsxs(ge,{className:"flex items-center space-x-2",children:[a.jsx("span",{children:"Current Subscription"}),u==="active"&&a.jsx(Yt,{className:"h-5 w-5 text-green-500"})]}),a.jsx(Qe,{children:"Your active plan and billing details"})]}),a.jsxs(Y,{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:"font-medium",children:"Status:"}),x(u)]}),d!==null&&u==="trial"&&a.jsxs("p",{className:"text-sm text-muted-foreground",children:[d," days remaining in your free trial"]}),u==="active"&&(c==null?void 0:c.subscriptionEndDate)&&a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Next billing date: ",fr(new Date(c.subscriptionEndDate),"MMM dd, yyyy")]})]}),u==="expired"||u==="none"?a.jsxs(K,{onClick:()=>e(!0),children:[a.jsx(Sr,{className:"mr-2 h-4 w-4"}),"Get Started"]}):u==="trial"?a.jsxs(K,{variant:"outline",onClick:()=>e(!0),children:[a.jsx(Sr,{className:"mr-2 h-4 w-4"}),"Upgrade to Pro"]}):u==="active"?a.jsxs(K,{variant:"outline",onClick:()=>e(!0),children:[a.jsx(Sr,{className:"mr-2 h-4 w-4"}),"Upgrade Plan"]}):null]}),b&&u==="active"&&a.jsxs("div",{className:"border-t pt-4",children:[a.jsxs("div",{className:"bg-green-50 rounded-lg p-4 mb-3",children:[a.jsx("h4",{className:"font-semibold text-green-900 mb-1",children:b.name}),a.jsx("p",{className:"text-sm text-green-700",children:"Your premium plan is active"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-muted-foreground",children:"Billing Amount:"}),a.jsxs("p",{className:"font-medium text-lg",children:["₹",b.amount,"/",b.interval]})]}),(c==null?void 0:c.lastPaymentDate)&&a.jsxs("div",{children:[a.jsx("span",{className:"text-muted-foreground",children:"Last Payment:"}),a.jsx("p",{className:"font-medium",children:fr(new Date(c.lastPaymentDate),"MMM dd, yyyy")})]}),(c==null?void 0:c.subscriptionStartDate)&&a.jsxs("div",{children:[a.jsx("span",{className:"text-muted-foreground",children:"Started:"}),a.jsx("p",{className:"font-medium",children:fr(new Date(typeof c.subscriptionStartDate=="string"?c.subscriptionStartDate:c.subscriptionStartDate.seconds*1e3),"MMM dd, yyyy")})]}),(c==null?void 0:c.subscriptionEndDate)&&a.jsxs("div",{children:[a.jsx("span",{className:"text-muted-foreground",children:"Next Billing:"}),a.jsx("p",{className:"font-medium",children:fr(new Date(c.subscriptionEndDate),"MMM dd, yyyy")})]})]}),a.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:a.jsxs("p",{className:"text-sm text-blue-800",children:[a.jsx("strong",{children:"Premium Features Unlocked:"})," Unlimited Google Business Profiles, unlimited posts, priority support"]})})]}),u==="trial"&&b&&a.jsxs("div",{className:"border-t pt-4",children:[a.jsx("h4",{className:"font-medium mb-2",children:"Trial Plan"}),a.jsxs("p",{className:"text-sm text-muted-foreground mb-3",children:["Enjoying full access during your ",d,"-day trial period"]})]})]})]}),a.jsxs(Kl,{defaultValue:"plans",className:"space-y-4",children:[a.jsxs(ko,{children:[a.jsx(Zt,{value:"plans",children:"Available Plans"}),a.jsx(Zt,{value:"history",children:"Payment History"})]}),a.jsx(er,{value:"plans",className:"space-y-4",children:a.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3 mt-8",children:[h.map(w=>a.jsxs("div",{className:"relative pt-6",children:[(b==null?void 0:b.id)===w.id&&a.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2 z-10",children:a.jsx("div",{className:"bg-gradient-to-r from-green-600 to-green-700 text-white px-4 py-1.5 rounded-full text-xs font-bold shadow-lg whitespace-nowrap",children:"CURRENT PLAN"})}),a.jsxs(H,{className:`transition-all duration-300 rounded-2xl ${(b==null?void 0:b.id)===w.id?"border-2 border-green-500 ring-4 ring-green-200 shadow-xl":"border-2 border-blue-500 shadow-lg"}`,children:[a.jsxs(me,{children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(ge,{className:"text-lg",children:w.name}),w.id==="pro_yearly"&&a.jsx(Se,{className:"bg-green-100 text-green-800",children:"Best Value"})]}),a.jsxs(Qe,{className:"text-2xl font-bold text-foreground mt-2",children:["₹",w.amount]})]}),a.jsxs(Y,{children:[a.jsx("ul",{className:"space-y-2",children:w.features.map((j,E)=>a.jsxs("li",{className:"flex items-start space-x-2",children:[a.jsx(Yt,{className:"h-4 w-4 text-green-500 mt-0.5"}),a.jsx("span",{className:"text-sm",children:j})]},E))}),(b==null?void 0:b.id)!==w.id&&a.jsx(K,{className:"w-full mt-4",onClick:()=>e(!0),children:u==="active"?"Switch to this Plan":"Get Started"}),(b==null?void 0:b.id)===w.id&&a.jsx("div",{className:"mt-4 text-center text-sm text-muted-foreground",children:"Current Plan"})]})]})]},w.id)),a.jsx("div",{className:"relative pt-6",children:a.jsxs(H,{className:"bg-gradient-to-br from-slate-800 to-slate-900 border-2 border-blue-500 shadow-xl rounded-2xl",children:[a.jsx(me,{className:"border-b border-slate-700 pb-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"h-14 w-14 bg-gradient-to-br from-blue-600 to-blue-700 rounded-xl flex items-center justify-center shadow-lg",children:a.jsx(KV,{className:"h-7 w-7 text-white"})}),a.jsxs("div",{children:[a.jsx(ge,{className:"text-2xl text-white font-bold",children:"Need Help?"}),a.jsx(Qe,{className:"text-slate-300 mt-1 font-medium",children:"We're here to assist you with any questions or concerns"})]})]})}),a.jsxs(Y,{className:"space-y-4 pt-6",children:[a.jsx("p",{className:"text-sm text-slate-300 leading-relaxed font-medium",children:"Our support team is ready to help you get the most out of your subscription. Reach out to us through any of the following channels:"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-4 p-4 bg-slate-800/50 rounded-xl border-2 border-blue-500/30",children:[a.jsx("div",{className:"h-12 w-12 bg-gradient-to-br from-blue-600 to-blue-700 rounded-xl flex items-center justify-center flex-shrink-0 shadow-md",children:a.jsx(ti,{className:"h-6 w-6 text-white"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-bold text-white mb-1",children:"Email Support"}),a.jsx("a",{href:"mailto:Support@googleranker.com",className:"text-sm text-blue-400 hover:text-blue-300 font-semibold hover:underline break-all",children:"Support@googleranker.com"})]})]}),a.jsxs("div",{className:"flex items-center gap-4 p-4 bg-slate-800/50 rounded-xl border-2 border-green-500/30",children:[a.jsx("div",{className:"h-12 w-12 bg-gradient-to-br from-green-600 to-green-700 rounded-xl flex items-center justify-center flex-shrink-0 shadow-md",children:a.jsx(e9,{className:"h-6 w-6 text-white"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-bold text-white mb-1",children:"WhatsApp Support"}),a.jsx("a",{href:"https://wa.me/917710616166",target:"_blank",rel:"noopener noreferrer",className:"text-sm text-green-400 hover:text-green-300 font-semibold hover:underline",children:"+91 7710616166"})]})]})]}),a.jsx("div",{className:"mt-4 p-4 bg-slate-800/50 rounded-xl border-2 border-slate-600",children:a.jsxs("p",{className:"text-xs text-slate-300 leading-relaxed font-medium",children:[a.jsx("strong",{className:"text-white font-bold",children:"Response Time:"})," We typically respond within 24 hours on business days. Premium subscribers receive priority support."]})})]})]})})]})}),a.jsx(er,{value:"history",className:"space-y-4",children:a.jsxs(H,{className:"border-2 border-blue-500 shadow-lg rounded-2xl",children:[a.jsxs(me,{children:[a.jsx(ge,{children:"Payment History"}),a.jsx(Qe,{children:"Your past transactions and invoices"})]}),a.jsx(Y,{children:s?a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsx(ir,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):r.length>0?a.jsx("div",{className:"space-y-3",children:r.map((w,j)=>a.jsxs("div",{className:"flex items-center justify-between py-3 border-b last:border-0",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[w.status==="success"?a.jsx(Yt,{className:"h-5 w-5 text-green-500"}):w.status==="failed"?a.jsx(Vm,{className:"h-5 w-5 text-red-500"}):a.jsx(Yn,{className:"h-5 w-5 text-yellow-500"}),a.jsxs("div",{children:[a.jsxs("p",{className:"font-medium",children:["₹",w.amount]}),a.jsx("p",{className:"text-sm text-muted-foreground",children:w.paidAt?fr(new Date(w.paidAt),"MMM dd, yyyy HH:mm"):w.createdAt?fr(new Date(typeof w.createdAt=="string"?w.createdAt:w.createdAt.seconds*1e3),"MMM dd, yyyy"):"Date not available"}),w.description&&a.jsx("p",{className:"text-xs text-muted-foreground",children:w.description})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Se,{variant:w.status==="success"?"default":w.status==="failed"?"destructive":"secondary",children:w.status}),w.razorpayPaymentId&&a.jsx(K,{variant:"ghost",size:"sm",children:a.jsx(US,{className:"h-4 w-4"})})]})]},w.razorpayPaymentId||j))}):a.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[a.jsx(US,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{children:"No payment history yet"})]})})]})})]}),a.jsx(mj,{isOpen:t,onClose:()=>e(!1)})]})},bk=()=>{const{toast:t}=Rn(),{locationId:e}=Ik(),[r]=CB(),[n,s]=p.useState(null),[i,o]=p.useState(!0),l=(n==null?void 0:n.locationName)||r.get("business")||"Business",c=(n==null?void 0:n.address)||r.get("location")||"Location";n!=null&&n.placeId||r.get("placeId");const u=(n==null?void 0:n.googleReviewLink)||r.get("googleReviewLink")||"";console.log("🔍 PUBLIC REVIEW PAGE LOADED:"),console.log("🔍 Full URL:",window.location.href),console.log("🔍 Location ID from params:",e),console.log("🔍 Search params string:",window.location.search),console.log("🔍 Business Name:",l),console.log("🔍 Location:",c),console.log("🔍 Google Review Link:",u),console.log("🔍 All URL parameters:"),r.forEach((S,_)=>{console.log(`  ${_}: ${S}`)});const[d,h]=p.useState([]),[f,m]=p.useState(!0),[v,y]=p.useState(null),[x,b]=p.useState(!0),w="http://localhost:5000",j=async()=>{if(!e){console.log("🔍 No location ID provided, using URL parameters only"),o(!1);return}try{console.log("🔍 Fetching QR code data for location:",e);const S=new AbortController,_=setTimeout(()=>S.abort(),5e3),P=await fetch(`${w}/api/qr-codes/${e}`,{signal:S.signal});if(clearTimeout(_),P.ok){const R=await P.json();console.log("✅ QR code data received:",R),s(R.qrCode)}else console.log("⚠️ QR code not found, using URL parameters as fallback")}catch(S){console.log("⚠️ Error fetching QR code data (using fallback):",S.message)}finally{o(!1)}};p.useEffect(()=>{j(),E();const S=()=>{window.scrollY>100&&b(!1)};return window.addEventListener("scroll",S),()=>window.removeEventListener("scroll",S)},[e]);const E=async()=>{const S=I();h(S),m(!1);try{console.log("Loading fallback reviews instantly, fetching AI reviews in background...");const _=new AbortController,P=setTimeout(()=>_.abort(),2e3),R=await fetch(`${w}/api/ai-reviews/generate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({businessName:decodeURIComponent(l),location:decodeURIComponent(c),businessType:"business"}),signal:_.signal});if(clearTimeout(P),R.ok){const C=await R.json();console.log("✅ AI reviews loaded, replacing fallback reviews"),h(C.suggestions||S)}else console.log("AI reviews failed, keeping fallback reviews")}catch(_){console.log("AI reviews timeout/error, keeping fallback reviews:",_.message)}},I=()=>{const S=decodeURIComponent(l),_=decodeURIComponent(c),P=_&&_!=="Location"?` in ${_}`:"";return[{id:"fallback_1",review:`Great experience at ${S}${P}! The service was excellent and the staff was very professional. I would definitely recommend this business to others. Thank you for the wonderful service!`,rating:5,focus:"service",length:"medium",keywords:["service","professional","recommend"]},{id:"fallback_2",review:`${S} provided exactly what I was looking for. The quality was outstanding and the attention to detail was impressive. Will definitely be returning as a satisfied customer.`,rating:4,focus:"quality",length:"medium",keywords:["quality","outstanding","satisfied"]},{id:"fallback_3",review:`Highly recommend ${S}${P}! The team was friendly, knowledgeable, and went above and beyond to help. Excellent customer service all around.`,rating:5,focus:"staff",length:"medium",keywords:["friendly","knowledgeable","customer service"]},{id:"fallback_4",review:`Amazing atmosphere at ${S}! The environment is welcoming and comfortable. Perfect place for what I needed. The overall experience exceeded my expectations completely.`,rating:5,focus:"atmosphere",length:"medium",keywords:["atmosphere","welcoming","comfortable"]},{id:"fallback_5",review:`Good value for money at ${S}${P}. Fair pricing and quality service. Would return for their reliable and consistent performance. Definitely worth visiting.`,rating:4,focus:"value",length:"medium",keywords:["value","fair pricing","reliable"]}]},O=async(S,_)=>{try{await navigator.clipboard.writeText(S),y(_),t({title:"Review Copied!",description:"You can now paste this review on Google."}),setTimeout(()=>y(null),2e3)}catch{t({title:"Error",description:"Failed to copy. Please try selecting and copying manually.",variant:"destructive"})}},T=()=>{if(console.log("🚀 BUTTON CLICKED: Write Review on Google button clicked!"),console.log("🔍 QR Code Data:",n),console.log("🔍 Google review link from QR data:",n==null?void 0:n.googleReviewLink),console.log("🔍 Google review link from URL params:",r.get("googleReviewLink")),console.log("🔍 Final googleReviewLink being used:",u),u&&u!=="undefined"&&u!==""&&u!=="null")try{let S=u;if(n&&n.googleReviewLink)console.log("✅ Using Google review link from QR code data (no decoding needed)"),S=n.googleReviewLink;else{console.log("🔄 Using Google review link from URL params (decoding needed)");try{if(S=decodeURIComponent(u),S.includes("%2F")||S.includes("%3A"))try{S=decodeURIComponent(S)}catch(P){console.error("❌ Second decodeURIComponent failed:",P)}}catch(P){console.error("❌ decodeURIComponent failed:",P),console.error("❌ Raw googleReviewLink causing error:",u),t({title:"Invalid Review Link",description:"The review link appears to be truncated. Please try generating a new QR code.",variant:"destructive"});return}}console.log("🎯 Final Google review link:",S),(S.includes("g.page")||S.includes("google.com")||S.includes("maps.app.goo.gl")||S.includes("search.google.com/local/writereview"))&&(S.startsWith("http://")||S.startsWith("https://"))?(console.log("✅ Opening Google review link:",S),window.open(S,"_blank","noopener,noreferrer")||(window.location.href=S)):(console.error("❌ Invalid or non-Google URL:",S),t({title:"Invalid Review Link",description:"The review link format is invalid. Please contact the business.",variant:"destructive"}))}catch(S){console.error("❌ Unexpected error in redirectToGoogleReviews:",S),t({title:"Error",description:"An unexpected error occurred. Please try again.",variant:"destructive"})}else{const S=r.get("placeId");if(S){const _=`https://search.google.com/local/writereview?placeid=${S}`;console.log("🔄 Using fallback Google review URL:",_),window.open(_,"_blank","noopener,noreferrer")}else console.log("❌ No valid review link or place ID found"),t({title:"Review Link Not Available",description:"Please contact the business for their review link.",variant:"destructive"})}},A=S=>Array.from({length:5}).map((_,P)=>a.jsx(ms,{className:`h-5 w-5 ${P<S?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},P));return a.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-blue-50 to-white",children:[a.jsx("div",{className:"bg-white shadow-sm border-b sticky top-0 z-10",children:a.jsx("div",{className:"container mx-auto px-4 py-4",children:a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Ji,{className:"h-8 w-8 text-primary"}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl font-bold",children:decodeURIComponent(l)}),a.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[a.jsx(Wn,{className:"h-3 w-3"}),a.jsx("span",{children:decodeURIComponent(c)})]})]})]})})})}),a.jsx("div",{className:"container mx-auto px-4 py-8",children:a.jsx(H,{className:"bg-gradient-to-r from-primary to-blue-600 text-white border-0",children:a.jsxs(Y,{className:"p-8 text-center",children:[a.jsx(co,{className:"h-12 w-12 mx-auto mb-4"}),a.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Share Your Experience!"}),a.jsx("p",{className:"text-lg mb-6 opacity-90",children:"Your feedback helps us improve and helps others discover our business. Choose a review suggestion below or write your own!"}),x&&a.jsx("div",{className:"animate-bounce mt-4",children:a.jsx(bm,{className:"h-8 w-8 mx-auto"})})]})})}),a.jsxs("div",{className:"container mx-auto px-4 pb-8",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Review Suggestions"}),a.jsx("p",{className:"text-muted-foreground",children:'Click on any suggestion to copy it, then click "Write Review" below and paste it in the Google review text box'})]}),f?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"text-center py-8",children:[a.jsx(ir,{className:"h-8 w-8 animate-spin mx-auto mb-4 text-primary"}),a.jsx("p",{className:"text-lg font-medium",children:"Generating personalized review suggestions..."}),a.jsx("p",{className:"text-muted-foreground mt-2",children:"This may take a few seconds"})]}),Array.from({length:5}).map((S,_)=>a.jsx(H,{className:"animate-pulse",children:a.jsxs(Y,{className:"p-6",children:[a.jsx("div",{className:"h-4 bg-muted rounded w-1/4 mb-3"}),a.jsx("div",{className:"h-3 bg-muted rounded w-full mb-2"}),a.jsx("div",{className:"h-3 bg-muted rounded w-3/4"})]})},_))]}):a.jsx("div",{className:"space-y-4",children:d.map(S=>a.jsx(H,{className:"hover:shadow-lg transition-all cursor-pointer border-2 hover:border-primary/50",onClick:()=>O(S.review,S.id),children:a.jsxs(Y,{className:"p-6",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[A(S.rating),a.jsx(Se,{variant:"secondary",children:S.focus})]}),a.jsx(K,{size:"sm",variant:"ghost",className:"hover:bg-transparent",onClick:_=>{_.stopPropagation(),O(S.review,S.id)},children:v===S.id?a.jsx(Zi,{className:"h-5 w-5 text-green-500"}):a.jsx(Ng,{className:"h-5 w-5"})})]}),a.jsx("p",{className:"text-gray-700 leading-relaxed",children:S.review}),S.keywords&&S.keywords.length>0&&a.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[a.jsx("span",{className:"text-xs text-gray-500",children:"Keywords:"}),S.keywords.map((_,P)=>a.jsx(Se,{variant:"outline",className:"text-xs",children:_},P))]}),v===S.id&&a.jsx("div",{className:"mt-3 p-2 bg-green-50 rounded-md",children:a.jsx("p",{className:"text-sm text-green-700 font-medium",children:'✓ Copied! Now click "Write Review on Google" below and paste (Ctrl+V) in the text box'})})]})},S.id))})]}),a.jsx("div",{className:"sticky bottom-0 bg-white border-t shadow-lg",children:a.jsx("div",{className:"container mx-auto px-4 py-4",children:a.jsxs(K,{onClick:T,size:"lg",className:"w-full bg-gradient-to-r from-primary to-blue-600 hover:from-primary/90 hover:to-blue-600/90 text-lg py-6",children:[a.jsx(ri,{className:"mr-2 h-5 w-5"}),"Write Review on Google",a.jsx(mw,{className:"ml-2 h-4 w-4"})]})})})]})},bn="http://localhost:5000",sB=p.createContext(void 0),Ia=()=>{const t=p.useContext(sB);if(t===void 0)throw new Error("useAdmin must be used within an AdminProvider");return t},pNe=({children:t})=>{const{currentUser:e}=Er(),[r,n]=p.useState(!1),[s,i]=p.useState(null),[o,l]=p.useState(!0),[c,u]=p.useState(null),[d,h]=p.useState([]),[f,m]=p.useState([]),[v,y]=p.useState([]),[x,b]=p.useState([]),[w,j]=p.useState(null),[E,I]=p.useState([]),[O,T]=p.useState(null);p.useEffect(()=>{(async()=>{if(!e){n(!1),i(null),l(!1);return}try{const re=await e.getIdTokenResult(!0),_e=re.claims.role,se=re.claims.adminLevel;console.log("[AdminContext] Token claims:",{role:_e,level:se}),n(_e==="admin"),i(se||"viewer")}catch(re){console.error("Error checking admin status:",re),n(!1),i(null)}finally{l(!1)}})()},[e]);const A=async()=>{if(!e)throw new Error("Not authenticated");return{Authorization:`Bearer ${await e.getIdToken(!0)}`,"Content-Type":"application/json"}},S=async()=>{try{const Z=await A(),re=await fetch(`${bn}/api/admin/dashboard/stats`,{headers:Z});if(!re.ok)throw new Error("Failed to fetch dashboard stats");const _e=await re.json();u(_e.data)}catch(Z){console.error("Error fetching dashboard stats:",Z),be({title:"Error",description:Z.message||"Failed to fetch dashboard statistics",variant:"destructive"})}},_=async(Z={})=>{try{const re=await A(),_e=new URLSearchParams(Z).toString(),se=await fetch(`${bn}/api/admin/users?${_e}`,{headers:re});if(!se.ok)throw new Error("Failed to fetch users");const Fe=await se.json();h(Fe.data.users||[])}catch(re){console.error("Error fetching users:",re),be({title:"Error",description:re.message||"Failed to fetch users",variant:"destructive"})}},P=async()=>{try{const Z=await A(),re=await fetch(`${bn}/api/admin/subscriptions`,{headers:Z});if(!re.ok)throw new Error("Failed to fetch subscriptions");const _e=await re.json();m(_e.data||[])}catch(Z){console.error("Error fetching subscriptions:",Z),be({title:"Error",description:Z.message||"Failed to fetch subscriptions",variant:"destructive"})}},R=async()=>{try{const Z=await A(),re=await fetch(`${bn}/api/admin/payments`,{headers:Z});if(!re.ok)throw new Error("Failed to fetch payments");const _e=await re.json();y(_e.data||[])}catch(Z){console.error("Error fetching payments:",Z),be({title:"Error",description:Z.message||"Failed to fetch payments",variant:"destructive"})}},C=async()=>{try{const Z=await A(),re=await fetch(`${bn}/api/admin/coupons`,{headers:Z});if(!re.ok)throw new Error("Failed to fetch coupons");const _e=await re.json();b(_e.data||[])}catch(Z){console.error("Error fetching coupons:",Z),be({title:"Error",description:Z.message||"Failed to fetch coupons",variant:"destructive"})}},de={isAdmin:r,adminLevel:s,isLoading:o,dashboardStats:c,users:d,subscriptions:f,payments:v,coupons:x,analytics:w,auditLogs:E,auditStats:O,fetchDashboardStats:S,fetchUsers:_,fetchSubscriptions:P,fetchPayments:R,fetchCoupons:C,fetchAnalytics:async(Z="30days")=>{try{const re=await A(),_e=await fetch(`${bn}/api/admin/analytics/revenue?timeRange=${Z}`,{headers:re});if(!_e.ok)throw new Error("Failed to fetch analytics");const se=await _e.json();j(se.data)}catch(re){console.error("Error fetching analytics:",re),be({title:"Error",description:re.message||"Failed to fetch analytics",variant:"destructive"})}},fetchAuditLogs:async(Z={})=>{try{const re=await A(),_e=new URLSearchParams(Z).toString(),se=await fetch(`${bn}/api/admin/audit-logs?${_e}`,{headers:re});if(!se.ok)throw new Error("Failed to fetch audit logs");const Fe=await se.json();I(Fe.data.logs||[])}catch(re){console.error("Error fetching audit logs:",re),be({title:"Error",description:re.message||"Failed to fetch audit logs",variant:"destructive"})}},fetchAuditStats:async()=>{try{const Z=await A(),re=await fetch(`${bn}/api/admin/audit-logs/stats`,{headers:Z});if(!re.ok)throw new Error("Failed to fetch audit stats");const _e=await re.json();T(_e.data)}catch(Z){console.error("Error fetching audit stats:",Z),be({title:"Error",description:Z.message||"Failed to fetch audit statistics",variant:"destructive"})}},createCoupon:async Z=>{try{const re=await A(),_e=await fetch(`${bn}/api/admin/coupons`,{method:"POST",headers:re,body:JSON.stringify(Z)});if(!_e.ok)throw new Error("Failed to create coupon");const se=await _e.json();return se.success&&(be({title:"Success",description:"Coupon created successfully"}),await C()),se}catch(re){throw console.error("Error creating coupon:",re),be({title:"Error",description:re.message||"Failed to create coupon",variant:"destructive"}),re}},deactivateCoupon:async Z=>{try{const re=await A(),_e=await fetch(`${bn}/api/admin/coupons/${Z}/deactivate`,{method:"PUT",headers:re});if(!_e.ok)throw new Error("Failed to deactivate coupon");const se=await _e.json();return se.success&&(be({title:"Success",description:"Coupon deactivated successfully"}),await C()),se}catch(re){throw console.error("Error deactivating coupon:",re),be({title:"Error",description:re.message||"Failed to deactivate coupon",variant:"destructive"}),re}},updateUserRole:async(Z,re,_e="viewer")=>{try{const se=await A(),Fe=await fetch(`${bn}/api/admin/users/${Z}/role`,{method:"PUT",headers:se,body:JSON.stringify({role:re,adminLevel:_e})});if(!Fe.ok)throw new Error("Failed to update user role");const oe=await Fe.json();return oe.success&&(be({title:"Success",description:oe.data.message}),await _()),oe}catch(se){throw console.error("Error updating user role:",se),be({title:"Error",description:se.message||"Failed to update user role",variant:"destructive"}),se}},toggleUserStatus:async(Z,re)=>{try{const _e=await A(),se=await fetch(`${bn}/api/admin/users/${Z}/status`,{method:"PUT",headers:_e,body:JSON.stringify({disabled:re})});if(!se.ok)throw new Error("Failed to toggle user status");const Fe=await se.json();return Fe.success&&(be({title:"Success",description:Fe.data.message}),await _()),Fe}catch(_e){throw console.error("Error toggling user status:",_e),be({title:"Error",description:_e.message||"Failed to toggle user status",variant:"destructive"}),_e}},cancelUserSubscription:async Z=>{try{const re=await A(),_e=await fetch(`${bn}/api/admin/subscriptions/${Z}/cancel`,{method:"POST",headers:re});if(!_e.ok)throw new Error("Failed to cancel subscription");const se=await _e.json();return se.success&&(be({title:"Success",description:"Subscription cancelled successfully"}),await P(),await _()),se}catch(re){throw console.error("Error cancelling subscription:",re),be({title:"Error",description:re.message||"Failed to cancel subscription",variant:"destructive"}),re}},createUserSubscription:async Z=>{try{const re=await A(),_e=await fetch(`${bn}/api/admin/subscriptions/create`,{method:"POST",headers:re,body:JSON.stringify(Z)});if(!_e.ok)throw new Error("Failed to create subscription");const se=await _e.json();return se.success&&(be({title:"Success",description:"Subscription created successfully"}),await P(),await _()),se}catch(re){throw console.error("Error creating subscription:",re),be({title:"Error",description:re.message||"Failed to create subscription",variant:"destructive"}),re}}};return a.jsx(sB.Provider,{value:de,children:t})},ym=({children:t})=>{const{currentUser:e}=Er(),r=Bl();return e?a.jsx(a.Fragment,{children:t}):a.jsx(yg,{to:"/login",state:{from:r},replace:!0})},wk=({children:t})=>{const{currentUser:e,loading:r}=Er();return p.useEffect(()=>{console.log("🔍 AuthRedirect - User:",(e==null?void 0:e.email)||"null","Loading:",r)},[e,r]),r?(console.log("⏳ AuthRedirect - Still loading..."),null):e?(console.log("✅ AuthRedirect - User authenticated, redirecting to dashboard"),a.jsx(yg,{to:"/dashboard",replace:!0})):(console.log("❌ AuthRedirect - No user, showing login page"),a.jsx(a.Fragment,{children:t}))},gNe=({children:t})=>{const{isAdmin:e,isLoading:r}=Ia();return r?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:"Verifying admin access..."})]})}):e?a.jsx(a.Fragment,{children:t}):a.jsx(yg,{to:"/dashboard",replace:!0})},yNe=()=>{const t=cr(),[e,r]=p.useState("Processing authentication...");return p.useEffect(()=>{(async()=>{try{const s=new URLSearchParams(window.location.search),i=s.get("code"),o=s.get("state"),l=s.get("error");if(l)throw new Error(`OAuth error: ${l}`);if(!i)throw new Error("No authorization code received");console.log("✅ Received OAuth code, exchanging for tokens..."),console.log("📍 State parameter from URL:",o),console.log("📍 Full URL:",window.location.href),console.log("📍 URL search params:",window.location.search),r("Exchanging authorization code for permanent access...");const u=await fetch("http://localhost:5000/auth/google/callback",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:i,state:o})});if(!u.ok){const f=await u.json();throw console.error("❌ Backend error response:",f),console.error("❌ Backend error details:",JSON.stringify(f,null,2)),new Error(f.error||f.message||"Failed to exchange authorization code")}const d=await u.json();console.log("✅ Tokens received and stored in backend:",d),console.log("✅ User ID:",d.userId),sessionStorage.setItem("oauth_success","true"),r("Success! Redirecting...");const h=sessionStorage.getItem("oauth_return_url")||"/settings?tab=connections";sessionStorage.removeItem("oauth_return_url"),setTimeout(()=>{t(h+"?oauth=success")},500)}catch(s){console.error("❌ OAuth callback error:",s);const i=s instanceof Error?s.message:"Authentication failed";console.error("❌ Error message shown to user:",i),r(i),sessionStorage.setItem("oauth_success","false");const o=sessionStorage.getItem("oauth_return_url")||"/settings";sessionStorage.removeItem("oauth_return_url"),setTimeout(()=>{t(o+"?tab=connections&oauth=failed")},1500)}})()},[t]),a.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh",fontFamily:"system-ui, -apple-system, sans-serif",backgroundColor:"#fff"},children:a.jsx("div",{style:{textAlign:"center",padding:"20px"},children:a.jsx("p",{style:{fontSize:"16px",color:"#333"},children:e})})})},vNe=()=>{const t=cr(),{checkSubscriptionStatus:e,subscription:r}=ln(),[n,s]=p.useState(!1),[i,o]=p.useState(null);return p.useEffect(()=>{const l=async()=>{try{console.log("[Payment Success] Verifying GBP connection after payment...");const u=await xt.recoverConnection();console.log(u?"[Payment Success] ✅ GBP connection verified and active":"[Payment Success] ⚠️ GBP connection needs renewal")}catch(u){console.error("[Payment Success] Error verifying GBP connection:",u)}};e(),l();const c=setTimeout(()=>{var u;if((u=r==null?void 0:r.planId)!=null&&u.includes("yearly"))console.log("[Payment Success] Showing mandate setup for yearly plan user"),s(!0);else{const d=setTimeout(()=>{t("/dashboard")},1e3);o(d)}},2e3);return()=>{clearTimeout(c),i&&clearTimeout(i)}},[t,e,r==null?void 0:r.planId]),a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:[a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full text-center",children:[a.jsx("div",{className:"mb-6",children:a.jsx(Yt,{className:"w-20 h-20 text-green-500 mx-auto animate-pulse"})}),a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Payment Successful!"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"Thank you for your subscription. Your account has been successfully upgraded."}),a.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:a.jsx("p",{className:"text-green-800 font-medium",children:"✨ All premium features are now unlocked"})}),a.jsx("p",{className:"text-sm text-gray-500",children:"Redirecting to dashboard in 3 seconds..."}),a.jsx("button",{onClick:()=>t("/dashboard"),className:"mt-6 px-6 py-3 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors",children:"Go to Dashboard Now"})]}),a.jsx(C4,{isOpen:n,onClose:()=>{s(!1),t("/dashboard")},onSuccess:()=>{s(!1),t("/dashboard")}})]})},xNe=({isOpen:t,onClose:e,gbpAccountId:r,profileCount:n=1})=>{const[s,i]=p.useState(!1);p.useState(!1);const{Razorpay:o}=vy(),{currentUser:l}=Er(),{checkSubscriptionStatus:c}=ln(),{toast:u}=Rn(),d=cr(),h="http://localhost:5000",f="rzp_live_RWwON57KV1LaJn",m=async()=>{if(!l||!r){u({title:"Error",description:"User authentication or GBP connection required",variant:"destructive"});return}i(!0);try{const y=await fetch(`${h}/api/payment/subscription/trial`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:l.uid,gbpAccountId:r,email:l.email})});if(!y.ok)throw new Error("Failed to create trial subscription");const x=await y.json();console.log("Trial created:",x);const b=await fetch(`${h}/api/payment/order`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:1,currency:"INR",notes:{userId:l.uid,email:l.email,gbpAccountId:r,profileCount:n,setupType:"trial_with_autopay"}})});if(!b.ok)throw new Error("Failed to create trial setup order");const{order:w}=await b.json(),j={key:f,amount:w.amount,currency:w.currency,name:"GMB Profile Pulse",description:"15-Day Free Trial Setup",order_id:w.id,handler:async I=>{var T;if((await fetch(`${h}/api/payment/verify`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({razorpay_order_id:I.razorpay_order_id,razorpay_payment_id:I.razorpay_payment_id,razorpay_signature:I.razorpay_signature,subscriptionId:(T=x.subscription)==null?void 0:T.id,gbpAccountId:r,planId:"yearly_pro"})})).ok)e(),await c(),u({title:"Free Trial Started! 🎉",description:"Your 15-day trial is active with auto-pay setup. Enjoy all features!"}),d("/dashboard");else throw new Error("Trial setup verification failed")},prefill:{name:l.displayName||"",email:l.email||"",contact:""},theme:{color:"#1E2DCD"},modal:{ondismiss:()=>{i(!1)}},notes:{trial_setup:"true",auto_pay_enabled:"true"}};new o(j).open()}catch(y){console.error("Trial setup error:",y),u({title:"Setup Failed",description:"There was an error setting up your trial. Please try again.",variant:"destructive"})}finally{i(!1)}},v=async()=>{if(!l||!r){u({title:"Error",description:"User authentication or GBP connection required",variant:"destructive"});return}i(!0);try{if((await fetch(`${h}/api/payment/subscription/trial`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:l.uid,gbpAccountId:r,email:l.email})})).ok)e(),await c(),u({title:"Free Trial Started! 🎉",description:"Your 15-day trial is now active. Add payment details later in billing settings."}),d("/dashboard");else throw new Error("Failed to create trial subscription")}catch(y){console.error("Trial creation error:",y),u({title:"Error",description:"Failed to start trial. Please try again.",variant:"destructive"})}finally{i(!1)}};return a.jsx(bs,{open:t,onOpenChange:s?void 0:e,children:a.jsxs(Qn,{className:"max-w-2xl",children:[a.jsxs(Xn,{children:[a.jsxs(Jn,{className:"flex items-center space-x-2",children:[a.jsx(qV,{className:"h-6 w-6 text-green-600"}),a.jsx("span",{children:"Claim Your Free 15-Day Trial"})]}),a.jsx(Zn,{children:"Start managing your Google Business Profile with all premium features included!"})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs(H,{className:"bg-gradient-to-r from-green-50 to-blue-50 border-green-200",children:[a.jsx(me,{children:a.jsx(ge,{className:"text-lg text-green-800",children:"What's Included in Your Trial"})}),a.jsx(Y,{children:a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:["Auto-Post Scheduling","Review Management & Auto-Reply","Performance Analytics","Advanced Analytics","API Access","Priority Support"].map((y,x)=>a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Yt,{className:"h-4 w-4 text-green-600"}),a.jsx("span",{className:"text-sm text-green-800",children:y})]},x))})})]}),a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[a.jsx(Sr,{className:"h-5 w-5 text-blue-600"}),a.jsx("h3",{className:"font-semibold text-blue-900",children:"After Trial: Simple Per-Profile Pricing"})]}),a.jsx("p",{className:"text-sm text-blue-800 mb-2",children:"Just $99/year per Google Business Profile you want to manage."}),a.jsxs("p",{className:"text-xs text-blue-600",children:[n," profile detected → $",n*99,"/year after trial"]})]}),a.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[a.jsx($s,{className:"h-5 w-5 text-yellow-600"}),a.jsx("h3",{className:"font-semibold text-yellow-900",children:"Secure Auto-Pay Setup"})]}),a.jsx("p",{className:"text-sm text-yellow-800 mb-2",children:"We'll securely save your payment method for seamless continuation after your trial."}),a.jsxs("ul",{className:"text-xs text-yellow-700 space-y-1",children:[a.jsx("li",{children:"• No charges during your 15-day trial"}),a.jsx("li",{children:"• Cancel anytime during the trial"}),a.jsx("li",{children:"• Automatic billing only starts after trial ends"}),a.jsx("li",{children:"• Industry-standard security with Razorpay"})]})]}),a.jsxs("div",{className:"flex flex-col space-y-3",children:[a.jsx(K,{onClick:m,disabled:s,className:"w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-3",size:"lg",children:s?a.jsx(a.Fragment,{children:"Setting up trial..."}):a.jsxs(a.Fragment,{children:[a.jsx(Sg,{className:"mr-2 h-5 w-5"}),"Start Free Trial with Auto-Pay"]})}),a.jsx(K,{variant:"outline",onClick:v,disabled:s,className:"w-full",children:s?"Starting trial...":"Start Free Trial (Setup Payment Later)"})]}),a.jsx("p",{className:"text-xs text-gray-500 text-center",children:"🔒 Your payment information is encrypted and secure. Powered by Razorpay."})]})]})})},bNe=()=>{var c;const{showTrialSetup:t,setShowTrialSetup:e}=ln(),{accounts:r}=Su(),{currentUser:n}=Er(),[s,i]=p.useState(!1);p.useEffect(()=>{(async()=>{if(n)try{const d=await n.getIdTokenResult(),h=d.claims.role==="admin"||d.claims.adminLevel;i(h)}catch(d){console.error("Error checking admin status:",d),i(!1)}})()},[n]);const o=r&&r.length>0?((c=r[0].name)==null?void 0:c.split("/")[1])||r[0].accountId:"",l=(r==null?void 0:r.reduce((u,d)=>{var h;return u+(((h=d.locations)==null?void 0:h.length)||0)},0))||1;return!t||!o||s?null:a.jsx(xNe,{isOpen:t,onClose:()=>e(!1),gbpAccountId:o,profileCount:Math.max(1,l)})},wNe=()=>(p.useState(!0),null),jNe=()=>{var u;const{currentUser:t,logout:e}=Er(),{adminLevel:r}=Ia(),[n,s]=p.useState(!0),[i,o]=p.useState(!1),l=async()=>{await e()},c=[{name:"Dashboard",href:"/admin/dashboard",icon:XV},{name:"Users",href:"/admin/users",icon:gs},{name:"User Audits",href:"/admin/user-audits",icon:Ya},{name:"Subscriptions",href:"/admin/subscriptions",icon:Sr},{name:"Payments",href:"/admin/payments",icon:Sr},{name:"Coupons",href:"/admin/coupons",icon:pI},{name:"Analytics",href:"/admin/analytics",icon:ps},{name:"Audit Logs",href:"/admin/audits",icon:bl}];return a.jsxs("div",{className:"flex h-screen bg-gray-50",children:[i&&a.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>o(!1)}),a.jsxs("aside",{className:`${n?"w-64":"w-20"} ${i?"translate-x-0":"-translate-x-full lg:translate-x-0"} fixed lg:relative h-full bg-white border-r border-gray-200 text-gray-800 transition-all duration-300 flex flex-col shadow-lg z-50`,children:[a.jsxs("div",{className:"p-4 sm:p-6 flex items-center justify-between",children:[n?a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx($s,{className:"h-6 w-6 sm:h-8 sm:w-8 text-primary"}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-lg sm:text-xl font-bold text-gray-900",children:"Admin Panel"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Google Ranker"})]})]}):a.jsx($s,{className:"h-6 w-6 sm:h-8 sm:w-8 mx-auto text-primary"}),a.jsx(K,{variant:"ghost",size:"icon",onClick:()=>{s(!n),window.innerWidth<1024&&o(!1)},className:"text-gray-700 hover:bg-primary/10 hover:text-primary",children:n?a.jsx(Hs,{className:"h-5 w-5"}):a.jsx(Wm,{className:"h-5 w-5"})})]}),a.jsx("nav",{className:"flex-1 px-4 space-y-2 overflow-y-auto",children:c.map(d=>a.jsxs(nb,{to:d.href,onClick:()=>{window.innerWidth<1024&&o(!1)},className:({isActive:h})=>`flex items-center gap-3 px-3 sm:px-4 py-2 sm:py-3 rounded-lg transition-colors ${h?"bg-primary text-white font-medium shadow-md":"text-gray-700 hover:bg-primary/10 hover:text-primary"}`,children:[a.jsx(d.icon,{className:"h-4 w-4 sm:h-5 sm:w-5 flex-shrink-0"}),n&&a.jsx("span",{className:"text-sm sm:text-base",children:d.name})]},d.name))}),a.jsxs("div",{className:"p-4 border-t border-gray-200",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Fh,{className:"h-10 w-10 bg-primary/10",children:a.jsx($h,{className:"bg-primary/10 text-primary font-semibold",children:((u=t==null?void 0:t.email)==null?void 0:u[0].toUpperCase())||"A"})}),n&&a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium truncate text-gray-900",children:t==null?void 0:t.email}),a.jsx(Se,{variant:"secondary",className:"mt-1 text-xs bg-primary/10 text-primary",children:r||"Admin"})]})]}),n&&a.jsxs(K,{variant:"ghost",className:"w-full mt-4 text-gray-700 hover:bg-primary/10 hover:text-primary justify-start",onClick:l,children:[a.jsx(gw,{className:"h-4 w-4 mr-2"}),"Logout"]})]})]}),a.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[a.jsx("header",{className:"bg-white border-b border-gray-200 px-4 sm:px-6 py-3 sm:py-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(K,{variant:"ghost",size:"icon",onClick:()=>o(!i),className:"lg:hidden",children:a.jsx(Wm,{className:"h-5 w-5"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg sm:text-xl md:text-2xl font-bold text-gray-900",children:"Admin Portal"}),a.jsx("p",{className:"text-xs sm:text-sm text-gray-500 hidden sm:block",children:"Manage your Google Ranker application"})]})]}),a.jsx("div",{className:"flex items-center gap-2 sm:gap-4",children:a.jsxs(Se,{variant:"outline",className:"flex items-center gap-1 sm:gap-2 text-xs",children:[a.jsx($s,{className:"h-3 w-3"}),a.jsx("span",{className:"hidden sm:inline",children:"Administrator Access"}),a.jsx("span",{className:"sm:hidden",children:"Admin"})]})})]})}),a.jsx("main",{className:"flex-1 overflow-y-auto bg-gray-50 p-3 sm:p-4 md:p-6",children:a.jsx(kk,{})})]})]})},NNe=()=>{var c,u,d;const{dashboardStats:t,analytics:e,fetchDashboardStats:r,fetchAnalytics:n}=Ia();p.useEffect(()=>{r(),n("30days")},[]);const s=t||{},i=(e==null?void 0:e.dailyRevenue)||[],o=["#0088FE","#00C49F","#FFBB28","#FF8042"],l=[{name:"Active",value:s.activeSubscriptions||0},{name:"Trial",value:s.trialSubscriptions||0},{name:"Total",value:s.totalSubscriptions||0}];return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard Overview"}),a.jsx("p",{className:"text-gray-500 mt-1",children:"Monitor key metrics and application performance"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsxs(H,{children:[a.jsxs(me,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(ge,{className:"text-sm font-medium",children:"Total Revenue (30d)"}),a.jsx(Rd,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(Y,{children:[a.jsxs("div",{className:"text-2xl font-bold",children:["$",((c=s.totalRevenue)==null?void 0:c.toFixed(2))||"0.00"]}),a.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1 mt-1",children:[a.jsx(ps,{className:"h-3 w-3 text-green-500"}),a.jsxs("span",{className:"text-green-500",children:[s.revenueGrowth||0,"%"]})," from last period"]})]})]}),a.jsxs(H,{children:[a.jsxs(me,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(ge,{className:"text-sm font-medium",children:"Total Subscriptions"}),a.jsx(Sr,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(Y,{children:[a.jsx("div",{className:"text-2xl font-bold",children:s.totalSubscriptions||0}),a.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[a.jsx("span",{className:"text-green-600 font-medium",children:s.activeSubscriptions||0})," active"," • ",a.jsx("span",{className:"text-blue-600 font-medium",children:s.trialSubscriptions||0})," trial"]})]})]}),a.jsxs(H,{children:[a.jsxs(me,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(ge,{className:"text-sm font-medium",children:"Monthly Recurring Revenue"}),a.jsx(ps,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(Y,{children:[a.jsxs("div",{className:"text-2xl font-bold",children:["$",((u=s.mrr)==null?void 0:u.toFixed(2))||"0.00"]}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Estimated monthly revenue"})]})]}),a.jsxs(H,{children:[a.jsxs(me,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(ge,{className:"text-sm font-medium",children:"Payment Success Rate"}),a.jsx(Yt,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(Y,{children:[a.jsxs("div",{className:"text-2xl font-bold",children:[s.paymentSuccessRate||0,"%"]}),a.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[s.successfulPayments||0," successful payments"]})]})]}),a.jsxs(H,{children:[a.jsxs(me,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(ge,{className:"text-sm font-medium",children:"Today's Revenue"}),a.jsx(Rd,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(Y,{children:[a.jsxs("div",{className:"text-2xl font-bold",children:["$",((d=s.todayRevenue)==null?void 0:d.toFixed(2))||"0.00"]}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Revenue collected today"})]})]}),a.jsxs(H,{children:[a.jsxs(me,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(ge,{className:"text-sm font-medium",children:"Trial Conversion Rate"}),a.jsx(qr,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(Y,{children:[a.jsxs("div",{className:"text-2xl font-bold",children:[s.trialConversionRate||0,"%"]}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Trials converting to paid"})]})]}),a.jsxs(H,{children:[a.jsxs(me,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(ge,{className:"text-sm font-medium",children:"Active Subscriptions"}),a.jsx(gs,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(Y,{children:[a.jsx("div",{className:"text-2xl font-bold",children:s.activeSubscriptions||0}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Currently active users"})]})]}),a.jsxs(H,{children:[a.jsxs(me,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(ge,{className:"text-sm font-medium",children:"Trial Users"}),a.jsx(Yn,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(Y,{children:[a.jsx("div",{className:"text-2xl font-bold",children:s.trialSubscriptions||0}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Users on trial period"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs(H,{children:[a.jsxs(me,{children:[a.jsx(ge,{children:"Revenue Trend (30 Days)"}),a.jsx(Qe,{children:"Daily revenue over the last 30 days"})]}),a.jsx(Y,{children:i.length>0?a.jsx(na,{width:"100%",height:300,children:a.jsxs(ch,{data:i,children:[a.jsx(aa,{strokeDasharray:"3 3"}),a.jsx(ia,{dataKey:"date",tickFormatter:h=>new Date(h).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),a.jsx(Os,{}),a.jsx(Rs,{formatter:h=>`$${h.toFixed(2)}`,labelFormatter:h=>new Date(h).toLocaleDateString()}),a.jsx(Bn,{}),a.jsx(hs,{type:"monotone",dataKey:"revenue",stroke:"#8884d8",strokeWidth:2,name:"Revenue ($)"})]})}):a.jsx("div",{className:"h-[300px] flex items-center justify-center text-muted-foreground",children:"No revenue data available"})})]}),a.jsxs(H,{children:[a.jsxs(me,{children:[a.jsx(ge,{children:"Subscription Distribution"}),a.jsx(Qe,{children:"Breakdown of subscription types"})]}),a.jsx(Y,{children:a.jsx(na,{width:"100%",height:300,children:a.jsxs(nB,{children:[a.jsx(k_,{data:l,cx:"50%",cy:"50%",labelLine:!1,label:({name:h,value:f})=>`${h}: ${f}`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:l.map((h,f)=>a.jsx($u,{fill:o[f%o.length]},`cell-${f}`))}),a.jsx(Rs,{}),a.jsx(Bn,{})]})})})]})]}),a.jsxs(H,{children:[a.jsxs(me,{children:[a.jsx(ge,{children:"Quick Statistics"}),a.jsx(Qe,{children:"Additional insights at a glance"})]}),a.jsx(Y,{children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"border rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-2",children:[a.jsx(Ya,{className:"h-4 w-4"}),"Average Transaction"]}),a.jsxs("div",{className:"text-2xl font-bold",children:["$",((s.totalRevenue||0)/(s.successfulPayments||1)).toFixed(2)]})]}),a.jsxs("div",{className:"border rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-2",children:[a.jsx(ps,{className:"h-4 w-4"}),"Revenue Growth"]}),a.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[s.revenueGrowth||0,"%"]})]}),a.jsxs("div",{className:"border rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-2",children:[a.jsx(gs,{className:"h-4 w-4"}),"Total Customers"]}),a.jsx("div",{className:"text-2xl font-bold",children:s.totalSubscriptions||0})]})]})})]})]})},Uu=p.forwardRef(({className:t,...e},r)=>a.jsx("div",{className:"relative w-full overflow-auto",children:a.jsx("table",{ref:r,className:ye("w-full caption-bottom text-sm",t),...e})}));Uu.displayName="Table";const Bu=p.forwardRef(({className:t,...e},r)=>a.jsx("thead",{ref:r,className:ye("[&_tr]:border-b",t),...e}));Bu.displayName="TableHeader";const Vu=p.forwardRef(({className:t,...e},r)=>a.jsx("tbody",{ref:r,className:ye("[&_tr:last-child]:border-0",t),...e}));Vu.displayName="TableBody";const _Ne=p.forwardRef(({className:t,...e},r)=>a.jsx("tfoot",{ref:r,className:ye("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...e}));_Ne.displayName="TableFooter";const Cn=p.forwardRef(({className:t,...e},r)=>a.jsx("tr",{ref:r,className:ye("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...e}));Cn.displayName="TableRow";const ct=p.forwardRef(({className:t,...e},r)=>a.jsx("th",{ref:r,className:ye("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...e}));ct.displayName="TableHead";const tt=p.forwardRef(({className:t,...e},r)=>a.jsx("td",{ref:r,className:ye("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...e}));tt.displayName="TableCell";const SNe=p.forwardRef(({className:t,...e},r)=>a.jsx("caption",{ref:r,className:ye("mt-4 text-sm text-muted-foreground",t),...e}));SNe.displayName="TableCaption";const ANe=()=>{const{users:t,fetchUsers:e,updateUserRole:r,toggleUserStatus:n,cancelUserSubscription:s,adminLevel:i}=Ia(),[o,l]=p.useState(""),[c,u]=p.useState("all"),[d,h]=p.useState(null),[f,m]=p.useState(!1),[v,y]=p.useState(null);p.useEffect(()=>{e({search:o,status:c})},[o,c]);const x=O=>{l(O)},b=O=>{u(O)},w=(O,T)=>{h(O),y(T),m(!0)},j=async()=>{d&&(await r(d.uid,"admin","moderator"),m(!1),h(null))},E=async()=>{d&&(await n(d.uid,!d.disabled),m(!1),h(null))},I=O=>{if(!O)return a.jsx(Se,{variant:"secondary",children:"No Subscription"});switch(O.status){case"active":return a.jsx(Se,{className:"bg-green-500",children:"Active"});case"trial":return a.jsx(Se,{className:"bg-blue-500",children:"Trial"});case"expired":return a.jsx(Se,{variant:"destructive",children:"Expired"});default:return a.jsx(Se,{variant:"secondary",children:O.status})}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"User Management"}),a.jsx("p",{className:"text-gray-500 mt-1",children:"Manage users, subscriptions, and permissions"})]}),a.jsxs(H,{children:[a.jsxs(me,{children:[a.jsx(ge,{children:"Search & Filter"}),a.jsx(Qe,{children:"Find users by email, name, or status"})]}),a.jsx(Y,{children:a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(Fs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),a.jsx(Ze,{placeholder:"Search by email or name...",value:o,onChange:O=>x(O.target.value),className:"pl-10"})]}),a.jsxs(Ht,{value:c,onValueChange:b,children:[a.jsx(Bt,{className:"w-48",children:a.jsx(Kt,{placeholder:"Filter by status"})}),a.jsxs(Vt,{children:[a.jsx(fe,{value:"all",children:"All Users"}),a.jsx(fe,{value:"active",children:"Active"}),a.jsx(fe,{value:"trial",children:"Trial"}),a.jsx(fe,{value:"expired",children:"Expired"})]})]})]})})]}),a.jsxs(H,{children:[a.jsxs(me,{children:[a.jsxs(ge,{children:["All Users (",t.length,")"]}),a.jsx(Qe,{children:"Complete list of registered users"})]}),a.jsx(Y,{children:a.jsx("div",{className:"rounded-md border",children:a.jsxs(Uu,{children:[a.jsx(Bu,{children:a.jsxs(Cn,{children:[a.jsx(ct,{children:"Email"}),a.jsx(ct,{children:"Display Name"}),a.jsx(ct,{children:"Status"}),a.jsx(ct,{children:"Subscription"}),a.jsx(ct,{children:"GBP Connected"}),a.jsx(ct,{children:"Joined"}),a.jsx(ct,{children:"Actions"})]})}),a.jsx(Vu,{children:t.length>0?t.map(O=>{var T;return a.jsxs(Cn,{children:[a.jsx(tt,{className:"font-medium",children:O.email}),a.jsx(tt,{children:O.displayName}),a.jsx(tt,{children:O.disabled?a.jsxs(Se,{variant:"destructive",children:[a.jsx(cb,{className:"h-3 w-3 mr-1"}),"Suspended"]}):a.jsxs(Se,{className:"bg-green-500",children:[a.jsx(Yt,{className:"h-3 w-3 mr-1"}),"Active"]})}),a.jsx(tt,{children:I(O.subscription)}),a.jsx(tt,{children:O.gbpAccountId?a.jsxs(Se,{variant:"outline",className:"bg-green-50",children:[a.jsx(Yt,{className:"h-3 w-3 mr-1 text-green-600"}),"Yes"]}):a.jsxs(Se,{variant:"outline",className:"bg-gray-50",children:[a.jsx(Vm,{className:"h-3 w-3 mr-1 text-gray-400"}),"No"]})}),a.jsx(tt,{className:"text-sm text-gray-500",children:fr(new Date(O.createdAt),"MMM dd, yyyy")}),a.jsx(tt,{children:a.jsxs("div",{className:"flex items-center gap-2",children:[i==="super"&&a.jsxs(K,{variant:"outline",size:"sm",onClick:()=>w(O,"role"),children:[a.jsx($s,{className:"h-3 w-3 mr-1"}),"Role"]}),(i==="super"||i==="moderator")&&a.jsx(K,{variant:O.disabled?"default":"outline",size:"sm",onClick:()=>w(O,"status"),children:O.disabled?"Activate":"Suspend"}),O.gbpAccountId&&((T=O.subscription)==null?void 0:T.status)==="active"&&(i==="super"||i==="moderator")&&a.jsxs(K,{variant:"destructive",size:"sm",onClick:async()=>{if(window.confirm(`Are you sure you want to cancel the subscription for ${O.email}?`))try{await s(O.gbpAccountId)}catch(A){console.error("Error cancelling subscription:",A)}},children:[a.jsx(Vm,{className:"h-3 w-3 mr-1"}),"Cancel Sub"]})]})})]},O.uid)}):a.jsx(Cn,{children:a.jsx(tt,{colSpan:7,className:"text-center text-gray-500 py-8",children:"No users found"})})})]})})})]}),a.jsx(bs,{open:f,onOpenChange:m,children:a.jsxs(Qn,{children:[a.jsxs(Xn,{children:[a.jsx(Jn,{children:v==="role"?"Update User Role":"Toggle User Status"}),a.jsx(Zn,{children:v==="role"?`Make ${d==null?void 0:d.email} an admin`:`${d!=null&&d.disabled?"Activate":"Suspend"} ${d==null?void 0:d.email}'s account`})]}),a.jsxs(kl,{children:[a.jsx(K,{variant:"outline",onClick:()=>m(!1),children:"Cancel"}),a.jsx(K,{onClick:v==="role"?j:E,children:"Confirm"})]})]})})]})},ENe=()=>{const{subscriptions:t,fetchSubscriptions:e,cancelUserSubscription:r,createUserSubscription:n}=Ia(),[s,i]=p.useState(!1),[o,l]=p.useState(!1),[c,u]=p.useState(null),[d,h]=p.useState(!1),[f,m]=p.useState({userId:"",email:"",profileCount:1,durationMonths:1});p.useEffect(()=>{e()},[]);const v=w=>{switch(w){case"active":return a.jsx(Se,{className:"bg-green-500",children:"Active"});case"trial":return a.jsx(Se,{className:"bg-blue-500",children:"Trial"});case"expired":return a.jsx(Se,{variant:"destructive",children:"Expired"});case"cancelled":return a.jsx(Se,{variant:"secondary",children:"Cancelled"});default:return a.jsx(Se,{variant:"outline",children:w})}},y=w=>{u(w),i(!0)},x=async()=>{if(c){h(!0);try{await r(c.gbpAccountId),i(!1),u(null)}catch(w){console.error("Failed to cancel subscription:",w)}finally{h(!1)}}},b=async()=>{if(!f.userId||!f.email||f.profileCount<1||f.durationMonths<1){be({title:"Error",description:"Please fill in all required fields",variant:"destructive"});return}h(!0);try{await n({userId:f.userId,email:f.email,profileCount:f.profileCount,durationMonths:f.durationMonths}),l(!1),m({userId:"",email:"",profileCount:1,durationMonths:1})}catch(w){console.error("Failed to create subscription:",w)}finally{h(!1)}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Subscription Management"}),a.jsx("p",{className:"text-gray-500 mt-1",children:"View and manage all user subscriptions"})]}),a.jsxs(bs,{open:o,onOpenChange:l,children:[a.jsx(xne,{asChild:!0,children:a.jsxs(K,{children:[a.jsx(lo,{className:"mr-2 h-4 w-4"}),"Create Subscription"]})}),a.jsxs(Qn,{className:"sm:max-w-[500px]",children:[a.jsxs(Xn,{children:[a.jsx(Jn,{children:"Create New Subscription"}),a.jsx(Zn,{children:"Create a direct subscription for a user. The subscription will be active immediately."})]}),a.jsxs("div",{className:"grid gap-4 py-4",children:[a.jsxs("div",{className:"grid gap-2",children:[a.jsx(Ie,{htmlFor:"userId",children:"User ID"}),a.jsx(Ze,{id:"userId",placeholder:"Enter user ID",value:f.userId,onChange:w=>m({...f,userId:w.target.value})})]}),a.jsxs("div",{className:"grid gap-2",children:[a.jsx(Ie,{htmlFor:"email",children:"Email"}),a.jsx(Ze,{id:"email",type:"email",placeholder:"user@example.com",value:f.email,onChange:w=>m({...f,email:w.target.value})})]}),a.jsxs("div",{className:"grid gap-2",children:[a.jsx(Ie,{htmlFor:"profileCount",children:"Number of Profiles"}),a.jsxs(Ht,{value:f.profileCount.toString(),onValueChange:w=>m({...f,profileCount:parseInt(w)}),children:[a.jsx(Bt,{children:a.jsx(Kt,{placeholder:"Select profiles"})}),a.jsx(Vt,{children:[1,2,3,4,5,10,15,20,25,30,50].map(w=>a.jsxs(fe,{value:w.toString(),children:[w," ",w===1?"Profile":"Profiles"]},w))})]})]}),a.jsxs("div",{className:"grid gap-2",children:[a.jsx(Ie,{htmlFor:"duration",children:"Duration"}),a.jsxs(Ht,{value:f.durationMonths.toString(),onValueChange:w=>m({...f,durationMonths:parseInt(w)}),children:[a.jsx(Bt,{children:a.jsx(Kt,{placeholder:"Select duration"})}),a.jsxs(Vt,{children:[a.jsx(fe,{value:"1",children:"1 Month"}),a.jsx(fe,{value:"2",children:"2 Months"}),a.jsx(fe,{value:"3",children:"3 Months"}),a.jsx(fe,{value:"6",children:"6 Months"}),a.jsx(fe,{value:"9",children:"9 Months"}),a.jsx(fe,{value:"12",children:"1 Year"})]})]})]})]}),a.jsxs(kl,{children:[a.jsx(K,{variant:"outline",onClick:()=>l(!1),disabled:d,children:"Cancel"}),a.jsx(K,{onClick:b,disabled:d,children:d?"Creating...":"Create Subscription"})]})]})]})]}),a.jsxs(H,{children:[a.jsxs(me,{children:[a.jsxs(ge,{children:["All Subscriptions (",t.length,")"]}),a.jsx(Qe,{children:"Complete list of active and inactive subscriptions"})]}),a.jsx(Y,{children:a.jsx("div",{className:"rounded-md border",children:a.jsxs(Uu,{children:[a.jsx(Bu,{children:a.jsxs(Cn,{children:[a.jsx(ct,{children:"Email"}),a.jsx(ct,{children:"Plan"}),a.jsx(ct,{children:"Status"}),a.jsx(ct,{children:"Profiles"}),a.jsx(ct,{children:"Start Date"}),a.jsx(ct,{children:"End Date"}),a.jsx(ct,{children:"Amount"}),a.jsx(ct,{children:"Actions"})]})}),a.jsx(Vu,{children:t.map(w=>a.jsxs(Cn,{children:[a.jsx(tt,{className:"font-medium",children:w.email}),a.jsx(tt,{children:a.jsx(Se,{variant:"outline",children:w.planId})}),a.jsx(tt,{children:v(w.status)}),a.jsx(tt,{children:w.profileCount||0}),a.jsx(tt,{children:w.subscriptionStartDate?fr(new Date(w.subscriptionStartDate),"MMM dd, yyyy"):"-"}),a.jsx(tt,{children:w.subscriptionEndDate?fr(new Date(w.subscriptionEndDate),"MMM dd, yyyy"):"-"}),a.jsxs(tt,{children:[w.amount," ",w.currency]}),a.jsx(tt,{children:w.status!=="cancelled"&&w.status!=="expired"&&a.jsxs(K,{variant:"destructive",size:"sm",onClick:()=>y(w),children:[a.jsx(Hs,{className:"mr-1 h-3 w-3"}),"Cancel"]})})]},w.id))})]})})})]}),a.jsx(bs,{open:s,onOpenChange:i,children:a.jsxs(Qn,{children:[a.jsxs(Xn,{children:[a.jsx(Jn,{children:"Cancel Subscription"}),a.jsx(Zn,{children:"Are you sure you want to cancel this subscription? This action cannot be undone."})]}),c&&a.jsx("div",{className:"rounded-lg border border-amber-200 bg-amber-50 p-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(qr,{className:"h-5 w-5 text-amber-600 mt-0.5"}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("p",{className:"text-sm font-medium text-amber-900",children:["User: ",c.email]}),a.jsxs("p",{className:"text-sm text-amber-700",children:["Plan: ",c.planId," (",c.profileCount," profiles)"]}),a.jsxs("p",{className:"text-sm text-amber-700",children:["Status: ",c.status]})]})]})}),a.jsxs(kl,{children:[a.jsx(K,{variant:"outline",onClick:()=>i(!1),disabled:d,children:"Go Back"}),a.jsx(K,{variant:"destructive",onClick:x,disabled:d,children:d?"Cancelling...":"Yes, Cancel Subscription"})]})]})})]})},PNe=()=>{const{payments:t,fetchPayments:e}=Ia();p.useEffect(()=>{e()},[]);const r=s=>{switch(s){case"success":return a.jsx(Yt,{className:"h-4 w-4 text-green-500"});case"failed":return a.jsx(Vm,{className:"h-4 w-4 text-red-500"});case"pending":return a.jsx(Yn,{className:"h-4 w-4 text-yellow-500"});default:return null}},n=s=>{switch(s){case"success":return a.jsx(Se,{className:"bg-green-500",children:"Success"});case"failed":return a.jsx(Se,{variant:"destructive",children:"Failed"});case"pending":return a.jsx(Se,{className:"bg-yellow-500",children:"Pending"});default:return a.jsx(Se,{variant:"outline",children:s})}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Payment Management"}),a.jsx("p",{className:"text-gray-500 mt-1",children:"View all payment transactions and their status"})]}),a.jsxs(H,{children:[a.jsxs(me,{children:[a.jsxs(ge,{children:["All Payments (",t.length,")"]}),a.jsx(Qe,{children:"Complete payment transaction history"})]}),a.jsx(Y,{children:a.jsx("div",{className:"rounded-md border",children:a.jsxs(Uu,{children:[a.jsx(Bu,{children:a.jsxs(Cn,{children:[a.jsx(ct,{children:"Date"}),a.jsx(ct,{children:"User"}),a.jsx(ct,{children:"Description"}),a.jsx(ct,{children:"Amount"}),a.jsx(ct,{children:"Status"}),a.jsx(ct,{children:"Payment ID"})]})}),a.jsx(Vu,{children:t.map((s,i)=>a.jsxs(Cn,{children:[a.jsx(tt,{children:s.paidAt?fr(new Date(s.paidAt),"MMM dd, yyyy HH:mm"):"-"}),a.jsx(tt,{className:"font-medium",children:s.userEmail}),a.jsx(tt,{children:s.description}),a.jsxs(tt,{className:"font-bold",children:[s.amount," ",s.currency]}),a.jsx(tt,{children:a.jsxs("div",{className:"flex items-center gap-2",children:[r(s.status),n(s.status)]})}),a.jsx(tt,{className:"text-xs text-gray-500",children:s.razorpayPaymentId})]},s.id||i))})]})})})]})]})},TNe=()=>{const{coupons:t,fetchCoupons:e,createCoupon:r,deactivateCoupon:n,adminLevel:s}=Ia(),[i,o]=p.useState(!1);p.useState(null);const[l,c]=p.useState({code:"",discountType:"percentage",discountValue:"",maxUses:"",expiresAt:"",description:"",oneTimePerUser:!1,singleUse:!1});p.useEffect(()=>{e()},[]);const u=async()=>{try{await r({code:l.code.toUpperCase(),discountType:l.discountType,discountValue:parseFloat(l.discountValue),maxUses:l.maxUses?parseInt(l.maxUses):null,expiresAt:l.expiresAt?new Date(l.expiresAt).toISOString():null,description:l.description,oneTimePerUser:l.oneTimePerUser,singleUse:l.singleUse}),o(!1),c({code:"",discountType:"percentage",discountValue:"",maxUses:"",expiresAt:"",description:"",oneTimePerUser:!1,singleUse:!1})}catch(m){console.error("Error creating coupon:",m)}},d=async m=>{try{await n(m)}catch(v){console.error("Error deactivating coupon:",v)}},h=m=>m.isActive?m.expiresAt&&new Date(m.expiresAt)<new Date?a.jsx(Se,{variant:"destructive",children:"Expired"}):m.maxUses&&m.currentUses>=m.maxUses?a.jsx(Se,{variant:"secondary",children:"Max Uses Reached"}):a.jsx(Se,{className:"bg-green-500",children:"Active"}):a.jsx(Se,{variant:"destructive",children:"Inactive"}),f=s==="super"||s==="moderator";return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Coupon Management"}),a.jsx("p",{className:"text-gray-500 mt-1",children:"Create and manage discount coupons"})]}),f&&a.jsxs(K,{onClick:()=>o(!0),children:[a.jsx(lo,{className:"h-4 w-4 mr-2"}),"Create Coupon"]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[a.jsxs(H,{children:[a.jsxs(me,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(ge,{className:"text-sm font-medium",children:"Total Coupons"}),a.jsx(pI,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsx(Y,{children:a.jsx("div",{className:"text-2xl font-bold",children:t.length})})]}),a.jsxs(H,{children:[a.jsxs(me,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(ge,{className:"text-sm font-medium",children:"Active Coupons"}),a.jsx(Yt,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsx(Y,{children:a.jsx("div",{className:"text-2xl font-bold",children:t.filter(m=>m.isActive).length})})]}),a.jsxs(H,{children:[a.jsxs(me,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(ge,{className:"text-sm font-medium",children:"Total Uses"}),a.jsx(Rd,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsx(Y,{children:a.jsx("div",{className:"text-2xl font-bold",children:t.reduce((m,v)=>m+(v.currentUses||0),0)})})]}),a.jsxs(H,{children:[a.jsxs(me,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(ge,{className:"text-sm font-medium",children:"Expired"}),a.jsx(cb,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsx(Y,{children:a.jsx("div",{className:"text-2xl font-bold",children:t.filter(m=>m.expiresAt&&new Date(m.expiresAt)<new Date).length})})]})]}),a.jsxs(H,{children:[a.jsxs(me,{children:[a.jsxs(ge,{children:["All Coupons (",t.length,")"]}),a.jsx(Qe,{children:"Manage discount codes and promotions"})]}),a.jsx(Y,{children:a.jsx("div",{className:"rounded-md border",children:a.jsxs(Uu,{children:[a.jsx(Bu,{children:a.jsxs(Cn,{children:[a.jsx(ct,{children:"Code"}),a.jsx(ct,{children:"Discount"}),a.jsx(ct,{children:"Status"}),a.jsx(ct,{children:"Usage"}),a.jsx(ct,{children:"Created"}),a.jsx(ct,{children:"Expires"}),a.jsx(ct,{children:"Actions"})]})}),a.jsx(Vu,{children:t.length>0?t.map(m=>a.jsxs(Cn,{children:[a.jsx(tt,{className:"font-mono font-bold",children:m.code}),a.jsx(tt,{children:m.discountType==="percentage"?a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(n9,{className:"h-4 w-4"}),m.discountValue,"% off"]}):a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(Rd,{className:"h-4 w-4"}),"$",m.discountValue," off"]})}),a.jsx(tt,{children:h(m)}),a.jsxs(tt,{children:[m.currentUses||0,m.maxUses&&` / ${m.maxUses}`]}),a.jsx(tt,{className:"text-sm text-gray-500",children:m.createdAt&&!isNaN(new Date(m.createdAt).getTime())?fr(new Date(m.createdAt),"MMM dd, yyyy"):"N/A"}),a.jsx(tt,{className:"text-sm text-gray-500",children:m.expiresAt&&!isNaN(new Date(m.expiresAt).getTime())?a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(Kn,{className:"h-3 w-3"}),fr(new Date(m.expiresAt),"MMM dd, yyyy")]}):"No expiry"}),a.jsx(tt,{children:f&&m.isActive&&a.jsxs(K,{variant:"outline",size:"sm",onClick:()=>d(m.code),children:[a.jsx(cb,{className:"h-3 w-3 mr-1"}),"Deactivate"]})})]},m.code)):a.jsx(Cn,{children:a.jsx(tt,{colSpan:7,className:"text-center text-gray-500 py-8",children:"No coupons found. Create your first coupon to get started."})})})]})})})]}),a.jsx(bs,{open:i,onOpenChange:o,children:a.jsxs(Qn,{className:"max-w-md max-h-[90vh] overflow-y-auto",children:[a.jsxs(Xn,{children:[a.jsx(Jn,{children:"Create New Coupon"}),a.jsx(Zn,{children:"Add a new discount coupon for your users"})]}),a.jsxs("div",{className:"space-y-4 py-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ie,{htmlFor:"code",children:"Coupon Code"}),a.jsx(Ze,{id:"code",placeholder:"SUMMER2024",value:l.code,onChange:m=>c({...l,code:m.target.value.toUpperCase()})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ie,{htmlFor:"discountType",children:"Discount Type"}),a.jsxs(Ht,{value:l.discountType,onValueChange:m=>c({...l,discountType:m}),children:[a.jsx(Bt,{children:a.jsx(Kt,{})}),a.jsxs(Vt,{children:[a.jsx(fe,{value:"percentage",children:"Percentage"}),a.jsx(fe,{value:"fixed",children:"Fixed Amount"})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs(Ie,{htmlFor:"discountValue",children:["Discount Value ",l.discountType==="percentage"?"(%)":"($)"]}),a.jsx(Ze,{id:"discountValue",type:"number",placeholder:l.discountType==="percentage"?"20":"10",value:l.discountValue,onChange:m=>c({...l,discountValue:m.target.value})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ie,{htmlFor:"maxUses",children:"Max Uses (Optional)"}),a.jsx(Ze,{id:"maxUses",type:"number",placeholder:"100",value:l.maxUses,onChange:m=>c({...l,maxUses:m.target.value})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ie,{htmlFor:"expiresAt",children:"Expiry Date (Optional)"}),a.jsx(Ze,{id:"expiresAt",type:"date",value:l.expiresAt,onChange:m=>c({...l,expiresAt:m.target.value})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ie,{htmlFor:"description",children:"Description (Optional)"}),a.jsx(Ze,{id:"description",type:"text",placeholder:"Special discount for premium users",value:l.description,onChange:m=>c({...l,description:m.target.value})})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{id:"oneTimePerUser",type:"checkbox",checked:l.oneTimePerUser,onChange:m=>c({...l,oneTimePerUser:m.target.checked}),className:"h-4 w-4 rounded border-gray-300"}),a.jsx(Ie,{htmlFor:"oneTimePerUser",className:"cursor-pointer",children:"One-time use per user (each user can only use this coupon once)"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{id:"singleUse",type:"checkbox",checked:l.singleUse,onChange:m=>c({...l,singleUse:m.target.checked}),className:"h-4 w-4 rounded border-gray-300"}),a.jsx(Ie,{htmlFor:"singleUse",className:"cursor-pointer",children:"🔒 Single use (auto-disable after FIRST use by ANY user)"})]})]}),a.jsxs(kl,{children:[a.jsx(K,{variant:"outline",onClick:()=>o(!1),children:"Cancel"}),a.jsx(K,{onClick:u,disabled:!l.code||!l.discountValue,children:"Create Coupon"})]})]})})]})},CNe=()=>{const{analytics:t,fetchAnalytics:e,subscriptions:r,payments:n}=Ia(),[s,i]=p.useState("30days");p.useEffect(()=>{e(s)},[s]);const o=(t==null?void 0:t.dailyRevenue)||[],l=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884d8"],c=r.reduce((x,b)=>{const w=b.planId||"Unknown";return x[w]=(x[w]||0)+1,x},{}),u=Object.entries(c).map(([x,b])=>({name:x,value:b})),d=r.reduce((x,b)=>{const w=b.status||"unknown";return x[w]=(x[w]||0)+1,x},{}),h=Object.entries(d).map(([x,b])=>({name:x.charAt(0).toUpperCase()+x.slice(1),value:b})),f=n.reduce((x,b)=>{const w=new Date(b.paidAt||b.createdAt).toLocaleDateString();return x[w]||(x[w]={date:w,successful:0,failed:0}),b.status==="captured"||b.status==="success"?x[w].successful++:x[w].failed++,x},{}),m=Object.values(f).slice(-30).map(x=>({...x,successRate:x.successful+x.failed>0?Math.round(x.successful/(x.successful+x.failed)*100):0})),v=o.slice(-30).map((x,b)=>({date:x.date,mrr:x.revenue*30,revenue:x.revenue})),y=()=>{const b=[["Date","Revenue","MRR"],...v.map(I=>[new Date(I.date).toLocaleDateString(),I.revenue.toFixed(2),I.mrr.toFixed(2)])].map(I=>I.join(",")).join(`
`),w=new Blob([b],{type:"text/csv"}),j=window.URL.createObjectURL(w),E=document.createElement("a");E.href=j,E.download=`analytics-${new Date().toISOString()}.csv`,E.click()};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Advanced Analytics"}),a.jsx("p",{className:"text-gray-500 mt-1",children:"Deep dive into revenue and subscription metrics"})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(Ht,{value:s,onValueChange:i,children:[a.jsxs(Bt,{className:"w-40",children:[a.jsx(Kn,{className:"h-4 w-4 mr-2"}),a.jsx(Kt,{})]}),a.jsxs(Vt,{children:[a.jsx(fe,{value:"7days",children:"Last 7 Days"}),a.jsx(fe,{value:"30days",children:"Last 30 Days"}),a.jsx(fe,{value:"90days",children:"Last 90 Days"}),a.jsx(fe,{value:"1year",children:"Last Year"})]})]}),a.jsxs(K,{onClick:y,variant:"outline",children:[a.jsx(fw,{className:"h-4 w-4 mr-2"}),"Export CSV"]})]})]}),a.jsxs(Kl,{defaultValue:"revenue",className:"space-y-6",children:[a.jsxs(ko,{children:[a.jsx(Zt,{value:"revenue",children:"Revenue"}),a.jsx(Zt,{value:"subscriptions",children:"Subscriptions"}),a.jsx(Zt,{value:"payments",children:"Payments"}),a.jsx(Zt,{value:"overview",children:"Overview"})]}),a.jsx(er,{value:"revenue",className:"space-y-6",children:a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs(H,{children:[a.jsxs(me,{children:[a.jsx(ge,{children:"Revenue Trend"}),a.jsx(Qe,{children:"Daily revenue over selected period"})]}),a.jsx(Y,{children:o.length>0?a.jsx(na,{width:"100%",height:300,children:a.jsxs(ow,{data:o,children:[a.jsx("defs",{children:a.jsxs("linearGradient",{id:"colorRevenue",x1:"0",y1:"0",x2:"0",y2:"1",children:[a.jsx("stop",{offset:"5%",stopColor:"#8884d8",stopOpacity:.8}),a.jsx("stop",{offset:"95%",stopColor:"#8884d8",stopOpacity:0})]})}),a.jsx(aa,{strokeDasharray:"3 3"}),a.jsx(ia,{dataKey:"date",tickFormatter:x=>new Date(x).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),a.jsx(Os,{}),a.jsx(Rs,{formatter:x=>`$${x.toFixed(2)}`,labelFormatter:x=>new Date(x).toLocaleDateString()}),a.jsx(Vi,{type:"monotone",dataKey:"revenue",stroke:"#8884d8",fillOpacity:1,fill:"url(#colorRevenue)"})]})}):a.jsx("div",{className:"h-[300px] flex items-center justify-center text-muted-foreground",children:"No revenue data available"})})]}),a.jsxs(H,{children:[a.jsxs(me,{children:[a.jsx(ge,{children:"Monthly Recurring Revenue (MRR)"}),a.jsx(Qe,{children:"Estimated MRR based on daily revenue"})]}),a.jsx(Y,{children:v.length>0?a.jsx(na,{width:"100%",height:300,children:a.jsxs(ch,{data:v,children:[a.jsx(aa,{strokeDasharray:"3 3"}),a.jsx(ia,{dataKey:"date",tickFormatter:x=>new Date(x).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),a.jsx(Os,{}),a.jsx(Rs,{formatter:x=>`$${x.toFixed(2)}`,labelFormatter:x=>new Date(x).toLocaleDateString()}),a.jsx(Bn,{}),a.jsx(hs,{type:"monotone",dataKey:"mrr",stroke:"#00C49F",strokeWidth:2,name:"MRR ($)"})]})}):a.jsx("div",{className:"h-[300px] flex items-center justify-center text-muted-foreground",children:"No MRR data available"})})]})]})}),a.jsx(er,{value:"subscriptions",className:"space-y-6",children:a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs(H,{children:[a.jsxs(me,{children:[a.jsx(ge,{children:"Plan Distribution"}),a.jsx(Qe,{children:"Breakdown by subscription plan"})]}),a.jsx(Y,{children:u.length>0?a.jsx(na,{width:"100%",height:300,children:a.jsxs(nB,{children:[a.jsx(k_,{data:u,cx:"50%",cy:"50%",labelLine:!1,label:({name:x,value:b})=>`${x}: ${b}`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:u.map((x,b)=>a.jsx($u,{fill:l[b%l.length]},`cell-${b}`))}),a.jsx(Rs,{}),a.jsx(Bn,{})]})}):a.jsx("div",{className:"h-[300px] flex items-center justify-center text-muted-foreground",children:"No subscription data available"})})]}),a.jsxs(H,{children:[a.jsxs(me,{children:[a.jsx(ge,{children:"Subscription Status"}),a.jsx(Qe,{children:"Active vs Trial vs Expired"})]}),a.jsx(Y,{children:h.length>0?a.jsx(na,{width:"100%",height:300,children:a.jsxs(tNe,{data:h,children:[a.jsx(aa,{strokeDasharray:"3 3"}),a.jsx(ia,{dataKey:"name"}),a.jsx(Os,{}),a.jsx(Rs,{}),a.jsx(Bn,{}),a.jsx(SU,{dataKey:"value",fill:"#8884d8",name:"Count"})]})}):a.jsx("div",{className:"h-[300px] flex items-center justify-center text-muted-foreground",children:"No status data available"})})]})]})}),a.jsx(er,{value:"payments",className:"space-y-6",children:a.jsxs(H,{children:[a.jsxs(me,{children:[a.jsx(ge,{children:"Payment Success Rate Over Time"}),a.jsx(Qe,{children:"Daily payment success rate (last 30 days)"})]}),a.jsx(Y,{children:m.length>0?a.jsx(na,{width:"100%",height:400,children:a.jsxs(ch,{data:m,children:[a.jsx(aa,{strokeDasharray:"3 3"}),a.jsx(ia,{dataKey:"date"}),a.jsx(Os,{yAxisId:"left"}),a.jsx(Os,{yAxisId:"right",orientation:"right"}),a.jsx(Rs,{}),a.jsx(Bn,{}),a.jsx(hs,{yAxisId:"left",type:"monotone",dataKey:"successful",stroke:"#00C49F",strokeWidth:2,name:"Successful"}),a.jsx(hs,{yAxisId:"left",type:"monotone",dataKey:"failed",stroke:"#FF8042",strokeWidth:2,name:"Failed"}),a.jsx(hs,{yAxisId:"right",type:"monotone",dataKey:"successRate",stroke:"#8884d8",strokeWidth:2,name:"Success Rate (%)"})]})}):a.jsx("div",{className:"h-[400px] flex items-center justify-center text-muted-foreground",children:"No payment data available"})})]})}),a.jsxs(er,{value:"overview",className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[a.jsxs(H,{children:[a.jsxs(me,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(ge,{className:"text-sm font-medium",children:"Total Revenue"}),a.jsx(Rd,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(Y,{children:[a.jsxs("div",{className:"text-2xl font-bold",children:["$",o.reduce((x,b)=>x+b.revenue,0).toFixed(2)]}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"For selected time period"})]})]}),a.jsxs(H,{children:[a.jsxs(me,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(ge,{className:"text-sm font-medium",children:"Total Subscriptions"}),a.jsx(gs,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(Y,{children:[a.jsx("div",{className:"text-2xl font-bold",children:r.length}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"All time subscriptions"})]})]}),a.jsxs(H,{children:[a.jsxs(me,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(ge,{className:"text-sm font-medium",children:"Total Payments"}),a.jsx(Sr,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(Y,{children:[a.jsx("div",{className:"text-2xl font-bold",children:n.length}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"All time payments"})]})]}),a.jsxs(H,{children:[a.jsxs(me,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(ge,{className:"text-sm font-medium",children:"Avg. Transaction"}),a.jsx(Ya,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(Y,{children:[a.jsxs("div",{className:"text-2xl font-bold",children:["$",n.length>0?(n.reduce((x,b)=>x+(b.amount||0),0)/n.length).toFixed(2):"0.00"]}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Average payment amount"})]})]})]}),a.jsxs(H,{children:[a.jsxs(me,{children:[a.jsx(ge,{children:"Revenue & Subscription Growth"}),a.jsx(Qe,{children:"Comprehensive view of business metrics"})]}),a.jsx(Y,{children:o.length>0?a.jsx(na,{width:"100%",height:400,children:a.jsxs(ow,{data:o,children:[a.jsx("defs",{children:a.jsxs("linearGradient",{id:"colorRevenue2",x1:"0",y1:"0",x2:"0",y2:"1",children:[a.jsx("stop",{offset:"5%",stopColor:"#8884d8",stopOpacity:.8}),a.jsx("stop",{offset:"95%",stopColor:"#8884d8",stopOpacity:0})]})}),a.jsx(aa,{strokeDasharray:"3 3"}),a.jsx(ia,{dataKey:"date",tickFormatter:x=>new Date(x).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),a.jsx(Os,{}),a.jsx(Rs,{formatter:x=>`$${x.toFixed(2)}`,labelFormatter:x=>new Date(x).toLocaleDateString()}),a.jsx(Bn,{}),a.jsx(Vi,{type:"monotone",dataKey:"revenue",stroke:"#8884d8",fillOpacity:1,fill:"url(#colorRevenue2)",name:"Revenue ($)"})]})}):a.jsx("div",{className:"h-[400px] flex items-center justify-center text-muted-foreground",children:"No data available for the selected time period"})})]})]})]})]})},kNe=()=>{var v,y;const{auditLogs:t,auditStats:e,fetchAuditLogs:r,fetchAuditStats:n}=Ia(),[s,i]=p.useState(""),[o,l]=p.useState("all"),[c,u]=p.useState("all");p.useEffect(()=>{r({limit:100}),n()},[]);const d=()=>{const x={limit:100};o!=="all"&&(x.action=o),c!=="all"&&(x.targetType=c),r(x)},h=t.filter(x=>{var w,j,E;if(!s)return!0;const b=s.toLowerCase();return((w=x.description)==null?void 0:w.toLowerCase().includes(b))||((j=x.adminEmail)==null?void 0:j.toLowerCase().includes(b))||((E=x.action)==null?void 0:E.toLowerCase().includes(b))}),f=x=>x.includes("create")?a.jsx(Se,{className:"bg-green-500",children:x}):x.includes("update")?a.jsx(Se,{className:"bg-blue-500",children:x}):x.includes("delete")?a.jsx(Se,{variant:"destructive",children:x}):a.jsx(Se,{variant:"secondary",children:x}),m=x=>{switch(x){case"user":return a.jsx(Km,{className:"h-4 w-4"});case"coupon":return a.jsx(Js,{className:"h-4 w-4"});case"subscription":return a.jsx(lb,{className:"h-4 w-4"});default:return a.jsx(bl,{className:"h-4 w-4"})}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Audit Logs"}),a.jsx("p",{className:"text-gray-500 mt-1",children:"Track all administrative actions and system events"})]}),e&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[a.jsxs(H,{children:[a.jsxs(me,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(ge,{className:"text-sm font-medium",children:"Total Logs"}),a.jsx(bl,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsx(Y,{children:a.jsx("div",{className:"text-2xl font-bold",children:e.totalLogs})})]}),a.jsxs(H,{children:[a.jsxs(me,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(ge,{className:"text-sm font-medium",children:"Today's Activity"}),a.jsx(Yn,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsx(Y,{children:a.jsx("div",{className:"text-2xl font-bold",children:((y=(v=e.dailyActivity)==null?void 0:v[e.dailyActivity.length-1])==null?void 0:y.count)||0})})]}),a.jsxs(H,{children:[a.jsxs(me,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(ge,{className:"text-sm font-medium",children:"Action Types"}),a.jsx(lb,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsx(Y,{children:a.jsx("div",{className:"text-2xl font-bold",children:Object.keys(e.actionBreakdown||{}).length})})]}),a.jsxs(H,{children:[a.jsxs(me,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(ge,{className:"text-sm font-medium",children:"Target Types"}),a.jsx(Js,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsx(Y,{children:a.jsx("div",{className:"text-2xl font-bold",children:Object.keys(e.targetTypeBreakdown||{}).length})})]})]}),(e==null?void 0:e.dailyActivity)&&a.jsxs(H,{children:[a.jsxs(me,{children:[a.jsx(ge,{children:"Activity Timeline (Last 7 Days)"}),a.jsx(Qe,{children:"Number of audit events per day"})]}),a.jsx(Y,{children:a.jsx(na,{width:"100%",height:200,children:a.jsxs(ch,{data:e.dailyActivity,children:[a.jsx(aa,{strokeDasharray:"3 3"}),a.jsx(ia,{dataKey:"date",tickFormatter:x=>new Date(x).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),a.jsx(Os,{}),a.jsx(Rs,{labelFormatter:x=>new Date(x).toLocaleDateString()}),a.jsx(Bn,{}),a.jsx(hs,{type:"monotone",dataKey:"count",stroke:"#8884d8",strokeWidth:2,name:"Events"})]})})})]}),a.jsxs(H,{children:[a.jsxs(me,{children:[a.jsx(ge,{children:"Search & Filter"}),a.jsx(Qe,{children:"Find specific audit logs"})]}),a.jsx(Y,{children:a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(Fs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),a.jsx(Ze,{placeholder:"Search logs...",value:s,onChange:x=>i(x.target.value),className:"pl-10"})]}),a.jsxs(Ht,{value:o,onValueChange:l,children:[a.jsx(Bt,{className:"w-48",children:a.jsx(Kt,{placeholder:"Filter by action"})}),a.jsxs(Vt,{children:[a.jsx(fe,{value:"all",children:"All Actions"}),a.jsx(fe,{value:"user.create",children:"User Create"}),a.jsx(fe,{value:"user.update",children:"User Update"}),a.jsx(fe,{value:"user.delete",children:"User Delete"}),a.jsx(fe,{value:"coupon.create",children:"Coupon Create"}),a.jsx(fe,{value:"coupon.deactivate",children:"Coupon Deactivate"})]})]}),a.jsxs(Ht,{value:c,onValueChange:u,children:[a.jsx(Bt,{className:"w-48",children:a.jsx(Kt,{placeholder:"Filter by target"})}),a.jsxs(Vt,{children:[a.jsx(fe,{value:"all",children:"All Types"}),a.jsx(fe,{value:"user",children:"User"}),a.jsx(fe,{value:"coupon",children:"Coupon"}),a.jsx(fe,{value:"subscription",children:"Subscription"}),a.jsx(fe,{value:"payment",children:"Payment"})]})]}),a.jsxs(K,{onClick:d,children:[a.jsx(zm,{className:"h-4 w-4 mr-2"}),"Apply"]})]})})]}),a.jsxs(H,{children:[a.jsxs(me,{children:[a.jsxs(ge,{children:["Audit Trail (",h.length,")"]}),a.jsx(Qe,{children:"Chronological record of all administrative actions"})]}),a.jsx(Y,{children:a.jsx("div",{className:"rounded-md border",children:a.jsxs(Uu,{children:[a.jsx(Bu,{children:a.jsxs(Cn,{children:[a.jsx(ct,{children:"Timestamp"}),a.jsx(ct,{children:"Action"}),a.jsx(ct,{children:"Admin"}),a.jsx(ct,{children:"Target"}),a.jsx(ct,{children:"Description"}),a.jsx(ct,{children:"IP Address"})]})}),a.jsx(Vu,{children:h.length>0?h.map(x=>a.jsxs(Cn,{children:[a.jsx(tt,{className:"text-sm text-gray-500",children:a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Yn,{className:"h-3 w-3"}),fr(new Date(x.timestamp),"MMM dd, yyyy HH:mm:ss")]})}),a.jsx(tt,{children:f(x.action)}),a.jsx(tt,{children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx($s,{className:"h-4 w-4 text-primary"}),a.jsx("span",{className:"text-sm",children:x.adminEmail})]})}),a.jsx(tt,{children:a.jsxs("div",{className:"flex items-center gap-2",children:[m(x.targetType),a.jsx("span",{className:"text-sm capitalize",children:x.targetType})]})}),a.jsx(tt,{className:"max-w-md",children:a.jsx("span",{className:"text-sm",children:x.description})}),a.jsx(tt,{className:"text-sm text-gray-500",children:x.ipAddress||"N/A"})]},x.id)):a.jsx(Cn,{children:a.jsx(tt,{colSpan:6,className:"text-center text-gray-500 py-8",children:"No audit logs found"})})})]})})})]}),(e==null?void 0:e.actionBreakdown)&&Object.keys(e.actionBreakdown).length>0&&a.jsxs(H,{children:[a.jsxs(me,{children:[a.jsx(ge,{children:"Action Breakdown"}),a.jsx(Qe,{children:"Distribution of actions performed"})]}),a.jsx(Y,{children:a.jsx("div",{className:"space-y-4",children:Object.entries(e.actionBreakdown).map(([x,b])=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"flex items-center gap-2",children:f(x)}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-48 bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-primary h-2 rounded-full",style:{width:`${b/e.totalLogs*100}%`}})}),a.jsx("span",{className:"text-sm font-medium w-12 text-right",children:b})]})]},x))})})]})]})},rb="http://localhost:5000",INe=()=>{var U,F;const{users:t,fetchUsers:e}=Ia(),{currentUser:r}=Er(),{toast:n}=Rn(),[s,i]=p.useState(""),[o,l]=p.useState(null),[c,u]=p.useState([]),[d,h]=p.useState(null),[f,m]=p.useState(null),[v,y]=p.useState(null),[x,b]=p.useState(!1),[w,j]=p.useState(!1),[E,I]=p.useState("saved");p.useEffect(()=>{e()},[]);const O=async()=>{if(!s){n({title:"Error",description:"Please enter a user email to search",variant:"destructive"});return}const M=t.find($=>$.email.toLowerCase().includes(s.toLowerCase()));if(!M){n({title:"User Not Found",description:"No user found with that email",variant:"destructive"});return}l(M),h(null),m(null),y(null),await T(M.uid)},T=async M=>{b(!0);try{if(!r)throw new Error("Not authenticated");const $=await r.getIdToken(),ne=await fetch(`${rb}/api/admin/users/${M}/business-audits`,{headers:{Authorization:`Bearer ${$}`}});if(!ne.ok){const z=await ne.json();throw new Error(z.error||"Failed to fetch user locations")}const te=await ne.json();u(te.data.locations||[]),te.data.locations.length===0&&n({title:"No Locations",description:"This user hasn't connected any business profiles yet",variant:"default"})}catch($){console.error("Error fetching user locations:",$),n({title:"Error",description:$.message||"Failed to fetch user's business profiles",variant:"destructive"}),u([])}finally{b(!1)}},A=async M=>{h(M),m(null),y(null),await S(M.name)},S=async M=>{if(!(!o||!r)){b(!0);try{const $=await r.getIdToken(),ne=await fetch(`${rb}/api/admin/audit-results/user/${o.uid}`,{headers:{Authorization:`Bearer ${$}`}});if(ne.ok){const de=((await ne.json()).data.results||[]).find(Z=>Z.locationId===M||Z.locationName===(d==null?void 0:d.title));de?(y(de),m(de),I("saved"),n({title:"Saved Audit Loaded",description:`Showing saved audit from ${P(de.timestamp)}`})):n({title:"No Saved Audit",description:"No saved audit found for this location. Click 'Fetch Live Data' to get current data.",variant:"default"})}}catch($){console.error("Error fetching saved audit:",$)}finally{b(!1)}}},_=async()=>{if(!(!o||!r||!d)){j(!0);try{const M=await r.getIdToken(),$=await fetch(`${rb}/api/admin/users/${o.uid}/locations/${encodeURIComponent(d.name)}/audit`,{headers:{Authorization:`Bearer ${M}`}});if(!$.ok)throw new Error("Failed to fetch live audit data");const ne=await $.json();m(ne.data),I("live"),n({title:"Live Data Fetched",description:"Showing current data from Google Business Profile API"})}catch(M){console.error("Error fetching live audit:",M),n({title:"Error",description:"Failed to fetch live audit data for this location",variant:"destructive"})}finally{j(!1)}}},P=M=>new Date(M).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),R=M=>M?new Intl.NumberFormat().format(M):"0",C=M=>M.includes("IMPRESSIONS")?a.jsx(_g,{className:"h-4 w-4"}):M.includes("CALL")?a.jsx(mh,{className:"h-4 w-4"}):M.includes("WEBSITE")?a.jsx(yw,{className:"h-4 w-4"}):M.includes("DIRECTION")?a.jsx(Wn,{className:"h-4 w-4"}):a.jsx(lb,{className:"h-4 w-4"}),B=M=>{const $={high:"bg-red-100 text-red-800",medium:"bg-yellow-100 text-yellow-800",low:"bg-blue-100 text-blue-800"};return $[M]||$.medium},G=M=>M>=80?"bg-green-100 text-green-800":M>=60?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800";return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"User Business Audits"}),a.jsx("p",{className:"text-gray-600 mt-2",children:"View any user's business profile audit to help with customer support"})]}),a.jsxs(H,{children:[a.jsxs(me,{children:[a.jsxs(ge,{className:"flex items-center gap-2",children:[a.jsx(Fs,{className:"h-5 w-5"}),"Select User (",t.length," total)"]}),a.jsx(Qe,{children:"Search or select a user to view their business profile audits"})]}),a.jsxs(Y,{children:[a.jsxs("div",{className:"flex gap-2 mb-4",children:[a.jsx(Ze,{placeholder:"Search by email or name...",value:s,onChange:M=>i(M.target.value),onKeyPress:M=>M.key==="Enter"&&O(),className:"flex-1"}),a.jsxs(K,{onClick:O,disabled:x,children:[a.jsx(Fs,{className:"h-4 w-4 mr-2"}),"Search"]})]}),o&&a.jsx("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-sm text-blue-900",children:"Selected User:"}),a.jsx("p",{className:"text-blue-800",children:o.email}),o.displayName&&a.jsx("p",{className:"text-sm text-blue-600",children:o.displayName})]}),a.jsx(K,{size:"sm",variant:"outline",onClick:()=>{l(null),u([]),h(null),m(null),y(null)},children:"Clear"})]})}),!o&&t.length>0&&a.jsxs("div",{className:"mt-4",children:[a.jsx("h3",{className:"text-sm font-semibold mb-2 text-gray-700",children:"Recent Users:"}),a.jsx("div",{className:"max-h-64 overflow-y-auto space-y-2",children:t.filter(M=>{var $;return!s||M.email.toLowerCase().includes(s.toLowerCase())||(($=M.displayName)==null?void 0:$.toLowerCase().includes(s.toLowerCase()))}).slice(0,10).map(M=>a.jsx("div",{onClick:()=>{l(M),i(M.email),T(M.uid)},className:"p-3 border rounded-lg hover:bg-gray-50 cursor-pointer transition-colors",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-sm",children:M.email}),M.displayName&&a.jsx("p",{className:"text-xs text-gray-600",children:M.displayName})]}),a.jsx(K,{size:"sm",variant:"ghost",children:"Select →"})]})},M.uid))})]})]})]}),c.length>0&&a.jsxs(H,{children:[a.jsxs(me,{children:[a.jsxs(ge,{className:"flex items-center gap-2",children:[a.jsx(Ji,{className:"h-5 w-5"}),"Business Profiles (",c.length,")"]}),a.jsx(Qe,{children:"Click on a location to view its audit data"})]}),a.jsx(Y,{children:a.jsx("div",{className:"grid gap-3",children:c.map(M=>{var $,ne;return a.jsx("div",{onClick:()=>A(M),className:`p-4 border rounded-lg hover:bg-gray-50 cursor-pointer transition-colors ${(d==null?void 0:d.name)===M.name?"bg-blue-50 border-blue-300":""}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold",children:M.title}),a.jsx("p",{className:"text-sm text-gray-600",children:(ne=($=M.storefrontAddress)==null?void 0:$.addressLines)==null?void 0:ne.join(", ")})]}),a.jsx(K,{size:"sm",variant:"outline",children:(d==null?void 0:d.name)===M.name?"Selected":"Select"})]})},M.name)})})})]}),d&&a.jsx(H,{children:a.jsxs(me,{children:[a.jsxs(ge,{className:"flex items-center justify-between",children:[a.jsxs("span",{children:["Audit Data: ",d.title]}),a.jsxs("div",{className:"flex gap-2",children:[v&&a.jsxs(Se,{variant:"outline",className:"flex items-center gap-1",children:[a.jsx(zV,{className:"h-3 w-3"}),"Saved: ",P(v.timestamp)]}),a.jsxs(K,{size:"sm",onClick:_,disabled:w,variant:E==="live"?"default":"outline",children:[a.jsx(ir,{className:`h-4 w-4 mr-2 ${w?"animate-spin":""}`}),"Fetch Live Data"]})]})]}),a.jsx(Qe,{children:E==="saved"&&v?`Showing saved audit from ${P(v.timestamp)}`:E==="live"?"Showing live data from Google Business Profile API":"Select a data source to view audit"})]})}),f&&a.jsxs("div",{className:"space-y-6",children:[((U=f.performance)==null?void 0:U.timeSeriesData)&&a.jsxs(H,{children:[a.jsx(me,{children:a.jsxs(ge,{className:"flex items-center gap-2",children:[a.jsx(Ya,{className:"h-5 w-5"}),"Performance Metrics (Last 30 Days)"]})}),a.jsx(Y,{children:a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:f.performance.timeSeriesData.map(M=>{var te,z,de,Z;const $=((z=(te=M.timeSeries)==null?void 0:te.datedValues)==null?void 0:z.reduce((re,_e)=>re+(_e.value||0),0))||0,ne=M.dailyMetric.replace(/_/g," ").replace("BUSINESS ","");return a.jsxs("div",{className:"p-4 border rounded-lg",children:[a.jsx("div",{className:"flex items-center justify-between mb-2",children:a.jsxs("span",{className:"flex items-center gap-2 text-sm font-medium text-gray-600",children:[C(M.dailyMetric),ne]})}),a.jsx("p",{className:"text-2xl font-bold",children:R($)}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[((Z=(de=M.timeSeries)==null?void 0:de.datedValues)==null?void 0:Z.length)||0," days of data"]})]},M.dailyMetric)})})})]}),((F=f.recommendations)==null?void 0:F.recommendations)&&f.recommendations.recommendations.length>0&&a.jsxs(H,{children:[a.jsx(me,{children:a.jsxs(ge,{className:"flex items-center gap-2",children:[a.jsx(qr,{className:"h-5 w-5"}),"Recommendations (",f.recommendations.recommendations.length,")"]})}),a.jsx(Y,{children:a.jsx("div",{className:"space-y-4",children:f.recommendations.recommendations.map((M,$)=>a.jsx("div",{className:"p-4 border rounded-lg",children:a.jsx("div",{className:"flex items-start justify-between mb-2",children:a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("h4",{className:"font-semibold",children:M.title}),a.jsx(Se,{className:B(M.priority),children:M.priority})]}),a.jsx("p",{className:"text-sm text-gray-600 mb-3",children:M.description}),M.impact&&a.jsxs("p",{className:"text-sm text-blue-600 font-medium mb-2",children:["💡 ",M.impact]}),M.actions&&M.actions.length>0&&a.jsxs("div",{className:"mt-3",children:[a.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Action Steps:"}),a.jsx("ul",{className:"space-y-1",children:M.actions.map((ne,te)=>a.jsxs("li",{className:"text-sm text-gray-600 flex items-start gap-2",children:[a.jsx(Yt,{className:"h-4 w-4 text-green-600 mt-0.5 flex-shrink-0"}),ne]},te))})]})]})})},$))})})]}),f.score&&a.jsxs(H,{children:[a.jsx(me,{children:a.jsx(ge,{children:"Audit Score"})}),a.jsx(Y,{children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[f.score.overall&&a.jsxs("div",{className:"p-4 border rounded-lg",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Overall Score"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("p",{className:"text-3xl font-bold",children:[f.score.overall,"%"]}),a.jsx(Se,{className:G(f.score.overall),children:f.score.overall>=80?"Good":f.score.overall>=60?"Fair":"Needs Work"})]})]}),f.score.performance&&a.jsxs("div",{className:"p-4 border rounded-lg",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Performance"}),a.jsxs("p",{className:"text-3xl font-bold",children:[f.score.performance,"%"]})]}),f.score.engagement&&a.jsxs("div",{className:"p-4 border rounded-lg",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Engagement"}),a.jsxs("p",{className:"text-3xl font-bold",children:[f.score.engagement,"%"]})]})]})})]})]}),!o&&!x&&a.jsx(H,{children:a.jsxs(Y,{className:"py-12 text-center",children:[a.jsx(Fs,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No User Selected"}),a.jsx("p",{className:"text-gray-600",children:"Search for a user by email to view their business profile audits"})]})}),(x||w)&&a.jsx(H,{children:a.jsxs(Y,{className:"py-12 text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:x?"Loading...":"Fetching live audit data..."})]})})]})},RNe=new F7,ONe=()=>a.jsx(U7,{client:RNe,children:a.jsxs(xb,{children:[a.jsx(J9,{}),a.jsx(C8,{}),a.jsxs(kB,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:[a.jsx(kJ,{children:a.jsx(pNe,{children:a.jsx(kne,{children:a.jsx(Ite,{children:a.jsxs(Zre,{children:[a.jsxs(IB,{children:[a.jsx(ft,{path:"/",element:a.jsx(V7,{})}),a.jsx(ft,{path:"/terms",element:a.jsx(z7,{})}),a.jsx(ft,{path:"/privacy",element:a.jsx(G7,{})}),a.jsx(ft,{path:"/refund",element:a.jsx(W7,{})}),a.jsx(ft,{path:"/contact",element:a.jsx(K7,{})}),a.jsx(ft,{path:"/login",element:a.jsx(wk,{children:a.jsx(IJ,{})})}),a.jsx(ft,{path:"/signup",element:a.jsx(wk,{children:a.jsx(RJ,{})})}),a.jsx(ft,{path:"/auth/google/callback",element:a.jsx(yNe,{})}),a.jsx(ft,{path:"/public-reviews/:locationId",element:a.jsx(bk,{})}),a.jsx(ft,{path:"/review/:locationId",element:a.jsx(bk,{})}),a.jsxs(ft,{path:"/dashboard",element:a.jsx(ym,{children:a.jsx(Dne,{})}),children:[a.jsx(ft,{index:!0,element:a.jsx(Gne,{})}),a.jsx(ft,{path:"profiles/:profileId",element:a.jsx(Vie,{})}),a.jsx(ft,{path:"posts",element:a.jsx(zie,{})}),a.jsx(ft,{path:"reviews",element:a.jsx(Gie,{})}),a.jsx(ft,{path:"ask-for-reviews",element:a.jsx(Ioe,{})}),a.jsx(ft,{path:"request-reviews",element:a.jsx(Roe,{})}),a.jsx(ft,{path:"settings",element:a.jsx(Doe,{})}),a.jsx(ft,{path:"audit",element:a.jsx(hNe,{})}),a.jsx(ft,{path:"billing",element:a.jsx(mNe,{})})]}),a.jsx(ft,{path:"/dashboard/upgrade",element:a.jsx(ym,{children:a.jsx(fNe,{})})}),a.jsx(ft,{path:"/payment-success",element:a.jsx(ym,{children:a.jsx(vNe,{})})}),a.jsxs(ft,{path:"/admin",element:a.jsx(ym,{children:a.jsx(gNe,{children:a.jsx(jNe,{})})}),children:[a.jsx(ft,{index:!0,element:a.jsx(yg,{to:"/admin/dashboard",replace:!0})}),a.jsx(ft,{path:"dashboard",element:a.jsx(NNe,{})}),a.jsx(ft,{path:"users",element:a.jsx(ANe,{})}),a.jsx(ft,{path:"subscriptions",element:a.jsx(ENe,{})}),a.jsx(ft,{path:"payments",element:a.jsx(PNe,{})}),a.jsx(ft,{path:"coupons",element:a.jsx(TNe,{})}),a.jsx(ft,{path:"analytics",element:a.jsx(CNe,{})}),a.jsx(ft,{path:"audits",element:a.jsx(kNe,{})}),a.jsx(ft,{path:"user-audits",element:a.jsx(INe,{})})]}),a.jsx(ft,{path:"*",element:a.jsx(B7,{})})]}),a.jsx(bNe,{})]})})})})}),a.jsx(wNe,{})]})]})});Dk(document.getElementById("root")).render(a.jsx(ONe,{}));
